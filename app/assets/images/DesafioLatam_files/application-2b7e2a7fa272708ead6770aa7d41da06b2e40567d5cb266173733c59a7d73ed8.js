!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=oe.type(e);return"function"!==n&&!oe.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e,t,n){if(oe.isFunction(t))return oe.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return oe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(me.test(t))return oe.filter(t,e,n);t=oe.filter(t,e)}return oe.grep(e,function(e){return J.call(t,e)>-1!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t={};return oe.each(e.match(we)||[],function(e,n){t[n]=!0}),t}function a(){X.removeEventListener("DOMContentLoaded",a),e.removeEventListener("load",a),oe.ready()}function s(){this.expando=oe.expando+s.uid++}function l(e,t,n){var r;if(n===undefined&&1===e.nodeType)if(r="data-"+t.replace(De,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Ee.test(n)?oe.parseJSON(n):n)}catch(i){}Te.set(e,t,n)}else n=undefined;return n}function u(e,t,n,r){var i,o=1,a=20,s=r?function(){return r.cur()}:function(){return oe.css(e,t,"")},l=s(),u=n&&n[3]||(oe.cssNumber[t]?"":"px"),c=(oe.cssNumber[t]||"px"!==u&&+l)&&_e.exec(oe.css(e,t));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do{c/=o=o||".5",oe.style(e,t,c+u)}while(o!==(o=s()/l)&&1!==o&&--a)}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}function c(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===undefined||t&&oe.nodeName(e,t)?oe.merge([e],n):n}function d(e,t){for(var n=0,r=e.length;n<r;n++)ke.set(e[n],"globalEval",!t||ke.get(t[n],"globalEval"))}function f(e,t,n,r,i){for(var o,a,s,l,u,f,h=t.createDocumentFragment(),p=[],m=0,g=e.length;m<g;m++)if((o=e[m])||0===o)if("object"===oe.type(o))oe.merge(p,o.nodeType?[o]:o);else if(Ie.test(o)){for(a=a||h.appendChild(t.createElement("div")),s=(Me.exec(o)||["",""])[1].toLowerCase(),l=Pe[s]||Pe._default,a.innerHTML=l[1]+oe.htmlPrefilter(o)+l[2],f=l[0];f--;)a=a.lastChild;oe.merge(p,a.childNodes),(a=h.firstChild).textContent=""}else p.push(t.createTextNode(o));for(h.textContent="",m=0;o=p[m++];)if(r&&oe.inArray(o,r)>-1)i&&i.push(o);else if(u=oe.contains(o.ownerDocument,o),a=c(h.appendChild(o),"script"),u&&d(a),n)for(f=0;o=a[f++];)Oe.test(o.type||"")&&n.push(o);return h}function h(){return!0}function p(){return!1}function m(){try{return X.activeElement}catch(e){}}function g(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=undefined);for(s in t)g(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=undefined):null==i&&("string"==typeof n?(i=r,r=undefined):(i=r,r=n,n=undefined)),!1===i)i=p;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return oe().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=oe.guid++)),e.each(function(){oe.event.add(this,t,i,r,n)})}function v(e,t){return oe.nodeName(e,"table")&&oe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function b(e){var t=qe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){var n,r,i,o,a,s,l,u;if(1===t.nodeType){if(ke.hasData(e)&&(o=ke.access(e),a=ke.set(t,o),u=o.events)){delete a.handle,a.events={};for(i in u)for(n=0,r=u[i].length;n<r;n++)oe.event.add(t,i,u[i][n])}Te.hasData(e)&&(s=Te.access(e),l=oe.extend({},s),Te.set(t,l))}}function C(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Le.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function S(e,t,n,r){t=Z.apply([],t);var i,o,a,s,l,u,d=0,h=e.length,p=h-1,m=t[0],g=oe.isFunction(m);if(g||h>1&&"string"==typeof m&&!re.checkClone&&je.test(m))return e.each(function(i){var o=e.eq(i);g&&(t[0]=m.call(this,i,o.html())),S(o,t,n,r)});if(h&&(i=f(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=oe.map(c(i,"script"),y)).length;d<h;d++)l=i,d!==p&&(l=oe.clone(l,!0,!0),s&&oe.merge(a,c(l,"script"))),n.call(e[d],l,d);if(s)for(u=a[a.length-1].ownerDocument,oe.map(a,b),d=0;d<s;d++)l=a[d],Oe.test(l.type||"")&&!ke.access(l,"globalEval")&&oe.contains(u,l)&&(l.src?oe._evalUrl&&oe._evalUrl(l.src):oe.globalEval(l.textContent.replace(Ve,"")))}return e}function x(e,t,n){for(var r,i=t?oe.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||oe.cleanData(c(r)),r.parentNode&&(n&&oe.contains(r.ownerDocument,r)&&d(c(r,"script")),r.parentNode.removeChild(r));return e}function k(e,t){var n=oe(t.createElement(e)).appendTo(t.body),r=oe.css(n[0],"display");return n.detach(),r}function T(e){var t=X,n=$e[e];return n||("none"!==(n=k(e,t))&&n||((t=(Ue=(Ue||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=k(e,t),Ue.detach()),$e[e]=n),n}function E(e,t,n){var r,i,o,a,s=e.style;return n=n||Xe(e),""!==(a=n?n.getPropertyValue(t)||n[t]:undefined)&&a!==undefined||oe.contains(e.ownerDocument,e)||(a=oe.style(e,t)),n&&!re.pixelMarginRight()&&Ge.test(a)&&Ye.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o),a!==undefined?a+"":a}function D(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function N(e){if(e in nt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=tt.length;n--;)if((e=tt[n]+t)in nt)return e}function _(e,t,n){var r=_e.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function R(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=oe.css(e,n+Re[o],!0,i)),r?("content"===n&&(a-=oe.css(e,"padding"+Re[o],!0,i)),"margin"!==n&&(a-=oe.css(e,"border"+Re[o]+"Width",!0,i))):(a+=oe.css(e,"padding"+Re[o],!0,i),"padding"!==n&&(a+=oe.css(e,"border"+Re[o]+"Width",!0,i)));return a}function A(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Xe(e),a="border-box"===oe.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(((i=E(e,t,o))<0||null==i)&&(i=e.style[t]),Ge.test(i))return i;r=a&&(re.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+R(e,t,n||(a?"border":"content"),r,o)+"px"}function L(e,t){for(var n,r,i,o=[],a=0,s=e.length;a<s;a++)(r=e[a]).style&&(o[a]=ke.get(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Ae(r)&&(o[a]=ke.access(r,"olddisplay",T(r.nodeName)))):(i=Ae(r),"none"===n&&i||ke.set(r,"olddisplay",i?n:oe.css(r,"display"))));for(a=0;a<s;a++)(r=e[a]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function M(e,t,n,r,i){return new M.prototype.init(e,t,n,r,i)}function O(){return e.setTimeout(function(){rt=undefined}),rt=oe.now()}function P(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=Re[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function I(e,t,n){for(var r,i=(F.tweeners[t]||[]).concat(F.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function H(e,t,n){var r,i,o,a,s,l,u,c=this,d={},f=e.style,h=e.nodeType&&Ae(e),p=ke.get(e,"fxshow");n.queue||(null==(s=oe._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,oe.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===("none"===(u=oe.css(e,"display"))?ke.get(e,"olddisplay")||T(e.nodeName):u)&&"none"===oe.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",c.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],ot.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!p||p[r]===undefined)continue;h=!0}d[r]=p&&p[r]||oe.style(e,r)}else u=undefined;if(oe.isEmptyObject(d))"inline"===("none"===u?T(e.nodeName):u)&&(f.display=u);else{p?"hidden"in p&&(h=p.hidden):p=ke.access(e,"fxshow",{}),o&&(p.hidden=!h),h?oe(e).show():c.done(function(){oe(e).hide()}),c.done(function(){var t;ke.remove(e,"fxshow");for(t in d)oe.style(e,t,d[t])});for(r in d)a=I(h?p[r]:0,r,c),r in p||(p[r]=a.start,h&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function B(e,t){var n,r,i,o,a;for(n in e)if(r=oe.camelCase(n),i=t[r],o=e[n],oe.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=oe.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function F(e,t,n){var r,i,o=0,a=F.prefilters.length,s=oe.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=rt||O(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),o=0,a=u.tweens.length;o<a;o++)u.tweens[o].run(r);return s.notifyWith(e,[u,r,n]),r<1&&a?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:oe.extend({},t),opts:oe.extend(!0,{specialEasing:{},easing:oe.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||O(),duration:n.duration,tweens:[],createTween:function(t,n){var r=oe.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(B(c,u.opts.specialEasing);o<a;o++)if(r=F.prefilters[o].call(u,e,c,u.opts))return oe.isFunction(r.stop)&&(oe._queueHooks(u.elem,u.opts.queue).stop=oe.proxy(r.stop,r)),r;return oe.map(c,I,u),oe.isFunction(u.opts.start)&&u.opts.start.call(e,u),oe.fx.timer(oe.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function W(e){return e.getAttribute&&e.getAttribute("class")||""}function z(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(we)||[];if(oe.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function j(e,t,n,r){function i(s){var l;return o[s]=!0,oe.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),i(u),!1)}),l}var o={},a=e===Tt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function q(e,t){var n,r,i=oe.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&oe.extend(!0,e,r),e}function V(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}function U(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function $(e,t,n,r){var i;if(oe.isArray(t))oe.each(t,function(t,i){n||_t.test(e)?r(e,i):$(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==oe.type(t))r(e,t);else for(i in t)$(e+"["+i+"]",t[i],n,r)}function Y(e){return oe.isWindow(e)?e:9===e.nodeType&&e.defaultView}var G=[],X=e.document,K=G.slice,Z=G.concat,Q=G.push,J=G.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,re={},ie="2.2.4",oe=function(e,t){return new oe.fn.init(e,t)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,le=/-([\da-z])/gi,ue=function(e,t){return t.toUpperCase()};oe.fn=oe.prototype={jquery:ie,constructor:oe,selector:"",length:0,toArray:function(){return K.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:K.call(this)},pushStack:function(e){var t=oe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return oe.each(this,e)},map:function(e){return this.pushStack(oe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Q,sort:G.sort,splice:G.splice},oe.extend=oe.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||oe.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(u&&r&&(oe.isPlainObject(r)||(i=oe.isArray(r)))?(i?(i=!1,o=n&&oe.isArray(n)?n:[]):o=n&&oe.isPlainObject(n)?n:{},a[t]=oe.extend(u,o,r)):r!==undefined&&(a[t]=r));return a},oe.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===oe.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!oe.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==oe.type(e)||e.nodeType||oe.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return t===undefined||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=oe.trim(e))&&(1===e.indexOf("use strict")?((t=X.createElement("script")).text=e,X.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(se,"ms-").replace(le,ue)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var r,i=0;if(n(e))for(r=e.length;i<r&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ae,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?oe.merge(r,"string"==typeof e?[e]:e):Q.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:J.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,r){var i,o,a=0,s=[];if(n(e))for(i=e.length;a<i;a++)null!=(o=t(e[a],a,r))&&s.push(o);else for(a in e)null!=(o=t(e[a],a,r))&&s.push(o);return Z.apply([],s)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),oe.isFunction(e)?(r=K.call(arguments,2),i=function(){return e.apply(t||this,r.concat(K.call(arguments)))},i.guid=e.guid=e.guid||oe.guid++,i):undefined},now:Date.now,support:re}),"function"==typeof Symbol&&(oe.fn[Symbol.iterator]=G[Symbol.iterator]),oe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,n,r){var i,o,a,s,l,u,d,h,p=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!r&&((t?t.ownerDocument||t:W)!==L&&A(t),t=t||L,O)){if(11!==m&&(u=ve.exec(e)))if(i=u[1]){if(9===m){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(p&&(a=p.getElementById(i))&&B(t,a)&&a.id===i)return n.push(a),n}else{if(u[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((i=u[3])&&C.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(i)),n}if(C.qsa&&!U[e+" "]&&(!P||!P.test(e))){if(1!==m)p=t,h=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(be,"\\$&"):t.setAttribute("id",s=F),o=(d=T(e)).length,l=fe.test(s)?"#"+s:"[id='"+s+"']";o--;)d[o]=l+" "+f(d[o]);h=d.join(","),p=ye.test(e)&&c(t.parentNode)||t}if(h)try{return Q.apply(n,p.querySelectorAll(h)),n}catch(g){}finally{s===F&&t.removeAttribute("id")}}}return D(e.replace(se,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>S.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[F]=!0,e}function i(e){var t=L.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)S.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function f(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function h(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=j++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,u,c=[z,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(u=t[F]||(t[F]={}),l=u[t.uniqueID]||(u[t.uniqueID]={}),(s=l[r])&&s[0]===z&&s[1]===o)return c[2]=s[2];if(l[r]=c,c[2]=e(t,n,a))return!0}}}function p(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function g(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function v(e,t,n,i,o,a){return i&&!i[F]&&(i=v(i)),o&&!o[F]&&(o=v(o,a)),r(function(r,a,s,l){var u,c,d,f=[],h=[],p=a.length,v=r||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:g(v,f,e,s,l),b=n?o||(r?e:p||i)?[]:a:y;if(n&&n(y,b,s,l),i)for(u=g(b,h),i(u,[],s,l),c=u.length;c--;)(d=u[c])&&(b[h[c]]=!(y[h[c]]=d));if(r){if(o||e){if(o){for(u=[],c=b.length;c--;)(d=b[c])&&u.push(y[c]=d);o(null,b=[],u,l)}for(c=b.length;c--;)(d=b[c])&&(u=o?ee(r,d):f[c])>-1&&(r[u]=!(a[u]=d))}}else b=g(b===a?b.splice(p,b.length):b),o?o(null,a,b,l):Q.apply(a,b)})}function y(e){for(var t,n,r,i=e.length,o=S.relative[e[0].type],a=o||S.relative[" "],s=o?1:0,l=h(function(e){return e===t},a,!0),u=h(function(e){return ee(t,e)>-1},a,!0),c=[function(e,n,r){var i=!o&&(r||n!==N)||((t=n).nodeType?l(e,n,r):u(e,n,r));return t=null,i}];s<i;s++)if(n=S.relative[e[s].type])c=[h(p(c),n)];else{if((n=S.filter[e[s].type].apply(null,e[s].matches))[F]){for(r=++s;r<i&&!S.relative[e[r].type];r++);return v(s>1&&p(c),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,s<r&&y(e.slice(s,r)),r<i&&y(e=e.slice(r)),r<i&&f(e))}c.push(n)}return p(c)}function b(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,l,u){var c,d,f,h=0,p="0",m=r&&[],v=[],y=N,b=r||o&&S.find.TAG("*",u),w=z+=null==y?1:Math.random()||.1,C=b.length;for(u&&(N=a===L||a||u);p!==C&&null!=(c=b[p]);p++){if(o&&c){for(d=0,a||c.ownerDocument===L||(A(c),s=!O);f=e[d++];)if(f(c,a||L,s)){l.push(c);break}u&&(z=w)}i&&((c=!f&&c)&&h--,r&&m.push(c))}if(h+=p,i&&p!==h){for(d=0;f=n[d++];)f(m,v,a,s);if(r){if(h>0)for(;p--;)m[p]||v[p]||(v[p]=K.call(l));v=g(v)}Q.apply(l,v),u&&!r&&v.length>0&&h+n.length>1&&t.uniqueSort(l)}return u&&(z=w,N=y),m};return i?r(a):a}var w,C,S,x,k,T,E,D,N,_,R,A,L,M,O,P,I,H,B,F="sizzle"+1*new Date,W=e.document,z=0,j=0,q=n(),V=n(),U=n(),$=function(e,t){return e===t&&(R=!0),0},Y=1<<31,G={}.hasOwnProperty,X=[],K=X.pop,Z=X.push,Q=X.push,J=X.slice,ee=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(oe),fe=new RegExp("^"+re+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Ce=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Se=function(){A()};try{Q.apply(X=J.call(W.childNodes),W.childNodes),X[W.childNodes.length].nodeType}catch(xe){Q={apply:X.length?function(e,t){Z.apply(e,J.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}C=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},A=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:W;return r!==L&&9===r.nodeType&&r.documentElement?(L=r,M=L.documentElement,O=!k(L),(n=L.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Se,!1):n.attachEvent&&n.attachEvent("onunload",Se)),C.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),C.getElementsByTagName=i(function(e){return e.appendChild(L.createComment("")),!e.getElementsByTagName("*").length}),C.getElementsByClassName=ge.test(L.getElementsByClassName),C.getById=i(function(e){return M.appendChild(e).id=F,!L.getElementsByName||!L.getElementsByName(F).length}),C.getById?(S.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&O){var n=t.getElementById(e);return n?[n]:[]}},S.filter.ID=function(e){var t=e.replace(we,Ce);return function(e){return e.getAttribute("id")===t}}):(delete S.find.ID,S.filter.ID=function(e){var t=e.replace(we,Ce);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),S.find.TAG=C.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):C.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},S.find.CLASS=C.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&O)return t.getElementsByClassName(e)},I=[],P=[],(C.qsa=ge.test(L.querySelectorAll))&&(i(function(e){M.appendChild(e).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||P.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+F+"-]").length||P.push("~="),e.querySelectorAll(":checked").length||P.push(":checked"),e.querySelectorAll("a#"+F+"+*").length||P.push(".#.+[+~]")}),i(function(e){var t=L.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&P.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),P.push(",.*:")})),(C.matchesSelector=ge.test(H=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&i(function(e){C.disconnectedMatch=H.call(e,"div"),H.call(e,"[s!='']:x"),I.push("!=",oe)}),P=P.length&&new RegExp(P.join("|")),I=I.length&&new RegExp(I.join("|")),t=ge.test(M.compareDocumentPosition),B=t||ge.test(M.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},$=t?function(e,t){if(e===t)return R=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!C.sortDetached&&t.compareDocumentPosition(e)===n?e===L||e.ownerDocument===W&&B(W,e)?-1:t===L||t.ownerDocument===W&&B(W,t)?1:_?ee(_,e)-ee(_,t):0:4&n?-1:1)}:function(e,t){if(e===t)return R=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],l=[t];if(!i||!o)return e===L?-1:t===L?1:i?-1:o?1:_?ee(_,e)-ee(_,t):0;if(i===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?a(s[r],l[r]):s[r]===W?-1:l[r]===W?1:0},L):L},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==L&&A(e),n=n.replace(ce,"='$1']"),C.matchesSelector&&O&&!U[n+" "]&&(!I||!I.test(n))&&(!P||!P.test(n)))try{var r=H.call(e,n);if(r||C.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(xe){}return t(n,L,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==L&&A(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==L&&A(e);var n=S.attrHandle[t.toLowerCase()],r=n&&G.call(S.attrHandle,t.toLowerCase())?n(e,t,!O):undefined;return r!==undefined?r:C.attributes||!O?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(R=!C.detectDuplicates,_=!C.sortStable&&e.slice(0),e.sort($),R){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return _=null,e},x=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=x(t);return n},(S=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Ce),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Ce),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Ce).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,f,h,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(g){if(o){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){for(b=(h=(u=(c=(d=(f=g)[F]||(f[F]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===z&&u[1])&&u[2],f=h&&g.childNodes[h];f=++h&&f&&f[m]||(b=h=0)||p.pop();)if(1===f.nodeType&&++b&&f===t){c[e]=[z,h,b];break}}else if(y&&(b=h=(u=(c=(d=(f=t)[F]||(f[F]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===z&&u[1]),!1===b)for(;(f=++h&&f&&f[m]||(b=h=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++b||(y&&((c=(d=f[F]||(f[F]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]=[z,b]),f!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,n){var i,o=S.pseudos[e]||S.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[F]?o(n):o.length>1?(i=[e,e,"",n],S.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)e[r=ee(e,i[a])]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=E(e.replace(se,"$1"));return i[F]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(we,Ce),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:r(function(e){return fe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Ce).toLowerCase(),function(t){var n;do{if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[n<0?n+t:n]}),even:u(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=S.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})S.pseudos[w]=l(w);return d.prototype=S.filters=S.pseudos,S.setFilters=new d,T=t.tokenize=function(e,n){var r,i,o,a,s,l,u,c=V[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=S.preFilter;s;){r&&!(i=le.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=ue.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(se," ")}),s=s.slice(r.length));for(a in S.filter)!(i=he[a].exec(s))||u[a]&&!(i=u[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):V(e,l).slice(0)},E=t.compile=function(e,t){var n,r=[],i=[],o=U[e+" "];if(!o){for(t||(t=T(e)),n=t.length;n--;)(o=y(t[n]))[F]?r.push(o):i.push(o);(o=U(e,b(i,r))).selector=e}return o},D=t.select=function(e,t,n,r){var i,o,a,s,l,u="function"==typeof e&&e,d=!r&&T(e=u.selector||e);if(n=n||[],1===d.length){if((o=d[0]=d[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&C.getById&&9===t.nodeType&&O&&S.relative[o[1].type]){if(!(t=(S.find.ID(a.matches[0].replace(we,Ce),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(a=o[i],!S.relative[s=a.type]);)if((l=S.find[s])&&(r=l(a.matches[0].replace(we,Ce),ye.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&f(o)))return Q.apply(n,r),n;break}}return(u||E(e,d))(r,t,!O,n,!t||ye.test(e)&&c(t.parentNode)||t),n},C.sortStable=F.split("").sort($).join("")===F,C.detectDuplicates=!!R,A(),C.sortDetached=i(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),C.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);oe.find=ce,oe.expr=ce.selectors,oe.expr[":"]=oe.expr.pseudos,oe.uniqueSort=oe.unique=ce.uniqueSort,oe.text=ce.getText,oe.isXMLDoc=ce.isXML,oe.contains=ce.contains;var de=function(e,t,n){for(var r=[],i=n!==undefined;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&oe(e).is(n))break;r.push(e)}return r},fe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},he=oe.expr.match.needsContext,pe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,me=/^.[^:#\[\.,]*$/;oe.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?oe.find.matchesSelector(r,e)?[r]:[]:oe.find.matches(e,oe.grep(t,function(e){return 1===e.nodeType}))},oe.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(oe(e).filter(function(){for(t=0;t<n;t++)if(oe.contains(i[t],this))return!0}));for(t=0;t<n;t++)oe.find(e,i[t],r);return r=this.pushStack(n>1?oe.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&he.test(e)?oe(e):e||[],!1).length}});var ge,ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(oe.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||ge,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ve.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof oe?t[0]:t,oe.merge(this,oe.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:X,!0)),pe.test(r[1])&&oe.isPlainObject(t))for(r in t)oe.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=X.getElementById(r[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=X,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):oe.isFunction(e)?n.ready!==undefined?n.ready(e):e(oe):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),oe.makeArray(e,this))}).prototype=oe.fn,ge=oe(X);var ye=/^(?:parents|prev(?:Until|All))/,be={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({has:function(e){var t=oe(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(oe.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=he.test(e)||"string"!=typeof e?oe(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?oe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?J.call(oe(e),this[0]):J.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(oe.uniqueSort(oe.merge(this.get(),oe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),oe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return de(e,"parentNode")},parentsUntil:function(e,t,n){return de(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return de(e,"nextSibling")},prevAll:function(e){return de(e,"previousSibling")},nextUntil:function(e,t,n){return de(e,"nextSibling",n)},prevUntil:function(e,t,n){return de(e,"previousSibling",n)},siblings:function(e){return fe((e.parentNode||{}).firstChild,e)},children:function(e){return fe(e.firstChild)},contents:function(e){return e.contentDocument||oe.merge([],e.childNodes)}},function(e,t){oe.fn[e]=function(n,r){var i=oe.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=oe.filter(r,i)),this.length>1&&(be[e]||oe.uniqueSort(i),ye.test(e)&&i.reverse()),this.pushStack(i)}});var we=/\S+/g;oe.Callbacks=function(e){e="string"==typeof e?o(e):oe.extend({},e);var t,n,r,i,a=[],s=[],l=-1,u=function(){for(i=e.once,r=t=!0;s.length;l=-1)for(n=s.shift();++l<a.length;)!1===a[l].apply(n[0],n[1])&&e.stopOnFalse&&(l=a.length,n=!1);e.memory||(n=!1),t=!1,i&&(a=n?[]:"")},c={add:function(){return a&&(n&&!t&&(l=a.length-1,s.push(n)),function r(t){oe.each(t,function(t,n){oe.isFunction(n)?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==oe.type(n)&&r(n)})}(arguments),n&&!t&&u()),this},remove:function(){return oe.each(arguments,function(e,t){for(var n;(n=oe.inArray(t,a,n))>-1;)a.splice(n,1),n<=l&&l--}),this},has:function(e){return e?oe.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=s=[],n||(a=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},oe.extend({Deferred:function(e){var t=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return oe.Deferred(function(n){oe.each(t,function(t,o){var a=oe.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&oe.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?oe.extend(e,r):r}},i={};return r.pipe=r.then,oe.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=K.call(arguments),a=o.length,s=1!==a||e&&oe.isFunction(e.promise)?a:0,l=1===s?e:oe.Deferred(),u=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?K.call(arguments):i,r===t?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);i<a;i++)o[i]&&oe.isFunction(o[i].promise)?o[i].promise().progress(u(i,n,t)).done(u(i,r,o)).fail(l.reject):--s;return s||l.resolveWith(r,o),l.promise()}});var Ce;oe.fn.ready=function(e){return oe.ready.promise().done(e),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?oe.readyWait++:oe.ready(!0)},ready:function(e){(!0===e?--oe.readyWait:oe.isReady)||(oe.isReady=!0,!0!==e&&--oe.readyWait>0||(Ce.resolveWith(X,[oe]),oe.fn.triggerHandler&&(oe(X).triggerHandler("ready"),oe(X).off("ready"))))}}),oe.ready.promise=function(t){return Ce||(Ce=oe.Deferred(),"complete"===X.readyState||"loading"!==X.readyState&&!X.documentElement.doScroll?e.setTimeout(oe.ready):(X.addEventListener("DOMContentLoaded",a),e.addEventListener("load",a))),Ce.promise(t)},oe.ready.promise();var Se=function(e,t,n,r,i,o,a){var s=0,l=e.length,u=null==n;if("object"===oe.type(n)){i=!0;for(s in n)Se(e,t,s,n[s],!0,o,a)}else if(r!==undefined&&(i=!0,oe.isFunction(r)||(a=!0),u&&(a?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(oe(e),n)})),t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:u?t.call(e):l?t(e[0],n):o},xe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};s.uid=1,s.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!xe(e))return{};var t=e[this.expando];return t||(t={},xe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[t]=n;else for(r in t)i[r]=t[r];return i},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return t===undefined||t&&"string"==typeof t&&n===undefined?(r=this.get(e,t))!==undefined?r:this.get(e,oe.camelCase(t)):(this.set(e,t,n),n!==undefined?n:t)},remove:function(e,t){var n,r,i,o=e[this.expando];if(o!==undefined){if(t===undefined)this.register(e);else{oe.isArray(t)?r=t.concat(t.map(oe.camelCase)):(i=oe.camelCase(t),r=t in o?[t,i]:(r=i)in o?[r]:r.match(we)||[]),n=r.length;for(;n--;)delete o[r[n]]}(t===undefined||oe.isEmptyObject(o))&&(e.nodeType?e[this.expando]=undefined:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!oe.isEmptyObject(t)}};var ke=new s,Te=new s,Ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,De=/[A-Z]/g;oe.extend({hasData:function(e){return Te.hasData(e)||ke.hasData(e)},data:function(e,t,n){return Te.access(e,t,n)},removeData:function(e,t){Te.remove(e,t)},_data:function(e,t,n){return ke.access(e,t,n)},_removeData:function(e,t){ke.remove(e,t)}}),oe.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(e===undefined){if(this.length&&(i=Te.get(o),1===o.nodeType&&!ke.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=oe.camelCase(r.slice(5)),l(o,r,i[r]));ke.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Te.set(this,e)}):Se(this,function(t){var n,r;if(o&&t===undefined){if((n=Te.get(o,e)||Te.get(o,e.replace(De,"-$&").toLowerCase()))!==undefined)return n;if(r=oe.camelCase(e),(n=Te.get(o,r))!==undefined)return n;if((n=l(o,r,undefined))!==undefined)return n}else r=oe.camelCase(e),this.each(function(){var n=Te.get(this,r);Te.set(this,r,t),e.indexOf("-")>-1&&n!==undefined&&Te.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Te.remove(this,e)})}}),oe.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ke.get(e,t),n&&(!r||oe.isArray(n)?r=ke.access(e,t,oe.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=oe.queue(e,t),r=n.length,i=n.shift(),o=oe._queueHooks(e,t),a=function(){oe.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ke.get(e,n)||ke.access(e,n,{empty:oe.Callbacks("once memory").add(function(){ke.remove(e,[t+"queue",n])})})}}),oe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?oe.queue(this[0],e):t===undefined?this:this.each(function(){var n=oe.queue(this,e,t);oe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&oe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){oe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=oe.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=undefined),e=e||"fx";a--;)(n=ke.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_e=new RegExp("^(?:([+-])=|)("+Ne+")([a-z%]*)$","i"),Re=["Top","Right","Bottom","Left"],Ae=function(e,t){return e=t||e,"none"===oe.css(e,"display")||!oe.contains(e.ownerDocument,e)},Le=/^(?:checkbox|radio)$/i,Me=/<([\w:-]+)/,Oe=/^$|\/(?:java|ecma)script/i,Pe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pe.optgroup=Pe.option,Pe.tbody=Pe.tfoot=Pe.colgroup=Pe.caption=Pe.thead,Pe.th=Pe.td;var Ie=/<|&#?\w+;/;!function(){var e=X.createDocumentFragment().appendChild(X.createElement("div")),t=X.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),re.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",re.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var He=/^key/,Be=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Fe=/^([^.]*)(?:\.(.+)|)/;oe.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,h,p,m,g=ke.get(e);if(g)for(n.handler&&(n=(o=n).handler,i=o.selector),n.guid||(n.guid=oe.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(t){return void 0!==oe&&oe.event.triggered!==t.type?oe.event.dispatch.apply(e,arguments):undefined}),u=(t=(t||"").match(we)||[""]).length;u--;)h=m=(s=Fe.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),h&&(d=oe.event.special[h]||{},h=(i?d.delegateType:d.bindType)||h,d=oe.event.special[h]||{},c=oe.extend({type:h,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&oe.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=l[h])||((f=l[h]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,r,p,a)||e.addEventListener&&e.addEventListener(h,a)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),oe.event.global[h]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,h,p,m,g=ke.hasData(e)&&ke.get(e);if(g&&(l=g.events)){for(u=(t=(t||"").match(we)||[""]).length;u--;)if(s=Fe.exec(t[u])||[],h=m=s[1],p=(s[2]||"").split(".").sort(),h){for(d=oe.event.special[h]||{},f=l[h=(r?d.delegateType:d.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,d.remove&&d.remove.call(e,c));a&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,p,g.handle)||oe.removeEvent(e,h,g.handle),delete l[h])}else for(h in l)oe.event.remove(e,h+t[u],n,r,!0);oe.isEmptyObject(l)&&ke.remove(e,"handle events")}},dispatch:function(e){e=oe.event.fix(e);var t,n,r,i,o,a=[],s=K.call(arguments),l=(ke.get(this,"events")||{})[e.type]||[],u=oe.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(a=oe.event.handlers.call(this,e,l),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,(r=((oe.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))!==undefined&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(r=[],n=0;n<s;n++)r[i=(o=t[n]).selector+" "]===undefined&&(r[i]=o.needsContext?oe(i,this).index(l)>-1:oe.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&a.push({elem:l,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||X).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||o===undefined||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[oe.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Be.test(i)?this.mouseHooks:He.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new oe.Event(o),t=r.length;t--;)e[n=r[t]]=o[n];return e.target||(e.target=X),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==m()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===m()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&oe.nodeName(this,"input"))return this.click(),!1},_default:function(e){return oe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},oe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},oe.Event=function(e,t){if(!(this instanceof oe.Event))return new oe.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&!1===e.returnValue?h:p):this.type=e,t&&oe.extend(this,t),this.timeStamp=e&&e.timeStamp||oe.now(),this[oe.expando]=!0},oe.Event.prototype={constructor:oe.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=h,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){oe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||oe.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),oe.fn.extend({on:function(e,t,n,r){return g(this,e,t,n,r)},one:function(e,t,n,r){return g(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,oe(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=undefined),!1===n&&(n=p),this.each(function(){oe.event.remove(this,e,n,t)})}});var We=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ze=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^true\/(.*)/,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;oe.extend({htmlPrefilter:function(e){return e.replace(We,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),l=oe.contains(e.ownerDocument,e);if(!(re.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||oe.isXMLDoc(e)))for(a=c(s),r=0,i=(o=c(e)).length;r<i;r++)C(o[r],a[r]);if(t)if(n)for(o=o||c(e),a=a||c(s),r=0,i=o.length;r<i;r++)w(o[r],a[r]);else w(e,s);return(a=c(s,"script")).length>0&&d(a,!l&&c(e,"script")),s},cleanData:function(e){for(var t,n,r,i=oe.event.special,o=0;(n=e[o])!==undefined;o++)if(xe(n)){if(t=n[ke.expando]){if(t.events)for(r in t.events)i[r]?oe.event.remove(n,r):oe.removeEvent(n,r,t.handle);n[ke.expando]=undefined}n[Te.expando]&&(n[Te.expando]=undefined)}}}),oe.fn.extend({domManip:S,detach:function(e){return x(this,e,!0)},remove:function(e){return x(this,e)},text:function(e){return Se(this,function(e){return e===undefined?oe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return S(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){v(this,e).appendChild(e)}})},prepend:function(){return S(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return S(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return S(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(oe.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return oe.clone(this,e,t)})},html:function(e){return Se(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ze.test(e)&&!Pe[(Me.exec(e)||["",""])[1].toLowerCase()]){e=oe.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(oe.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return S(this,arguments,function(t){var n=this.parentNode;oe.inArray(this,e)<0&&(oe.cleanData(c(this)),n&&n.replaceChild(t,this))},e)}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){oe.fn[e]=function(e){for(var n,r=[],i=oe(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),oe(i[a])[t](n),Q.apply(r,n.get());return this.pushStack(r)}});var Ue,$e={HTML:"block",BODY:"block"},Ye=/^margin/,Ge=new RegExp("^("+Ne+")(?!px)[a-z%]+$","i"),Xe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Ke=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i},Ze=X.documentElement;!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Ze.appendChild(a);var t=e.getComputedStyle(s);n="1%"!==t.top,o="2px"===t.marginLeft,r="4px"===t.width,s.style.marginRight="50%",i="4px"===t.marginRight,Ze.removeChild(a)}var n,r,i,o,a=X.createElement("div"),s=X.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",re.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),oe.extend(re,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},pixelMarginRight:function(){return null==r&&t(),i},reliableMarginLeft:function(){return null==r&&t(),o},reliableMarginRight:function(){var t,n=s.appendChild(X.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",Ze.appendChild(a),t=!parseFloat(e.getComputedStyle(n).marginRight),Ze.removeChild(a),s.removeChild(n),t}}))}();var Qe=/^(none|table(?!-c[ea]).+)/,Je={position:"absolute",visibility:"hidden",display:"block"},et={letterSpacing:"0",fontWeight:"400"},tt=["Webkit","O","Moz","ms"],nt=X.createElement("div").style;oe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=E(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=oe.camelCase(t),l=e.style;if(t=oe.cssProps[s]||(oe.cssProps[s]=N(s)||s),a=oe.cssHooks[t]||oe.cssHooks[s],n===undefined)return a&&"get"in a&&(i=a.get(e,!1,r))!==undefined?i:l[t];"string"==(o=typeof n)&&(i=_e.exec(n))&&i[1]&&(n=u(e,t,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(oe.cssNumber[s]?"":"px")),re.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&(n=a.set(e,n,r))===undefined||(l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=oe.camelCase(t);return t=oe.cssProps[s]||(oe.cssProps[s]=N(s)||s),(a=oe.cssHooks[t]||oe.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),i===undefined&&(i=E(e,t,r)),"normal"===i&&t in et&&(i=et[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),oe.each(["height","width"],function(e,t){oe.cssHooks[t]={get:function(e,n,r){if(n)return Qe.test(oe.css(e,"display"))&&0===e.offsetWidth?Ke(e,Je,function(){return A(e,t,r)}):A(e,t,r)},set:function(e,n,r){var i,o=r&&Xe(e),a=r&&R(e,t,r,"border-box"===oe.css(e,"boxSizing",!1,o),o);return a&&(i=_e.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=oe.css(e,t)),_(e,n,a)}}}),oe.cssHooks.marginLeft=D(re.reliableMarginLeft,function(e,t){if(t)return(parseFloat(E(e,"marginLeft"))||e.getBoundingClientRect().left-Ke(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),oe.cssHooks.marginRight=D(re.reliableMarginRight,function(e,t){if(t)return Ke(e,{display:"inline-block"},E,[e,"marginRight"])}),oe.each({margin:"",padding:"",border:"Width"},function(e,t){oe.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+Re[r]+t]=o[r]||o[r-2]||o[0];return i}},Ye.test(e)||(oe.cssHooks[e+t].set=_)}),oe.fn.extend({css:function(e,t){return Se(this,function(e,t,n){var r,i,o={},a=0;if(oe.isArray(t)){for(r=Xe(e),i=t.length;a<i;a++)o[t[a]]=oe.css(e,t[a],!1,r);return o}return n!==undefined?oe.style(e,t,n):oe.css(e,t)},e,t,arguments.length>1)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ae(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=M,M.prototype={constructor:M,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||oe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var e=M.propHooks[this.prop];return e&&e.get?e.get(this):M.propHooks._default.get(this)},run:function(e){var t,n=M.propHooks[this.prop];return this.options.duration?this.pos=t=oe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=oe.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){oe.fx.step[e.prop]?oe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[oe.cssProps[e.prop]]&&!oe.cssHooks[e.prop]?e.elem[e.prop]=e.now:oe.style(e.elem,e.prop,e.now+e.unit)}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},oe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},oe.fx=M.prototype.init,oe.fx.step={};var rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;oe.Animation=oe.extend(F,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return u(n.elem,e,_e.exec(t),n),n}]},tweener:function(e,t){oe.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var n,r=0,i=e.length;r<i;r++)n=e[r],F.tweeners[n]=F.tweeners[n]||[],F.tweeners[n].unshift(t)},prefilters:[H],prefilter:function(e,t){t?F.prefilters.unshift(e):F.prefilters.push(e)}}),oe.speed=function(e,t,n){var r=e&&"object"==typeof e?oe.extend({},e):{complete:n||!n&&t||oe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!oe.isFunction(t)&&t};return r.duration=oe.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in oe.fx.speeds?oe.fx.speeds[r.duration]:oe.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){oe.isFunction(r.old)&&r.old.call(this),r.queue&&oe.dequeue(this,r.queue)},r},oe.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=oe.isEmptyObject(e),o=oe.speed(t,n,r),a=function(){var t=F(this,oe.extend({},e),o);(i||ke.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=undefined),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=oe.timers,a=ke.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&at.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||oe.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=ke.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=oe.timers,a=r?r.length:0;for(n.finish=!0,oe.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(e,t){var n=oe.fn[t];oe.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(P(t,!0),e,r,i)}}),oe.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){oe.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),oe.timers=[],oe.fx.tick=function(){var e,t=0,n=oe.timers;for(rt=oe.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||oe.fx.stop(),rt=undefined},oe.fx.timer=function(e){oe.timers.push(e),e()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){it||(it=e.setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){e.clearInterval(it),it=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,n){return t=oe.fx?oe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=X.createElement("input"),t=X.createElement("select"),n=t.appendChild(X.createElement("option"));e.type="checkbox",re.checkOn=""!==e.value,re.optSelected=n.selected,t.disabled=!0,re.optDisabled=!n.disabled,(e=X.createElement("input")).value="t",e.type="radio",re.radioValue="t"===e.value}();var st,lt=oe.expr.attrHandle;oe.fn.extend({attr:function(e,t){return Se(this,oe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){oe.removeAttr(this,e)})}}),oe.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?oe.prop(e,t,n):(1===o&&oe.isXMLDoc(e)||(t=t.toLowerCase(),i=oe.attrHooks[t]||(oe.expr.match.bool.test(t)?st:undefined)),n!==undefined?null===n?void oe.removeAttr(e,t):i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=oe.find.attr(e,t))?undefined:r)},attrHooks:{type:{set:function(e,t){if(!re.radioValue&&"radio"===t&&oe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(we);if(o&&1===e.nodeType)for(;n=o[i++];)r=oe.propFix[n]||n,oe.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),st={set:function(e,t,n){return!1===t?oe.removeAttr(e,n):e.setAttribute(n,n),n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=lt[t]||oe.find.attr;lt[t]=function(e,t,r){var i,o;return r||(o=lt[t],lt[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,lt[t]=o),i}});var ut=/^(?:input|select|textarea|button)$/i,ct=/^(?:a|area)$/i;oe.fn.extend({prop:function(e,t){return Se(this,oe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[oe.propFix[e]||e]})}}),oe.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&oe.isXMLDoc(e)||(t=oe.propFix[t]||t,i=oe.propHooks[t]),n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=oe.find.attr(e,"tabindex");return t?parseInt(t,10):ut.test(e.nodeName)||ct.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),re.optSelected||(oe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this});var dt=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,l=0;if(oe.isFunction(e))return this.each(function(t){oe(this).addClass(e.call(this,t,W(this)))});if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[l++];)if(i=W(n),r=1===n.nodeType&&(" "+i+" ").replace(dt," ")){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=oe.trim(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,l=0;if(oe.isFunction(e))return this.each(function(t){oe(this).removeClass(e.call(this,t,W(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[l++];)if(i=W(n),r=1===n.nodeType&&(" "+i+" ").replace(dt," ")){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=oe.trim(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):oe.isFunction(e)?this.each(function(n){oe(this).toggleClass(e.call(this,n,W(this),t),t)}):this.each(function(){var t,r,i,o;if("string"===n)for(r=0,i=oe(this),o=e.match(we)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else e!==undefined&&"boolean"!==n||((t=W(this))&&ke.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":ke.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+W(n)+" ").replace(dt," ").indexOf(t)>-1)return!0;return!1}});var ft=/\r/g,ht=/[\x20\t\r\n\f]+/g;oe.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=oe.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,oe(this).val()):e)?i="":"number"==typeof i?i+="":oe.isArray(i)&&(i=oe.map(i,function(e){return null==e?"":e+""})),(t=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&t.set(this,i,"value")!==undefined||(this.value=i))});if(i)return(t=oe.valHooks[i.type]||oe.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:"string"==typeof(n=i.value)?n.replace(ft,""):null==n?"":n}}}),oe.extend({valHooks:{option:{get:function(e){var t=oe.find.attr(e,"value");return null!=t?t:oe.trim(oe.text(e)).replace(ht," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:r.length,l=i<0?s:o?i:0;l<s;l++)if(((n=r[l]).selected||l===i)&&(re.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!oe.nodeName(n.parentNode,"optgroup"))){if(t=oe(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=oe.makeArray(t),a=i.length;a--;)((r=i[a]).selected=oe.inArray(oe.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(e,t){if(oe.isArray(t))return e.checked=oe.inArray(oe(e).val(),t)>-1}},re.checkOn||(oe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var pt=/^(?:focusinfocus|focusoutblur)$/;oe.extend(oe.event,{trigger:function(t,n,r,i){var o,a,s,l,u,c,d,f=[r||X],h=ne.call(t,"type")?t.type:t,p=ne.call(t,"namespace")?t.namespace.split("."):[];if(a=s=r=r||X,3!==r.nodeType&&8!==r.nodeType&&!pt.test(h+oe.event.triggered)&&(h.indexOf(".")>-1&&(h=(p=h.split(".")).shift(),p.sort()),u=h.indexOf(":")<0&&"on"+h,t=t[oe.expando]?t:new oe.Event(h,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=r),n=null==n?[t]:oe.makeArray(n,[t]),d=oe.event.special[h]||{},i||!d.trigger||!1!==d.trigger.apply(r,n))){if(!i&&!d.noBubble&&!oe.isWindow(r)){for(l=d.delegateType||h,pt.test(l+h)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(r.ownerDocument||X)&&f.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=f[o++])&&!t.isPropagationStopped();)t.type=o>1?l:d.bindType||h,(c=(ke.get(a,"events")||{})[t.type]&&ke.get(a,"handle"))&&c.apply(a,n),(c=u&&a[u])&&c.apply&&xe(a)&&(t.result=c.apply(a,n),!1===t.result&&t.preventDefault());return t.type=h,i||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),n)||!xe(r)||u&&oe.isFunction(r[h])&&!oe.isWindow(r)&&((s=r[u])&&(r[u]=null),oe.event.triggered=h,r[h](),oe.event.triggered=undefined,s&&(r[u]=s)),t.result}},simulate:function(e,t,n){var r=oe.extend(new oe.Event,n,{type:e,isSimulated:!0});oe.event.trigger(r,null,t)}}),oe.fn.extend({trigger:function(e,t){return this.each(function(){oe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return oe.event.trigger(e,t,n,!0)}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){oe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),oe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),re.focusin="onfocusin"in e,re.focusin||oe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){oe.event.simulate(t,e.target,oe.event.fix(e))};oe.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ke.access(r,t);i||r.addEventListener(e,n,!0),ke.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ke.access(r,t)-1;i?ke.access(r,t,i):(r.removeEventListener(e,n,!0),ke.remove(r,t))}}});var mt=e.location,gt=oe.now(),vt=/\?/;oe.parseJSON=function(e){return JSON.parse(e+"")},oe.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(r){n=undefined}return n&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+t),n};var yt=/#.*$/,bt=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ct=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,St=/^(?:GET|HEAD)$/,xt=/^\/\//,kt={},Tt={},Et="*/".concat("*"),Dt=X.createElement("a");Dt.href=mt.href,oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:Ct.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Et,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?q(q(e,oe.ajaxSettings),t):q(oe.ajaxSettings,e)},ajaxPrefilter:z(kt),ajaxTransport:z(Tt),ajax:function(t,n){function r(t,n,r,s){var u,d,y,b,C,x=n;2!==w&&(w=2,l&&e.clearTimeout(l),i=undefined,a=s||"",S.readyState=t>0?4:0,u=t>=200&&t<300||304===t,r&&(b=V(f,S,r)),b=U(f,b,S,u),u?(f.ifModified&&((C=S.getResponseHeader("Last-Modified"))&&(oe.lastModified[o]=C),(C=S.getResponseHeader("etag"))&&(oe.etag[o]=C)),204===t||"HEAD"===f.type?x="nocontent":304===t?x="notmodified":(x=b.state,d=b.data,u=!(y=b.error))):(y=x,!t&&x||(x="error",t<0&&(t=0))),S.status=t,S.statusText=(n||x)+"",u?m.resolveWith(h,[d,x,S]):m.rejectWith(h,[S,x,y]),S.statusCode(v),v=undefined,c&&p.trigger(u?"ajaxSuccess":"ajaxError",[S,f,u?d:y]),g.fireWith(h,[S,x]),c&&(p.trigger("ajaxComplete",[S,f]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=undefined),n=n||{};var i,o,a,s,l,u,c,d,f=oe.ajaxSetup({},n),h=f.context||f,p=f.context&&(h.nodeType||h.jquery)?oe(h):oe.event,m=oe.Deferred(),g=oe.Callbacks("once memory"),v=f.statusCode||{},y={},b={},w=0,C="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!s)for(s={};t=wt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return w||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)v[t]=[v[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||C;return i&&i.abort(t),r(0,t),this}};if(m.promise(S).complete=g.add,S.success=S.done,S.error=S.fail,f.url=((t||f.url||mt.href)+"").replace(yt,"").replace(xt,mt.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=oe.trim(f.dataType||"*").toLowerCase().match(we)||[""],null==f.crossDomain){u=X.createElement("a");try{u.href=f.url,u.href=u.href,f.crossDomain=Dt.protocol+"//"+Dt.host!=u.protocol+"//"+u.host}catch(x){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=oe.param(f.data,f.traditional)),j(kt,f,n,S),2===w)return S;(c=oe.event&&f.global)&&0==oe.active++&&oe.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!St.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(vt.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(f.url=bt.test(o)?o.replace(bt,"$1_="+gt++):o+(vt.test(o)?"&":"?")+"_="+gt++)),f.ifModified&&(oe.lastModified[o]&&S.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&S.setRequestHeader("If-None-Match",oe.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&S.setRequestHeader("Content-Type",f.contentType),S.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Et+"; q=0.01":""):f.accepts["*"]);for(d in f.headers)S.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(h,S,f)||2===w))return S.abort();C="abort";for(d in{success:1,error:1,complete:1})S[d](f[d]);if(i=j(Tt,f,n,S)){if(S.readyState=1,c&&p.trigger("ajaxSend",[S,f]),2===w)return S;f.async&&f.timeout>0&&(l=e.setTimeout(function(){S.abort("timeout")},f.timeout));try{w=1,i.send(y,r)}catch(x){if(!(w<2))throw x;r(-1,x)}}else r(-1,"No Transport");return S},getJSON:function(e,t,n){return oe.get(e,t,n,"json")},getScript:function(e,t){return oe.get(e,undefined,t,"script")}}),oe.each(["get","post"],function(e,t){oe[t]=function(e,n,r,i){return oe.isFunction(n)&&(i=i||r,r=n,n=undefined),oe.ajax(oe.extend({url:e,type:t,dataType:i,data:n,success:r},oe.isPlainObject(e)&&e))}}),oe._evalUrl=function(e){return oe.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(e){var t;return oe.isFunction(e)?this.each(function(t){oe(this).wrapAll(e.call(this,t))}):(this[0]&&(t=oe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return oe.isFunction(e)?this.each(function(t){oe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=oe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=oe.isFunction(e);return this.each(function(n){oe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(e){return!oe.expr.filters.visible(e)},oe.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Nt=/%20/g,_t=/\[\]$/,Rt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;oe.param=function(e,t){var n,r=[],i=function(e,t){t=oe.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined&&(t=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(e)||e.jquery&&!oe.isPlainObject(e))oe.each(e,function(){i(this.name,this.value)});else for(n in e)$(n,e[n],t,i);return r.join("&").replace(Nt,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=oe.prop(this,"elements");return e?oe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!oe(this).is(":disabled")&&Lt.test(this.nodeName)&&!At.test(e)&&(this.checked||!Le.test(e))}).map(function(e,t){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(e){return{name:t.name,value:e.replace(Rt,"\r\n")}}):{name:t.name,value:n.replace(Rt,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Mt={0:200,1223:204},Ot=oe.ajaxSettings.xhr();re.cors=!!Ot&&"withCredentials"in Ot,re.ajax=Ot=!!Ot,oe.ajaxTransport(function(t){var n,r;if(re.cors||Ot&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Mt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=n("error"),s.onabort!==undefined?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return oe.globalEval(e),e}}}),oe.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),oe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=oe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),X.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Pt=[],It=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Pt.pop()||oe.expando+"_"+gt++;return this[e]=!0,e}}),oe.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(It.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&It.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=oe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(It,"$1"+i):!1!==t.jsonp&&(t.url+=(vt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||oe.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){o===undefined?oe(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Pt.push(i)),a&&oe.isFunction(o)&&o(a[0]),a=o=undefined}),"script"}),oe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||X;var r=pe.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=f([e],t,i),i&&i.length&&oe(i).remove(),oe.merge([],r.childNodes))};var Ht=oe.fn.load;oe.fn.load=function(e,t,n){if("string"!=typeof e&&Ht)return Ht.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=oe.trim(e.slice(s)),e=e.slice(0,s)),oe.isFunction(t)?(n=t,t=undefined):t&&"object"==typeof t&&(i="POST"),a.length>0&&oe.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?oe("<div>").append(oe.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){oe.fn[t]=function(e){return this.on(t,e)}}),oe.expr.filters.animated=function(e){return oe.grep(oe.timers,function(t){return e===t.elem}).length},oe.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,u=oe.css(e,"position"),c=oe(e),d={};"static"===u&&(e.style.position="relative"),s=c.offset(),o=oe.css(e,"top"),l=oe.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),oe.isFunction(t)&&(t=t.call(e,n,oe.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):c.css(d)}},oe.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){oe.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return t=o.documentElement,oe.contains(t,r)?(i=r.getBoundingClientRect(),n=Y(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===oe.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),oe.nodeName(e[0],"html")||(r=e.offset()),r.top+=oe.css(e[0],"borderTopWidth",!0),r.left+=oe.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-oe.css(n,"marginTop",!0),left:t.left-r.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===oe.css(e,"position");)e=e.offsetParent;return e||Ze})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;oe.fn[e]=function(r){return Se(this,function(e,r,i){var o=Y(e);if(i===undefined)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),oe.each(["top","left"],function(e,t){oe.cssHooks[t]=D(re.pixelPosition,function(e,n){if(n)return n=E(e,t),Ge.test(n)?oe(e).position()[t]+"px":n})}),oe.each({Height:"height",Width:"width"},function(e,t){oe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){oe.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===i?"margin":"border");return Se(this,function(t,n,r){var i;return oe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?oe.css(t,n,a):oe.style(t,n,r,a)},t,o?r:undefined,o,null)}})}),oe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var Bt=e.jQuery,Ft=e.$;return oe.noConflict=function(t){return e.$===oe&&(e.$=Ft),t&&e.jQuery===oe&&(e.jQuery=Bt),oe},t||(e.jQuery=e.$=oe),oe}),function(){var e=this;(function(){(function(){this.Rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:{selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",formEnableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]"}}).call(this)}).call(e);var t=e.Rails;(function(){(function(){var e,n;n=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,t.matches=function(e,t){return null!=t.exclude?n.call(e,t.selector)&&!n.call(e,t.exclude):n.call(e,t)},e="_ujsData",t.getData=function(t,n){var r;return null!=(r=t[e])?r[n]:void 0},t.setData=function(t,n,r){return null==t[e]&&(t[e]={}),t[e][n]=r},t.$=function(e){return Array.prototype.slice.call(document.querySelectorAll(e))}}).call(this),function(){var e,n,r;e=t.$,r=t.csrfToken=function(){var e;return(e=document.querySelector("meta[name=csrf-token]"))&&e.content},n=t.csrfParam=function(){var e;return(e=document.querySelector("meta[name=csrf-param]"))&&e.content},t.CSRFProtection=function(e){var t;if(null!=(t=r()))return e.setRequestHeader("X-CSRF-Token",t)},t.refreshCSRFTokens=function(){var t,i;if(i=r(),t=n(),null!=i&&null!=t)return e('form input[name="'+t+'"]').forEach(function(e){return e.value=i})}}.call(this),function(){var e,n,r;r=t.matches,"function"!=typeof(e=window.CustomEvent)&&((e=function(e,t){var n;return(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}).prototype=window.Event.prototype),n=t.fire=function(t,n,r){var i;return i=new e(n,{bubbles:!0,cancelable:!0,detail:r}),t.dispatchEvent(i),!i.defaultPrevented},t.stopEverything=function(e){return n(e.target,"ujs:everythingStopped"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},t.delegate=function(e,t,n,i){return e.addEventListener(n,function(e){var n;for(n=e.target;n instanceof Element&&!r(n,t);)n=n.parentNode;if(n instanceof Element&&!1===i.call(n,e))return e.preventDefault(),e.stopPropagation()})}}.call(this),function(){var e,n,r,i,o,a;n=t.CSRFProtection,i=t.fire,e={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},t.ajax=function(e){var t;return e=o(e),t=r(e,function(){var n;return n=a(t.response,t.getResponseHeader("Content-Type")),2===Math.floor(t.status/100)?"function"==typeof e.success&&e.success(n,t.statusText,t):"function"==typeof e.error&&e.error(n,t.statusText,t),"function"==typeof e.complete?e.complete(t,t.statusText):void 0}),"function"==typeof e.beforeSend&&e.beforeSend(t,e),t.readyState===XMLHttpRequest.OPENED?t.send(e.data):i(document,"ajaxStop")},o=function(t){return t.url=t.url||location.href,t.type=t.type.toUpperCase(),"GET"===t.type&&t.data&&(t.url.indexOf("?")<0?t.url+="?"+t.data:t.url+="&"+t.data),null==e[t.dataType]&&(t.dataType="*"),t.accept=e[t.dataType],"*"!==t.dataType&&(t.accept+=", */*; q=0.01"),t},r=function(e,t){var r;return(r=new XMLHttpRequest).open(e.type,e.url,!0),r.setRequestHeader("Accept",e.accept),"string"==typeof e.data&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.crossDomain||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),n(r),r.withCredentials=!!e.withCredentials,r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE)return t(r)},r},a=function(e,t){var n,r;if("string"==typeof e&&"string"==typeof t)if(t.match(/\bjson\b/))try{e=JSON.parse(e)}catch(i){}else if(t.match(/\b(?:java|ecma)script\b/))(r=document.createElement("script")).text=e,document.head.appendChild(r).parentNode.removeChild(r);else if(t.match(/\b(xml|html|svg)\b/)){n=new DOMParser,t=t.replace(/;.+/,"");try{e=n.parseFromString(e,t)}catch(i){}}return e},t.href=function(e){return e.href},t.isCrossDomain=function(e){var t,n;(t=document.createElement("a")).href=location.href,n=document.createElement("a");try{return n.href=e,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(r){return r,!0}}}.call(this),function(){var e,n;e=t.matches,n=function(e){return Array.prototype.slice.call(e)},t.serializeElement=function(t,r){var i,o;return i=[t],e(t,"form")&&(i=n(t.elements)),o=[],i.forEach(function(t){if(t.name)return e(t,"select")?n(t.options).forEach(function(e){if(e.selected)return o.push({name:t.name,value:e.value})}):t.checked||-1===["radio","checkbox","submit"].indexOf(t.type)?o.push({name:t.name,value:t.value}):void 0}),r&&o.push(r),o.map(function(e){return null!=e.name?encodeURIComponent(e.name)+"="+encodeURIComponent(e.value):e}).join("&")},t.formElements=function(t,r){return e(t,"form")?n(t.elements).filter(function(t){return e(t,r)}):n(t.querySelectorAll(r))}}.call(this),function(){var e,n,r;n=t.fire,r=t.stopEverything,t.handleConfirm=function(t){if(!e(this))return r(t)},e=function(e){var t,r,i;if(!(i=e.getAttribute("data-confirm")))return!0;if(t=!1,n(e,"confirm")){try{t=confirm(i)}catch(o){}r=n(e,"confirm:complete",[t])}return t&&r}}.call(this),function(){var e,n,r,i,o,a,s,l,u,c,d;u=t.matches,l=t.getData,c=t.setData,d=t.stopEverything,s=t.formElements,t.handleDisabledElement=function(e){if(this.disabled)return d(e)},t.enableElement=function(e){var n;return n=e instanceof Event?e.target:e,u(n,t.linkDisableSelector)?a(n):u(n,t.buttonDisableSelector)||u(n,t.formEnableSelector)?i(n):u(n,t.formSubmitSelector)?o(n):void 0},t.disableElement=function(i){var o;return o=i instanceof Event?i.target:i,u(o,t.linkDisableSelector)?r(o):u(o,t.buttonDisableSelector)||u(o,t.formDisableSelector)?e(o):u(o,t.formSubmitSelector)?n(o):void 0},r=function(e){var t;return null!=(t=e.getAttribute("data-disable-with"))&&(c(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t),e.addEventListener("click",d),c(e,"ujs:disabled",!0)},a=function(e){var t;return null!=(t=l(e,"ujs:enable-with"))&&(e.innerHTML=t,c(e,"ujs:enable-with",null)),e.removeEventListener("click",d),c(e,"ujs:disabled",null)},n=function(n){return s(n,t.formDisableSelector).forEach(e)},e=function(e){var t;return null!=(t=e.getAttribute("data-disable-with"))&&(u(e,"button")?(c(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t):(c(e,"ujs:enable-with",e.value),e.value=t)),e.disabled=!0,c(e,"ujs:disabled",!0)},o=function(e){return s(e,t.formEnableSelector).forEach(i)},i=function(e){var t;return null!=(t=l(e,"ujs:enable-with"))&&(u(e,"button")?e.innerHTML=t:e.value=t,c(e,"ujs:enable-with",null)),e.disabled=!1,c(e,"ujs:disabled",null)}}.call(this),function(){var e;e=t.stopEverything,t.handleMethod=function(n){var r,i,o,a,s,l,u;if(l=this,u=l.getAttribute("data-method"))return s=t.href(l),i=t.csrfToken(),r=t.csrfParam(),o=document.createElement("form"),a="<input name='_method' value='"+u+"' type='hidden' />",null==r||null==i||t.isCrossDomain(s)||(a+="<input name='"+r+"' value='"+i+"' type='hidden' />"),a+='<input type="submit" />',o.method="post",o.action=s,o.target=l.target,o.innerHTML=a,o.style.display="none",document.body.appendChild(o),o.querySelector('[type="submit"]').click(),e(n)}}.call(this),function(){var e,n,r,i,o,a,s,l,u,c=[].slice;a=t.matches,r=t.getData,l=t.setData,n=t.fire,u=t.stopEverything,e=t.ajax,i=t.isCrossDomain,s=t.serializeElement,o=function(e){var t;return null!=(t=e.getAttribute("data-remote"))&&"false"!==t},t.handleRemote=function(d){var f,h,p,m,g,v,y;return m=this,!o(m)||(n(m,"ajax:before")?(y=m.getAttribute("data-with-credentials"),p=m.getAttribute("data-type")||"script",a(m,t.formSubmitSelector)?(f=r(m,"ujs:submit-button"),g=r(m,"ujs:submit-button-formmethod")||m.method,v=r(m,"ujs:submit-button-formaction")||m.getAttribute("action")||location.href,"GET"===g.toUpperCase()&&(v=v.replace(/\?.*$/,"")),"multipart/form-data"===m.enctype?(h=new FormData(m),null!=f&&h.append(f.name,f.value)):h=s(m,f),l(m,"ujs:submit-button",null),l(m,"ujs:submit-button-formmethod",null),l(m,"ujs:submit-button-formaction",null)):a(m,t.buttonClickSelector)||a(m,t.inputChangeSelector)?(g=m.getAttribute("data-method"),v=m.getAttribute("data-url"),h=s(m,m.getAttribute("data-params"))):(g=m.getAttribute("data-method"),v=t.href(m),h=m.getAttribute("data-params")),e({type:g||"GET",url:v,data:h,dataType:p,beforeSend:function(e,t){return n(m,"ajax:beforeSend",[e,t])?n(m,"ajax:send",[e]):(n(m,"ajax:stopped"),e.abort())},success:function(){var e;return e=1<=arguments.length?c.call(arguments,0):[],n(m,"ajax:success",e)},error:function(){var e;return e=1<=arguments.length?c.call(arguments,0):[],n(m,"ajax:error",e)},complete:function(){var e;return e=1<=arguments.length?c.call(arguments,0):[],n(m,"ajax:complete",e)},crossDomain:i(v),withCredentials:null!=y&&"false"!==y}),u(d)):(n(m,"ajax:stopped"),!1))},t.formSubmitButtonClick=function(){var e,t;if(e=this,t=e.form)return e.name&&l(t,"ujs:submit-button",{name:e.name,value:e.value}),l(t,"ujs:formnovalidate-button",e.formNoValidate),l(t,"ujs:submit-button-formaction",e.getAttribute("formaction")),l(t,"ujs:submit-button-formmethod",e.getAttribute("formmethod"))},t.handleMetaClick=function(e){var t,n,r;if(n=this,r=(n.getAttribute("data-method")||"GET").toUpperCase(),t=n.getAttribute("data-params"),(e.metaKey||e.ctrlKey)&&"GET"===r&&!t)return e.stopImmediatePropagation()}}.call(this),function(){var e,n,r,i,o,a,s,l,u,c,d,f,h,p;a=t.fire,r=t.delegate,l=t.getData,e=t.$,p=t.refreshCSRFTokens,n=t.CSRFProtection,o=t.enableElement,i=t.disableElement,c=t.handleDisabledElement,u=t.handleConfirm,h=t.handleRemote,s=t.formSubmitButtonClick,d=t.handleMetaClick,f=t.handleMethod,"undefined"==typeof jQuery||null===jQuery||null==jQuery.ajax||jQuery.rails||(jQuery.rails=t,jQuery.ajaxPrefilter(function(e,t,r){if(!e.crossDomain)return n(r)})),t.start=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",function(){return e(t.formEnableSelector).forEach(function(e){if(l(e,"ujs:disabled"))return o(e)}),e(t.linkDisableSelector).forEach(function(e){if(l(e,"ujs:disabled"))return o(e)})}),r(document,t.linkDisableSelector,"ajax:complete",o),r(document,t.linkDisableSelector,"ajax:stopped",o),r(document,t.buttonDisableSelector,"ajax:complete",o),r(document,t.buttonDisableSelector,"ajax:stopped",o),r(document,t.linkClickSelector,"click",c),r(document,t.linkClickSelector,"click",u),r(document,t.linkClickSelector,"click",d),r(document,t.linkClickSelector,"click",i),r(document,t.linkClickSelector,"click",h),r(document,t.linkClickSelector,"click",f),r(document,t.buttonClickSelector,"click",c),r(document,t.buttonClickSelector,"click",u),r(document,t.buttonClickSelector,"click",i),r(document,t.buttonClickSelector,"click",h),r(document,t.inputChangeSelector,"change",c),r(document,t.inputChangeSelector,"change",u),r(document,t.inputChangeSelector,"change",h),r(document,t.formSubmitSelector,"submit",c),r(document,t.formSubmitSelector,"submit",u),r(document,t.formSubmitSelector,"submit",h),r(document,t.formSubmitSelector,"submit",function(e){return setTimeout(function(){return i(e)},13)}),r(document,t.formSubmitSelector,"ajax:send",i),r(document,t.formSubmitSelector,"ajax:complete",o),r(document,t.formInputClickSelector,"click",c),r(document,t.formInputClickSelector,"click",u),r(document,t.formInputClickSelector,"click",s),document.addEventListener("DOMContentLoaded",p),window._rails_loaded=!0},window.Rails===t&&a(document,"rails:attachBindings")&&t.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd&&define(t)}.call(this),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);(this||window).CodeMirror=e()}}(function(){"use strict";function e(n,r){if(!(this instanceof e))return new e(n,r);this.options=r=r?Hi(r):{},Hi(ea,r,!1),h(r);var i=r.value;"string"==typeof i&&(i=new ka(i,r.mode,null,r.lineSeparator)),this.doc=i;var o=new e.inputStyles[r.inputStyle](this),a=this.display=new t(n,i,o);a.wrapper.CodeMirror=this,u(this),s(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),r.autofocus&&!_o&&a.input.focus(),v(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Ri,keySeq:null,specialChars:null};var l=this;bo&&wo<11&&setTimeout(function(){l.display.input.reset(!0)},20),jt(this),Xi(),wt(this),this.curOp.forceUpdate=!0,Kr(this,i),r.autofocus&&!_o||l.hasFocus()?setTimeout(Bi(vn,this),20):yn(this);for(var c in ta)ta.hasOwnProperty(c)&&ta[c](this,r[c],na);S(this),r.finishInit&&r.finishInit(this);for(var d=0;d<aa.length;++d)aa[d](this);St(this),Co&&r.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}function t(e,t,n){var r=this;this.input=n,r.scrollbarFiller=ji("div",null,"CodeMirror-scrollbar-filler"),r.scrollbarFiller.setAttribute("cm-not-content","true"),r.gutterFiller=ji("div",null,"CodeMirror-gutter-filler"),r.gutterFiller.setAttribute("cm-not-content","true"),r.lineDiv=ji("div",null,"CodeMirror-code"),r.selectionDiv=ji("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=ji("div",null,"CodeMirror-cursors"),r.measure=ji("div",null,"CodeMirror-measure"),r.lineMeasure=ji("div",null,"CodeMirror-measure"),r.lineSpace=ji("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none"),r.mover=ji("div",[ji("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=ji("div",[r.mover],"CodeMirror-sizer"),r.sizerWidth=null,r.heightForcer=ji("div",null,null,"position: absolute; height: "+Pa+"px; width: 1px;"),r.gutters=ji("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=ji("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=ji("div",[r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),bo&&wo<8&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),Co||go&&_o||(r.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(r.wrapper):e(r.wrapper)),r.viewFrom=r.viewTo=t.first,r.reportedViewFrom=r.reportedViewTo=t.first,r.view=[],r.renderedView=null,r.externalMeasured=null,r.viewOffset=0,r.lastWrapHeight=r.lastWrapWidth=0,r.updateLineNumbers=null,r.nativeBarWidth=r.barHeight=r.barWidth=0,r.scrollbarsClipped=!1,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.alignWidgets=!1,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null,r.activeTouch=null,n.init(r)}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),r(t)}function r(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Fe(e,100),e.state.modeGen++,e.curOp&&Pt(e)}function i(e){e.options.lineWrapping?(Qa(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Za(e.display.wrapper,"CodeMirror-wrap"),f(e)),a(e),Pt(e),st(e),setTimeout(function(){y(e)},100)}function o(e){var t=yt(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/bt(e.display)-3);return function(i){if(Sr(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function a(e){var t=e.doc,n=o(e);t.iter(function(e){var t=n(e);t!=e.height&&ei(e,t)})}function s(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),st(e)}function l(e){u(e),Pt(e),setTimeout(function(){C(e)},20)}function u(e){var t=e.display.gutters,n=e.options.gutters;qi(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(ji("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",c(e)}function c(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function d(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=mr(r);){r=(i=t.find(0,!0)).from.line,n+=i.from.ch-i.to.ch}for(r=e;t=gr(r);){var i=t.find(0,!0);n-=r.text.length-i.from.ch,n+=(r=i.to.line).text.length-i.to.ch}return n}function f(e){var t=e.display,n=e.doc;t.maxLine=Zr(n,n.first),t.maxLineLength=d(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=d(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function h(e){var t=Mi(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function p(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+Ve(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+$e(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function m(e,t,n){this.cm=n;var r=this.vert=ji("div",[ji("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=ji("div",[ji("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(r),e(i),Ra(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),Ra(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,bo&&wo<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function g(){}function v(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&Za(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new e.scrollbarModel[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),Ra(e,"mousedown",function(){t.state.focused&&setTimeout(function(){t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,n){"horizontal"==n?on(t,e):rn(t,e)},t),t.display.scrollbars.addClass&&Qa(t.display.wrapper,t.display.scrollbars.addClass)}function y(e,t){t||(t=p(e));var n=e.display.barWidth,r=e.display.barHeight;b(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&A(e),b(e,p(e)),n=e.display.barWidth,r=e.display.barHeight}function b(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}function w(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-qe(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=ni(t,r),a=ni(t,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<o?(o=s,a=ni(t,ri(Zr(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=a&&(o=ni(t,ri(Zr(t,l))-e.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function C(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=k(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&n[a].gutter&&(n[a].gutter.style.left=o);var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function S(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=x(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(ji("div",[ji("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",c(e),!0}return!1}function x(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function k(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function T(e,t,n){var r=e.display;this.viewport=t,this.visible=w(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Ye(e),this.force=n,this.dims=M(e),this.events=[]}function E(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=$e(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=$e(e)+"px",t.scrollbarsClipped=!0)}function D(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Ht(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==zt(e))return!1;S(e)&&(Ht(e),t.dims=M(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),Ho&&(o=wr(e.doc,o),a=Cr(e.doc,a));var s=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;Wt(e,o,a),n.viewOffset=ri(Zr(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var l=zt(e);if(!s&&0==l&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=Ui();return l>4&&(n.lineDiv.style.display="none"),O(e,n.updateLineNumbers,t.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,u&&Ui()!=u&&u.offsetHeight&&u.focus(),qi(n.cursorDiv),qi(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Fe(e,400)),n.updateLineNumbers=null,!0}function N(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Ye(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Ve(e.display)-Ge(e),n.top)}),t.visible=w(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&D(e,t);r=!1){A(e);var i=p(e);Oe(e),y(e,i),R(e,i)}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function _(e,t){var n=new T(e,t);if(D(e,n)){A(e),N(e,n);var r=p(e);Oe(e),y(e,r),R(e,r),n.finish()}}function R(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+$e(e)+"px"}function A(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i,o=t.view[r];if(!o.hidden){if(bo&&wo<8){var a=o.node.offsetTop+o.node.offsetHeight;i=a-n,n=a}else{var s=o.node.getBoundingClientRect();i=s.bottom-s.top}var l=o.line.height-i;if(i<2&&(i=yt(t)),(l>.001||l<-.001)&&(ei(o.line,i),L(o.line),o.rest))for(var u=0;u<o.rest.length;u++)L(o.rest[u])}}}function L(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function M(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a)n[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+i,r[e.options.gutters[a]]=o.clientWidth;return{fixedPos:k(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function O(e,t,n){function r(t){var n=t.nextSibling;return Co&&Ro&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var i=e.display,o=e.options.lineNumbers,a=i.lineDiv,s=a.firstChild,l=i.view,u=i.viewFrom,c=0;c<l.length;c++){var d=l[c];if(d.hidden);else if(d.node&&d.node.parentNode==a){for(;s!=d.node;)s=r(s);var f=o&&null!=t&&t<=u&&d.lineNumber;d.changes&&(Mi(d.changes,"gutter")>-1&&(f=!1),P(e,d,u,n)),f&&(qi(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(x(e.options,u)))),s=d.node.nextSibling}else{var h=q(e,d,u,n);a.insertBefore(h,s)}u+=d.size}for(;s;)s=r(s)}function P(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?F(e,t):"gutter"==o?z(e,t,n,r):"class"==o?W(t):"widget"==o&&j(e,t,r)}t.changes=null}function I(e){return e.node==e.text&&(e.node=ji("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),bo&&wo<8&&(e.node.style.zIndex=2)),e.node}function H(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=I(e);e.background=n.insertBefore(ji("div",null,t),n.firstChild)}}function B(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Br(e,t)}function F(e,t){var n=t.text.className,r=B(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,W(t)):n&&(t.text.className=n)}function W(e){H(e),e.line.wrapClass?I(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function z(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=I(t);t.gutterBackground=ji("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){i=I(t);var a=t.gutter=ji("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),i.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(ji("div",x(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var s=0;s<e.options.gutters.length;++s){var l=e.options.gutters[s],u=o.hasOwnProperty(l)&&o[l];u&&a.appendChild(ji("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[l]+"px; width: "+r.gutterWidth[l]+"px"))}}}function j(e,t,n){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild;r;r=i){var i=r.nextSibling;"CodeMirror-linewidget"==r.className&&t.node.removeChild(r)}V(e,t,n)}function q(e,t,n,r){var i=B(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),W(t),z(e,t,n,r),V(e,t,r),t.node}function V(e,t,n){if(U(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)U(e,t.rest[r],t,n,!1)}function U(e,t,n,r,i){if(t.widgets)for(var o=I(n),a=0,s=t.widgets;a<s.length;++a){var l=s[a],u=ji("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),$(l,u,n,r),e.display.input.setUneditable(u),i&&l.above?o.insertBefore(u,n.gutter||n.text):o.appendChild(u),ki(l,"redraw")}}function $(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function Y(e){return Bo(e.line,e.ch)}function G(e,t){return Fo(e,t)<0?t:e}function X(e,t){return Fo(e,t)<0?e:t}function K(e){e.state.focused||(e.display.input.focus(),vn(e))}function Z(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var a=e.state.pasteIncoming||"paste"==i,s=o.splitLines(t),l=null;if(a&&r.ranges.length>1)if(Wo&&Wo.text.join("\n")==t){if(r.ranges.length%Wo.text.length==0){l=[];for(var u=0;u<Wo.text.length;u++)l.push(o.splitLines(Wo.text[u]))}}else s.length==r.ranges.length&&(l=Oi(s,function(e){return[e]}));for(u=r.ranges.length-1;u>=0;u--){var c=r.ranges[u],d=c.from(),f=c.to();c.empty()&&(n&&n>0?d=Bo(d.line,d.ch-n):e.state.overwrite&&!a?f=Bo(f.line,Math.min(Zr(o,f.line).text.length,f.ch+Li(s).length)):Wo&&Wo.lineWise&&Wo.text.join("\n")==t&&(d=f=Bo(d.line,0)));var h=e.curOp.updateInput,p={from:d,to:f,text:l?l[u%l.length]:s,origin:i||(a?"paste":e.state.cutIncoming?"cut":"+input")};En(e.doc,p),ki(e,"inputRead",e,p)}t&&!a&&J(e,t),Bn(e),e.curOp.updateInput=h,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Q(e,t){var n=e.clipboardData&&e.clipboardData.getData("text/plain");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||_t(t,function(){Z(t,n,0,null,"paste")}),!0}function J(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){a=Wn(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Zr(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Wn(e,i.head.line,"smart"));a&&ki(e,"electricInput",e,i.head.line)}}}function ee(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:Bo(i,0),head:Bo(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function te(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function ne(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Ri,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function re(){var e=ji("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=ji("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return Co?e.style.width="1000px":e.setAttribute("wrap","off"),No&&(e.style.border="1px solid black"),te(e),t}function ie(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ri,this.gracePeriod=!1}function oe(e,t){var n=Je(e,t.line);if(!n||n.hidden)return null;var r=Zr(e.doc,t.line),i=Ke(n,r,t.line),o=ii(r),a="left";if(o){a=uo(o,t.ch)%2?"right":"left"}var s=nt(i.map,t.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function ae(e,t){return t&&(e.bad=!0),e}function se(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return ae(e.clipPos(Bo(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return le(o,t,n)}}function le(e,t,n){function r(t,n,r){for(var i=-1;i<(c?c.length:0);i++)for(var o=i<0?u.map:c[i],a=0;a<o.length;a+=3){var s=o[a+2];if(s==t||s==n){var l=ti(i<0?e.line:e.rest[i]),d=o[a]+r;return(r<0||s!=t)&&(d=o[a+(r?1:0)]),Bo(l,d)}}}var i=e.text.firstChild,o=!1;if(!t||!Ga(i,t))return ae(Bo(ti(e.line),0),!0);if(t==i&&(o=!0,t=i.childNodes[n],n=0,!t)){var a=e.rest?Li(e.rest):e.line;return ae(Bo(ti(a),a.text.length),o)}var s=3==t.nodeType?t:null,l=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,n&&(n=s.nodeValue.length));l.parentNode!=i;)l=l.parentNode;var u=e.measure,c=u.maps,d=r(s,l,n);if(d)return ae(d,o);for(var f=l.nextSibling,h=s?s.nodeValue.length-n:0;f;f=f.nextSibling){if(d=r(f,f.firstChild,0))return ae(Bo(d.line,d.ch-h),o);h+=f.textContent.length}var p=l.previousSibling;for(h=n;p;p=p.previousSibling){if(d=r(p,p.firstChild,-1))return ae(Bo(d.line,d.ch+h),o);h+=f.textContent.length}}function ue(e,t,n,r,i){function o(e){return function(t){return t.id==e}}function a(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(null!=n)return""==n&&(n=t.textContent.replace(/\u200b/g,"")),void(s+=n);var c,d=t.getAttribute("cm-marker");if(d){var f=e.findMarks(Bo(r,0),Bo(i+1,0),o(+d));return void(f.length&&(c=f[0].find())&&(s+=Qr(e.doc,c.from,c.to).join(u)))}if("false"==t.getAttribute("contenteditable"))return;for(var h=0;h<t.childNodes.length;h++)a(t.childNodes[h]);/^(pre|div|p)$/i.test(t.nodeName)&&(l=!0)}else if(3==t.nodeType){var p=t.nodeValue;if(!p)return;l&&(s+=u,l=!1),s+=p}}for(var s="",l=!1,u=e.doc.lineSeparator();a(t),t!=n;)t=t.nextSibling;return s}function ce(e,t){this.ranges=e,this.primIndex=t}function de(e,t){this.anchor=e,this.head=t}function fe(e,t){var n=e[t];e.sort(function(e,t){return Fo(e.from(),t.from())}),t=Mi(e,n);for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];if(Fo(o.to(),i.from())>=0){var a=X(o.from(),i.from()),s=G(o.to(),i.to()),l=o.empty()?i.from()==i.head:o.from()==o.head;r<=t&&--t,e.splice(--r,2,new de(l?s:a,l?a:s))}}return new ce(e,t)}function he(e,t){return new ce([new de(e,t||e)],0)}function pe(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function me(e,t){if(t.line<e.first)return Bo(e.first,0);var n=e.first+e.size-1;return t.line>n?Bo(n,Zr(e,n).text.length):ge(t,Zr(e,t.line).text.length)}function ge(e,t){var n=e.ch;return null==n||n>t?Bo(e.line,t):n<0?Bo(e.line,0):e}function ve(e,t){return t>=e.first&&t<e.first+e.size}function ye(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=me(e,t[r]);return n}function be(e,t,n,r){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(r){var o=Fo(n,i)<0;o!=Fo(r,i)<0?(i=n,n=r):o!=Fo(n,r)<0&&(n=r)}return new de(i,n)}return new de(r||n,n)}function we(e,t,n,r){Ee(e,new ce([be(e,e.sel.primary(),t,n)],0),r)}function Ce(e,t,n){for(var r=[],i=0;i<e.sel.ranges.length;i++)r[i]=be(e,e.sel.ranges[i],t[i],null);Ee(e,fe(r,e.sel.primIndex),n)}function Se(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Ee(e,fe(i,e.sel.primIndex),r)}function xe(e,t,n,r){Ee(e,he(t,n),r)}function ke(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new de(me(e,t[n].anchor),me(e,t[n].head))},origin:n&&n.origin};return Ma(e,"beforeSelectionChange",e,r),e.cm&&Ma(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?fe(r.ranges,r.ranges.length-1):t}function Te(e,t,n){var r=e.history.done,i=Li(r);i&&i.ranges?(r[r.length-1]=t,De(e,t,n)):Ee(e,t,n)}function Ee(e,t,n){De(e,t,n),di(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function De(e,t,n){(Ni(e,"beforeSelectionChange")||e.cm&&Ni(e.cm,"beforeSelectionChange"))&&(t=ke(e,t,n));Ne(e,Re(e,t,n&&n.bias||(Fo(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!e.cm||Bn(e.cm)}function Ne(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Di(e.cm)),ki(e,"cursorActivity",e))}function _e(e){Ne(e,Re(e,e.sel,null,!1),Ha)}function Re(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=Le(e,a.anchor,s&&s.anchor,n,r),u=Le(e,a.head,s&&s.head,n,r);(i||l!=a.anchor||u!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new de(l,u))}return i?fe(i,t.primIndex):t}function Ae(e,t,n,r,i){var o=Zr(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker;if((null==s.from||(l.inclusiveLeft?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(l.inclusiveRight?s.to>=t.ch:s.to>t.ch))){if(i&&(Ma(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var u,c=l.find(r<0?1:-1);if((r<0?l.inclusiveRight:l.inclusiveLeft)&&(c=Me(e,c,-r,c&&c.line==t.line?o:null)),c&&c.line==t.line&&(u=Fo(c,n))&&(r<0?u<0:u>0))return Ae(e,c,t,r,i)}var d=l.find(r<0?-1:1);return(r<0?l.inclusiveLeft:l.inclusiveRight)&&(d=Me(e,d,r,d.line==t.line?o:null)),d?Ae(e,d,t,r,i):null}}return t}function Le(e,t,n,r,i){var o=r||1,a=Ae(e,t,n,o,i)||!i&&Ae(e,t,n,o,!0)||Ae(e,t,n,-o,i)||!i&&Ae(e,t,n,-o,!0);return a||(e.cantEdit=!0,Bo(e.first,0))}function Me(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?me(e,Bo(t.line-1)):null:n>0&&t.ch==(r||Zr(e,t.line)).text.length?t.line<e.first+e.size-1?Bo(t.line+1,0):null:new Bo(t.line,t.ch+n)}function Oe(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Pe(e,t){for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(!1!==t||a!=n.sel.primIndex){var s=n.sel.ranges[a];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var l=s.empty();(l||e.options.showCursorWhenSelecting)&&Ie(e,s.head,i),l||He(e,s,o)}}return r}function Ie(e,t,n){var r=ht(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(ji("div","\xa0","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(ji("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function He(e,t,n){function r(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),s.appendChild(ji("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?c-e:n)+"px; height: "+(r-t)+"px"))}function i(t,n,i){function o(n,r){return ft(e,Bo(t,n),"div",d,r)}var s,l,d=Zr(a,t),f=d.text.length;return eo(ii(d),n||0,null==i?f:i,function(e,t,a){var d,h,p,m=o(e,"left");if(e==t)d=m,h=p=m.left;else{if(d=o(t-1,"right"),"rtl"==a){var g=m;m=d,d=g}h=m.left,p=d.right}null==n&&0==e&&(h=u),d.top-m.top>3&&(r(h,m.top,null,m.bottom),h=u,m.bottom<d.top&&r(h,m.bottom,null,d.top)),null==i&&t==f&&(p=c),(!s||m.top<s.top||m.top==s.top&&m.left<s.left)&&(s=m),(!l||d.bottom>l.bottom||d.bottom==l.bottom&&d.right>l.right)&&(l=d),h<u+1&&(h=u),r(h,d.top,p-h,d.bottom)}),{start:s,end:l}}var o=e.display,a=e.doc,s=document.createDocumentFragment(),l=Ue(e.display),u=l.left,c=Math.max(o.sizerWidth,Ye(e)-o.sizer.offsetLeft)-l.right,d=t.from(),f=t.to();if(d.line==f.line)i(d.line,d.ch,f.ch);else{var h=Zr(a,d.line),p=Zr(a,f.line),m=yr(h)==yr(p),g=i(d.line,d.ch,m?h.text.length+1:null).end,v=i(f.line,m?0:null,f.ch).start;m&&(g.top<v.top-2?(r(g.right,g.top,null,g.bottom),r(u,v.top,v.left,v.bottom)):r(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&r(u,g.bottom,null,v.top)}n.appendChild(s)}function Be(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Fe(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,Bi(We,e))}function We(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=la(t.mode,je(e,t.frontier)),i=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var a=o.styles,s=o.text.length>e.options.maxHighlightLength,l=Or(e,o,s?la(t.mode,r):r,!0);o.styles=l.styles;var u=o.styleClasses,c=l.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var d=!a||a.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),f=0;!d&&f<a.length;++f)d=a[f]!=o.styles[f];d&&i.push(t.frontier),o.stateAfter=s?r:la(t.mode,r)}else o.text.length<=e.options.maxHighlightLength&&Ir(e,o.text,r),o.stateAfter=t.frontier%5==0?la(t.mode,r):null;if(++t.frontier,+new Date>n)return Fe(e,e.options.workDelay),!0}),i.length&&_t(e,function(){for(var t=0;t<i.length;t++)It(e,i[t],"text")})}}function ze(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var l=Zr(o,s-1);if(l.stateAfter&&(!n||s<=o.frontier))return s;var u=Wa(l.text,null,e.options.tabSize);(null==i||r>u)&&(i=s-1,r=u)}return i}function je(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var o=ze(e,t,n),a=o>r.first&&Zr(r,o-1).stateAfter;return a=a?la(r.mode,a):ua(r.mode),r.iter(o,t,function(n){Ir(e,n.text,a);var s=o==t-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;n.stateAfter=s?la(r.mode,a):null,++o}),n&&(r.frontier=o),a}function qe(e){return e.lineSpace.offsetTop}function Ve(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Ue(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Vi(e.measure,ji("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function $e(e){return Pa-e.display.nativeBarWidth}function Ye(e){return e.display.scroller.clientWidth-$e(e)-e.display.barWidth}function Ge(e){return e.display.scroller.clientHeight-$e(e)-e.display.barHeight}function Xe(e,t,n){var r=e.options.lineWrapping,i=r&&Ye(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],u=a[s+1];Math.abs(l.bottom-u.bottom)>2&&o.push((l.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Ke(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(r=0;r<e.rest.length;r++)if(ti(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function Ze(e,t){var n=ti(t=yr(t)),r=e.display.externalMeasured=new Mt(e.doc,t,n);r.lineN=n;var i=r.built=Br(e,r);return r.text=i.pre,Vi(e.display.lineMeasure,i.pre),r}function Qe(e,t,n,r){return tt(e,et(e,t),n,r)}function Je(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Bt(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function et(e,t){var n=ti(t),r=Je(e,n);r&&!r.text?r=null:r&&r.changes&&(P(e,r,n,M(e)),e.curOp.forceUpdate=!0),r||(r=Ze(e,t));var i=Ke(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function tt(e,t,n,r,i){t.before&&(n=-1);var o,a=n+(r||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Xe(e,t.view,t.rect),t.hasHeights=!0),(o=rt(e,t,n,r)).bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function nt(e,t,n){for(var r,i,o,a,s=0;s<e.length;s+=3){var l=e[s],u=e[s+1];if(t<l?(i=0,o=1,a="left"):t<u?o=(i=t-l)+1:(s==e.length-3||t==u&&e[s+3]>t)&&(i=(o=u-l)-1,t>=u&&(a="right")),null!=i){if(r=e[s+2],l==u&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;s&&e[s-2]==e[s-3]&&e[s-1].insertLeft;)r=e[2+(s-=3)],a="left";if("right"==n&&i==u-l)for(;s<e.length-3&&e[s+3]==e[s+4]&&!e[s+5].insertLeft;)r=e[(s+=3)+2],a="right";break}}return{node:r,start:i,end:o,collapse:a,coverStart:l,coverEnd:u}}function rt(e,t,n,r){var i,o=nt(t.map,n,r),a=o.node,s=o.start,l=o.end,u=o.collapse;if(3==a.nodeType){for(var c=0;c<4;c++){for(;s&&zi(t.line.text.charAt(o.coverStart+s));)--s;for(;o.coverStart+l<o.coverEnd&&zi(t.line.text.charAt(o.coverStart+l));)++l;if(bo&&wo<9&&0==s&&l==o.coverEnd-o.coverStart)i=a.parentNode.getBoundingClientRect();else if(bo&&e.options.lineWrapping){i=(d=Va(a,s,l).getClientRects()).length?d["right"==r?d.length-1:0]:Vo}else i=Va(a,s,l).getBoundingClientRect()||Vo;if(i.left||i.right||0==s)break;l=s,s-=1,u="right"}bo&&wo<11&&(i=it(e.display.measure,i))}else{s>0&&(u=r="right");var d;i=e.options.lineWrapping&&(d=a.getClientRects()).length>1?d["right"==r?d.length-1:0]:a.getBoundingClientRect()}if(bo&&wo<9&&!s&&(!i||!i.left&&!i.right)){var f=a.parentNode.getClientRects()[0];i=f?{left:f.left,right:f.left+bt(e.display),top:f.top,bottom:f.bottom}:Vo}var h=i.top-t.rect.top,p=i.bottom-t.rect.top,m=(h+p)/2,g=t.view.measure.heights;for(c=0;c<g.length-1&&!(m<g[c]);c++);var v=c?g[c-1]:0,y=g[c],b={left:("right"==u?i.right:i.left)-t.rect.left,right:("left"==u?i.left:i.right)-t.rect.left,top:v,bottom:y};return i.left||i.right||(b.bogus=!0),e.options.singleCursorHeightPerLine||(b.rtop=h,b.rbottom=p),b}function it(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Ji(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}function ot(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function at(e){e.display.externalMeasure=null,qi(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ot(e.display.view[t])}function st(e){at(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function lt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ut(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function ct(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=Tr(t.widgets[i]);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=ri(t);if("local"==r?a+=qe(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==r?0:ut());var l=s.left+("window"==r?0:lt());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function dt(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=lt(),i-=ut();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function ft(e,t,n,r,i){return r||(r=Zr(e.doc,t.line)),ct(e,r,Qe(e,r,t.ch,i),n)}function ht(e,t,n,r,i,o){function a(t,a){var s=tt(e,i,t,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,ct(e,r,s,n)}function s(e,t){var n=l[t],r=n.level%2;return e==to(n)&&t&&n.level<l[t-1].level?(e=no(n=l[--t])-(n.level%2?0:1),r=!0):e==no(n)&&t<l.length-1&&n.level<l[t+1].level&&(e=to(n=l[++t])-n.level%2,r=!1),r&&e==n.to&&e>n.from?a(e-1):a(e,r)}r=r||Zr(e.doc,t.line),i||(i=et(e,r));var l=ii(r),u=t.ch;if(!l)return a(u);var c=s(u,uo(l,u));return null!=as&&(c.other=s(u,as)),c}function pt(e,t){var n=0;t=me(e.doc,t);e.options.lineWrapping||(n=bt(e.display)*t.ch);var r=Zr(e.doc,t.line),i=ri(r)+qe(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function mt(e,t,n,r){var i=Bo(e,t);return i.xRel=r,n&&(i.outside=!0),i}function gt(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return mt(r.first,0,!0,-1);var i=ni(r,n),o=r.first+r.size-1;if(i>o)return mt(r.first+r.size-1,Zr(r,o).text.length,!0,1);t<0&&(t=0);for(var a=Zr(r,i);;){var s=vt(e,a,i,t,n),l=gr(a),u=l&&l.find(0,!0);if(!l||!(s.ch>u.from.ch||s.ch==u.from.ch&&s.xRel>0))return s;i=ti(a=u.to.line)}}function vt(e,t,n,r,i){function o(r){var i=ht(e,Bo(n,r),"line",t,u);return s=!0,a>i.bottom?i.left-l:a<i.top?i.left+l:(s=!1,i.left)}var a=i-ri(t),s=!1,l=2*e.display.wrapper.clientWidth,u=et(e,t),c=ii(t),d=t.text.length,f=ro(t),h=io(t),p=o(f),m=s,g=o(h),v=s;if(r>g)return mt(n,h,v,1);for(;;){if(c?h==f||h==fo(t,f,1):h-f<=1){var y=r<p||r-p<=g-r?f:h,b=y==f?m:v,w=r-(y==f?p:g);if(v&&!c&&!/\s/.test(t.text.charAt(y))&&w>0&&y<t.text.length&&u.view.measure.heights.length>1){var C=tt(e,u,y,"right");a<=C.bottom&&a>=C.top&&Math.abs(r-C.right)<w&&(b=!1,y++,w=r-C.right)}for(;zi(t.text.charAt(y));)++y;return mt(n,y,b,w<-1?-1:w>1?1:0)}var S=Math.ceil(d/2),x=f+S;if(c){x=f;for(var k=0;k<S;++k)x=fo(t,x,1)}var T=o(x);T>r?(h=x,g=T,(v=s)&&(g+=1e3),d=S):(f=x,p=T,m=s,d-=S)}}function yt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==zo){zo=ji("pre");for(var t=0;t<49;++t)zo.appendChild(document.createTextNode("x")),zo.appendChild(ji("br"));zo.appendChild(document.createTextNode("x"))}Vi(e.measure,zo);var n=zo.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),qi(e.measure),n||1}function bt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=ji("span","xxxxxxxxxx"),n=ji("pre",[t]);Vi(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function wt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++$o},Uo?Uo.ops.push(e.curOp):e.curOp.ownsGroup=Uo={ops:[e.curOp],delayedCallbacks:[]}}function Ct(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}function St(e){var t=e.curOp.ownsGroup;if(t)try{Ct(t)}finally{Uo=null;for(var n=0;n<t.ops.length;n++)t.ops[n].cm.curOp=null;xt(t)}}function xt(e){for(var t=e.ops,n=0;n<t.length;n++)kt(t[n]);for(n=0;n<t.length;n++)Tt(t[n]);for(n=0;n<t.length;n++)Et(t[n]);for(n=0;n<t.length;n++)Dt(t[n]);for(n=0;n<t.length;n++)Nt(t[n])}function kt(e){var t=e.cm,n=t.display;E(t),e.updateMaxLine&&f(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new T(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Tt(e){e.updatedDisplay=e.mustUpdate&&D(e.cm,e.update)}function Et(e){var t=e.cm,n=t.display;e.updatedDisplay&&A(t),e.barMeasure=p(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Qe(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+$e(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Ye(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection(e.focus))}function Dt(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&on(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==Ui()&&(!document.hasFocus||document.hasFocus());e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&y(t,e.barMeasure),e.updatedDisplay&&R(t,e.barMeasure),e.selectionChanged&&Be(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&K(e.cm)}function Nt(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&N(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null==e.scrollTop||n.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(r.scrollTop=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,e.scrollTop)),n.scrollbars.setScrollTop(r.scrollTop),n.scroller.scrollTop=r.scrollTop),null==e.scrollLeft||n.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(r.scrollLeft=Math.max(0,Math.min(n.scroller.scrollWidth-n.scroller.clientWidth,e.scrollLeft)),n.scrollbars.setScrollLeft(r.scrollLeft),n.scroller.scrollLeft=r.scrollLeft,C(t)),e.scrollToPos){var i=On(t,me(r,e.scrollToPos.from),me(r,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&Mn(t,i)}var o=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||Ma(o[s],"hide");if(a)for(s=0;s<a.length;++s)a[s].lines.length&&Ma(a[s],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Ma(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function _t(e,t){if(e.curOp)return t();wt(e);try{return t()}finally{St(e)}}function Rt(e,t){return function(){if(e.curOp)return t.apply(e,arguments);wt(e);try{return t.apply(e,arguments)}finally{St(e)}}}function At(e){return function(){if(this.curOp)return e.apply(this,arguments);wt(this);try{return e.apply(this,arguments)}finally{St(this)}}}function Lt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);wt(t);try{return e.apply(this,arguments)}finally{St(t)}}}function Mt(e,t,n){this.line=t,this.rest=br(t),this.size=this.rest?ti(Li(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Sr(e,t)}function Ot(e,t,n){for(var r,i=[],o=t;o<n;o=r){var a=new Mt(e.doc,Zr(e.doc,o),o);r=o+a.size,i.push(a)}return i}function Pt(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Ho&&wr(e.doc,t)<i.viewTo&&Ht(e);else if(n<=i.viewFrom)Ho&&Cr(e.doc,n+r)>i.viewFrom?Ht(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)Ht(e);else if(t<=i.viewFrom){(o=Ft(e,n,n+r,1))?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):Ht(e)}else if(n>=i.viewTo){var o;(o=Ft(e,t,t,-1))?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):Ht(e)}else{var a=Ft(e,t,t,-1),s=Ft(e,n,n+r,1);a&&s?(i.view=i.view.slice(0,a.index).concat(Ot(e,a.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=r):Ht(e)}var l=i.externalMeasured;l&&(n<l.lineN?l.lineN+=r:t<l.lineN+l.size&&(i.externalMeasured=null))}function It(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[Bt(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==Mi(a,n)&&a.push(n)}}}function Ht(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Bt(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function Ft(e,t,n,r){var i,o=Bt(e,t),a=e.display.view;if(!Ho||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var s=0,l=e.display.viewFrom;s<o;s++)l+=a[s].size;if(l!=t){if(r>0){if(o==a.length-1)return null;i=l+a[o].size-t,o++}else i=l-t;t+=i,n+=i}for(;wr(e.doc,n)!=n;){if(o==(r<0?0:a.length-1))return null;n+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function Wt(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=Ot(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=Ot(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Bt(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(Ot(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Bt(e,n)))),r.viewTo=n}function zt(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function jt(e){function t(){i.activeTouch&&(o=setTimeout(function(){i.activeTouch=null},1e3),(a=i.activeTouch).end=+new Date)}function n(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function r(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}var i=e.display;Ra(i.scroller,"mousedown",Rt(e,Yt)),Ra(i.scroller,"dblclick",bo&&wo<11?Rt(e,function(t){if(!Ei(e,t)){var n=$t(e,t);if(n&&!Qt(e,t)&&!Ut(e.display,t)){Da(t);var r=e.findWordAt(n);we(e.doc,r.anchor,r.head)}}}):function(t){Ei(e,t)||Da(t)}),Po||Ra(i.scroller,"contextmenu",function(t){bn(e,t)});var o,a={end:0};Ra(i.scroller,"touchstart",function(t){if(!Ei(e,t)&&!n(t)){clearTimeout(o);var r=+new Date;i.activeTouch={start:r,moved:!1,prev:r-a.end<=300?a:null},1==t.touches.length&&(i.activeTouch.left=t.touches[0].pageX,i.activeTouch.top=t.touches[0].pageY)}}),Ra(i.scroller,"touchmove",function(){i.activeTouch&&(i.activeTouch.moved=!0)}),Ra(i.scroller,"touchend",function(n){var o=i.activeTouch;if(o&&!Ut(i,n)&&null!=o.left&&!o.moved&&new Date-o.start<300){var a,s=e.coordsChar(i.activeTouch,"page");a=!o.prev||r(o,o.prev)?new de(s,s):!o.prev.prev||r(o,o.prev.prev)?e.findWordAt(s):new de(Bo(s.line,0),me(e.doc,Bo(s.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),Da(n)}t()}),Ra(i.scroller,"touchcancel",t),Ra(i.scroller,"scroll",function(){i.scroller.clientHeight&&(rn(e,i.scroller.scrollTop),on(e,i.scroller.scrollLeft,!0),Ma(e,"scroll",e))}),Ra(i.scroller,"mousewheel",function(t){an(e,t)}),Ra(i.scroller,"DOMMouseScroll",function(t){an(e,t)}),Ra(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),i.dragFunctions={enter:function(t){Ei(e,t)||_a(t)},over:function(t){Ei(e,t)||(tn(e,t),_a(t))},start:function(t){en(e,t)},drop:Rt(e,Jt),leave:function(t){Ei(e,t)||nn(e)}};var s=i.input.getField();Ra(s,"keyup",function(t){pn.call(e,t)}),Ra(s,"keydown",Rt(e,fn)),Ra(s,"keypress",Rt(e,mn)),Ra(s,"focus",Bi(vn,e)),Ra(s,"blur",Bi(yn,e))}function qt(t,n,r){if(!n!=!(r&&r!=e.Init)){var i=t.display.dragFunctions,o=n?Ra:La;o(t.display.scroller,"dragstart",i.start),o(t.display.scroller,"dragenter",i.enter),o(t.display.scroller,"dragover",i.over),o(t.display.scroller,"dragleave",i.leave),o(t.display.scroller,"drop",i.drop)}}function Vt(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function Ut(e,t){for(var n=Ci(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function $t(e,t,n,r){var i=e.display;if(!n&&"true"==Ci(t).getAttribute("cm-not-content"))return null;var o,a,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,a=t.clientY-s.top}catch(t){return null}var l,u=gt(e,o,a);if(r&&1==u.xRel&&(l=Zr(e.doc,u.line).text).length==u.ch){var c=Wa(l,l.length,e.options.tabSize)-l.length;u=Bo(u.line,Math.max(0,Math.round((o-Ue(e.display).left)/bt(e.display))-c))}return u}function Yt(e){var t=this,n=t.display;if(!(Ei(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.shift=e.shiftKey,Ut(n,e))Co||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100));else if(!Qt(t,e)){var r=$t(t,e);switch(window.focus(),Si(e)){case 1:t.state.selectingText?t.state.selectingText(e):r?Gt(t,e,r):Ci(e)==n.scroller&&Da(e);break;case 2:Co&&(t.state.lastMiddleDown=+new Date),r&&we(t.doc,r),setTimeout(function(){n.input.focus()},20),Da(e);break;case 3:Po?bn(t,e):gn(t)}}}function Gt(e,t,n){bo?setTimeout(Bi(K,e),0):e.curOp.focus=Ui();var r,i=+new Date;qo&&qo.time>i-400&&0==Fo(qo.pos,n)?r="triple":jo&&jo.time>i-400&&0==Fo(jo.pos,n)?(r="double",qo={time:i,pos:n}):(r="single",jo={time:i,pos:n});var o,a=e.doc.sel,s=Ro?t.metaKey:t.ctrlKey;e.options.dragDrop&&es&&!e.isReadOnly()&&"single"==r&&(o=a.contains(n))>-1&&(Fo((o=a.ranges[o]).from(),n)<0||n.xRel>0)&&(Fo(o.to(),n)>0||n.xRel<0)?Xt(e,t,n,s):Kt(e,t,n,r,s)}function Xt(e,t,n,r){var i=e.display,o=+new Date,a=Rt(e,function(s){Co&&(i.scroller.draggable=!1),e.state.draggingText=!1,La(document,"mouseup",a),La(i.scroller,"drop",a),Math.abs(t.clientX-s.clientX)+Math.abs(t.clientY-s.clientY)<10&&(Da(s),!r&&+new Date-200<o&&we(e.doc,n),Co||bo&&9==wo?setTimeout(function(){document.body.focus(),i.input.focus()},20):i.input.focus())});Co&&(i.scroller.draggable=!0),e.state.draggingText=a,a.copy=Ro?t.altKey:t.ctrlKey,i.scroller.dragDrop&&i.scroller.dragDrop(),Ra(document,"mouseup",a),Ra(i.scroller,"drop",a)}function Kt(e,t,n,r,i){function o(t){if(0!=Fo(g,t))if(g=t,"rect"==r){for(var i=[],o=e.options.tabSize,a=Wa(Zr(u,n.line).text,n.ch,o),s=Wa(Zr(u,t.line).text,t.ch,o),l=Math.min(a,s),h=Math.max(a,s),p=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));p<=m;p++){var v=Zr(u,p).text,y=za(v,l,o);l==h?i.push(new de(Bo(p,y),Bo(p,y))):v.length>y&&i.push(new de(Bo(p,y),Bo(p,za(v,h,o))))}i.length||i.push(new de(n,n)),Ee(u,fe(f.ranges.slice(0,d).concat(i),d),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=c,w=b.anchor,C=t;if("single"!=r){if("double"==r)var S=e.findWordAt(t);else S=new de(Bo(t.line,0),me(u,Bo(t.line+1,0)));Fo(S.anchor,w)>0?(C=S.head,w=X(b.from(),S.anchor)):(C=S.anchor,w=G(b.to(),S.head))}(i=f.ranges.slice(0))[d]=new de(me(u,w),C),Ee(u,fe(i,d),Ba)}}function a(t){var n=++y,i=$t(e,t,!0,"rect"==r);if(i)if(0!=Fo(i,g)){e.curOp.focus=Ui(),o(i);var s=w(l,u);(i.line>=s.to||i.line<s.from)&&setTimeout(Rt(e,function(){y==n&&a(t)}),150)}else{var c=t.clientY<v.top?-20:t.clientY>v.bottom?20:0;c&&setTimeout(Rt(e,function(){y==n&&(l.scroller.scrollTop+=c,a(t))}),50)}}function s(t){e.state.selectingText=!1,y=Infinity,Da(t),l.input.focus(),La(document,"mousemove",b),La(document,"mouseup",C),u.history.lastSelOrigin=null}var l=e.display,u=e.doc;Da(t);var c,d,f=u.sel,h=f.ranges;if(i&&!t.shiftKey?(d=u.sel.contains(n),c=d>-1?h[d]:new de(n,n)):(c=u.sel.primary(),d=u.sel.primIndex),Ao?t.shiftKey&&t.metaKey:t.altKey)r="rect",i||(c=new de(n,n)),n=$t(e,t,!0,!0),d=-1;else if("double"==r){var p=e.findWordAt(n);c=e.display.shift||u.extend?be(u,c,p.anchor,p.head):p}else if("triple"==r){var m=new de(Bo(n.line,0),me(u,Bo(n.line+1,0)));c=e.display.shift||u.extend?be(u,c,m.anchor,m.head):m}else c=be(u,c,n);i?-1==d?(d=h.length,Ee(u,fe(h.concat([c]),d),{scroll:!1,origin:"*mouse"})):h.length>1&&h[d].empty()&&"single"==r&&!t.shiftKey?(Ee(u,fe(h.slice(0,d).concat(h.slice(d+1)),0),{scroll:!1,origin:"*mouse"}),f=u.sel):Se(u,d,c,Ba):(d=0,Ee(u,new ce([c],0),Ba),f=u.sel);var g=n,v=l.wrapper.getBoundingClientRect(),y=0,b=Rt(e,function(e){Si(e)?a(e):s(e)}),C=Rt(e,s);e.state.selectingText=C,Ra(document,"mousemove",b),Ra(document,"mouseup",C)}function Zt(e,t,n,r){try{var i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Da(t);var a=e.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!Ni(e,n))return wi(t);o-=s.top-a.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var u=a.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=i){var c=ni(e.doc,o),d=e.options.gutters[l];return Ma(e,n,e,c,d,t),wi(t)}}}function Qt(e,t){return Zt(e,t,"gutterClick",!0)}function Jt(e){var t=this;if(nn(t),!Ei(t,e)&&!Ut(t.display,e)){Da(e),bo&&(Yo=+new Date);var n=$t(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,s=function(e,r){if(!t.options.allowDropFileTypes||-1!=Mi(t.options.allowDropFileTypes,e.type)){var s=new FileReader;s.onload=Rt(t,function(){var e=s.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[r]=e,++a==i){var l={from:n=me(t.doc,n),to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};En(t.doc,l),Te(t.doc,he(n,Jo(l)))}}),s.readAsText(e)}},l=0;l<i;++l)s(r[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){t.display.input.focus()},20);try{if(o=e.dataTransfer.getData("Text")){if(t.state.draggingText&&!t.state.draggingText.copy)var u=t.listSelections();if(De(t.doc,he(n,n)),u)for(l=0;l<u.length;++l)Ln(t.doc,"",u[l].anchor,u[l].head,"drag");t.replaceSelection(o,"around","paste"),t.display.input.focus()}}catch(e){}}}}function en(e,t){if(bo&&(!e.state.draggingText||+new Date-Yo<100))_a(t);else if(!Ei(e,t)&&!Ut(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!To)){var n=ji("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ko&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),ko&&n.parentNode.removeChild(n)}}function tn(e,t){var n=$t(e,t);if(n){var r=document.createDocumentFragment();Ie(e,n,r),e.display.dragCursor||(e.display.dragCursor=ji("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),Vi(e.display.dragCursor,r)}}function nn(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function rn(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,go||_(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),go&&_(e),Fe(e,100))}function on(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,C(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function an(e,t){var n=Ko(t),r=n.x,i=n.y,o=e.display,a=o.scroller,s=a.scrollWidth>a.clientWidth,l=a.scrollHeight>a.clientHeight;if(r&&s||i&&l){if(i&&Ro&&Co)e:for(var u=t.target,c=o.view;u!=a;u=u.parentNode)for(var d=0;d<c.length;d++)if(c[d].node==u){e.display.currentWheelTarget=u;break e}if(r&&!go&&!ko&&null!=Xo)return i&&l&&rn(e,Math.max(0,Math.min(a.scrollTop+i*Xo,a.scrollHeight-a.clientHeight))),on(e,Math.max(0,Math.min(a.scrollLeft+r*Xo,a.scrollWidth-a.clientWidth))),(!i||i&&l)&&Da(t),void(o.wheelStartX=null);if(i&&null!=Xo){var f=i*Xo,h=e.doc.scrollTop,p=h+o.wrapper.clientHeight;f<0?h=Math.max(0,h+f-50):p=Math.min(e.doc.height,p+f+50),_(e,{top:h,bottom:p})}Go<20&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=r,o.wheelDY=i,setTimeout(function(){if(null!=o.wheelStartX){var e=a.scrollLeft-o.wheelStartX,t=a.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(Xo=(Xo*Go+n)/(Go+1),++Go)}},200)):(o.wheelDX+=r,o.wheelDY+=i))}}function sn(e,t,n){if("string"==typeof t&&!(t=ca[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=Ia}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function ln(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=fa(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&fa(t,e.options.extraKeys,n,e)||fa(t,e.options.keyMap,n,e)}function un(e,t,n,r){var i=e.state.keySeq;if(i){if(ha(t))return"handled";Zo.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),t=i+" "+t}var o=ln(e,t,r);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&ki(e,"keyHandled",e,t,n),"handled"!=o&&"multi"!=o||(Da(n),Be(e)),i&&!o&&/\'$/.test(t)?(Da(n),!0):!!o}function cn(e,t){var n=pa(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?un(e,"Shift-"+n,t,function(t){return sn(e,t,!0)})||un(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return sn(e,t)}):un(e,n,t,function(t){return sn(e,t)}))}function dn(e,t,n){return un(e,"'"+n+"'",t,function(t){return sn(e,t,!0)})}function fn(e){var t=this;if(t.curOp.focus=Ui(),!Ei(t,e)){bo&&wo<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=cn(t,e);ko&&(Qo=r?n:null,!r&&88==n&&!rs&&(Ro?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||hn(t)}}function hn(e){function t(e){18!=e.keyCode&&e.altKey||(Za(n,"CodeMirror-crosshair"),La(document,"keyup",t),La(document,"mouseover",t))}var n=e.display.lineDiv;Qa(n,"CodeMirror-crosshair"),Ra(document,"keyup",t),Ra(document,"mouseover",t)}function pn(e){16==e.keyCode&&(this.doc.sel.shift=!1),Ei(this,e)}function mn(e){var t=this;if(!(Ut(t.display,e)||Ei(t,e)||e.ctrlKey&&!e.altKey||Ro&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(ko&&n==Qo)return Qo=null,void Da(e);if(!ko||e.which&&!(e.which<10)||!cn(t,e)){dn(t,e,String.fromCharCode(null==r?n:r))||t.display.input.onKeyPress(e)}}}function gn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,yn(e))},100)}function vn(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Ma(e,"focus",e),e.state.focused=!0,Qa(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),Co&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Be(e))}function yn(e){e.state.delayingBlurEvent||(e.state.focused&&(Ma(e,"blur",e),e.state.focused=!1,Za(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function bn(e,t){Ut(e.display,t)||wn(e,t)||Ei(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function wn(e,t){return!!Ni(e,"gutterContextMenu")&&Zt(e,t,"gutterContextMenu",!1)}function Cn(e,t){if(Fo(e,t.from)<0)return e;if(Fo(e,t.to)<=0)return Jo(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Jo(t).ch-t.to.ch),Bo(n,r)}function Sn(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new de(Cn(i.anchor,t),Cn(i.head,t)))}return fe(n,e.sel.primIndex)}function xn(e,t,n){return e.line==t.line?Bo(n.line,e.ch-t.ch+n.ch):Bo(n.line+(e.line-t.line),e.ch)}function kn(e,t,n){for(var r=[],i=Bo(e.first,0),o=i,a=0;a<t.length;a++){var s=t[a],l=xn(s.from,i,o),u=xn(Jo(s),i,o);if(i=s.to,o=u,"around"==n){var c=e.sel.ranges[a],d=Fo(c.head,c.anchor)<0;r[a]=new de(d?u:l,d?l:u)}else r[a]=new de(l,l)}return new ce(r,e.sel.primIndex)}function Tn(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=me(e,t)),n&&(this.to=me(e,n)),r&&(this.text=r),i!==undefined&&(this.origin=i)}),Ma(e,"beforeChange",e,r),e.cm&&Ma(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function En(e,t,n){if(e.cm){if(!e.cm.curOp)return Rt(e.cm,En)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(Ni(e,"beforeChange")||e.cm&&Ni(e.cm,"beforeChange"))||(t=Tn(e,t,!0))){var r=Io&&!n&&lr(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Dn(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text});else Dn(e,t)}}function Dn(e,t){if(1!=t.text.length||""!=t.text[0]||0!=Fo(t.from,t.to)){var n=Sn(e,t);ui(e,t,n,e.cm?e.cm.curOp.id:NaN),Rn(e,t,n,or(e,t));var r=[];Xr(e,function(e,n){n||-1!=Mi(r,e.history)||(bi(e.history,t),r.push(e.history)),Rn(e,t,null,or(e,t))})}}function Nn(e,t,n){if(!e.cm||!e.cm.state.suppressEdits){for(var r,i=e.history,o=e.sel,a="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done,l=0;l<a.length&&(r=a[l],n?!r.ranges||r.equals(e.sel):r.ranges);l++);if(l!=a.length){for(i.lastOrigin=i.lastSelOrigin=null;(r=a.pop()).ranges;){if(fi(r,s),n&&!r.equals(e.sel))return void Ee(e,r,{clearRedo:!1});o=r}var u=[];fi(o,s),s.push({changes:u,generation:i.generation}),i.generation=r.generation||++i.maxGeneration;var c=Ni(e,"beforeChange")||e.cm&&Ni(e.cm,"beforeChange");for(l=r.changes.length-1;l>=0;--l){var d=r.changes[l];if(d.origin=t,c&&!Tn(e,d,!1))return void(a.length=0);u.push(ai(e,d));var f=l?Sn(e,d):Li(a);Rn(e,d,f,sr(e,d)),!l&&e.cm&&e.cm.scrollIntoView({from:d.from,to:Jo(d)});var h=[];Xr(e,function(e,t){t||-1!=Mi(h,e.history)||(bi(e.history,d),h.push(e.history)),Rn(e,d,null,sr(e,d))})}}}}function _n(e,t){if(0!=t&&(e.first+=t,e.sel=new ce(Oi(e.sel.ranges,function(e){return new de(Bo(e.anchor.line+t,e.anchor.ch),Bo(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Pt(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)It(e.cm,r,"gutter")}}function Rn(e,t,n,r){if(e.cm&&!e.cm.curOp)return Rt(e.cm,Rn)(e,t,n,r);if(t.to.line<e.first)_n(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);_n(e,i),t={from:Bo(e.first,0),to:Bo(t.to.line+i,t.to.ch),text:[Li(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:Bo(o,Zr(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Qr(e,t.from,t.to),n||(n=Sn(e,t)),e.cm?An(e.cm,t,r):$r(e,t,r),De(e,n,Ha)}}function An(e,t,n){var r=e.doc,i=e.display,a=t.from,s=t.to,l=!1,u=a.line;e.options.lineWrapping||(u=ti(yr(Zr(r,a.line))),r.iter(u,s.line+1,function(e){if(e==i.maxLine)return l=!0,!0})),r.sel.contains(t.from,t.to)>-1&&Di(e),$r(r,t,n,o(e)),e.options.lineWrapping||(r.iter(u,a.line+t.text.length,function(e){var t=d(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,a.line),Fe(e,400);var c=t.text.length-(s.line-a.line)-1;t.full?Pt(e):a.line!=s.line||1!=t.text.length||Ur(e.doc,t)?Pt(e,a.line,s.line+1,c):It(e,a.line,"text");var f=Ni(e,"changes"),h=Ni(e,"change");if(h||f){var p={from:a,to:s,text:t.text,removed:t.removed,origin:t.origin};h&&ki(e,"change",e,p),f&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}function Ln(e,t,n,r,i){if(r||(r=n),Fo(r,n)<0){var o=r;r=n,n=o}"string"==typeof t&&(t=e.splitLines(t)),En(e,{from:n,to:r,text:t,origin:i})}function Mn(e,t){if(!Ei(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!Do){var o=ji("div","\u200b",null,"position: absolute; top: "+(t.top-n.viewOffset-qe(e.display))+"px; height: "+(t.bottom-t.top+$e(e)+n.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}function On(e,t,n,r){null==r&&(r=0);for(var i=0;i<5;i++){var o=!1,a=ht(e,t),s=n&&n!=t?ht(e,n):a,l=In(e,Math.min(a.left,s.left),Math.min(a.top,s.top)-r,Math.max(a.left,s.left),Math.max(a.bottom,s.bottom)+r),u=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=l.scrollTop&&(rn(e,l.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(o=!0)),null!=l.scrollLeft&&(on(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-c)>1&&(o=!0)),!o)break}return a}function Pn(e,t,n,r,i){var o=In(e,t,n,r,i);null!=o.scrollTop&&rn(e,o.scrollTop),null!=o.scrollLeft&&on(e,o.scrollLeft)}function In(e,t,n,r,i){var o=e.display,a=yt(e.display);n<0&&(n=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,l=Ge(e),u={};i-n>l&&(i=n+l);var c=e.doc.height+Ve(o),d=n<a,f=i>c-a;if(n<s)u.scrollTop=d?0:n;else if(i>s+l){var h=Math.min(n,(f?c:i)-l);h!=s&&(u.scrollTop=h)}var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,m=Ye(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),g=r-t>m;return g&&(r=t+m),t<10?u.scrollLeft=0:t<p?u.scrollLeft=Math.max(0,t-(g?0:10)):r>m+p-3&&(u.scrollLeft=r+(g?0:10)-m),u}function Hn(e,t,n){null==t&&null==n||Fn(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+n)}function Bn(e){Fn(e);var t=e.getCursor(),n=t,r=t;e.options.lineWrapping||(n=t.ch?Bo(t.line,t.ch-1):t,r=Bo(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:r,margin:e.options.cursorScrollMargin,isCursor:!0}}function Fn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=pt(e,t.from),r=pt(e,t.to),i=In(e,Math.min(n.left,r.left),Math.min(n.top,r.top)-t.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function Wn(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=je(e,t):n="prev");var a=e.options.tabSize,s=Zr(o,t),l=Wa(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&((u=o.mode.indent(i,s.text.slice(c.length),s.text))==Ia||u>150)){if(!r)return;n="prev"}}else u=0,n="not";"prev"==n?u=t>o.first?Wa(Zr(o,t-1).text,null,a):0:"add"==n?u=l+e.options.indentUnit:"subtract"==n?u=l-e.options.indentUnit:"number"==typeof n&&(u=l+n),u=Math.max(0,u);var d="",f=0;if(e.options.indentWithTabs)for(var h=Math.floor(u/a);h;--h)f+=a,d+="\t";if(f<u&&(d+=Ai(u-f)),d!=c)return Ln(o,d,Bo(t,0),Bo(t,c.length),"+input"),s.stateAfter=null,!0;for(h=0;h<o.sel.ranges.length;h++){var p=o.sel.ranges[h];if(p.head.line==t&&p.head.ch<c.length){Se(o,h,new de(f=Bo(t,c.length),f));break}}}function zn(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=Zr(e,pe(e,t)):i=ti(t),null==i?null:(r(o,i)&&e.cm&&It(e.cm,i,n),o)}function jn(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&Fo(o.from,Li(r).to)<=0;){var a=r.pop();if(Fo(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}_t(e,function(){for(var t=r.length-1;t>=0;t--)Ln(e.doc,"",r[t].from,r[t].to,"+delete");Bn(e)})}function qn(e,t,n,r,i){function o(){var t=s+n;return!(t<e.first||t>=e.first+e.size)&&(s=t,c=Zr(e,t))}function a(e){var t=(i?fo:ho)(c,l,n,!0);if(null==t){if(e||!o())return!1;l=i?(n<0?io:ro)(c):n<0?c.text.length:0}else l=t;return!0}var s=t.line,l=t.ch,u=n,c=Zr(e,s);if("char"==r)a();else if("column"==r)a(!0);else if("word"==r||"group"==r)for(var d=null,f="group"==r,h=e.cm&&e.cm.getHelper(t,"wordChars"),p=!0;!(n<0)||a(!p);p=!1){var m=c.text.charAt(l)||"\n",g=Fi(m,h)?"w":f&&"\n"==m?"n":!f||/\s/.test(m)?null:"p";if(!f||p||g||(g="s"),d&&d!=g){n<0&&(n=1,a());break}if(g&&(d=g),n>0&&!a(!p))break}var v=Le(e,Bo(s,l),t,u,!0);return Fo(t,v)||(v.hitSide=!0),v}function Vn(e,t,n,r){var i,o=e.doc,a=t.left;if("page"==r){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+n*(s-(n<0?1.5:.5)*yt(e.display))}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;;){var l=gt(e,a,i);if(!l.outside)break;if(n<0?i<=0:i>=o.height){l.hitSide=!0;break}i+=5*n}return l}function Un(t,n,r,i){e.defaults[t]=n,r&&(ta[t]=i?function(e,t,n){n!=na&&r(e,t,n)}:r)}function $n(e){for(var t,n,r,i,o=e.split(/-(?!$)/),a=(e=o[o.length-1],0);a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)$/i.test(s))throw new Error("Unrecognized modifier name: "+s);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Yn(e){return"string"==typeof e?da[e]:e}function Gn(e,t,n,r,i){if(r&&r.shared)return Xn(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Rt(e.cm,Gn)(e,t,n,r,i);var o=new va(e,i),a=Fo(t,n);if(r&&Hi(r,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=ji("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(vr(e,t.line,t,n,o)||t.line!=n.line&&vr(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ho=!0}o.addToHistory&&ui(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var s,l=t.line,u=e.cm;if(e.iter(l,n.line+1,function(e){u&&o.collapsed&&!u.options.lineWrapping&&yr(e)==u.display.maxLine&&(s=!0),o.collapsed&&l!=t.line&&ei(e,0),nr(e,new Jn(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),o.collapsed&&e.iter(t.line,n.line+1,function(t){Sr(e,t)&&ei(t,0)}),o.clearOnEnter&&Ra(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(Io=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++ga,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)Pt(u,t.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var c=t.line;c<=n.line;c++)It(u,c,"text");o.atomic&&_e(u.doc),ki(u,"markerAdded",u,o)}return o}function Xn(e,t,n,r,i){(r=Hi(r)).shared=!1;var o=[Gn(e,t,n,r,i)],a=o[0],s=r.widgetNode;return Xr(e,function(e){s&&(r.widgetNode=s.cloneNode(!0)),o.push(Gn(e,me(e,t),me(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=Li(o)}),new ya(o,a)}function Kn(e){return e.findMarks(Bo(e.first,0),e.clipPos(Bo(e.lastLine())),function(e){return e.parent})}function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(Fo(o,a)){var s=Gn(e,o,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}function Qn(e){for(var t=0;t<e.length;t++){var n=e[t],r=[n.primary.doc];Xr(n.primary.doc,function(e){r.push(e)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==Mi(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}}}function Jn(e,t,n){this.marker=e,this.from=t,this.to=n}function er(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function tr(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function nr(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function rr(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new Jn(a,o.from,s?null:o.to))}}return r}function ir(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new Jn(a,s?null:o.from-t,null==o.to?null:o.to-t))}}return r}function or(e,t){if(t.full)return null;var n=ve(e,t.from.line)&&Zr(e,t.from.line).markedSpans,r=ve(e,t.to.line)&&Zr(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=0==Fo(t.from,t.to),s=rr(n,i,a),l=ir(r,o,a),u=1==t.text.length,c=Li(t.text).length+(u?i:0);if(s)for(var d=0;d<s.length;++d){if(null==(f=s[d]).to){(h=er(l,f.marker))?u&&(f.to=null==h.to?null:h.to+c):f.to=i}}if(l)for(d=0;d<l.length;++d){var f;if(null!=(f=l[d]).to&&(f.to+=c),null==f.from){var h;(h=er(s,f.marker))||(f.from=c,u&&(s||(s=[])).push(f))}else f.from+=c,u&&(s||(s=[])).push(f)}s&&(s=ar(s)),l&&l!=s&&(l=ar(l));var p=[s];if(!u){var m,g=t.text.length-2;if(g>0&&s)for(d=0;d<s.length;++d)null==s[d].to&&(m||(m=[])).push(new Jn(s[d].marker,null,null));for(d=0;d<g;++d)p.push(m);p.push(l)}return p}function ar(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function sr(e,t){var n=mi(e,t),r=or(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],u=0;u<o.length;++u)if(o[u].marker==l.marker)continue e;o.push(l)}else a&&(n[i]=a)}return n}function lr(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=Mi(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(0),l=0;l<i.length;++l){var u=i[l];if(!(Fo(u.to,s.from)<0||Fo(u.from,s.to)>0)){var c=[l,1],d=Fo(u.from,s.from),f=Fo(u.to,s.to);(d<0||!a.inclusiveLeft&&!d)&&c.push({from:u.from,to:s.from}),(f>0||!a.inclusiveRight&&!f)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),l+=c.length-1}}return i}function ur(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function cr(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function dr(e){return e.inclusiveLeft?-1:0}function fr(e){return e.inclusiveRight?1:0}function hr(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=Fo(r.from,i.from)||dr(e)-dr(t);if(o)return-o;var a=Fo(r.to,i.to)||fr(e)-fr(t);return a||t.id-e.id}function pr(e,t){var n,r=Ho&&e.markedSpans;if(r)for(var i,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||hr(n,i.marker)<0)&&(n=i.marker);return n}function mr(e){return pr(e,!0)}function gr(e){return pr(e,!1)}function vr(e,t,n,r,i){var o=Zr(e,t),a=Ho&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var u=l.marker.find(0),c=Fo(u.from,n)||dr(l.marker)-dr(i),d=Fo(u.to,r)||fr(l.marker)-fr(i);if(!(c>=0&&d<=0||c<=0&&d>=0)&&(c<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?Fo(u.to,n)>=0:Fo(u.to,n)>0)||c>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?Fo(u.from,r)<=0:Fo(u.from,r)<0)))return!0}}}function yr(e){for(var t;t=mr(e);)e=t.find(-1,!0).line;return e}function br(e){for(var t,n;t=gr(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function wr(e,t){var n=Zr(e,t),r=yr(n);return n==r?t:ti(r)}function Cr(e,t){if(t>e.lastLine())return t;var n,r=Zr(e,t);if(!Sr(e,r))return t;for(;n=gr(r);)r=n.find(1,!0).line;return ti(r)+1}function Sr(e,t){var n=Ho&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&xr(e,t,r))return!0}}function xr(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return xr(e,r.line,er(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&xr(e,t,i))return!0}function kr(e,t,n){ri(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Hn(e,null,n)}function Tr(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Ga(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),Vi(t.display.measure,ji("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Er(e,t,n,r){var i=new ba(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),zn(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!Sr(e,t)){var r=ri(t)<e.scrollTop;ei(t,t.height+Tr(i)),r&&Hn(o,null,i.height),o.curOp.forceUpdate=!0}return!0}),i}function Dr(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),ur(e),cr(e,n);var i=r?r(e):1;i!=e.height&&ei(e,i)}function Nr(e){e.parent=null,ur(e)}function _r(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function Rr(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var r=e.innerMode(t,n);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function Ar(t,n,r,i){for(var o=0;o<10;o++){i&&(i[0]=e.innerMode(t,r).mode);var a=t.token(n,r);if(n.pos>n.start)return a}throw new Error("Mode "+t.name+" failed to advance stream.")}function Lr(e,t,n,r){function i(e){return{start:d.start,end:d.pos,string:d.current(),type:o||null,state:e?la(a.mode,c):c}}var o,a=e.doc,s=a.mode;t=me(a,t);var l,u=Zr(a,t.line),c=je(e,t.line,n),d=new ma(u.text,e.options.tabSize);for(r&&(l=[]);(r||d.pos<t.ch)&&!d.eol();)d.start=d.pos,o=Ar(s,d,c),r&&l.push(i(!0));return r?l:i()}function Mr(e,t,n,r,i,o,a){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,u=0,c=null,d=new ma(t,e.options.tabSize),f=e.options.addModeClass&&[null];for(""==t&&_r(Rr(n,r),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(s=!1,a&&Ir(e,t,r,d.pos),d.pos=t.length,l=null):l=_r(Ar(n,d,r,f),o),f){var h=f[0].name;h&&(l="m-"+(l?h+" "+l:h))}if(!s||c!=l){for(;u<d.start;)i(u=Math.min(d.start,u+5e4),c);c=l}d.start=d.pos}for(;u<d.pos;){var p=Math.min(d.pos,u+5e4);i(p,c),u=p}}function Or(e,t,n,r){var i=[e.state.modeGen],o={};Mr(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)},o,r);for(var a=0;a<e.state.overlays.length;++a){var s=e.state.overlays[a],l=1,u=0;Mr(e,t.text,s.mode,!0,function(e,t){for(var n=l;u<e;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,u=Math.min(e,r)}if(t)if(s.opaque)i.splice(n,l-n,e,"cm-overlay "+t),l=n+2;else for(;n<l;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function Pr(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=je(e,ti(t)),i=Or(e,t,t.text.length>e.options.maxHighlightLength?la(e.doc.mode,r):r);t.stateAfter=r,t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.frontier&&e.doc.frontier++}return t.styles}function Ir(e,t,n,r){var i=e.doc.mode,o=new ma(t,e.options.tabSize);for(o.start=o.pos=r||0,""==t&&Rr(i,n);!o.eol();)Ar(i,o,n),o.start=o.pos}function Hr(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Sa:Ca;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Br(e,t){var n=ji("span",null,null,Co?"padding-right: .1px":null),r={pre:ji("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,splitSpaces:(bo||Co)&&e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o,a=i?t.rest[i-1]:t.line;r.pos=0,r.addToken=Wr,Qi(e.display.measure)&&(o=ii(a))&&(r.addToken=jr(r.addToken,o)),r.map=[];Vr(a,r,Pr(e,a,t!=e.display.externalMeasured&&ti(a))),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=Yi(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=Yi(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Zi(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(Co){var s=r.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return Ma(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=Yi(r.pre.className,r.textClass||"")),r}function Fr(e){var t=ji("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Wr(e,t,n,r,i,o,a){if(t){var s=e.splitSpaces?t.replace(/ {3,}/g,zr):t,l=e.cm.state.specialChars,u=!1;if(l.test(t)){g=document.createDocumentFragment();for(var c=0;;){l.lastIndex=c;var d=l.exec(t),f=d?d.index-c:t.length-c;if(f){var h=document.createTextNode(s.slice(c,c+f));bo&&wo<9?g.appendChild(ji("span",[h])):g.appendChild(h),e.map.push(e.pos,e.pos+f,h),e.col+=f,e.pos+=f}if(!d)break;if(c+=f+1,"\t"==d[0]){var p=e.cm.options.tabSize,m=p-e.col%p;(h=g.appendChild(ji("span",Ai(m),"cm-tab"))).setAttribute("role","presentation"),h.setAttribute("cm-text","\t"),e.col+=m}else if("\r"==d[0]||"\n"==d[0]){(h=g.appendChild(ji("span","\r"==d[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",d[0]),e.col+=1}else{(h=e.cm.options.specialCharPlaceholder(d[0])).setAttribute("cm-text",d[0]),bo&&wo<9?g.appendChild(ji("span",[h])):g.appendChild(h),e.col+=1}e.map.push(e.pos,e.pos+1,h),e.pos++}}else{e.col+=t.length;var g=document.createTextNode(s);e.map.push(e.pos,e.pos+t.length,g),bo&&wo<9&&(u=!0),e.pos+=t.length}if(n||r||i||u||a){var v=n||"";r&&(v+=r),i&&(v+=i);var y=ji("span",[g],v,a);return o&&(y.title=o),e.content.appendChild(y)}e.content.appendChild(g)}}function zr(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":"\xa0";return t+=" "}function jr(e,t){return function(n,r,i,o,a,s,l){i=i?i+" cm-force-border":"cm-force-border";for(var u=n.pos,c=u+r.length;;){for(var d=0;d<t.length;d++){var f=t[d];if(f.to>u&&f.from<=u)break}if(f.to>=c)return e(n,r,i,o,a,s,l);e(n,r.slice(0,f.to-u),i,o,null,s,l),o=null,r=r.slice(f.to-u),u=f.to}}}function qr(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t}function Vr(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,s,l,u,c,d,f,h=i.length,p=0,m=(T=1,""),g=0;;){if(g==p){l=u=c=d=s="",f=null,g=Infinity;for(var v,y=[],b=0;b<r.length;++b){var w=r[b],C=w.marker;"bookmark"==C.type&&w.from==p&&C.widgetNode?y.push(C):w.from<=p&&(null==w.to||w.to>p||C.collapsed&&w.to==p&&w.from==p)?(null!=w.to&&w.to!=p&&g>w.to&&(g=w.to,u=""),C.className&&(l+=" "+C.className),C.css&&(s=(s?s+";":"")+C.css),C.startStyle&&w.from==p&&(c+=" "+C.startStyle),C.endStyle&&w.to==g&&(v||(v=[])).push(C.endStyle,w.to),C.title&&!d&&(d=C.title),C.collapsed&&(!f||hr(f.marker,C)<0)&&(f=w)):w.from>p&&g>w.from&&(g=w.from)}if(v)for(b=0;b<v.length;b+=2)v[b+1]==g&&(u+=" "+v[b]);if(!f||f.from==p)for(b=0;b<y.length;++b)qr(t,0,y[b]);if(f&&(f.from||0)==p){if(qr(t,(null==f.to?h+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(p>=h)break;for(var S=Math.min(h,g);;){if(m){var x=p+m.length;if(!f){var k=x>S?m.slice(0,S-p):m;t.addToken(t,k,a?a+l:l,c,p+k.length==g?u:"",d,s)}if(x>=S){m=m.slice(S-p),p=S;break}p=x,c=""}m=i.slice(o,o=n[T++]),a=Hr(n[T++],t.cm.options)}}else for(var T=1;T<n.length;T+=2)t.addToken(t,i.slice(o,o=n[T]),Hr(n[T+1],t.cm.options))}function Ur(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Li(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function $r(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){Dr(e,n,i,r),ki(e,"change",e,t)}function a(e,t){for(var n=e,o=[];n<t;++n)o.push(new wa(u[n],i(n),r));return o}var s=t.from,l=t.to,u=t.text,c=Zr(e,s.line),d=Zr(e,l.line),f=Li(u),h=i(u.length-1),p=l.line-s.line;if(t.full)e.insert(0,a(0,u.length)),e.remove(u.length,e.size-u.length);else if(Ur(e,t)){var m=a(0,u.length-1);o(d,d.text,h),p&&e.remove(s.line,p),m.length&&e.insert(s.line,m)}else if(c==d)if(1==u.length)o(c,c.text.slice(0,s.ch)+f+c.text.slice(l.ch),h);else{(m=a(1,u.length-1)).push(new wa(f+c.text.slice(l.ch),h,r)),o(c,c.text.slice(0,s.ch)+u[0],i(0)),e.insert(s.line+1,m)}else if(1==u.length)o(c,c.text.slice(0,s.ch)+u[0]+d.text.slice(l.ch),i(0)),e.remove(s.line+1,p);else{o(c,c.text.slice(0,s.ch)+u[0],i(0)),o(d,f+d.text.slice(l.ch),h);m=a(1,u.length-1);p>1&&e.remove(s.line+1,p-1),e.insert(s.line+1,m)}ki(e,"change",e,t)}function Yr(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function Gr(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}function Xr(e,t,n){function r(e,i,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var s=e.linked[a];if(s.doc!=i){var l=o&&s.sharedHist;n&&!l||(t(s.doc,l),r(s.doc,e,l))}}}r(e,null,!0)}function Kr(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,a(e),n(e),e.options.lineWrapping||f(e),e.options.mode=t.modeOption,Pt(e)}function Zr(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function Qr(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function Jr(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function ei(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function ti(e){if(null==e.parent)return null;for(var t=e.parent,n=Mi(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function ni(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(r=0;r<e.lines.length;++r){var a=e.lines[r].height;if(t<a)break;t-=a}return n+r}function ri(e){for(var t=0,n=(e=yr(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;n=o,o=n.parent)for(r=0;r<o.children.length;++r){var a=o.children[r];if(a==n)break;t+=a.height}return t}function ii(e){var t=e.order;return null==t&&(t=e.order=ss(e.text)),t}function oi(e){this.done=[],this.undone=[],this.undoDepth=Infinity,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function ai(e,t){var n={from:Y(t.from),to:Jo(t),text:Qr(e,t.from,t.to)};return hi(e,n,t.from.line,t.to.line+1),Xr(e,function(e){hi(e,n,t.from.line,t.to.line+1)},!0),n}function si(e){for(;e.length;){if(!Li(e).ranges)break;e.pop()}}function li(e,t){return t?(si(e.done),Li(e.done)):e.done.length&&!Li(e.done).ranges?Li(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Li(e.done)):void 0}function ui(e,t,n,r){var i=e.history;i.undone.length=0;var o,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>a-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=li(i,i.lastOp==r))){var s=Li(o.changes);0==Fo(t.from,t.to)&&0==Fo(t.from,s.to)?s.to=Jo(t):o.changes.push(ai(e,t))}else{var l=Li(i.done);for(l&&l.ranges||fi(e.sel,i.done),o={changes:[ai(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,s||Ma(e,"historyAdded")}function ci(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function di(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||ci(e,o,Li(i.done),t))?i.done[i.done.length-1]=t:fi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&si(i.undone)}function fi(e,t){var n=Li(t);n&&n.ranges&&n.equals(e)||t.push(e)}function hi(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function pi(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function mi(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(pi(n[r]));return i}function gi(e,t,n){for(var r=0,i=[];r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?ce.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];i.push({changes:s});for(var l=0;l<a.length;++l){var u,c=a[l];if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var d in c)(u=d.match(/^spans_(\d+)$/))&&Mi(t,Number(u[1]))>-1&&(Li(s)[d]=c[d],delete c[d])}}}return i}function vi(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function yi(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)vi(o.ranges[s].anchor,t,n,r),vi(o.ranges[s].head,t,n,r)}else{for(s=0;s<o.changes.length;++s){var l=o.changes[s];if(n<l.from.line)l.from=Bo(l.from.line+r,l.from.ch),l.to=Bo(l.to.line+r,l.to.ch);else if(t<=l.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function bi(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;yi(e.done,n,r,i),yi(e.undone,n,r,i)}function wi(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Ci(e){return e.target||e.srcElement}function Si(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Ro&&e.ctrlKey&&1==t&&(t=3),t}function xi(e,t,n){var r=e._handlers&&e._handlers[t];return n?r&&r.length>0?r.slice():Aa:r||Aa}function ki(e,t){function n(e){return function(){e.apply(null,o)}}var r=xi(e,t,!1);if(r.length){var i,o=Array.prototype.slice.call(arguments,2);Uo?i=Uo.delayedCallbacks:Oa?i=Oa:(i=Oa=[],setTimeout(Ti,0));for(var a=0;a<r.length;++a)i.push(n(r[a]))}}function Ti(){var e=Oa;Oa=null;for(var t=0;t<e.length;++t)e[t]()}function Ei(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Ma(e,n||t.type,e,t),wi(t)||t.codemirrorIgnore}function Di(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==Mi(n,t[r])&&n.push(t[r])}function Ni(e,t){return xi(e,t).length>0}function _i(e){e.prototype.on=function(e,t){Ra(this,e,t)},e.prototype.off=function(e,t){La(this,e,t)}}function Ri(){this.id=null}function Ai(e){for(;ja.length<=e;)ja.push(Li(ja)+" ");return ja[e]}function Li(e){return e[e.length-1]}function Mi(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function Oi(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Pi(){}function Ii(e,t){var n;return Object.create?n=Object.create(e):(Pi.prototype=e,n=new Pi),t&&Hi(t,n),n}function Hi(e,t,n){t||(t={});for(var r in e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function Bi(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Fi(e,t){return t?!!(t.source.indexOf("\\w")>-1&&$a(e))||t.test(e):$a(e)}function Wi(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function zi(e){return e.charCodeAt(0)>=768&&Ya.test(e)}function ji(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function qi(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Vi(e,t){return qi(e).appendChild(t)}function Ui(){for(var e=document.activeElement;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}function $i(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function Yi(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!$i(n[r]).test(t)&&(t+=" "+n[r]);return t}function Gi(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}function Xi(){Ja||(Ki(),Ja=!0)}function Ki(){var e;Ra(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Gi(Vt)},100))}),Ra(window,"blur",function(){Gi(yn)})}function Zi(e){if(null==Xa){var t=ji("span","\u200b");Vi(e,ji("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Xa=t.offsetWidth<=1&&t.offsetHeight>2&&!(bo&&wo<8))}var n=Xa?ji("span","\u200b"):ji("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Qi(e){if(null!=Ka)return Ka;var t=Vi(e,document.createTextNode("A\u062eA")),n=Va(t,0,1).getBoundingClientRect();if(!n||n.left==n.right)return!1;var r=Va(t,1,2).getBoundingClientRect();return Ka=r.right-n.right<3}function Ji(e){if(null!=is)return is;var t=Vi(e,ji("span","x")),n=t.getBoundingClientRect(),r=Va(t,0,1).getBoundingClientRect();return is=Math.abs(n.left-r.left)>1}function eo(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr"),i=!0)}i||r(t,n,"ltr")}function to(e){return e.level%2?e.to:e.from}function no(e){return e.level%2?e.from:e.to}function ro(e){var t=ii(e);return t?to(t[0]):0}function io(e){var t=ii(e);return t?no(Li(t)):e.text.length}function oo(e,t){var n=Zr(e.doc,t),r=yr(n);r!=n&&(t=ti(r));var i=ii(r),o=i?i[0].level%2?io(r):ro(r):0;return Bo(t,o)}function ao(e,t){for(var n,r=Zr(e.doc,t);n=gr(r);)r=n.find(1,!0).line,t=null;var i=ii(r),o=i?i[0].level%2?ro(r):io(r):r.text.length;return Bo(null==t?ti(r):t,o)}function so(e,t){var n=oo(e,t.line),r=Zr(e.doc,n.line),i=ii(r);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return Bo(n.line,a?0:o)}return n}function lo(e,t,n){var r=e[0].level;return t==r||n!=r&&t<n}function uo(e,t){as=null;for(var n,r=0;r<e.length;++r){var i=e[r];if(i.from<t&&i.to>t)return r;if(i.from==t||i.to==t){if(null!=n)return lo(e,i.level,e[n].level)?(i.from!=i.to&&(as=n),r):(i.from!=i.to&&(as=r),n);n=r}}return n}function co(e,t,n,r){if(!r)return t+n;do{t+=n}while(t>0&&zi(e.text.charAt(t)));return t}function fo(e,t,n,r){var i=ii(e);if(!i)return ho(e,t,n,r);for(var o=uo(i,t),a=i[o],s=co(e,t,a.level%2?-n:n,r);;){if(s>a.from&&s<a.to)return s;if(s==a.from||s==a.to)return uo(i,s)==o?s:(a=i[o+=n],n>0==a.level%2?a.to:a.from);if(!(a=i[o+=n]))return null;s=n>0==a.level%2?co(e,a.to,-1,r):co(e,a.from,1,r)}}function ho(e,t,n,r){var i=t+n;if(r)for(;i>0&&zi(e.text.charAt(i));)i+=n;return i<0||i>e.text.length?null:i}var po=navigator.userAgent,mo=navigator.platform,go=/gecko\/\d/i.test(po),vo=/MSIE \d/.test(po),yo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(po),bo=vo||yo,wo=bo&&(vo?document.documentMode||6:yo[1]),Co=/WebKit\//.test(po),So=Co&&/Qt\/\d+\.\d+/.test(po),xo=/Chrome\//.test(po),ko=/Opera\//.test(po),To=/Apple Computer/.test(navigator.vendor),Eo=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(po),Do=/PhantomJS/.test(po),No=/AppleWebKit/.test(po)&&/Mobile\/\w+/.test(po),_o=No||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(po),Ro=No||/Mac/.test(mo),Ao=/\bCrOS\b/.test(po),Lo=/win/i.test(mo),Mo=ko&&po.match(/Version\/(\d*\.\d*)/);Mo&&(Mo=Number(Mo[1])),Mo&&Mo>=15&&(ko=!1,Co=!0);var Oo=Ro&&(So||ko&&(null==Mo||Mo<12.11)),Po=go||bo&&wo>=9,Io=!1,Ho=!1;m.prototype=Hi({update:function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+o+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var e=Ro&&!Eo?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ri,this.disableVert=new Ri},enableZeroWidthBar:function(e,t){function n(){var r=e.getBoundingClientRect();document.elementFromPoint(r.left+1,r.bottom-1)!=e?e.style.pointerEvents="none":t.set(1e3,n)}e.style.pointerEvents="auto",t.set(1e3,n)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},m.prototype),g.prototype=Hi({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},g.prototype),e.scrollbarModel={"native":m,"null":g},T.prototype.signal=function(e,t){Ni(e,t)&&this.events.push(arguments)},T.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Ma.apply(null,this.events[e])};var Bo=e.Pos=function(e,t){if(!(this instanceof Bo))return new Bo(e,t);this.line=e,this.ch=t},Fo=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch},Wo=null;ne.prototype=Hi({init:function(e){function t(e){if(!Ei(r,e)){if(r.somethingSelected())Wo={lineWise:!1,text:r.getSelections()},n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,o.value=Wo.text.join("\n"),qa(o));else{if(!r.options.lineWiseCopyCut)return;var t=ee(r);Wo={lineWise:!0,text:t.text},"cut"==e.type?r.setSelections(t.ranges,null,Ha):(n.prevInput="",o.value=t.text.join("\n"),qa(o))}"cut"==e.type&&(r.state.cutIncoming=!0)}}var n=this,r=this.cm,i=this.wrapper=re(),o=this.textarea=i.firstChild;e.wrapper.insertBefore(i,e.wrapper.firstChild),No&&(o.style.width="0px"),Ra(o,"input",function(){bo&&wo>=9&&n.hasSelection&&(n.hasSelection=null),n.poll()}),Ra(o,"paste",function(e){Ei(r,e)||Q(e,r)||(r.state.pasteIncoming=!0,n.fastPoll())}),Ra(o,"cut",t),Ra(o,"copy",t),Ra(e.scroller,"paste",function(t){Ut(e,t)||Ei(r,t)||(r.state.pasteIncoming=!0,n.focus())}),Ra(e.lineSpace,"selectstart",function(t){Ut(e,t)||Da(t)}),Ra(o,"compositionstart",function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),Ra(o,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},prepareSelection:function(){var e=this.cm,t=e.display,n=e.doc,r=Pe(e);if(e.options.moveInputWithCursor){var i=ht(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-o.left))}return r},showSelection:function(e){var t=this.cm.display;Vi(t.cursorDiv,e.cursors),Vi(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,n,r=this.cm,i=r.doc;if(r.somethingSelected()){this.prevInput="";var o=i.sel.primary(),a=(t=rs&&(o.to().line-o.from().line>100||(n=r.getSelection()).length>1e3))?"-":n||r.getSelection();this.textarea.value=a,r.state.focused&&qa(this.textarea),bo&&wo>=9&&(this.hasSelection=a)}else e||(this.prevInput=this.textarea.value="",bo&&wo>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!_o||Ui()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){function e(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))}var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,e)},poll:function(){var e=this.cm,t=this.textarea,n=this.prevInput;if(this.contextMenuPending||!e.state.focused||ns(t)&&!n&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var r=t.value;if(r==n&&!e.somethingSelected())return!1;if(bo&&wo>=9&&this.hasSelection===r||Ro&&/[\uf700-\uf7ff]/.test(r))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var i=r.charCodeAt(0);if(8203!=i||n||(n="\u200b"),8666==i)return this.reset(),this.cm.execCommand("undo")}for(var o=0,a=Math.min(n.length,r.length);o<a&&n.charCodeAt(o)==r.charCodeAt(o);)++o;var s=this;return _t(e,function(){Z(e,r.slice(o),n.length-o,null,s.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?t.value=s.prevInput="":s.prevInput=r,s.composing&&(s.composing.range.clear(),s.composing.range=e.markText(s.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){bo&&wo>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){function t(){if(null!=a.selectionStart){var e=i.somethingSelected(),t="\u200b"+(e?a.value:"");a.value="\u21da",a.value=t,r.prevInput=e?"":"\u200b",a.selectionStart=1,a.selectionEnd=t.length,o.selForContextMenu=i.doc.sel}}function n(){if(r.contextMenuPending=!1,r.wrapper.style.cssText=c,a.style.cssText=u,bo&&wo<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=l),null!=a.selectionStart){(!bo||bo&&wo<9)&&t();var e=0,n=function(){o.selForContextMenu==i.doc.sel&&0==a.selectionStart&&a.selectionEnd>0&&"\u200b"==r.prevInput?Rt(i,ca.selectAll)(i):e++<10?o.detectingSelectAll=setTimeout(n,500):o.input.reset()};o.detectingSelectAll=setTimeout(n,200)}}var r=this,i=r.cm,o=i.display,a=r.textarea,s=$t(i,e),l=o.scroller.scrollTop;if(s&&!ko){i.options.resetSelectionOnContextMenu&&-1==i.doc.sel.contains(s)&&Rt(i,Ee)(i.doc,he(s),Ha);var u=a.style.cssText,c=r.wrapper.style.cssText;r.wrapper.style.cssText="position: absolute";var d=r.wrapper.getBoundingClientRect();if(a.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(e.clientY-d.top-5)+"px; left: "+(e.clientX-d.left-5)+"px; z-index: 1000; background: "+(bo?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Co)var f=window.scrollY;if(o.input.focus(),Co&&window.scrollTo(null,f),o.input.reset(),i.somethingSelected()||(a.value=r.prevInput=" "),r.contextMenuPending=!0,o.selForContextMenu=i.doc.sel,clearTimeout(o.detectingSelectAll),bo&&wo>=9&&t(),Po){_a(e);var h=function(){La(window,"mouseup",h),setTimeout(n,20)};Ra(window,"mouseup",h)}else setTimeout(n,50)}},readOnlyChanged:function(e){e||this.reset()},setUneditable:Pi,needsContentAttribute:!1},ne.prototype),ie.prototype=Hi({init:function(e){function t(e){if(!Ei(r,e)){if(r.somethingSelected())Wo={lineWise:!1,text:r.getSelections()},"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=ee(r);Wo={lineWise:!0,text:t.text},"cut"==e.type&&r.operation(function(){r.setSelections(t.ranges,0,Ha),r.replaceSelection("",null,"cut")})}if(e.clipboardData&&!No)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",Wo.text.join("\n"));else{var n=re(),i=n.firstChild;r.display.lineSpace.insertBefore(n,r.display.lineSpace.firstChild),i.value=Wo.text.join("\n");var o=document.activeElement;qa(i),setTimeout(function(){r.display.lineSpace.removeChild(n),o.focus()},50)}}}var n=this,r=n.cm,i=n.div=e.lineDiv;te(i),Ra(i,"paste",function(e){Ei(r,e)||Q(e,r)}),Ra(i,"compositionstart",function(e){var t=e.data;if(n.composing={sel:r.doc.sel,data:t,startData:t},t){var i=r.doc.sel.primary(),o=r.getLine(i.head.line).indexOf(t,Math.max(0,i.head.ch-t.length));o>-1&&o<=i.head.ch&&(n.composing.sel=he(Bo(i.head.line,o),Bo(i.head.line,o+t.length)))}}),Ra(i,"compositionupdate",function(e){n.composing.data=e.data}),Ra(i,"compositionend",function(e){var t=n.composing;t&&(e.data==t.startData||/\u200b/.test(e.data)||(t.data=e.data),setTimeout(function(){t.handled||n.applyComposition(t),n.composing==t&&(n.composing=null)},50))}),Ra(i,"touchstart",function(){n.forceCompositionEnd()}),Ra(i,"input",function(){n.composing||!r.isReadOnly()&&n.pollContent()||_t(n.cm,function(){Pt(r)})}),Ra(i,"copy",t),Ra(i,"cut",t)},prepareSelection:function(){var e=Pe(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),n=se(this.cm,e.anchorNode,e.anchorOffset),r=se(this.cm,e.focusNode,e.focusOffset);if(!n||n.bad||!r||r.bad||0!=Fo(X(n,r),t.from())||0!=Fo(G(n,r),t.to())){var i=oe(this.cm,t.from()),o=oe(this.cm,t.to());if(i||o){var a=this.cm.display.view,s=e.rangeCount&&e.getRangeAt(0);if(i){if(!o){var l=a[a.length-1].measure,u=l.maps?l.maps[l.maps.length-1]:l.map;o={node:u[u.length-1],offset:u[u.length-2]-u[u.length-3]}}}else i={node:a[0].measure.map[2],offset:0};try{var c=Va(i.node,i.offset,o.offset,o.node)}catch(d){}c&&(!go&&this.cm.state.focused?(e.collapse(i.node,i.offset),c.collapsed||e.addRange(c)):(e.removeAllRanges(),e.addRange(c)),s&&null==e.anchorNode?e.addRange(s):go&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){Vi(this.cm.display.cursorDiv,e.cursors),Vi(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Ga(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():_t(this.cm,function(){t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var n=se(t,e.anchorNode,e.anchorOffset),r=se(t,e.focusNode,e.focusOffset);n&&r&&_t(t,function(){Ee(t.doc,he(n,r),Ha),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e=this.cm,t=e.display,n=e.doc.sel.primary(),r=n.from(),i=n.to();if(r.line<t.viewFrom||i.line>t.viewTo-1)return!1;var o;if(r.line==t.viewFrom||0==(o=Bt(e,r.line)))var a=ti(t.view[0].line),s=t.view[0].node;else a=ti(t.view[o].line),s=t.view[o-1].node.nextSibling;var l=Bt(e,i.line);if(l==t.view.length-1)var u=t.viewTo-1,c=t.lineDiv.lastChild;else u=ti(t.view[l+1].line)-1,c=t.view[l+1].node.previousSibling;for(var d=e.doc.splitLines(ue(e,s,c,a,u)),f=Qr(e.doc,Bo(a,0),Bo(u,Zr(e.doc,u).text.length));d.length>1&&f.length>1;)if(Li(d)==Li(f))d.pop(),f.pop(),u--;else{if(d[0]!=f[0])break;d.shift(),f.shift(),a++}for(var h=0,p=0,m=d[0],g=f[0],v=Math.min(m.length,g.length);h<v&&m.charCodeAt(h)==g.charCodeAt(h);)++h;for(var y=Li(d),b=Li(f),w=Math.min(y.length-(1==d.length?h:0),b.length-(1==f.length?h:0));p<w&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;d[d.length-1]=y.slice(0,y.length-p),d[0]=d[0].slice(h);var C=Bo(a,h),S=Bo(u,f.length?Li(f).length-p:0);return d.length>1||d[0]||Fo(C,S)?(Ln(e.doc,d,C,S,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){this.cm.isReadOnly()?Rt(this.cm,Pt)(this.cm):e.data&&e.data!=e.startData&&Rt(this.cm,Z)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),this.cm.isReadOnly()||Rt(this.cm,Z)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},readOnlyChanged:function(e){this.div.contentEditable=String("nocursor"!=e)},onContextMenu:Pi,resetPosition:Pi,needsContentAttribute:!0},ie.prototype),e.inputStyles={textarea:ne,contenteditable:ie},ce.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(0!=Fo(n.anchor,r.anchor)||0!=Fo(n.head,r.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new de(Y(this.ranges[t].anchor),Y(this.ranges[t].head));return new ce(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(Fo(t,r.from())>=0&&Fo(e,r.to())<=0)return n}return-1}},de.prototype={from:function(){return X(this.anchor,this.head)},to:function(){return G(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var zo,jo,qo,Vo={left:0,right:0,top:0,bottom:0},Uo=null,$o=0,Yo=0,Go=0,Xo=null;bo?Xo=-.53:go?Xo=15:xo?Xo=-.7:To&&(Xo=-1/3);var Ko=function(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}};e.wheelEventPixels=function(e){var t=Ko(e);return t.x*=Xo,t.y*=Xo,t};var Zo=new Ri,Qo=null,Jo=e.changeEnd=function(e){return e.text?Bo(e.from.line+e.text.length-1,Li(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var n=this.options,r=n[e];n[e]==t&&"mode"!=e||(n[e]=t,ta.hasOwnProperty(e)&&Rt(this,ta[e])(this,t,r))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Yn(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:At(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,Pt(this)}),removeOverlay:At(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void Pt(this)}}),indentLine:At(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ve(this.doc,e)&&Wn(this,e,t,n)}),indentSelection:At(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(Wn(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Bn(this));else{var o=i.from(),a=i.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=s;l<n;++l)Wn(this,l,e);var u=this.doc.sel.ranges;0==o.ch&&t.length==u.length&&u[r].from().ch>0&&Se(this.doc,r,new de(o,u[r].to()),Ha)}}}),getTokenAt:function(e,t){return Lr(this,e,t)},getLineTokens:function(e,t){return Lr(this,Bo(e),t,!0)},getTokenTypeAt:function(e){e=me(this.doc,e);var t,n=Pr(this,Zr(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}r=a+1}}var s=t?t.indexOf("cm-overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!sa.hasOwnProperty(t))return n;var r=sa[t],i=this.getModeAt(e);if("string"==typeof i[t])r[i[t]]&&n.push(r[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var a=r[i[t][o]];a&&n.push(a)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(o=0;o<r._global.length;o++){var s=r._global[o];s.pred(i,this)&&-1==Mi(n,s.val)&&n.push(s.val)}return n},getStateAfter:function(e,t){var n=this.doc;return e=pe(n,null==e?n.first+n.size-1:e),je(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel.primary();return n=null==e?r.head:"object"==typeof e?me(this.doc,e):e?r.from():r.to(),ht(this,n,t||"page")},charCoords:function(e,t){return ft(this,me(this.doc,e),t||"page")},coordsChar:function(e,t){return e=dt(this,e,t||"page"),gt(this,e.left,e.top)},lineAtHeight:function(e,t){return e=dt(this,{top:e,left:0},t||"page").top,ni(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n,r=!1;if("number"==typeof e){var i=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>i&&(e=i,r=!0),n=Zr(this.doc,e)}else n=e;return ct(this,n,{top:0,left:0},t||"page").top+(r?this.doc.height-ri(n):0)},defaultTextHeight:function(){return yt(this.display)},defaultCharWidth:function(){return bt(this.display)},setGutterMarker:At(function(e,t,n){return zn(this.doc,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&Wi(r)&&(e.gutterMarkers=null),!0})}),clearGutter:At(function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,It(t,r,"gutter"),Wi(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),lineInfo:function(e){if("number"==typeof e){if(!ve(this.doc,e))return null;var t=e;if(!(e=Zr(this.doc,e)))return null}else{if(null==(t=ti(e)))return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o=this.display,a=(e=ht(this,me(this.doc,e))).bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var l=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom),s+t.offsetWidth>u&&(s=u-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&Pn(this,s,a,s+t.offsetWidth,a+t.offsetHeight)},triggerOnKeyDown:At(fn),triggerOnKeyPress:At(mn),triggerOnKeyUp:pn,execCommand:function(e){if(ca.hasOwnProperty(e))return ca[e].call(null,this)},triggerElectric:At(function(e){J(this,e)}),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var o=0,a=me(this.doc,e);o<t&&!(a=qn(this.doc,a,i,n,r)).hitSide;++o);return a},moveH:At(function(e,t){var n=this;n.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?qn(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},Fa)}),deleteH:At(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):jn(this,function(n){var i=qn(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,o=r;t<0&&(i=-1,t=-t);for(var a=0,s=me(this.doc,e);a<t;++a){var l=ht(this,s,"div");if(null==o?o=l.left:l.left=o,(s=Vn(this,l,i,n)).hitSide)break}return s},moveV:At(function(e,t){var n=this,r=this.doc,i=[],o=!n.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(o)return e<0?a.from():a.to();var s=ht(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var l=Vn(n,s,e,t);return"page"==t&&a==r.sel.primary()&&Hn(n,null,ft(n,l,"div").top-s.top),l},Fa),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),findWordAt:function(e){var t=Zr(this.doc,e.line).text,n=e.ch,r=e.ch;if(t){var i=this.getHelper(e,"wordChars");(e.xRel<0||r==t.length)&&n?--n:++r;for(var o=t.charAt(n),a=Fi(o,i)?function(e){return Fi(e,i)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Fi(e)};n>0&&a(t.charAt(n-1));)--n;for(;r<t.length&&a(t.charAt(r));)++r}return new de(Bo(e.line,n),Bo(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Qa(this.display.cursorDiv,"CodeMirror-overwrite"):Za(this.display.cursorDiv,"CodeMirror-overwrite"),Ma(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Ui()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:At(function(e,t){null==e&&null==t||Fn(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-$e(this)-this.display.barHeight,width:e.scrollWidth-$e(this)-this.display.barWidth,clientHeight:Ge(this),clientWidth:Ye(this)}},scrollIntoView:At(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:Bo(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)Fn(this),this.curOp.scrollToPos=e;else{var n=In(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:At(function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var r=this;null!=e&&(r.display.wrapper.style.width=n(e)),null!=t&&(r.display.wrapper.style.height=n(t)),r.options.lineWrapping&&at(this);var i=r.display.viewFrom;r.doc.iter(i,r.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){It(r,i,"widget");break}++i}),r.curOp.forceUpdate=!0,Ma(r,"refresh",this)}),operation:function(e){return _t(this,e)},refresh:At(function(){var e=this.display.cachedTextHeight;Pt(this),this.curOp.forceUpdate=!0,st(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),c(this),(null==e||Math.abs(e-yt(this.display))>.5)&&a(this),Ma(this,"refresh",this)}),swapDoc:At(function(e){var t=this.doc;return t.cm=null,Kr(this,e),st(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ki(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},_i(e);var ea=e.defaults={},ta=e.optionHandlers={},na=e.Init={toString:function(){return"CodeMirror.Init"}};Un("value","",function(e,t){e.setValue(t)},!0),Un("mode",null,function(e,t){e.doc.modeOption=t,n(e)},!0),Un("indentUnit",2,n,!0),Un("indentWithTabs",!1),Un("smartIndent",!0),Un("tabSize",4,function(e){r(e),st(e),Pt(e)},!0),Un("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,n.push(Bo(r,o))}r++});for(var i=n.length-1;i>=0;i--)Ln(e.doc,t,n[i],Bo(n[i].line,n[i].ch+t.length))}}),Un("specialChars",/[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,n,r){t.state.specialChars=new RegExp(n.source+(n.test("\t")?"":"|\t"),"g"),r!=e.Init&&t.refresh()}),Un("specialCharPlaceholder",Fr,function(e){e.refresh()},!0),Un("electricChars",!0),Un("inputStyle",_o?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),Un("rtlMoveVisually",!Lo),Un("wholeLineUpdateBefore",!0),Un("theme","default",function(e){s(e),l(e)},!0),Un("keyMap","default",function(t,n,r){var i=Yn(n),o=r!=e.Init&&Yn(r);o&&o.detach&&o.detach(t,i),i.attach&&i.attach(t,o||null)}),Un("extraKeys",null),Un("lineWrapping",!1,i,!0),Un("gutters",[],function(e){h(e.options),l(e)},!0),Un("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?k(e.display)+"px":"0",e.refresh()},!0),Un("coverGutterNextToScrollbar",!1,function(e){y(e)},!0),Un("scrollbarStyle","native",function(e){v(e),y(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),Un("lineNumbers",!1,function(e){h(e.options),l(e)},!0),Un("firstLineNumber",1,l,!0),Un("lineNumberFormatter",function(e){return e},l,!0),Un("showCursorWhenSelecting",!1,Oe,!0),Un("resetSelectionOnContextMenu",!0),Un("lineWiseCopyCut",!0),Un("readOnly",!1,function(e,t){"nocursor"==t?(yn(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)}),Un("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),Un("dragDrop",!0,qt),Un("allowDropFileTypes",null),Un("cursorBlinkRate",530),Un("cursorScrollMargin",0),Un("cursorHeight",1,Oe,!0),Un("singleCursorHeightPerLine",!0,Oe,!0),Un("workTime",100),Un("workDelay",100),Un("flattenSpans",!0,r,!0),Un("addModeClass",!1,r,!0),Un("pollInterval",100),Un("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Un("historyEventDelay",1250),Un("viewportMargin",10,function(e){e.refresh()},!0),Un("maxHighlightLength",1e4,r,!0),Un("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),Un("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),Un("autofocus",null);var ra=e.modes={},ia=e.mimeModes={};e.defineMode=function(t,n){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),ra[t]=n},e.defineMIME=function(e,t){ia[e]=t},e.resolveMode=function(t){if("string"==typeof t&&ia.hasOwnProperty(t))t=ia[t];else if(t&&"string"==typeof t.name&&ia.hasOwnProperty(t.name)){var n=ia[t.name];"string"==typeof n&&(n={name:n}),(t=Ii(n,t)).name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){n=e.resolveMode(n);var r=ra[n.name];if(!r)return e.getMode(t,"text/plain");var i=r(t,n);if(oa.hasOwnProperty(n.name)){var o=oa[n.name];for(var a in o)o.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=o[a])}if(i.name=n.name,n.helperType&&(i.helperType=n.helperType),n.modeProps)for(var a in n.modeProps)i[a]=n.modeProps[a];return i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var oa=e.modeExtensions={};e.extendMode=function(e,t){Hi(t,oa.hasOwnProperty(e)?oa[e]:oa[e]={})},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){ka.prototype[e]=t},e.defineOption=Un;var aa=[];e.defineInitHook=function(e){aa.push(e)};var sa=e.helpers={};e.registerHelper=function(t,n,r){sa.hasOwnProperty(t)||(sa[t]=e[t]={_global:[]}),sa[t][n]=r},e.registerGlobalHelper=function(t,n,r,i){e.registerHelper(t,n,i),sa[t]._global.push({pred:r,val:i})};var la=e.copyState=function(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n},ua=e.startState=function(e,t,n){return!e.startState||e.startState(t,n)};e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var ca=e.commands={selectAll:function(e){e.setSelection(Bo(e.firstLine(),0),Bo(e.lastLine()),Ha)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Ha)},killLine:function(e){jn(e,function(t){if(t.empty()){var n=Zr(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:Bo(t.head.line+1,0)}:{from:t.head,to:Bo(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){jn(e,function(t){return{from:Bo(t.from().line,0),to:me(e.doc,Bo(t.to().line+1,0))}})},delLineLeft:function(e){jn(e,function(e){return{from:Bo(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){jn(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){jn(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(Bo(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Bo(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return oo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return so(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return ao(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},Fa)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},Fa)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?so(e,t.head):r},Fa)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=Wa(e.getLine(o.line),o.ch,r);t.push(Ai(r-a%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){_t(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var i=t[r].head,o=Zr(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new Bo(i.line,i.ch-1)),i.ch>0)i=new Bo(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),Bo(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=Zr(e.doc,i.line-1).text;a&&e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),Bo(i.line-1,a.length-1),Bo(i.line,1),"+transpose")}n.push(new de(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){_t(e,function(){for(var t=e.listSelections().length,n=0;n<t;n++){var r=e.listSelections()[n];e.replaceRange(e.doc.lineSeparator(),r.anchor,r.head,"+input"),e.indentLine(r.from().line+1,null,!0)}Bn(e)})},openLine:function(e){e.replaceSelection("\n","start")},toggleOverwrite:function(e){e.toggleOverwrite()}},da=e.keyMap={};da.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},da.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},da.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},da.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},da["default"]=Ro?da.macDefault:da.pcDefault,e.normalizeKeyMap=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=Oi(n.split(" "),$n),o=0;o<i.length;o++){var a,s;o==i.length-1?(s=i.join(" "),a=r):(s=i.slice(0,o+1).join(" "),a="...");var l=t[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[n]}for(var u in t)e[u]=t[u];return e};var fa=e.lookupKey=function(e,t,n,r){var i=(t=Yn(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return fa(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var a=fa(e,t.fallthrough[o],n,r);if(a)return a}}},ha=e.isModifierKey=function(e){var t="string"==typeof e?e:os[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},pa=e.keyName=function(e,t){if(ko&&34==e.keyCode&&e["char"])return!1;var n=os[e.keyCode],r=n;return null!=r&&!e.altGraphKey&&(e.altKey&&"Alt"!=n&&(r="Alt-"+r),(Oo?e.metaKey:e.ctrlKey)&&"Ctrl"!=n&&(r="Ctrl-"+r),(Oo?e.ctrlKey:e.metaKey)&&"Cmd"!=n&&(r="Cmd-"+r),!t&&e.shiftKey&&"Shift"!=n&&(r="Shift-"+r),r)};e.fromTextArea=function(t,n){function r(){t.value=l.getValue()}if(n=n?Hi(n):{},n.value=t.value,!n.tabindex&&t.tabIndex&&(n.tabindex=t.tabIndex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var i=Ui();n.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(Ra(t.form,"submit",r),!n.leaveSubmitMethodAlone)){var o=t.form,a=o.submit;try{var s=o.submit=function(){r(),o.submit=a,o.submit(),o.submit=s}}catch(u){}}n.finishInit=function(e){e.save=r,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,r(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(La(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=a))}},t.style.display="none";var l=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return l};var ma=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};ma.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Wa(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Wa(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Wa(this.string,null,this.tabSize)-(this.lineStart?Wa(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var ga=0,va=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ga};_i(va),va.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&wt(e),Ni(this,"clear")){var n=this.find();n&&ki(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=er(a.markedSpans,this);e&&!this.collapsed?It(e,ti(a),"text"):e&&(null!=s.to&&(i=ti(a)),null!=s.from&&(r=ti(a))),a.markedSpans=tr(a.markedSpans,s),null==s.from&&this.collapsed&&!Sr(this.doc,a)&&e&&ei(a,yt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(o=0;o<this.lines.length;++o){var l=yr(this.lines[o]),u=d(l);u>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&Pt(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&_e(e.doc)),e&&ki(e,"markerCleared",e,this),t&&St(e),this.parent&&this.parent.clear()}},va.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var o=this.lines[i],a=er(o.markedSpans,this);if(null!=a.from&&(n=Bo(t?o:ti(o),a.from),-1==e))return n;if(null!=a.to&&(r=Bo(t?o:ti(o),a.to),1==e))return r}return n&&{from:n,to:r}},va.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&_t(n,function(){var r=e.line,i=ti(e.line),o=Je(n,i);if(o&&(ot(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!Sr(t.doc,r)&&null!=t.height){var a=t.height;t.height=null;var s=Tr(t)-a;s&&ei(r,r.height+s)}})},va.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Mi(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},va.prototype.detachLine=function(e){if(this.lines.splice(Mi(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};ga=0;var ya=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};_i(ya),ya.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ki(this,"clear")}},ya.prototype.find=function(e,t){return this.primary.find(e,t)};var ba=e.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};_i(ba),ba.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=ti(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=Tr(this);ei(n,Math.max(0,n.height-o)),e&&_t(e,function(){kr(e,n,-o),It(e,r,"widget")})}},ba.prototype.changed=function(){var e=this.height,t=this.doc.cm,n=this.line;this.height=null;var r=Tr(this)-e;r&&(ei(n,n.height+r),t&&_t(t,function(){t.curOp.forceUpdate=!0,kr(t,n,r)}))};var wa=e.Line=function(e,t,n){this.text=e,cr(this,t),this.height=n?n(this):1};_i(wa),wa.prototype.lineNo=function(){return ti(this)};var Ca={},Sa={};Yr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Nr(i),ki(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},Gr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Yr))){var s=[];this.collapse(s),this.children=[new Yr(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,s=a;s<i.lines.length;){var l=new Yr(i.lines.slice(s,s+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new Gr(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=Mi(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var r=new Gr(e.children);r.parent=e,e.children=[r,t],e=r}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var xa=0,ka=e.Doc=function(e,t,n,r){if(!(this instanceof ka))return new ka(e,t,n,r);null==n&&(n=0),Gr.call(this,[new Yr([new wa("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var i=Bo(n,0);this.sel=he(i),this.history=new oi(null),this.id=++xa,this.modeOption=t,this.lineSep=r,this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),$r(this,{from:i,to:i,text:e}),Ee(this,he(i),Ha)};ka.prototype=Ii(Gr.prototype,{constructor:ka,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Jr(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Lt(function(e){var t=Bo(this.first,0),n=this.first+this.size-1;En(this,{from:t,to:Bo(n,Zr(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),Ee(this,he(t))}),replaceRange:function(e,t,n,r){Ln(this,e,t=me(this,t),n=n?me(this,n):t,r)},getRange:function(e,t,n){var r=Qr(this,me(this,e),me(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(ve(this,e))return Zr(this,e)},getLineNumber:function(e){return ti(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Zr(this,e)),yr(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return me(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Lt(function(e,t,n){xe(this,me(this,"number"==typeof e?Bo(e,t||0):e),null,n)}),setSelection:Lt(function(e,t,n){xe(this,me(this,e),me(this,t||e),n)}),extendSelection:Lt(function(e,t,n){we(this,me(this,e),t&&me(this,t),n)}),extendSelections:Lt(function(e,t){Ce(this,ye(this,e),t)}),extendSelectionsBy:Lt(function(e,t){Ce(this,ye(this,Oi(this.sel.ranges,e)),t)}),setSelections:Lt(function(e,t,n){if(e.length){for(var r=0,i=[];r<e.length;r++)i[r]=new de(me(this,e[r].anchor),me(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Ee(this,fe(i,t),n)}}),addSelection:Lt(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new de(me(this,e),me(this,t||e))),Ee(this,fe(r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=Qr(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=Qr(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:Lt(function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:n}}var s=t&&"end"!=t&&kn(this,r,t);for(o=r.length-1;o>=0;o--)En(this,r[o]);s?Te(this,s):this.cm&&Bn(this.cm)}),undo:Lt(function(){Nn(this,"undo")}),redo:Lt(function(){Nn(this,"redo")}),undoSelection:Lt(function(){Nn(this,"undo",!0)}),redoSelection:Lt(function(){Nn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new oi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:gi(this.history.done),undone:gi(this.history.undone)}},setHistory:function(e){var t=this.history=new oi(this.history.maxGeneration);t.done=gi(e.done.slice(0),null,!0),t.undone=gi(e.undone.slice(0),null,!0)},addLineClass:Lt(function(e,t,n){return zn(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if($i(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:Lt(function(e,t,n){return zn(this,e,"gutter"==t?"gutter":"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match($i(n));if(!o)return!1;var a=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:Lt(function(e,t,n){return Er(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Gn(this,me(this,e),me(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=me(this,e),Gn(this,e,e,n,"bookmark")},findMarksAt:function(e){var t=[],n=Zr(this,(e=me(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=me(this,e),t=me(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+r;if(o>e)return t=e,!0;e-=o,++n}),me(this,Bo(n,t))},indexFromPos:function(e){var t=(e=me(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new ka(Jr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new ka(Jr(this,t,n),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Zn(r,Kn(this)),r},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){if(this.linked[n].doc==t){this.linked.splice(n,1),t.unlinkDoc(this),Qn(Kn(this));break}}if(t.history==this.history){var r=[t.id];Xr(t,function(e){r.push(e.id)},!0),t.history=new oi(null),t.history.done=gi(this.history.done,r),t.history.undone=gi(this.history.undone,r)}},iterLinkedDocs:function(e){Xr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):ts(e)},lineSeparator:function(){return this.lineSep||"\n"}}),ka.prototype.eachLine=ka.prototype.iter;var Ta="iter insert remove copy getEditor constructor".split(" ");for(var Ea in ka.prototype)ka.prototype.hasOwnProperty(Ea)&&Mi(Ta,Ea)<0&&(e.prototype[Ea]=function(e){return function(){return e.apply(this.doc,arguments)}}(ka.prototype[Ea]));_i(ka);var Da=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Na=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},_a=e.e_stop=function(e){Da(e),Na(e)},Ra=e.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});(r[t]||(r[t]=[])).push(n)}},Aa=[],La=e.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else for(var r=xi(e,t,!1),i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}},Ma=e.signal=function(e,t){var n=xi(e,t,!0);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)},Oa=null,Pa=30,Ia=e.Pass={toString:function(){return"CodeMirror.Pass"}},Ha={scroll:!1},Ba={origin:"*mouse"},Fa={origin:"+move"};Ri.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Wa=e.countColumn=function(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,a=i||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return a+(t-o);a+=s-o,a+=n-a%n,o=s+1}},za=e.findColumn=function(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var a=o-r;if(o==e.length||i+a>=t)return r+Math.min(a,t-i);if(i+=o-r,i+=n-i%n,r=o+1,i>=t)return r}},ja=[""],qa=function(e){e.select()};No?qa=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:bo&&(qa=function(e){try{e.select()}catch(t){}});var Va,Ua=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,$a=e.isWordChar=function(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Ua.test(e))},Ya=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;Va=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(i){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var Ga=e.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)};bo&&wo<11&&(Ui=function(){try{return document.activeElement}catch(e){return document.body}});var Xa,Ka,Za=e.rmClass=function(e,t){var n=e.className,r=$i(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}},Qa=e.addClass=function(e,t){var n=e.className;$i(t).test(n)||(e.className+=(n?" ":"")+t)},Ja=!1,es=function(){if(bo&&wo<9)return!1;var e=ji("div");return"draggable"in e||"dragDrop"in e}(),ts=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},ns=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},rs=function(){var e=ji("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),is=null,os=e.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};!function(){for(var e=0;e<10;e++)os[e+48]=os[e+96]=String(e);for(e=65;e<=90;e++)os[e]=String.fromCharCode(e);for(e=1;e<=12;e++)os[e+111]=os[e+63235]="F"+e}();var as,ss=function(){function e(e){return e<=247?n.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1773?r.charAt(e-1536):1774<=e&&e<=2220?"r":8192<=e&&e<=8203?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,l=/[1n]/,u="L";return function(n){if(!i.test(n))return!1;for(var r=n.length,c=[],d=0;d<r;++d)c.push(v=e(n.charCodeAt(d)));d=0;for(var f=u;d<r;++d){"m"==(v=c[d])?c[d]=f:f=v}d=0;for(var h=u;d<r;++d){"1"==(v=c[d])&&"r"==h?c[d]="n":a.test(v)&&(h=v,"r"==v&&(c[d]="R"))}for(d=1,f=c[0];d<r-1;++d){"+"==(v=c[d])&&"1"==f&&"1"==c[d+1]?c[d]="1":","!=v||f!=c[d+1]||"1"!=f&&"n"!=f||(c[d]=f),f=v}for(d=0;d<r;++d){if(","==(v=c[d]))c[d]="N";else if("%"==v){for(var p=d+1;p<r&&"%"==c[p];++p);for(var m=d&&"!"==c[d-1]||p<r&&"1"==c[p]?"1":"N",g=d;g<p;++g)c[g]=m;d=p-1}}for(d=0,h=u;d<r;++d){var v=c[d];"L"==h&&"1"==v?c[d]="L":a.test(v)&&(h=v)}for(d=0;d<r;++d)if(o.test(c[d])){for(p=d+1;p<r&&o.test(c[p]);++p);var y="L"==(d?c[d-1]:u),b="L"==(p<r?c[p]:u);for(m=y||b?"L":"R",g=d;g<p;++g)c[g]=m;d=p-1}var w,C=[];for(d=0;d<r;)if(s.test(c[d])){var S=d;for(++d;d<r&&s.test(c[d]);++d);C.push(new t(0,S,d))}else{var x=d,k=C.length;for(++d;d<r&&"L"!=c[d];++d);for(g=x;g<d;)if(l.test(c[g])){x<g&&C.splice(k,0,new t(1,x,g));var T=g;for(++g;g<d&&l.test(c[g]);++g);C.splice(k,0,new t(2,T,g)),x=g}else++g;x<d&&C.splice(k,0,new t(1,x,d))}return 1==C[0].level&&(w=n.match(/^\s+/))&&(C[0].from=w[0].length,C.unshift(new t(0,0,w[0].length))),1==Li(C).level&&(w=n.match(/\s+$/))&&(Li(C).to-=w[0].length,C.push(new t(0,r-w[0].length,r))),2==C[0].level&&C.unshift(new t(1,C[0].to,C[0].to)),C[0].level!=Li(C).level&&C.push(new t(C[0].level,r,r)),C}}();return e.version="5.16.0",e}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};e.defineMode("xml",function(r,i){function o(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if("<"==r)return e.eat("!")?e.eat("[")?e.match("CDATA[")?n(l("atom","]]>")):null:e.match("--")?n(l("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(u(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=l("meta","?>"),"meta"):(E=e.eat("/")?"closeTag":"openTag",t.tokenize=a,"tag bracket");if("&"==r){return(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error"}return e.eatWhile(/[^&<]/),null}function a(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=o,E=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return E="equals",null;if("<"==n){t.tokenize=o,t.state=h,t.tagName=t.tagStart=null;var r=t.tokenize(e,t);return r?r+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=s(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function s(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=a;break}return"string"};return t.isInAttribute=!0,t}function l(e,t){return function(n,r){for(;!n.eol();){if(n.match(t)){r.tokenize=o;break}n.next()}return e}}function u(e){return function(t,n){for(var r;null!=(r=t.next());){if("<"==r)return n.tokenize=u(e+1),n.tokenize(t,n);if(">"==r){if(1==e){n.tokenize=o;break}return n.tokenize=u(e-1),n.tokenize(t,n)}}return"meta"}}function c(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(x.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function d(e){e.context&&(e.context=e.context.prev)}function f(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!x.contextGrabbers.hasOwnProperty(n)||!x.contextGrabbers[n].hasOwnProperty(t))return;d(e)}}function h(e,t,n){return"openTag"==e?(n.tagStart=t.column(),p):"closeTag"==e?m:h}function p(e,t,n){return"word"==e?(n.tagName=t.current(),D="tag",y):(D="error",p)}function m(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&x.implicitlyClosed.hasOwnProperty(n.context.tagName)&&d(n),n.context&&n.context.tagName==r||!1===x.matchClosing?(D="tag",g):(D="tag error",v)}return D="error",v}function g(e,t,n){return"endTag"!=e?(D="error",g):(d(n),h)}function v(e,t,n){return D="error",g(e,t,n)}function y(e,t,n){if("word"==e)return D="attribute",b;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||x.autoSelfClosers.hasOwnProperty(r)?f(n,r):(f(n,r),n.context=new c(n,r,i==n.indented)),h}return D="error",y}function b(e,t,n){return"equals"==e?w:(x.allowMissing||(D="error"),y(e,t,n))}function w(e,t,n){return"string"==e?C:"word"==e&&x.allowUnquoted?(D="string",y):(D="error",y(e,t,n))}function C(e,t,n){return"string"==e?C:y(e,t,n)}var S=r.indentUnit,x={},k=i.htmlMode?t:n;for(var T in k)x[T]=k[T];for(var T in i)x[T]=i[T];var E,D;return o.isInText=!0,{startState:function(e){var t={tokenize:o,state:h,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;E=null;var n=t.tokenize(e,t);return(n||E)&&"comment"!=n&&(D=null,t.state=t.state(E||n,e,t),D&&(n="error"==D?n+" error":D)),n},indent:function(t,n,r){var i=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+S;if(i&&i.noIndent)return e.Pass;if(t.tokenize!=a&&t.tokenize!=o)return r?r.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==x.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+S*(x.multilineTagIndentFactor||1);if(x.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var s=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(s&&s[1])for(;i;){if(i.tagName==s[2]){i=i.prev;break}if(!x.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(s)for(;i;){var l=x.contextGrabbers[i.tagName];if(!l||!l.hasOwnProperty(s[2]))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+S:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:x.htmlMode?"html":"xml",helperType:x.htmlMode?"html":"xml",skipAttribute:function(e){e.state==w&&(e.state=y)}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,n){var r=e.current(),i=r.search(t);return i>-1?e.backUp(r.length-i):r.match(/<\/?$/)&&(e.backUp(r.length),e.match(t,!1)||e.match(r)),n}function n(e){var t=l[e];return t||(l[e]=new RegExp("\\s+"+e+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}function r(e,t){var r=e.match(n(t));return r?r[2]:""}function i(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function o(e,t){for(var n in e)for(var r=t[n]||(t[n]=[]),i=e[n],o=i.length-1;o>=0;o--)r.unshift(i[o])}function a(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(!i[0]||i[1].test(r(t,i[0])))return i[2]}}var s={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},l={};e.defineMode("htmlmixed",function(n,r){function l(r,o){var s,d=u.token(r,o.htmlState),f=/\btag\b/.test(d);if(f&&!/[<>\s\/]/.test(r.current())&&(s=o.htmlState.tagName&&o.htmlState.tagName.toLowerCase())&&c.hasOwnProperty(s))o.inTag=s+" ";else if(o.inTag&&f&&/>$/.test(r.current())){var h=/^([\S]+) (.*)/.exec(o.inTag);o.inTag=null;var p=">"==r.current()&&a(c[h[1]],h[2]),m=e.getMode(n,p),g=i(h[1],!0),v=i(h[1],!1);o.token=function(e,n){return e.match(g,!1)?(n.token=l,n.localState=n.localMode=null,null):t(e,v,n.localMode.token(e,n.localState))},o.localMode=m,o.localState=e.startState(m,u.indent(o.htmlState,""))}else o.inTag&&(o.inTag+=r.current(),r.eol()&&(o.inTag+=" "));return d}var u=e.getMode(n,{name:"xml",htmlMode:!0,multilineTagIndentFactor:r.multilineTagIndentFactor,multilineTagIndentPastTag:r.multilineTagIndentPastTag}),c={},d=r&&r.tags,f=r&&r.scriptTypes;if(o(s,c),d&&o(d,c),f)for(var h=f.length-1;h>=0;h--)c.script.unshift(["type",f[h].matches,f[h].mode]);return{startState:function(){return{token:l,inTag:null,localMode:null,localState:null,htmlState:e.startState(u)}},copyState:function(t){var n;return t.localState&&(n=e.copyState(t.localMode,t.localState)),{token:t.token,inTag:t.inTag,localMode:t.localMode,localState:n,htmlState:e.copyState(u,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,n){return!t.localMode||/^\s*<\//.test(n)?u.indent(t.htmlState,n):t.localMode.indent?t.localMode.indent(t.localState,n):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||u}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,n){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}e.defineMode("javascript",function(n,r){function i(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}function o(e,t,n){return Ce=e,Se=n,t}function a(e,n){var r=e.next();if('"'==r||"'"==r)return n.tokenize=s(r),n.tokenize(e,n);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return o("number","number");if("."==r&&e.match(".."))return o("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return o(r);if("="==r&&e.eat(">"))return o("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),o("number","number");if("0"==r&&e.eat(/o/i))return e.eatWhile(/[0-7]/i),o("number","number");if("0"==r&&e.eat(/b/i))return e.eatWhile(/[01]/i),o("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),o("number","number");if("/"==r)return e.eat("*")?(n.tokenize=l,l(e,n)):e.eat("/")?(e.skipToEnd(),o("comment","comment")):t(e,n,1)?(i(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),o("regexp","string-2")):(e.eatWhile(Re),o("operator","operator",e.current()));if("`"==r)return n.tokenize=u,u(e,n);if("#"==r)return e.skipToEnd(),o("error","error");if(Re.test(r))return e.eatWhile(Re),o("operator","operator",e.current());if(Ne.test(r)){e.eatWhile(Ne);var a=e.current(),c=_e.propertyIsEnumerable(a)&&_e[a];return c&&"."!=n.lastType?o(c.type,c.style,a):o("variable","variable",a)}}function s(e){return function(t,n){var r,i=!1;if(Te&&"@"==t.peek()&&t.match(Ae))return n.tokenize=a,o("jsonld-keyword","meta");for(;null!=(r=t.next())&&(r!=e||i);)i=!i&&"\\"==r;return i||(n.tokenize=a),o("string","string")}}function l(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=a;break}r="*"==n}return o("comment","comment")}function u(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=a;break}r=!r&&"\\"==n}return o("quasi","string-2",e.current())}function c(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){for(var r=0,i=!1,o=n-1;o>=0;--o){var a=e.string.charAt(o),s=Le.indexOf(a);if(s>=0&&s<3){if(!r){++o;break}if(0==--r)break}else if(s>=3&&s<6)++r;else if(Ne.test(a))i=!0;else{if(/["'\/]/.test(a))return;if(i&&!r){++o;break}}}i&&!r&&(t.fatArrowAt=o)}}function d(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function f(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(n=r.vars;n;n=n.next)if(n.name==t)return!0}function h(e,t,n,r,i){var o=e.cc;for(Oe.state=e,Oe.stream=i,Oe.marked=null,Oe.cc=o,Oe.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){if((o.length?o.pop():Ee?x:S)(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return Oe.marked?Oe.marked:"variable"==n&&f(e,r)?"variable-2":t}}}function p(){for(var e=arguments.length-1;e>=0;e--)Oe.cc.push(arguments[e])}function m(){return p.apply(null,arguments),!0}function g(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var n=Oe.state;if(Oe.marked="def",n.context){if(t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;r.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}function v(){Oe.state.context={prev:Oe.state.context,vars:Oe.state.localVars},Oe.state.localVars=Pe}function y(){Oe.state.localVars=Oe.state.context.vars,Oe.state.context=Oe.state.context.prev}function b(e,t){var n=function(){var n=Oe.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var i=n.lexical;i&&")"==i.type&&i.align;i=i.prev)r=i.indented;n.lexical=new d(r,Oe.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function w(){var e=Oe.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function C(e){function t(n){return n==e?m():";"==e?p():m(t)}return t}function S(e,t){return"var"==e?m(b("vardef",t.length),X,C(";"),w):"keyword a"==e?m(b("form"),x,S,w):"keyword b"==e?m(b("form"),S,w):"{"==e?m(b("}"),V,w):";"==e?m():"if"==e?("else"==Oe.state.lexical.info&&Oe.state.cc[Oe.state.cc.length-1]==w&&Oe.state.cc.pop()(),m(b("form"),x,S,w,ee)):"function"==e?m(ae):"for"==e?m(b("form"),te,S,w):"variable"==e?m(b("stat"),H):"switch"==e?m(b("form"),x,b("}","switch"),C("{"),V,w,w):"case"==e?m(x,C(":")):"default"==e?m(C(":")):"catch"==e?m(b("form"),v,C("("),se,C(")"),S,w,y):"class"==e?m(b("form"),le,w):"export"==e?m(b("stat"),fe,w):"import"==e?m(b("stat"),he,w):"module"==e?m(b("form"),K,b("}"),C("{"),V,w,w):"async"==e?m(S):p(b("stat"),x,C(";"),w)}function x(e){return T(e,!1)}function k(e){return T(e,!0)}function T(e,t){if(Oe.state.fatArrowAt==Oe.stream.start){var n=t?M:L;if("("==e)return m(v,b(")"),j(K,")"),w,C("=>"),n,y);if("variable"==e)return p(v,K,C("=>"),n,y)}var r=t?_:N;return Me.hasOwnProperty(e)?m(r):"function"==e?m(ae,r):"keyword c"==e?m(t?D:E):"("==e?m(b(")"),E,be,C(")"),w,r):"operator"==e||"spread"==e?m(t?k:x):"["==e?m(b("]"),ve,w,r):"{"==e?q(F,"}",null,r):"quasi"==e?p(R,r):"new"==e?m(O(t)):m()}function E(e){return e.match(/[;\}\)\],]/)?p():p(x)}function D(e){return e.match(/[;\}\)\],]/)?p():p(k)}function N(e,t){return","==e?m(x):_(e,t,!1)}function _(e,t,n){var r=0==n?N:_,i=0==n?x:k;return"=>"==e?m(v,n?M:L,y):"operator"==e?/\+\+|--/.test(t)?m(r):"?"==t?m(x,C(":"),i):m(i):"quasi"==e?p(R,r):";"!=e?"("==e?q(k,")","call",r):"."==e?m(B,r):"["==e?m(b("]"),E,C("]"),w,r):void 0:void 0}function R(e,t){return"quasi"!=e?p():"${"!=t.slice(t.length-2)?m(R):m(x,A)}function A(e){if("}"==e)return Oe.marked="string-2",Oe.state.tokenize=u,m(R)}function L(e){return c(Oe.stream,Oe.state),p("{"==e?S:x)}function M(e){return c(Oe.stream,Oe.state),p("{"==e?S:k)}function O(e){return function(t){return"."==t?m(e?I:P):p(e?k:x)}}function P(e,t){if("target"==t)return Oe.marked="keyword",m(N)}function I(e,t){if("target"==t)return Oe.marked="keyword",m(_)}function H(e){return":"==e?m(w,S):p(N,C(";"),w)}function B(e){if("variable"==e)return Oe.marked="property",m()}function F(e,t){return"variable"==e||"keyword"==Oe.style?(Oe.marked="property",m("get"==t||"set"==t?W:z)):"number"==e||"string"==e?(Oe.marked=Te?"property":Oe.style+" property",m(z)):"jsonld-keyword"==e?m(z):"modifier"==e?m(F):"["==e?m(x,C("]"),z):"spread"==e?m(x):void 0}function W(e){return"variable"!=e?p(z):(Oe.marked="property",m(ae))}function z(e){return":"==e?m(k):"("==e?p(ae):void 0}function j(e,t){function n(r,i){if(","==r){var o=Oe.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),m(e,n)}return r==t||i==t?m():m(C(t))}return function(r,i){return r==t||i==t?m():p(e,n)}}function q(e,t,n){for(var r=3;r<arguments.length;r++)Oe.cc.push(arguments[r]);return m(b(t,n),j(e,t),w)}function V(e){return"}"==e?m():p(S,V)}function U(e){if(De&&":"==e)return m(Y)}function $(e,t){if("="==t)return m(k)}function Y(e){if("variable"==e)return Oe.marked="variable-3",m(G)}function G(e,t){return"<"==t?m(j(Y,">"),G):"["==e?m(C("]"),G):void 0}function X(){return p(K,U,Q,J)}function K(e,t){return"modifier"==e?m(K):"variable"==e?(g(t),m()):"spread"==e?m(K):"["==e?q(K,"]"):"{"==e?q(Z,"}"):void 0}function Z(e,t){return"variable"!=e||Oe.stream.match(/^\s*:/,!1)?("variable"==e&&(Oe.marked="property"),"spread"==e?m(K):"}"==e?p():m(C(":"),K,Q)):(g(t),m(Q))}function Q(e,t){if("="==t)return m(k)}function J(e){if(","==e)return m(X)}function ee(e,t){if("keyword b"==e&&"else"==t)return m(b("form","else"),S,w)}function te(e){if("("==e)return m(b(")"),ne,C(")"),w)}function ne(e){return"var"==e?m(X,C(";"),ie):";"==e?m(ie):"variable"==e?m(re):p(x,C(";"),ie)}function re(e,t){return"in"==t||"of"==t?(Oe.marked="keyword",m(x)):m(N,ie)}function ie(e,t){return";"==e?m(oe):"in"==t||"of"==t?(Oe.marked="keyword",m(x)):p(x,C(";"),oe)}function oe(e){")"!=e&&m(x)}function ae(e,t){return"*"==t?(Oe.marked="keyword",m(ae)):"variable"==e?(g(t),m(ae)):"("==e?m(v,b(")"),j(se,")"),w,U,S,y):void 0}function se(e){return"spread"==e?m(se):p(K,U,$)}function le(e,t){if("variable"==e)return g(t),m(ue)}function ue(e,t){return"extends"==t?m(x,ue):"{"==e?m(b("}"),ce,w):void 0}function ce(e,t){return"variable"==e||"keyword"==Oe.style?"static"==t?(Oe.marked="keyword",m(ce)):(Oe.marked="property","get"==t||"set"==t?m(de,ae,ce):m(ae,ce)):"*"==t?(Oe.marked="keyword",m(ce)):";"==e?m(ce):"}"==e?m():void 0}function de(e){return"variable"!=e?p():(Oe.marked="property",m())}function fe(e,t){return"*"==t?(Oe.marked="keyword",m(ge,C(";"))):"default"==t?(Oe.marked="keyword",m(x,C(";"))):p(S)}function he(e){return"string"==e?m():p(pe,ge)}function pe(e,t){return"{"==e?q(pe,"}"):("variable"==e&&g(t),"*"==t&&(Oe.marked="keyword"),m(me))}function me(e,t){if("as"==t)return Oe.marked="keyword",m(pe)}function ge(e,t){if("from"==t)return Oe.marked="keyword",m(x)}function ve(e){return"]"==e?m():p(k,ye)}function ye(e){return"for"==e?p(be,C("]")):","==e?m(j(D,"]")):p(j(k,"]"))}function be(e){return"for"==e?m(te,be):"if"==e?m(x,be):void 0}function we(e,t){return"operator"==e.lastType||","==e.lastType||Re.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}var Ce,Se,xe=n.indentUnit,ke=r.statementIndent,Te=r.jsonld,Ee=r.json||Te,De=r.typescript,Ne=r.wordCharacters||/[\w$\xa1-\uffff]/,_e=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),o={type:"atom",style:"atom"},a={"if":e("if"),"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":e("new"),"delete":r,"throw":r,"debugger":r,"var":e("var"),"const":e("var"),"let":e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o,"this":e("this"),"class":e("class"),"super":e("atom"),"yield":r,"export":e("export"),"import":e("import"),"extends":r,await:r,async:e("async")};if(De){var s={type:"variable",style:"variable-3"},l={"interface":e("class"),"implements":r,namespace:r,module:e("module"),"enum":e("module"),"public":e("modifier"),"private":e("modifier"),"protected":e("modifier"),"abstract":e("modifier"),as:i,string:s,number:s,"boolean":s,any:s};for(var u in l)a[u]=l[u]}return a}(),Re=/[+\-*&%=<>!?|~^]/,Ae=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Le="([{}])",Me={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Oe={state:null,column:null,marked:null,cc:null},Pe={name:"this",next:{name:"arguments"}};return w.lex=!0,{startState:function(e){var t={tokenize:a,lastType:"sof",cc:[],lexical:new d((e||0)-xe,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:e||0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),c(e,t)),t.tokenize!=l&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==Ce?n:(t.lastType="operator"!=Ce||"++"!=Se&&"--"!=Se?Ce:"incdec",h(t,n,Ce,Se,e))},indent:function(t,n){if(t.tokenize==l)return e.Pass;if(t.tokenize!=a)return 0;var i=n&&n.charAt(0),o=t.lexical;if(!/^\s*else\b/.test(n))for(var s=t.cc.length-1;s>=0;--s){var u=t.cc[s];if(u==w)o=o.prev;else if(u!=ee)break}"stat"==o.type&&"}"==i&&(o=o.prev),ke&&")"==o.type&&"stat"==o.prev.type&&(o=o.prev);var c=o.type,d=i==c;return"vardef"==c?o.indented+("operator"==t.lastType||","==t.lastType?o.info+1:0):"form"==c&&"{"==i?o.indented:"form"==c?o.indented+xe:"stat"==c?o.indented+(we(t,n)?ke||xe:0):"switch"!=o.info||d||0==r.doubleIndentSwitch?o.align?o.column+(d?0:1):o.indented+(d?0:xe):o.indented+(/^(?:case|default)\b/.test(n)?xe:2*xe)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Ee?null:"/*",blockCommentEnd:Ee?null:"*/",lineComment:Ee?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Ee?"json":"javascript",jsonldMode:Te,jsonMode:Ee,expressionAllowed:t,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=x&&t!=k||e.cc.pop()}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("ruby",function(e){function t(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function n(e,t,n){return n.tokenize.push(e),e(t,n)}function r(e,t){if(e.sol()&&e.match("=begin")&&e.eol())return t.tokenize.push(l),"comment";if(e.eatSpace())return null;var r,i=e.next();if("`"==i||"'"==i||'"'==i)return n(a(i,"string",'"'==i||"`"==i),e,t);if("/"==i){var o=e.current().length;if(e.skipTo("/")){var c=e.current().length;e.backUp(e.current().length-o);for(var d=0;e.current().length<c;){var f=e.next();if("("==f?d+=1:")"==f&&(d-=1),d<0)break}if(e.backUp(e.current().length-o),0==d)return n(a(i,"string-2",!0),e,t)}return"operator"}if("%"==i){var p="string",m=!0;e.eat("s")?p="atom":e.eat(/[WQ]/)?p="string":e.eat(/[r]/)?p="string-2":e.eat(/[wxq]/)&&(p="string",m=!1);var g=e.eat(/[^\w\s=]/);return g?(h.propertyIsEnumerable(g)&&(g=h[g]),n(a(g,p,m,!0),e,t)):"operator"}if("#"==i)return e.skipToEnd(),"comment";if("<"==i&&(r=e.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return n(s(r[1]),e,t);if("0"==i)return e.eat("x")?e.eatWhile(/[\da-fA-F]/):e.eat("b")?e.eatWhile(/[01]/):e.eatWhile(/[0-7]/),"number";if(/\d/.test(i))return e.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==i){for(;e.match(/^\\[CM]-/););return e.eat("\\")?e.eatWhile(/\w/):e.next(),"string"}if(":"==i)return e.eat("'")?n(a("'","atom",!1),e,t):e.eat('"')?n(a('"',"atom",!0),e,t):e.eat(/[\<\>]/)?(e.eat(/[\<\>]/),"atom"):e.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":e.eat(/[a-zA-Z$@_\xa1-\uffff]/)?(e.eatWhile(/[\w$\xa1-\uffff]/),e.eat(/[\?\!\=]/),"atom"):"operator";if("@"==i&&e.match(/^@?[a-zA-Z_\xa1-\uffff]/))return e.eat("@"),e.eatWhile(/[\w\xa1-\uffff]/),"variable-2";if("$"==i)return e.eat(/[a-zA-Z_]/)?e.eatWhile(/[\w]/):e.eat(/\d/)?e.eat(/\d/):e.next(),"variable-3";if(/[a-zA-Z_\xa1-\uffff]/.test(i))return e.eatWhile(/[\w\xa1-\uffff]/),e.eat(/[\?\!]/),e.eat(":")?"atom":"ident";if("|"!=i||!t.varList&&"{"!=t.lastTok&&"do"!=t.lastTok){if(/[\(\)\[\]{}\\;]/.test(i))return u=i,null;if("-"==i&&e.eat(">"))return"arrow";if(/[=+\-\/*:\.^%<>~|]/.test(i)){var v=e.eatWhile(/[=+\-\/*:\.^%<>~|]/);return"."!=i||v||(u="."),"operator"}return null}return u="|",null}function i(e){return e||(e=1),function(t,n){if("}"==t.peek()){if(1==e)return n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n);n.tokenize[n.tokenize.length-1]=i(e-1)}else"{"==t.peek()&&(n.tokenize[n.tokenize.length-1]=i(e+1));return r(t,n)}}function o(){var e=!1;return function(t,n){return e?(n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)):(e=!0,r(t,n))}}function a(e,t,n,r){return function(a,s){var l,u=!1;for("read-quoted-paused"===s.context.type&&(s.context=s.context.prev,a.eat("}"));null!=(l=a.next());){if(l==e&&(r||!u)){s.tokenize.pop();break}if(n&&"#"==l&&!u){if(a.eat("{")){"}"==e&&(s.context={prev:s.context,type:"read-quoted-paused"}),s.tokenize.push(i());break}if(/[@\$]/.test(a.peek())){s.tokenize.push(o());break}}u=!u&&"\\"==l}return t}}function s(e){return function(t,n){return t.match(e)?n.tokenize.pop():t.skipToEnd(),"string"}}function l(e,t){return e.sol()&&e.match("=end")&&e.eol()&&t.tokenize.pop(),e.skipToEnd(),"comment"}var u,c=t(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"]),d=t(["def","class","case","for","while","until","module","then","catch","loop","proc","begin"]),f=t(["end","until"]),h={"[":"]","{":"}","(":")"};return{startState:function(){return{tokenize:[r],indented:0,context:{type:"top",indented:-e.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(e,t){u=null,e.sol()&&(t.indented=e.indentation());var n,r=t.tokenize[t.tokenize.length-1](e,t),i=u;if("ident"==r){var o=e.current();"keyword"==(r="."==t.lastTok?"property":c.propertyIsEnumerable(e.current())?"keyword":/^[A-Z]/.test(o)?"tag":"def"==t.lastTok||"class"==t.lastTok||t.varList?"def":"variable")&&(i=o,d.propertyIsEnumerable(o)?n="indent":f.propertyIsEnumerable(o)?n="dedent":"if"!=o&&"unless"!=o||e.column()!=e.indentation()?"do"==o&&t.context.indented<t.indented&&(n="indent"):n="indent")}return(u||r&&"comment"!=r)&&(t.lastTok=i),"|"==u&&(t.varList=!t.varList),"indent"==n||/[\(\[\{]/.test(u)?t.context={prev:t.context,type:u||r,indented:t.indented}:("dedent"==n||/[\)\]\}]/.test(u))&&t.context.prev&&(t.context=t.context.prev),e.eol()&&(t.continuedLine="\\"==u||"operator"==r),r},indent:function(t,n){if(t.tokenize[t.tokenize.length-1]!=r)return 0;var i=n&&n.charAt(0),o=t.context,a=o.type==h[i]||"keyword"==o.type&&/^(?:end|until|else|elsif|when|rescue)\b/.test(n);return o.indented+(a?0:e.indentUnit)+(t.continuedLine?e.indentUnit:0)},electricInput:/^\s*(?:end|rescue|\})$/,lineComment:"#"}}),e.defineMIME("text/x-ruby","ruby")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/edit/matchbrackets")):"function"==typeof define&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],e):e(CodeMirror)}(function(e){"use strict";function t(t,n,r){if(r<0&&0==n.ch)return t.clipPos(f(n.line-1));var i=t.getLine(n.line);if(r>0&&n.ch>=i.length)return t.clipPos(f(n.line+1,0));for(var o,a="start",s=n.ch,l=r<0?0:i.length,u=0;s!=l;s+=r,u++){var c=i.charAt(r<0?s-1:s),d="_"!=c&&e.isWordChar(c)?"w":"o";if("w"==d&&c.toUpperCase()==c&&(d="W"),"start"==a)"o"!=d&&(a="in",o=d);else if("in"==a&&o!=d){if("w"==o&&"W"==d&&r<0&&s--,"W"==o&&"w"==d&&r>0){o="w";continue}break}}return f(n.line,s)}function n(e,n){e.extendSelectionsBy(function(r){return e.display.shift||e.doc.extend||r.empty()?t(e.doc,r.head,n):n<0?r.from():r.to()})}function r(t,n){if(t.isReadOnly())return e.Pass;t.operation(function(){for(var e=t.listSelections().length,r=[],i=-1,o=0;o<e;o++){var a=t.listSelections()[o].head;if(!(a.line<=i)){var s=f(a.line+(n?0:1),0);t.replaceRange("\n",s,null,"+insertLine"),t.indentLine(s.line,null,!0),r.push({head:s,anchor:s}),i=a.line+1}}t.setSelections(r)}),t.execCommand("indentAuto")}function i(t,n){for(var r=n.ch,i=r,o=t.getLine(n.line);r&&e.isWordChar(o.charAt(r-1));)--r;for(;i<o.length&&e.isWordChar(o.charAt(i));)++i;return{from:f(n.line,r),to:f(n.line,i),word:o.slice(r,i)}}function o(e){var t=e.getCursor(),n=e.scanForBracket(t,-1);if(n)for(;;){var r=e.scanForBracket(t,1);if(!r)return;if(r.ch==g.charAt(g.indexOf(n.ch)+1))return e.setSelection(f(n.pos.line,n.pos.ch+1),r.pos,!1),!0;t=f(r.pos.line,r.pos.ch+1)}}function a(t,n){if(t.isReadOnly())return e.Pass;for(var r,i=t.listSelections(),o=[],a=0;a<i.length;a++){var s=i[a];if(!s.empty()){for(var l=s.from().line,u=s.to().line;a<i.length-1&&i[a+1].from().line==u;)u=s[++a].to().line;o.push(l,u)}}o.length?r=!0:o.push(t.firstLine(),t.lastLine()),t.operation(function(){for(var e=[],i=0;i<o.length;i+=2){var a=o[i],s=o[i+1],l=f(a,0),u=f(s),c=t.getRange(l,u,!1);n?c.sort():c.sort(function(e,t){var n=e.toUpperCase(),r=t.toUpperCase();return n!=r&&(e=n,t=r),e<t?-1:e==t?0:1}),t.replaceRange(c,l,u),r&&e.push({anchor:l,head:u})}r&&t.setSelections(e,0)})}function s(t,n){t.operation(function(){for(var r=t.listSelections(),o=[],a=[],s=0;s<r.length;s++){(u=r[s]).empty()?(o.push(s),a.push("")):a.push(n(t.getRange(u.from(),u.to())))}t.replaceSelections(a,"around","case");var l;for(s=o.length-1;s>=0;s--){var u=r[o[s]];if(!(l&&e.cmpPos(u.head,l)>0)){var c=i(t,u.head);l=c.from,t.replaceRange(n(c.word),c.from,c.to)}}})}function l(t){var n=t.getCursor("from"),r=t.getCursor("to");if(0==e.cmpPos(n,r)){var o=i(t,n);if(!o.word)return;n=o.from,r=o.to}return{from:n,to:r,query:t.getRange(n,r),word:o}}function u(e,t){var n=l(e);if(n){var r=n.query,i=e.getSearchCursor(r,t?n.to:n.from);(t?i.findNext():i.findPrevious())?e.setSelection(i.from(),i.to()):(i=e.getSearchCursor(r,t?f(e.firstLine(),0):e.clipPos(f(e.lastLine()))),(t?i.findNext():i.findPrevious())?e.setSelection(i.from(),i.to()):n.word&&e.setSelection(n.from,n.to))}}var c=e.keyMap.sublime={fallthrough:"default"},d=e.commands,f=e.Pos,h=e.keyMap["default"]==e.keyMap.macDefault,p=h?"Cmd-":"Ctrl-";d[c["Alt-Left"]="goSubwordLeft"]=function(e){n(e,-1)},d[c["Alt-Right"]="goSubwordRight"]=function(e){n(e,1)},h&&(c["Cmd-Left"]="goLineStartSmart");var m=h?"Ctrl-Alt-":"Ctrl-";d[c[m+"Up"]="scrollLineUp"]=function(e){var t=e.getScrollInfo();if(!e.somethingSelected()){var n=e.lineAtHeight(t.top+t.clientHeight,"local");e.getCursor().line>=n&&e.execCommand("goLineUp")}e.scrollTo(null,t.top-e.defaultTextHeight())},d[c[m+"Down"]="scrollLineDown"]=function(e){var t=e.getScrollInfo();if(!e.somethingSelected()){var n=e.lineAtHeight(t.top,"local")+1;e.getCursor().line<=n&&e.execCommand("goLineDown")}e.scrollTo(null,t.top+e.defaultTextHeight())},d[c["Shift-"+p+"L"]="splitSelectionByLine"]=function(e){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)for(var i=t[r].from(),o=t[r].to(),a=i.line;a<=o.line;++a)o.line>i.line&&a==o.line&&0==o.ch||n.push({anchor:a==i.line?i:f(a,0),head:a==o.line?o:f(a)});e.setSelections(n,0)},c["Shift-Tab"]="indentLess",d[c.Esc="singleSelectionTop"]=function(e){var t=e.listSelections()[0];e.setSelection(t.anchor,t.head,{scroll:!1})},d[c[p+"L"]="selectLine"]=function(e){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var i=t[r];n.push({anchor:f(i.from().line,0),head:f(i.to().line+1,0)})}e.setSelections(n)},c["Shift-Ctrl-K"]="deleteLine",d[c[p+"Enter"]="insertLineAfter"]=function(e){return r(e,!1)},d[c["Shift-"+p+"Enter"]="insertLineBefore"]=function(e){return r(e,!0)},d[c[p+"D"]="selectNextOccurrence"]=function(t){var n=t.getCursor("from"),r=t.getCursor("to"),o=t.state.sublimeFindFullWord==t.doc.sel;if(0==e.cmpPos(n,r)){var a=i(t,n);if(!a.word)return;t.setSelection(a.from,a.to),o=!0}else{var s=t.getRange(n,r),l=o?new RegExp("\\b"+s+"\\b"):s,u=t.getSearchCursor(l,r);u.findNext()?t.addSelection(u.from(),u.to()):(u=t.getSearchCursor(l,f(t.firstLine(),0))).findNext()&&t.addSelection(u.from(),u.to())}o&&(t.state.sublimeFindFullWord=t.doc.sel)};var g="(){}[]";d[c["Shift-"+p+"Space"]="selectScope"]=function(e){o(e)||e.execCommand("selectAll")},d[c["Shift-"+p+"M"]="selectBetweenBrackets"]=function(t){if(!o(t))return e.Pass},d[c[p+"M"]="goToBracket"]=function(t){t.extendSelectionsBy(function(n){var r=t.scanForBracket(n.head,1);if(r&&0!=e.cmpPos(r.pos,n.head))return r.pos;var i=t.scanForBracket(n.head,-1);return i&&f(i.pos.line,i.pos.ch+1)||n.head})};var v=h?"Cmd-Ctrl-":"Shift-Ctrl-";d[c[v+"Up"]="swapLineUp"]=function(t){if(t.isReadOnly())return e.Pass;for(var n=t.listSelections(),r=[],i=t.firstLine()-1,o=[],a=0;a<n.length;a++){var s=n[a],l=s.from().line-1,u=s.to().line;o.push({anchor:f(s.anchor.line-1,s.anchor.ch),head:f(s.head.line-1,s.head.ch)}),0!=s.to().ch||s.empty()||--u,l>i?r.push(l,u):r.length&&(r[r.length-1]=u),i=u}t.operation(function(){for(var e=0;e<r.length;e+=2){var n=r[e],i=r[e+1],a=t.getLine(n);t.replaceRange("",f(n,0),f(n+1,0),"+swapLine"),i>t.lastLine()?t.replaceRange("\n"+a,f(t.lastLine()),null,"+swapLine"):t.replaceRange(a+"\n",f(i,0),null,"+swapLine")}t.setSelections(o),t.scrollIntoView()})},d[c[v+"Down"]="swapLineDown"]=function(t){if(t.isReadOnly())return e.Pass;for(var n=t.listSelections(),r=[],i=t.lastLine()+1,o=n.length-1;o>=0;o--){var a=n[o],s=a.to().line+1,l=a.from().line;0!=a.to().ch||a.empty()||s--,s<i?r.push(s,l):r.length&&(r[r.length-1]=l),i=l}t.operation(function(){for(var e=r.length-2;e>=0;e-=2){var n=r[e],i=r[e+1],o=t.getLine(n);n==t.lastLine()?t.replaceRange("",f(n-1),f(n),"+swapLine"):t.replaceRange("",f(n,0),f(n+1,0),"+swapLine"),t.replaceRange(o+"\n",f(i,0),null,"+swapLine")}t.scrollIntoView()})},d[c[p+"/"]="toggleCommentIndented"]=function(e){e.toggleComment({indent:!0})},d[c[p+"J"]="joinLines"]=function(e){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){for(var i=t[r],o=i.from(),a=o.line,s=i.to().line;r<t.length-1&&t[r+1].from().line==s;)s=t[++r].to().line;n.push({start:a,end:s,anchor:!i.empty()&&o})}e.operation(function(){for(var t=0,r=[],i=0;i<n.length;i++){for(var o,a=n[i],s=a.anchor&&f(a.anchor.line-t,a.anchor.ch),l=a.start;l<=a.end;l++){var u=l-t;l==a.end&&(o=f(u,e.getLine(u).length+1)),u<e.lastLine()&&(e.replaceRange(" ",f(u),f(u+1,/^\s*/.exec(e.getLine(u+1))[0].length)),++t)}r.push({anchor:s||o,head:o})}e.setSelections(r,0)})},d[c["Shift-"+p+"D"]="duplicateLine"]=function(e){e.operation(function(){for(var t=e.listSelections().length,n=0;n<t;n++){var r=e.listSelections()[n];r.empty()?e.replaceRange(e.getLine(r.head.line)+"\n",f(r.head.line,0)):e.replaceRange(e.getRange(r.from(),r.to()),r.from())}e.scrollIntoView()})},c[p+"T"]="transposeChars",d[c.F9="sortLines"]=function(e){a(e,!0)},d[c[p+"F9"]="sortLinesInsensitive"]=function(e){a(e,!1)},d[c.F2="nextBookmark"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(;t.length;){var n=t.shift(),r=n.find();if(r)return t.push(n),e.setSelection(r.from,r.to)}},d[c["Shift-F2"]="prevBookmark"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(;t.length;){t.unshift(t.pop());var n=t[t.length-1].find();if(n)return e.setSelection(n.from,n.to);t.pop()}},d[c[p+"F2"]="toggleBookmark"]=function(e){for(var t=e.listSelections(),n=e.state.sublimeBookmarks||(e.state.sublimeBookmarks=[]),r=0;r<t.length;r++){for(var i=t[r].from(),o=t[r].to(),a=e.findMarks(i,o),s=0;s<a.length;s++)if(a[s].sublimeBookmark){a[s].clear();for(var l=0;l<n.length;l++)n[l]==a[s]&&n.splice(l--,1);break}s==a.length&&n.push(e.markText(i,o,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},d[c["Shift-"+p+"F2"]="clearBookmarks"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(var n=0;n<t.length;n++)t[n].clear();t.length=0},d[c["Alt-F2"]="selectBookmarks"]=function(e){var t=e.state.sublimeBookmarks,n=[];if(t)for(var r=0;r<t.length;r++){var i=t[r].find();i?n.push({anchor:i.from,head:i.to}):t.splice(r--,0)}n.length&&e.setSelections(n,0)},c["Alt-Q"]="wrapLines";var y=p+"K ";c[y+p+"Backspace"]="delLineLeft",d[c.Backspace="smartBackspace"]=function(t){if(t.somethingSelected())return e.Pass;t.operation(function(){for(var n=t.listSelections(),r=t.getOption("indentUnit"),i=n.length-1;i>=0;i--){var o=n[i].head,a=t.getRange({line:o.line,ch:0},o),s=e.countColumn(a,null,t.getOption("tabSize")),l=t.findPosH(o,-1,"char",!1);if(a&&!/\S/.test(a)&&s%r==0){var u=new f(o.line,e.findColumn(a,s-r,r));u.ch!=o.ch&&(l=u)}t.replaceRange("",l,o,"+delete")}})},d[c[y+p+"K"]="delLineRight"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange("",t[n].anchor,f(t[n].to().line),"+delete");e.scrollIntoView()})},d[c[y+p+"U"]="upcaseAtCursor"]=function(e){s(e,function(e){return e.toUpperCase()})},d[c[y+p+"L"]="downcaseAtCursor"]=function(e){s(e,function(e){return e.toLowerCase()})},d[c[y+p+"Space"]="setSublimeMark"]=function(e){e.state.sublimeMark&&e.state.sublimeMark.clear(),e.state.sublimeMark=e.setBookmark(e.getCursor())},d[c[y+p+"A"]="selectToSublimeMark"]=function(e){var t=e.state.sublimeMark&&e.state.sublimeMark.find();t&&e.setSelection(e.getCursor(),t)},d[c[y+p+"W"]="deleteToSublimeMark"]=function(t){var n=t.state.sublimeMark&&t.state.sublimeMark.find();if(n){var r=t.getCursor(),i=n;if(e.cmpPos(r,i)>0){var o=i;i=r,r=o}t.state.sublimeKilled=t.getRange(r,i),t.replaceRange("",r,i)}},d[c[y+p+"X"]="swapWithSublimeMark"]=function(e){var t=e.state.sublimeMark&&e.state.sublimeMark.find();t&&(e.state.sublimeMark.clear(),e.state.sublimeMark=e.setBookmark(e.getCursor()),e.setCursor(t))},d[c[y+p+"Y"]="sublimeYank"]=function(e){null!=e.state.sublimeKilled&&e.replaceSelection(e.state.sublimeKilled,null,"paste")},c[y+p+"G"]="clearBookmarks",d[c[y+p+"C"]="showInCenter"]=function(e){var t=e.cursorCoords(null,"local");e.scrollTo(null,(t.top+t.bottom)/2-e.getScrollInfo().clientHeight/2)};var b=h?"Ctrl-Shift-":"Ctrl-Alt-";d[c[b+"Up"]="selectLinesUpward"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=0;n<t.length;n++){var r=t[n];r.head.line>e.firstLine()&&e.addSelection(f(r.head.line-1,r.head.ch))}})},d[c[b+"Down"]="selectLinesDownward"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=0;n<t.length;n++){var r=t[n];r.head.line<e.lastLine()&&e.addSelection(f(r.head.line+1,r.head.ch))}})},d[c[p+"F3"]="findUnder"]=function(e){u(e,!0)},d[c["Shift-"+p+"F3"]="findUnderPrevious"]=function(e){u(e,!1)},d[c["Alt-F3"]="findAllUnder"]=function(e){var t=l(e);if(t){for(var n=e.getSearchCursor(t.query),r=[],i=-1;n.findNext();)r.push({anchor:n.from(),head:n.to()}),n.from().line<=t.from.line&&n.from().ch<=t.from.ch&&i++;e.setSelections(r,i)}},c["Shift-"+p+"["]="fold",c["Shift-"+p+"]"]="unfold",c[y+p+"0"]=c[y+p+"j"]="unfoldAll",c[p+"I"]="findIncremental",c["Shift-"+p+"I"]="findIncrementalReverse",c[p+"H"]="replace",c.F3="findNext",c["Shift-F3"]="findPrev",e.normalizeKeyMap(c)}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e.Vimeo=e.Vimeo||{},e.Vimeo.Player=t())}(this,function(){"use strict";function e(e,t){return 0===e.indexOf(t.toLowerCase())?e:""+t.toLowerCase()+e.substr(0,1).toUpperCase()+e.substr(1)}function t(e){return e instanceof window.HTMLElement}function n(e){return!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e}function r(e){return/^(https?:)?\/\/((player|www).)?vimeo.com(?=$|\/)/.test(e)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=e.url,o=t||i;if(!o)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(n(o))return"https://vimeo.com/"+o;if(r(o))return o.replace("http:","https:");if(t)throw new TypeError("\u201c"+t+"\u201d is not a valid video id.");throw new TypeError("\u201c"+o+"\u201d is not a vimeo.com url.")}function o(e,t){return t={exports:{}},e(t,t.exports),t.exports}function a(e,t,n){var r=x.get(e.element)||{};t in r||(r[t]=[]),r[t].push(n),x.set(e.element,r)}function s(e,t){return(x.get(e.element)||{})[t]||[]}function l(e,t,n){var r=x.get(e.element)||{};if(!r[t])return!0;if(!n)return r[t]=[],x.set(e.element,r),!0;var i=r[t].indexOf(n);return-1!==i&&r[t].splice(i,1),x.set(e.element,r),r[t]&&0===r[t].length}function u(e,t){var n=s(e,t);if(n.length<1)return!1;var r=n.shift();return l(e,t,r),r}
function c(e,t){var n=x.get(e);x.set(t,n),x["delete"](e)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return k.reduce(function(t,n){var r=e.getAttribute("data-vimeo-"+n);return(r||""===r)&&(t[n]=""===r?1:r),t},t)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,i){if(!r(e))throw new TypeError("\u201c"+e+"\u201d is not a vimeo.com url.");var o="https://vimeo.com/api/oembed.json?url="+encodeURIComponent(e);for(var a in t)t.hasOwnProperty(a)&&(o+="&"+a+"="+encodeURIComponent(t[a]));var s="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;s.open("GET",o,!0),s.onload=function(){if(404!==s.status)if(403!==s.status)try{var t=JSON.parse(s.responseText);n(t)}catch(e){i(e)}else i(new Error("\u201c"+e+"\u201d is not embeddable."));else i(new Error("\u201c"+e+"\u201d was not found."))},s.onerror=function(){var e=s.status?" ("+s.status+")":"";i(new Error("There was an error fetching the embed code from Vimeo"+e+"."))},s.send()})}function h(e,t){var n=e.html;if(!t)throw new TypeError("An element must be provided");if(null!==t.getAttribute("data-vimeo-initialized"))return t.querySelector("iframe");var r=document.createElement("div");return r.innerHTML=n,t.appendChild(r.firstChild),t.setAttribute("data-vimeo-initialized","true"),t.querySelector("iframe")}function p(e){return"string"==typeof e&&(e=JSON.parse(e)),e}function m(e,t,n){if(e.element.contentWindow&&e.element.contentWindow.postMessage){var r={method:t};void 0!==n&&(r.value=n);var i=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));i>=8&&i<10&&(r=JSON.stringify(r)),e.element.contentWindow.postMessage(r,e.origin)}}function g(e,t){var n=[],r=void 0;if((t=p(t)).event)"error"===t.event&&s(e,t.data.method).forEach(function(n){var r=new Error(t.data.message);r.name=t.data.name,n.reject(r),l(e,t.data.method,n)}),n=s(e,"event:"+t.event),r=t.data;else if(t.method){var i=u(e,t.method);i&&(n.push(i),r=t.value)}n.forEach(function(t){try{if("function"==typeof t)return void t.call(e,r);t.resolve(r)}catch(e){}})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var y="undefined"!=typeof global&&"[object global]"==={}.toString.call(global),b=void 0!==Array.prototype.indexOf,w="undefined"!=typeof window&&void 0!==window.postMessage;if(!(y||b&&w))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var C="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},S=(o(function(){!function(e){function t(e,t){function r(e){if(!this||this.constructor!==r)return new r(e);this._keys=[],this._values=[],this._itp=[],this.objectOnly=t,e&&n.call(this,e)}return t||b(e,"size",{get:g}),e.constructor=r,r.prototype=e,r}function n(e){this.add?e.forEach(this.add,this):e.forEach(function(e){this.set(e[0],e[1])},this)}function r(e){return this.has(e)&&(this._keys.splice(y,1),this._values.splice(y,1),this._itp.forEach(function(e){y<e[0]&&e[0]--})),-1<y}function i(e){return this.has(e)?this._values[y]:void 0}function o(e,t){if(this.objectOnly&&t!==Object(t))throw new TypeError("Invalid value used as weak collection key");if(t!=t||0===t)for(y=e.length;y--&&!w(e[y],t););else y=e.indexOf(t);return-1<y}function a(e){return o.call(this,this._values,e)}function s(e){return o.call(this,this._keys,e)}function l(e,t){return this.has(e)?this._values[y]=t:this._values[this._keys.push(e)-1]=t,this}function u(e){return this.has(e)||this._values.push(e),this}function c(){(this._keys||0).length=this._values.length=0}function d(){return m(this._itp,this._keys)}function f(){return m(this._itp,this._values)}function h(){return m(this._itp,this._keys,this._values)}function p(){return m(this._itp,this._values,this._values)}function m(e,t,n){var r=[0],i=!1;return e.push(r),{next:function(){var o,a=r[0];return!i&&a<t.length?(o=n?[t[a],n[a]]:t[a],r[0]++):(i=!0,e.splice(e.indexOf(r),1)),{done:i,value:o}}}}function g(){return this._values.length}function v(e,t){for(var n=this.entries();;){var r=n.next();if(r.done)break;e.call(t,r.value[1],r.value[0],this)}}var y,b=Object.defineProperty,w=function(e,t){return e===t||e!=e&&t!=t};"undefined"==typeof WeakMap&&(e.WeakMap=t({"delete":r,clear:c,get:i,has:s,set:l},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(e.Map=t({"delete":r,has:s,get:i,set:l,keys:d,values:f,entries:h,forEach:v,clear:c})),"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(e.Set=t({has:a,add:u,"delete":r,clear:c,keys:f,values:f,entries:p,forEach:v})),"undefined"==typeof WeakSet&&(e.WeakSet=t({"delete":r,add:u,clear:c,has:a},!0))}(void 0!==C?C:window)}),o(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(t,n,r){n[t]=n[t]||r(),e.exports&&(e.exports=n[t])}("Promise",C,function(){function e(e,t){h.add(e,t),f||(f=m(h.drain))}function n(e){var n,r=void 0===e?"undefined":t(e);return null==e||"object"!=r&&"function"!=r||(n=e.then),"function"==typeof n&&n}function r(){for(var e=0;e<this.chain.length;e++)i(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function i(e,t,r){var i,o;try{!1===t?r.reject(e.msg):(i=!0===t?e.msg:t.call(void 0,e.msg))===r.promise?r.reject(TypeError("Promise-chain cycle")):(o=n(i))?o.call(i,r.resolve,r.reject):r.resolve(i)}catch(e){r.reject(e)}}function o(t){var i,s=this;if(!s.triggered){s.triggered=!0,s.def&&(s=s.def);try{(i=n(t))?e(function(){var e=new l(s);try{i.call(t,function(){o.apply(e,arguments)},function(){a.apply(e,arguments)})}catch(t){a.call(e,t)}}):(s.msg=t,s.state=1,s.chain.length>0&&e(r,s))}catch(e){a.call(new l(s),e)}}}function a(t){var n=this;n.triggered||(n.triggered=!0,n.def&&(n=n.def),n.msg=t,n.state=2,n.chain.length>0&&e(r,n))}function s(e,t,n,r){for(var i=0;i<t.length;i++)!function(i){e.resolve(t[i]).then(function(e){n(i,e)},r)}(i)}function l(e){this.def=e,this.triggered=!1}function u(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function c(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var n=new u(this);this.then=function(t,i){var o={success:"function"!=typeof t||t,failure:"function"==typeof i&&i};return o.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");o.resolve=e,o.reject=t}),n.chain.push(o),0!==n.state&&e(r,n),o.promise},this["catch"]=function(e){return this.then(void 0,e)};try{t.call(void 0,function(e){o.call(n,e)},function(e){a.call(n,e)})}catch(e){a.call(n,e)}}var d,f,h,p=Object.prototype.toString,m="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),d=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(e){d=function(e,t,n){return e[t]=n,e}}h=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,n,r;return{add:function(i,o){r=new e(i,o),n?n.next=r:t=r,n=r,r=void 0},drain:function(){var e=t;for(t=n=f=void 0;e;)e.fn.call(e.self),e=e.next}}}();var g=d({},"constructor",c,!1);return c.prototype=g,d(g,"__NPO__",0,!1),d(c,"resolve",function(e){var n=this;return e&&"object"==(void 0===e?"undefined":t(e))&&1===e.__NPO__?e:new n(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)})}),d(c,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)})}),d(c,"all",function(e){var t=this;return"[object Array]"!=p.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=e.length,o=Array(i),a=0;s(t,e,function(e,t){o[e]=t,++a===i&&n(o)},r)})}),d(c,"race",function(e){var t=this;return"[object Array]"!=p.call(e)?t.reject(TypeError("Not an array")):new t(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");s(t,e,function(e,t){n(t)},r)})}),c})})),x=new WeakMap,k=["id","url","width","maxwidth","height","maxheight","portrait","title","byline","color","autoplay","autopause","loop","responsive","speed","background","transparent"],T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=new WeakMap,D=new WeakMap,N=function(){function n(e){var o=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(v(this,n),window.jQuery&&e instanceof jQuery&&(e.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),e=e[0]),"string"==typeof e&&(e=document.getElementById(e)),!t(e))throw new TypeError("You must pass either a valid element or a valid id.");if("IFRAME"!==e.nodeName){var s=e.querySelector("iframe");s&&(e=s)}if("IFRAME"===e.nodeName&&!r(e.getAttribute("src")||""))throw new Error("The player element passed isn\u2019t a Vimeo embed.");if(E.has(e))return E.get(e);this.element=e,this.origin="*";var l=new S(function(t,n){var s=function(e){if(r(e.origin)&&o.element.contentWindow===e.source){"*"===o.origin&&(o.origin=e.origin);var n=p(e.data),i="event"in n&&"ready"===n.event,a="method"in n&&"ping"===n.method;if(i||a)return o.element.setAttribute("data-ready","true"),void t();g(o,n)}};if(window.addEventListener?window.addEventListener("message",s,!1):window.attachEvent&&window.attachEvent("onmessage",s),"IFRAME"!==o.element.nodeName){var l=d(e,a);f(i(l),l).then(function(t){var n=h(t,e);return o.element=n,c(e,n),E.set(o.element,o),t})["catch"](function(e){return n(e)})}});return D.set(this,l),E.set(this.element,this),"IFRAME"===this.element.nodeName&&m(this,"ping"),this}return T(n,[{key:"callMethod",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new S(function(r,i){return t.ready().then(function(){a(t,e,{resolve:r,reject:i}),m(t,e,n)})})}},{key:"get",value:function(t){var n=this;return new S(function(r,i){return t=e(t,"get"),n.ready().then(function(){a(n,t,{resolve:r,reject:i}),m(n,t)})})}},{key:"set",value:function(t,n){var r=this;return S.resolve(n).then(function(n){if(t=e(t,"set"),void 0===n||null===n)throw new TypeError("There must be a value to set.");return r.ready().then(function(){return new S(function(e,i){a(r,t,{resolve:e,reject:i}),m(r,t,n)})})})}},{key:"on",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(!t)throw new TypeError("You must pass a callback function.");if("function"!=typeof t)throw new TypeError("The callback must be a function.");0===s(this,"event:"+e).length&&this.callMethod("addEventListener",e)["catch"](function(){}),a(this,"event:"+e,t)}},{key:"off",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(t&&"function"!=typeof t)throw new TypeError("The callback must be a function.");l(this,"event:"+e,t)&&this.callMethod("removeEventListener",e)["catch"](function(){})}},{key:"loadVideo",value:function(e){return this.callMethod("loadVideo",e)}},{key:"ready",value:function(){var e=D.get(this);return S.resolve(e)}},{key:"addCuePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.callMethod("addCuePoint",{time:e,data:t})}},{key:"removeCuePoint",value:function(e){return this.callMethod("removeCuePoint",e)}},{key:"enableTextTrack",value:function(e,t){if(!e)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:e,kind:t})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(e){return this.set("autopause",e)}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(e){return this.set("color",e)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(e){return this.set("currentTime",e)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(e){return this.set("loop",e)}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(e){return this.set("playbackRate",e)}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(e){return this.set("volume",e)}}]),n}();return y||(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=function(e){"console"in window&&console.error&&console.error("There was an error creating an embed: "+e)};[].slice.call(e.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")).forEach(function(e){try{if(null!==e.getAttribute("data-vimeo-defer"))return;var n=d(e);f(i(n),n).then(function(t){return h(t,e)})["catch"](t)}catch(e){t(e)}})}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=function(t){if(r(t.origin)&&t.data&&"spacechange"===t.data.event)for(var n=e.querySelectorAll("iframe"),i=0;i<n.length;i++)if(n[i].contentWindow===t.source){var o=n[i].parentElement;o&&-1!==o.className.indexOf("vimeo-space")&&(o.style.paddingBottom=t.data.data[0].bottom+"px");break}};window.addEventListener?window.addEventListener("message",t,!1):window.attachEvent&&window.attachEvent("onmessage",t)}()),N}),function(){(function(){(function(){this.Turbolinks={supported:null!=window.history.pushState&&null!=window.requestAnimationFrame&&null!=window.addEventListener,visit:function(t,n){return e.controller.visit(t,n)},clearCache:function(){return e.controller.clearCache()}}}).call(this)}).call(this);var e=this.Turbolinks;(function(){(function(){var t,n,r=[].slice;e.copyObject=function(e){var t,n,r;n={};for(t in e)r=e[t],n[t]=r;return n},e.closest=function(e,n){return t.call(e,n)},t=function(){var e,t;return e=document.documentElement,null!=(t=e.closest)?t:function(e){var t;for(t=this;t;){if(t.nodeType===Node.ELEMENT_NODE&&n.call(t,e))return t;t=t.parentNode}}}(),e.defer=function(e){return setTimeout(e,1)},e.throttle=function(e){var t;return t=null,function(){var n;return n=1<=arguments.length?r.call(arguments,0):[],null!=t?t:t=requestAnimationFrame(function(r){return function(){return t=null,e.apply(r,n)}}(this))}},e.dispatch=function(e,t){var n,r,i,o,a;return o=null!=t?t:{},a=o.target,n=o.cancelable,r=o.data,(i=document.createEvent("Events")).initEvent(e,!0,!0===n),i.data=null!=r?r:{},(null!=a?a:document).dispatchEvent(i),i},e.match=function(e,t){return n.call(e,t)},n=function(){var e,t,n,r;return e=document.documentElement,null!=(t=null!=(n=null!=(r=e.matchesSelector)?r:e.webkitMatchesSelector)?n:e.msMatchesSelector)?t:e.mozMatchesSelector}(),e.uuid=function(){var e,t,n;for(n="",e=t=1;36>=t;e=++t)n+=9===e||14===e||19===e||24===e?"-":15===e?"4":20===e?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return n}}).call(this),function(){e.Location=function(){function e(e){var t,n;null==e&&(e=""),(n=document.createElement("a")).href=e.toString(),this.absoluteURL=n.href,2>(t=n.hash.length)?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-t),this.anchor=n.hash.slice(1))}var t,n,r,i;return e.wrap=function(e){return e instanceof this?e:new this(e)},e.prototype.getOrigin=function(){return this.absoluteURL.split("/",3).join("/")},e.prototype.getPath=function(){var e,t;return null!=(e=null!=(t=this.absoluteURL.match(/\/\/[^\/]*(\/[^?;]*)/))?t[1]:void 0)?e:"/"},e.prototype.getPathComponents=function(){return this.getPath().split("/").slice(1)},e.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},e.prototype.getExtension=function(){var e,t;return null!=(e=null!=(t=this.getLastPathComponent().match(/\.[^.]*$/))?t[0]:void 0)?e:""},e.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\.(?:htm|html|xhtml))$/)},e.prototype.isPrefixedBy=function(e){var t;return t=n(e),this.isEqualTo(e)||i(this.absoluteURL,t)},e.prototype.isEqualTo=function(e){return this.absoluteURL===(null!=e?e.absoluteURL:void 0)},e.prototype.toCacheKey=function(){return this.requestURL},e.prototype.toJSON=function(){return this.absoluteURL},e.prototype.toString=function(){return this.absoluteURL},e.prototype.valueOf=function(){return this.absoluteURL},n=function(e){return t(e.getOrigin()+e.getPath())},t=function(e){return r(e,"/")?e:e+"/"},i=function(e,t){return e.slice(0,t.length)===t},r=function(e,t){return e.slice(-t.length)===t},e}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.HttpRequest=function(){function n(n,r,i){this.delegate=n,this.requestCanceled=t(this.requestCanceled,this),this.requestTimedOut=t(this.requestTimedOut,this),this.requestFailed=t(this.requestFailed,this),this.requestLoaded=t(this.requestLoaded,this),this.requestProgressed=t(this.requestProgressed,this),this.url=e.Location.wrap(r).requestURL,this.referrer=e.Location.wrap(i).absoluteURL,this.createXHR()}return n.NETWORK_FAILURE=0,n.TIMEOUT_FAILURE=-1,n.timeout=60,n.prototype.send=function(){var e;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,"function"==typeof(e=this.delegate).requestStarted?e.requestStarted():void 0):void 0},n.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},n.prototype.requestProgressed=function(e){return e.lengthComputable?this.setProgress(e.loaded/e.total):void 0},n.prototype.requestLoaded=function(){return this.endRequest(function(e){return function(){var t;return 200<=(t=e.xhr.status)&&300>t?e.delegate.requestCompletedWithResponse(e.xhr.responseText,e.xhr.getResponseHeader("Turbolinks-Location")):(e.failed=!0,e.delegate.requestFailedWithStatusCode(e.xhr.status,e.xhr.responseText))}}(this))},n.prototype.requestFailed=function(){return this.endRequest(function(e){return function(){return e.failed=!0,e.delegate.requestFailedWithStatusCode(e.constructor.NETWORK_FAILURE)}}(this))},n.prototype.requestTimedOut=function(){return this.endRequest(function(e){return function(){return e.failed=!0,e.delegate.requestFailedWithStatusCode(e.constructor.TIMEOUT_FAILURE)}}(this))},n.prototype.requestCanceled=function(){return this.endRequest()},n.prototype.notifyApplicationBeforeRequestStart=function(){return e.dispatch("turbolinks:request-start",{data:{url:this.url,xhr:this.xhr}})},n.prototype.notifyApplicationAfterRequestEnd=function(){return e.dispatch("turbolinks:request-end",{data:{url:this.url,xhr:this.xhr}})},n.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open("GET",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader("Accept","text/html, application/xhtml+xml"),this.xhr.setRequestHeader("Turbolinks-Referrer",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},n.prototype.endRequest=function(e){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=e&&e.call(this),this.destroy()):void 0},n.prototype.setProgress=function(e){var t;return this.progress=e,"function"==typeof(t=this.delegate).requestProgressed?t.requestProgressed(this.progress):void 0},n.prototype.destroy=function(){var e;return this.setProgress(1),"function"==typeof(e=this.delegate).requestFinished&&e.requestFinished(),this.delegate=null,this.xhr=null},n}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.ProgressBar=function(){function e(){this.trickle=t(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var n;return n=300,e.defaultCSS=".turbolinks-progress-bar {\n  position: fixed;\n  display: block;\n  top: 0;\n  left: 0;\n  height: 3px;\n  background: #0076ff;\n  z-index: 9999;\n  transition: width "+n+"ms ease-out, opacity "+n/2+"ms "+n/2+"ms ease-in;\n  transform: translate3d(0, 0, 0);\n}",e.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},e.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement(function(e){return function(){return e.uninstallProgressElement(),e.stopTrickling(),e.visible=!1,e.hiding=!1}}(this))):void 0},e.prototype.setValue=function(e){return this.value=e,this.refresh()},e.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},e.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},e.prototype.fadeProgressElement=function(e){return this.progressElement.style.opacity=0,setTimeout(e,1.5*n)},e.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},e.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,n)},e.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},e.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},e.prototype.refresh=function(){return requestAnimationFrame(function(e){return function(){return e.progressElement.style.width=10+90*e.value+"%"}}(this))},e.prototype.createStylesheetElement=function(){var e;return e=document.createElement("style"),e.type="text/css",e.textContent=this.constructor.defaultCSS,e},e.prototype.createProgressElement=function(){var e;return e=document.createElement("div"),e.className="turbolinks-progress-bar",e},e}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.BrowserAdapter=function(){function n(n){this.controller=n,this.showProgressBar=t(this.showProgressBar,this),this.progressBar=new e.ProgressBar}var r,i,o,a;return a=e.HttpRequest,r=a.NETWORK_FAILURE,o=a.TIMEOUT_FAILURE,i=500,n.prototype.visitProposedToLocationWithAction=function(e,t){return this.controller.startVisitToLocationWithAction(e,t)},n.prototype.visitStarted=function(e){return e.issueRequest(),e.changeHistory(),e.loadCachedSnapshot()},n.prototype.visitRequestStarted=function(e){return this.progressBar.setValue(0),e.hasCachedSnapshot()||"restore"!==e.action?this.showProgressBarAfterDelay():this.showProgressBar()},n.prototype.visitRequestProgressed=function(e){return this.progressBar.setValue(e.progress)},n.prototype.visitRequestCompleted=function(e){return e.loadResponse()},n.prototype.visitRequestFailedWithStatusCode=function(e,t){switch(t){case r:case o:return this.reload();default:return e.loadResponse()}},n.prototype.visitRequestFinished=function(){return this.hideProgressBar()},n.prototype.visitCompleted=function(e){return e.followRedirect()},n.prototype.pageInvalidated=function(){return this.reload()},n.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,i)},n.prototype.showProgressBar=function(){return this.progressBar.show()},n.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},n.prototype.reload=function(){return window.location.reload()},n}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.History=function(){function n(e){this.delegate=e,this.onPageLoad=t(this.onPageLoad,this),this.onPopState=t(this.onPopState,this)}return n.prototype.start=function(){return this.started?void 0:(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0)},n.prototype.stop=function(){return this.started?(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1):void 0},n.prototype.push=function(t,n){return t=e.Location.wrap(t),this.update("push",t,n)},n.prototype.replace=function(t,n){return t=e.Location.wrap(t),this.update("replace",t,n)},n.prototype.onPopState=function(t){var n,r,i,o;return this.shouldHandlePopState()&&(o=null!=(r=t.state)?r.turbolinks:void 0)?(n=e.Location.wrap(window.location),i=o.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(n,i)):void 0},n.prototype.onPageLoad=function(){return e.defer(function(e){return function(){return e.pageLoaded=!0}}(this))},n.prototype.shouldHandlePopState=function(){return this.pageIsLoaded()},n.prototype.pageIsLoaded=function(){return this.pageLoaded||"complete"===document.readyState},n.prototype.update=function(e,t,n){var r;return r={turbolinks:{restorationIdentifier:n}},history[e+"State"](r,null,t)},n}()}.call(this),function(){e.Snapshot=function(){function t(e){var t,n;n=e.head,t=e.body,this.head=null!=n?n:document.createElement("head"),this.body=null!=t?t:document.createElement("body")}return t.wrap=function(e){return e instanceof this?e:this.fromHTML(e)},t.fromHTML=function(e){var t;return t=document.createElement("html"),t.innerHTML=e,this.fromElement(t)},t.fromElement=function(e){return new this({head:e.querySelector("head"),body:e.querySelector("body")})},t.prototype.clone=function(){return new t({head:this.head.cloneNode(!0),body:this.body.cloneNode(!0)})},t.prototype.getRootLocation=function(){var t,n;return n=null!=(t=this.getSetting("root"))?t:"/",new e.Location(n)},t.prototype.getCacheControlValue=function(){return this.getSetting("cache-control")},t.prototype.hasAnchor=function(e){try{return null!=this.body.querySelector("[id='"+e+"']")}catch(t){}},t.prototype.isPreviewable=function(){return"no-preview"!==this.getCacheControlValue()},t.prototype.isCacheable=function(){return"no-cache"!==this.getCacheControlValue()},t.prototype.getSetting=function(e){var t,n;return n=this.head.querySelectorAll("meta[name='turbolinks-"+e+"']"),null!=(t=n[n.length-1])?t.getAttribute("content"):void 0},t}()}.call(this),function(){var t=[].slice;e.Renderer=function(){function e(){}var n;return e.render=function(){var e,n,r,i;return r=arguments[0],n=arguments[1],e=3<=arguments.length?t.call(arguments,2):[],i=function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(this,e,function(){}),i.delegate=r,i.render(n),i},e.prototype.renderView=function(e){return this.delegate.viewWillRender(this.newBody),e(),this.delegate.viewRendered(this.newBody)},e.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},e.prototype.createScriptElement=function(e){var t;return"false"===e.getAttribute("data-turbolinks-eval")?e:(t=document.createElement("script"),t.textContent=e.textContent,n(t,e),t)},n=function(e,t){var n,r,i,o,a,s,l;for(s=[],n=0,r=(o=t.attributes).length;r>n;n++)a=o[n],i=a.name,l=a.value,s.push(e.setAttribute(i,l));return s},e}()}.call(this),function(){e.HeadDetails=function(){function e(e){var t,n,o,a,s,l;for(this.element=e,this.elements={},o=0,s=(l=this.element.childNodes).length;s>o;o++)(n=l[o]).nodeType===Node.ELEMENT_NODE&&(a=n.outerHTML,(null!=(t=this.elements)[a]?t[a]:t[a]={type:i(n),tracked:r(n),elements:[]}).elements.push(n))}var t,n,r,i;return e.prototype.hasElementWithKey=function(e){return e in this.elements},e.prototype.getTrackedElementSignature=function(){var e;return function(){var t,n;t=this.elements,n=[];for(e in t)t[e].tracked&&n.push(e);return n}.call(this).join("")},e.prototype.getScriptElementsNotInDetails=function(e){return this.getElementsMatchingTypeNotInDetails("script",e)},e.prototype.getStylesheetElementsNotInDetails=function(e){return this.getElementsMatchingTypeNotInDetails("stylesheet",e)},e.prototype.getElementsMatchingTypeNotInDetails=function(e,t){var n,r,i,o,a,s;i=this.elements,a=[];for(r in i)o=i[r],s=o.type,n=o.elements,s!==e||t.hasElementWithKey(r)||a.push(n[0]);return a},e.prototype.getProvisionalElements=function(){var e,t,n,r,i,o,a;n=[],r=this.elements;for(t in r)i=r[t],a=i.type,o=i.tracked,e=i.elements,null!=a||o?e.length>1&&n.push.apply(n,e.slice(1)):n.push.apply(n,e);return n},i=function(e){return t(e)?"script":n(e)?"stylesheet":void 0},r=function(e){return"reload"===e.getAttribute("data-turbolinks-track")},t=function(e){return"script"===e.tagName.toLowerCase()},n=function(e){var t;return"style"===(t=e.tagName.toLowerCase())||"link"===t&&"stylesheet"===e.getAttribute("rel")},e}()}.call(this),function(){var t=function(e,t){function r(){this.constructor=e}for(var i in t)n.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;e.SnapshotRenderer=function(n){function r(t,n){this.currentSnapshot=t,this.newSnapshot=n,this.currentHeadDetails=new e.HeadDetails(this.currentSnapshot.head),this.newHeadDetails=new e.HeadDetails(this.newSnapshot.head),this.newBody=this.newSnapshot.body}return t(r,n),r.prototype.render=function(e){return this.trackedElementsAreIdentical()?(this.mergeHead(),this.renderView(function(t){return function(){return t.replaceBody(),t.focusFirstAutofocusableElement(),e()}}(this))):this.invalidateView()},r.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},r.prototype.replaceBody=function(){return this.activateBodyScriptElements(),this.importBodyPermanentElements(),this.assignNewBody()},r.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},r.prototype.copyNewHeadStylesheetElements=function(){var e,t,n,r,i;for(i=[],t=0,n=(r=this.getNewHeadStylesheetElements()).length;n>t;t++)e=r[t],i.push(document.head.appendChild(e));return i},r.prototype.copyNewHeadScriptElements=function(){var e,t,n,r,i;for(i=[],t=0,n=(r=this.getNewHeadScriptElements()).length;n>t;t++)e=r[t],i.push(document.head.appendChild(this.createScriptElement(e)));return i},r.prototype.removeCurrentHeadProvisionalElements=function(){var e,t,n,r,i;for(i=[],t=0,n=(r=this.getCurrentHeadProvisionalElements()).length;n>t;t++)e=r[t],i.push(document.head.removeChild(e));return i},r.prototype.copyNewHeadProvisionalElements=function(){var e,t,n,r,i;for(i=[],t=0,n=(r=this.getNewHeadProvisionalElements()).length;n>t;t++)e=r[t],i.push(document.head.appendChild(e));return i},r.prototype.importBodyPermanentElements=function(){var e,t,n,r,i,o;for(o=[],t=0,n=(r=this.getNewBodyPermanentElements()).length;n>t;t++)i=r[t],(e=this.findCurrentBodyPermanentElement(i))?o.push(i.parentNode.replaceChild(e,i)):o.push(void 0);return o},r.prototype.activateBodyScriptElements=function(){var e,t,n,r,i,o;for(o=[],t=0,n=(r=this.getNewBodyScriptElements()).length;n>t;t++)i=r[t],e=this.createScriptElement(i),o.push(i.parentNode.replaceChild(e,i));return o},r.prototype.assignNewBody=function(){return document.body=this.newBody},r.prototype.focusFirstAutofocusableElement=function(){var e;return null!=(e=this.findFirstAutofocusableElement())?e.focus():void 0},r.prototype.getNewHeadStylesheetElements=function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},r.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},r.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},r.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},r.prototype.getNewBodyPermanentElements=function(){return this.newBody.querySelectorAll("[id][data-turbolinks-permanent]")},r.prototype.findCurrentBodyPermanentElement=function(e){return document.body.querySelector("#"+e.id+"[data-turbolinks-permanent]")},r.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll("script")},r.prototype.findFirstAutofocusableElement=function(){return document.body.querySelector("[autofocus]")},r}(e.Renderer)}.call(this),function(){var t=function(e,t){function r(){this.constructor=e}for(var i in t)n.call(t,i)&&(e[i]=t[i]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;e.ErrorRenderer=function(e){function n(e){this.html=e}return t(n,e),n.prototype.render=function(e){return this.renderView(function(t){return function(){return t.replaceDocumentHTML(),t.activateBodyScriptElements(),e()}}(this))},n.prototype.replaceDocumentHTML=function(){return document.documentElement.innerHTML=this.html},n.prototype.activateBodyScriptElements=function(){var e,t,n,r,i,o;for(o=[],t=0,n=(r=this.getScriptElements()).length;n>t;t++)i=r[t],e=this.createScriptElement(i),o.push(i.parentNode.replaceChild(e,i));return o},n.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll("script")},n}(e.Renderer)}.call(this),function(){e.View=function(){function t(e){this.delegate=e,this.element=document.documentElement}return t.prototype.getRootLocation=function(){return this.getSnapshot().getRootLocation()},t.prototype.getSnapshot=function(){return e.Snapshot.fromElement(this.element)},t.prototype.render=function(e,t){var n,r,i;return i=e.snapshot,n=e.error,r=e.isPreview,this.markAsPreview(r),null!=i?this.renderSnapshot(i,t):this.renderError(n,t)},t.prototype.markAsPreview=function(e){return e?this.element.setAttribute("data-turbolinks-preview",""):this.element.removeAttribute("data-turbolinks-preview")},t.prototype.renderSnapshot=function(t,n){return e.SnapshotRenderer.render(this.delegate,n,this.getSnapshot(),e.Snapshot.wrap(t))},t.prototype.renderError=function(t,n){return e.ErrorRenderer.render(this.delegate,n,t)},t}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.ScrollManager=function(){function n(n){this.delegate=n,this.onScroll=t(this.onScroll,this),this.onScroll=e.throttle(this.onScroll)}return n.prototype.start=function(){return this.started?void 0:(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)},n.prototype.stop=function(){return this.started?(removeEventListener("scroll",this.onScroll,!1),this.started=!1):void 0},n.prototype.scrollToElement=function(e){return e.scrollIntoView()},n.prototype.scrollToPosition=function(e){var t,n;return t=e.x,n=e.y,window.scrollTo(t,n)},n.prototype.onScroll=function(){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},n.prototype.updatePosition=function(e){var t;return this.position=e,null!=(t=this.delegate)?t.scrollPositionChanged(this.position):void 0},n}()}.call(this),function(){e.SnapshotCache=function(){function t(e){this.size=e,this.keys=[],this.snapshots={}}var n;return t.prototype.has=function(e){return n(e)in this.snapshots},t.prototype.get=function(e){var t;if(this.has(e))return t=this.read(e),this.touch(e),t},t.prototype.put=function(e,t){return this.write(e,t),this.touch(e),t},t.prototype.read=function(e){var t;return t=n(e),this.snapshots[t]},t.prototype.write=function(e,t){var r;return r=n(e),this.snapshots[r]=t},t.prototype.touch=function(e){var t,r;return r=n(e),(t=this.keys.indexOf(r))>-1&&this.keys.splice(t,1),this.keys.unshift(r),this.trim()},t.prototype.trim=function(){var e,t,n,r,i;for(i=[],e=0,n=(r=this.keys.splice(this.size)).length;n>e;e++)t=r[e],i.push(delete this.snapshots[t]);return i},n=function(t){return e.Location.wrap(t).toCacheKey()},t}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.Visit=function(){function n(n,r,i){this.controller=n,this.action=i,this.performScroll=t(this.performScroll,this),this.identifier=e.uuid(),this.location=e.Location.wrap(r),this.adapter=this.controller.adapter,this.state="initialized",this.timingMetrics={}}var r;return n.prototype.start=function(){return"initialized"===this.state?(this.recordTimingMetric("visitStart"),this.state="started",this.adapter.visitStarted(this)):void 0},n.prototype.cancel=function(){var e;return"started"===this.state?(null!=(e=this.request)&&e.cancel(),this.cancelRender(),this.state="canceled"):void 0},n.prototype.complete=function(){var e;return"started"===this.state?(this.recordTimingMetric("visitEnd"),this.state="completed","function"==typeof(e=this.adapter).visitCompleted&&e.visitCompleted(this),this.controller.visitCompleted(this)):void 0},n.prototype.fail=function(){var e;return"started"===this.state?(this.state="failed","function"==typeof(e=this.adapter).visitFailed?e.visitFailed(this):void 0):void 0},n.prototype.changeHistory=function(){var e,t;return this.historyChanged?void 0:(e=this.location.isEqualTo(this.referrer)?"replace":this.action,t=r(e),this.controller[t](this.location,this.restorationIdentifier),this.historyChanged=!0)},n.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new e.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},n.prototype.getCachedSnapshot=function(){var e;return!(e=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!e.hasAnchor(this.location.anchor)||"restore"!==this.action&&!e.isPreviewable()?void 0:e},n.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},n.prototype.loadCachedSnapshot=function(){var e,t;return(t=this.getCachedSnapshot())?(e=this.shouldIssueRequest(),this.render(function(){var n;return this.cacheSnapshot(),this.controller.render({snapshot:t,isPreview:e},this.performScroll),"function"==typeof(n=this.adapter).visitRendered&&n.visitRendered(this),e?void 0:this.complete()})):void 0},n.prototype.loadResponse=function(){return null!=this.response?this.render(function(){var e,t;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),"function"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),"function"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.complete())}):void 0},n.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},n.prototype.requestStarted=function(){var e;return this.recordTimingMetric("requestStart"),"function"==typeof(e=this.adapter).visitRequestStarted?e.visitRequestStarted(this):void 0},n.prototype.requestProgressed=function(e){var t;return this.progress=e,"function"==typeof(t=this.adapter).visitRequestProgressed?t.visitRequestProgressed(this):void 0},n.prototype.requestCompletedWithResponse=function(t,n){return this.response=t,null!=n&&(this.redirectedToLocation=e.Location.wrap(n)),this.adapter.visitRequestCompleted(this)},n.prototype.requestFailedWithStatusCode=function(e,t){return this.response=t,this.adapter.visitRequestFailedWithStatusCode(this,e)},n.prototype.requestFinished=function(){var e;return this.recordTimingMetric("requestEnd"),"function"==typeof(e=this.adapter).visitRequestFinished?e.visitRequestFinished(this):void 0},n.prototype.performScroll=function(){return this.scrolled?void 0:("restore"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},n.prototype.scrollToRestoredPosition=function(){var e,t;return null!=(e=null!=(t=this.restorationData)?t.scrollPosition:void 0)?(this.controller.scrollToPosition(e),!0):void 0},n.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},n.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},n.prototype.recordTimingMetric=function(e){var t;return null!=(t=this.timingMetrics)[e]?t[e]:t[e]=(new Date).getTime()},n.prototype.getTimingMetrics=function(){return e.copyObject(this.timingMetrics)},r=function(e){switch(e){case"replace":return"replaceHistoryWithLocationAndRestorationIdentifier";case"advance":case"restore":return"pushHistoryWithLocationAndRestorationIdentifier"}},n.prototype.shouldIssueRequest=function(){return"restore"!==this.action||!this.hasCachedSnapshot()},n.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},n.prototype.render=function(e){return this.cancelRender(),this.frame=requestAnimationFrame(function(t){return function(){return t.frame=null,e.call(t)}}(this))},n.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},n}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.Controller=function(){function n(){this.clickBubbled=t(this.clickBubbled,this),this.clickCaptured=t(this.clickCaptured,this),this.pageLoaded=t(this.pageLoaded,this),this.history=new e.History(this),this.view=new e.View(this),this.scrollManager=new e.ScrollManager(this),this.restorationData={},this.clearCache()}return n.prototype.start=function(){return e.supported&&!this.started?(addEventListener("click",this.clickCaptured,!0),addEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},n.prototype.disable=function(){return this.enabled=!1},n.prototype.stop=function(){return this.started?(removeEventListener("click",this.clickCaptured,!0),removeEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},n.prototype.clearCache=function(){return this.cache=new e.SnapshotCache(10)},n.prototype.visit=function(t,n){var r,i;return null==n&&(n={}),t=e.Location.wrap(t),this.applicationAllowsVisitingLocation(t)?this.locationIsVisitable(t)?(r=null!=(i=n.action)?i:"advance",this.adapter.visitProposedToLocationWithAction(t,r)):window.location=t:void 0},n.prototype.startVisitToLocationWithAction=function(t,n,r){var i;return e.supported?(i=this.getRestorationDataForIdentifier(r),this.startVisit(t,n,{restorationData:i})):window.location=t},n.prototype.startHistory=function(){return this.location=e.Location.wrap(window.location),this.restorationIdentifier=e.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},n.prototype.stopHistory=function(){return this.history.stop()},n.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(t,n){return this.restorationIdentifier=n,this.location=e.Location.wrap(t),this.history.push(this.location,this.restorationIdentifier)},n.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(t,n){return this.restorationIdentifier=n,this.location=e.Location.wrap(t),this.history.replace(this.location,this.restorationIdentifier)},n.prototype.historyPoppedToLocationWithRestorationIdentifier=function(t,n){var r;return this.restorationIdentifier=n,this.enabled?(r=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(t,"restore",{restorationIdentifier:this.restorationIdentifier,restorationData:r,historyChanged:!0}),this.location=e.Location.wrap(t)):this.adapter.pageInvalidated()},n.prototype.getCachedSnapshotForLocation=function(e){var t;return(t=this.cache.get(e))?t.clone():void 0},n.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable()},n.prototype.cacheSnapshot=function(){var e;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),e=this.view.getSnapshot(),this.cache.put(this.lastRenderedLocation,e.clone())):void 0},n.prototype.scrollToAnchor=function(e){var t;return(t=document.getElementById(e))?this.scrollToElement(t):this.scrollToPosition({x:0,y:0})},n.prototype.scrollToElement=function(e){return this.scrollManager.scrollToElement(e)},n.prototype.scrollToPosition=function(e){return this.scrollManager.scrollToPosition(e)},n.prototype.scrollPositionChanged=function(e){var t;return t=this.getCurrentRestorationData(),t.scrollPosition=e},n.prototype.render=function(e,t){return this.view.render(e,t)},n.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},n.prototype.viewWillRender=function(e){return this.notifyApplicationBeforeRender(e)},n.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},n.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},n.prototype.clickCaptured=function(){return removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},n.prototype.clickBubbled=function(e){var t,n,r;return this.enabled&&this.clickEventIsSignificant(e)&&(n=this.getVisitableLinkForNode(e.target))&&(r=this.getVisitableLocationForLink(n))&&this.applicationAllowsFollowingLinkToLocation(n,r)?(e.preventDefault(),t=this.getActionForLink(n),this.visit(r,{action:t})):void 0},n.prototype.applicationAllowsFollowingLinkToLocation=function(e,t){return!this.notifyApplicationAfterClickingLinkToLocation(e,t).defaultPrevented},n.prototype.applicationAllowsVisitingLocation=function(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented},n.prototype.notifyApplicationAfterClickingLinkToLocation=function(t,n){return e.dispatch("turbolinks:click",{target:t,data:{url:n.absoluteURL},cancelable:!0})},n.prototype.notifyApplicationBeforeVisitingLocation=function(t){return e.dispatch("turbolinks:before-visit",{data:{url:t.absoluteURL},cancelable:!0})},n.prototype.notifyApplicationAfterVisitingLocation=function(t){return e.dispatch("turbolinks:visit",{data:{url:t.absoluteURL}})},n.prototype.notifyApplicationBeforeCachingSnapshot=function(){return e.dispatch("turbolinks:before-cache")},n.prototype.notifyApplicationBeforeRender=function(t){return e.dispatch("turbolinks:before-render",{data:{newBody:t}})},n.prototype.notifyApplicationAfterRender=function(){return e.dispatch("turbolinks:render")},n.prototype.notifyApplicationAfterPageLoad=function(t){return null==t&&(t={}),e.dispatch("turbolinks:load",{data:{url:this.location.absoluteURL,timing:t}})},n.prototype.startVisit=function(e,t,n){var r;return null!=(r=this.currentVisit)&&r.cancel(),this.currentVisit=this.createVisit(e,t,n),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(e)},n.prototype.createVisit=function(t,n,r){var i,o,a,s,l;return o=null!=r?r:{},s=o.restorationIdentifier,a=o.restorationData,i=o.historyChanged,l=new e.Visit(this,t,n),l.restorationIdentifier=null!=s?s:e.uuid(),l.restorationData=e.copyObject(a),l.historyChanged=i,l.referrer=this.location,l},n.prototype.visitCompleted=function(e){return this.notifyApplicationAfterPageLoad(e.getTimingMetrics())},n.prototype.clickEventIsSignificant=function(e){return!(e.defaultPrevented||e.target.isContentEditable||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)},n.prototype.getVisitableLinkForNode=function(t){return this.nodeIsVisitable(t)?e.closest(t,"a[href]:not([target]):not([download])"):void 0},n.prototype.getVisitableLocationForLink=function(t){var n;return n=new e.Location(t.getAttribute("href")),this.locationIsVisitable(n)?n:void 0},n.prototype.getActionForLink=function(e){var t;return null!=(t=e.getAttribute("data-turbolinks-action"))?t:"advance"},n.prototype.nodeIsVisitable=function(t){var n;return!(n=e.closest(t,"[data-turbolinks]"))||"false"!==n.getAttribute("data-turbolinks")},n.prototype.locationIsVisitable=function(e){return e.isPrefixedBy(this.view.getRootLocation())&&e.isHTML()},n.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},n.prototype.getRestorationDataForIdentifier=function(e){var t;return null!=(t=this.restorationData)[e]?t[e]:t[e]={}},n}()}.call(this),function(){var t,n,r;e.start=function(){return n()?(null==e.controller&&(e.controller=t()),e.controller.start()):void 0},n=function(){return null==window.Turbolinks&&(window.Turbolinks=e),r()},t=function(){var t;return t=new e.Controller,t.adapter=new e.BrowserAdapter(t),t},(r=function(){return window.Turbolinks===e})()&&e.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd&&define(e)}.call(this),window.TinyMCERails={configuration:{"default":{}},initialize:function(e,t){if("undefined"!=typeof tinyMCE){var n=TinyMCERails.configuration[e||"default"];n=TinyMCERails._merge(n,t),tinyMCE.init(n)}else setTimeout(function(){TinyMCERails.initialize(e,t)},50)},setupTurbolinks:function(){document.addEventListener("turbolinks:before-render",function(){tinymce.remove()})},_merge:function(){for(var e={},t=0;t<arguments.length;++t){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&("[object Object]"===Object.prototype.toString.call(n[r])?e[r]=TinyMCERails._merge(e[r],n[r]):e[r]=n[r])}return e}},"undefined"!=typeof Turbolinks&&Turbolinks.supported&&TinyMCERails.setupTurbolinks(),window.tinymce=window.tinymce||{base:"/assets/tinymce",suffix:""},function(){"use strict";function e(){function e(n,r){return t.push(n+" ")>Et.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function t(e){return e[qt]=!0,e}function n(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Qt)-(~e.sourceIndex||Qt);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function r(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function i(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function o(e){return t(function(n){return n=+n,t(function(t,r){for(var i,o=e([],t.length,n),a=o.length;a--;)t[i=o[a]]&&(t[i]=!(r[i]=t[i]))})})}function a(e){return e&&typeof e.getElementsByTagName!==Zt&&e}function s(){}function l(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function u(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=$t++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,u=[Ut,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[qt]||(t[qt]={}),(s=l[r])&&s[0]===Ut&&s[1]===o)return u[2]=s[2];if(l[r]=u,u[2]=e(t,n,a))return!0}}}function c(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function d(e,t,n){for(var r=0,i=t.length;r<i;r++)Dn(e,t[r],n);return n}function f(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function h(e,n,r,i,o,a){return i&&!i[qt]&&(i=h(i)),o&&!o[qt]&&(o=h(o,a)),t(function(t,a,s,l){var u,c,h,p=[],m=[],g=a.length,v=t||d(n||"*",s.nodeType?[s]:s,[]),y=!e||!t&&n?v:f(v,p,e,s,l),b=r?o||(t?e:g||i)?[]:a:y;if(r&&r(y,b,s,l),i)for(u=f(b,m),i(u,[],s,l),c=u.length;c--;)(h=u[c])&&(b[m[c]]=!(y[m[c]]=h));if(t){if(o||e){if(o){for(u=[],c=b.length;c--;)(h=b[c])&&u.push(y[c]=h);o(null,b=[],u,l)}for(c=b.length;c--;)(h=b[c])&&(u=o?an.call(t,h):p[c])>-1&&(t[u]=!(a[u]=h))}}else b=f(b===a?b.splice(g,b.length):b),o?o(null,a,b,l):rn.apply(a,b)})}function p(e){for(var t,n,r,i=e.length,o=Et.relative[e[0].type],a=o||Et.relative[" "],s=o?1:0,d=u(function(e){return e===t},a,!0),f=u(function(e){return an.call(t,e)>-1},a,!0),m=[function(e,n,r){return!o&&(r||n!==Lt)||((t=n).nodeType?d(e,n,r):f(e,n,r))}];s<i;s++)if(n=Et.relative[e[s].type])m=[u(c(m),n)];else{if((n=Et.filter[e[s].type].apply(null,e[s].matches))[qt]){for(r=++s;r<i&&!Et.relative[e[r].type];r++);return h(s>1&&c(m),s>1&&l(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(fn,"$1"),n,s<r&&p(e.slice(s,r)),r<i&&p(e=e.slice(r)),r<i&&l(e))}m.push(n)}return c(m)}function m(e,n){var r=n.length>0,i=e.length>0,o=function(t,o,a,s,l){var u,c,d,h=0,p="0",m=t&&[],g=[],v=Lt,y=t||i&&Et.find.TAG("*",l),b=Ut+=null==v?1:Math.random()||.1,w=y.length;for(l&&(Lt=o!==It&&o);p!==w&&null!=(u=y[p]);p++){if(i&&u){for(c=0;d=e[c++];)if(d(u,o,a)){s.push(u);break}l&&(Ut=b)}r&&((u=!d&&u)&&h--,t&&m.push(u))}if(h+=p,r&&p!==h){for(c=0;d=n[c++];)d(m,g,o,a);if(t){if(h>0)for(;p--;)m[p]||g[p]||(g[p]=tn.call(s));g=f(g)}rn.apply(s,g),l&&!t&&g.length>0&&h+n.length>1&&Dn.uniqueSort(s)}return l&&(Ut=b,Lt=v),m};return r?t(o):o}function g(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!r,o=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||o||a&&!0===/mobile/i.test(n),l=e.isiOS()||e.isAndroid(),u=l&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:pe.constant(r),isiPhone:pe.constant(i),isTablet:pe.constant(s),isPhone:pe.constant(u),isTouch:pe.constant(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:pe.constant(c)}}function v(){var e=arguments;return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return Ve.each(e,function(e,n){r[e]=pe.constant(t[n])}),r}}function y(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return lo.validateStrArr("required",e),lo.validateStrArr("optional",t),lo.checkDupes(n),function(r){var i=zi.keys(r);Ve.forall(e,function(e){return Ve.contains(i,e)})||lo.reqMessage(e,i);var o=Ve.filter(i,function(e){return!Ve.contains(n,e)});o.length>0&&lo.unsuppMessage(o);var a={};return Ve.each(e,function(e){a[e]=pe.constant(r[e])}),Ve.each(t,function(e){a[e]=pe.constant(Object.prototype.hasOwnProperty.call(r,e)?we.some(r[e]):we.none())}),a}}function b(e,t){var n,r=0,i={};n=(t=t||{}).maxLoadTime||5e3;var o=function(t){e.getElementsByTagName("head")[0].appendChild(t)},a=function(t,a,s){var l,u,c,d,f=function(){for(var e=d.passed,t=e.length;t--;)e[t]();d.status=2,d.passed=[],d.failed=[]},h=function(){for(var e=d.failed,t=e.length;t--;)e[t]();d.status=3,d.passed=[],d.failed=[]},p=function(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&parseInt(e[1],10)<536)},m=function(e,t){e()||((new Date).getTime()-c<n?dt.setTimeout(t):h())},g=function(){m(function(){for(var t,n,r=e.styleSheets,i=r.length;i--;)if(t=r[i],(n=t.ownerNode?t.ownerNode:t.owningElement)&&n.id===l.id)return f(),!0},g)},v=function(){m(function(){try{var e=u.sheet.cssRules;return f(),!!e}catch(t){}},v)};if(t=Vn._addCacheSuffix(t),i[t]?d=i[t]:(d={passed:[],failed:[]},i[t]=d),a&&d.passed.push(a),s&&d.failed.push(s),1!==d.status)if(2!==d.status)if(3!==d.status){if(d.status=1,l=e.createElement("link"),l.rel="stylesheet",l.type="text/css",l.id="u"+r++,l.async=!1,l.defer=!1,c=(new Date).getTime(),"onload"in l&&!p())l.onload=g,l.onerror=h;else{if(navigator.userAgent.indexOf("Firefox")>0)return u=e.createElement("style"),u.textContent='@import "'+t+'"',v(),void o(u);g()}o(l),l.href=t}else h();else f()},s=function(e){return ea.nu(function(t){a(e,pe.compose(t,pe.constant(aa.value(e))),pe.compose(t,pe.constant(aa.error(e))))})},l=function(e){return e.fold(pe.identity,pe.identity)};return{load:a,loadAll:function(e,t,n){ra.par(Ve.map(e,s)).get(function(e){var r=Ve.partition(e,function(e){return e.isValue()});r.fail.length>0?n(r.fail.map(l)):t(r.pass.map(l))})}}}function w(e,t){var n=e,r=function(e,n,r,i){var o,a;if(e){if(!i&&e[n])return e[n];if(e!==t){if(o=e[r])return o;for(a=e.parentNode;a&&a!==t;a=a.parentNode)if(o=a[r])return o}}},i=function(e,n,r,i){var o,a,s;if(e){if(o=e[r],t&&o===t)return;if(o){if(!i)for(s=o[n];s;s=s[n])if(!s[n])return s;return o}if((a=e.parentNode)&&a!==t)return a}};this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=i(n,"lastChild","previousSibling",e)}}function C(e){var t,n,r,i,o,a,s,l,u,c,d,f,h,p={},m={},g=[],v={},y={},b=function(t,n,r){var i=e[t];return i?i=ss(i,/[, ]/,ss(i.toUpperCase(),/[, ]/)):(i=os[t])||(i=ss(n," ",ss(n.toUpperCase()," ")),i=us(i,r),os[t]=i),i};r=hs((e=e||{}).schema),!1===e.verify_html&&(e.valid_elements="*[*]"),t=ps(e.valid_styles),n=ps(e.invalid_styles,"map"),l=ps(e.valid_classes,"map"),i=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),o=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),a=b("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),s=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),c=b("non_empty_elements","td th iframe video audio object script pre code",a),d=b("move_caret_before_on_enter_elements","table",c),f=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),u=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",f),h=b("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),ls((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){y[e]=new RegExp("</"+e+"[^>]*>","gi")});var w=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},C=function(e){var t,n,r,i,o,a,s,l,u,c,d,f,h,m,v,y,b,C,S,x=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,k=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,T=/[*?+]/;if(e)for(e=fs(e,","),p["@"]&&(y=p["@"].attributes,b=p["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(o=x.exec(e[t])){if(m=o[1],u=o[2],v=o[3],l=o[5],f={},h=[],a={attributes:f,attributesOrder:h},"#"===m&&(a.paddEmpty=!0),"-"===m&&(a.removeEmpty=!0),"!"===o[4]&&(a.removeEmptyAttrs=!0),y){for(C in y)f[C]=y[C];h.push.apply(h,b)}if(l)for(r=0,i=(l=fs(l,"|")).length;r<i;r++)if(o=k.exec(l[r])){if(s={},d=o[1],c=o[2].replace(/[\\:]:/g,":"),m=o[3],S=o[4],"!"===d&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(c),s.required=!0),"-"===d){delete f[c],h.splice(ds(h,c),1);continue}m&&("="===m&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:c,value:S}),s.defaultValue=S),":"===m&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:c,value:S}),s.forcedValue=S),"<"===m&&(s.validValues=ss(S,"?"))),T.test(c)?(a.attributePatterns=a.attributePatterns||[],s.pattern=w(c),a.attributePatterns.push(s)):(f[c]||h.push(c),f[c]=s)}y||"@"!==u||(y=f,b=h),v&&(a.outputName=u,p[v]=a),T.test(u)?(a.pattern=w(u),g.push(a)):p[u]=a}},S=function(e){p={},g=[],C(e),ls(r,function(e,t){m[t]=e.children})},x=function(e){var t=/^(~)?(.+)$/;e&&(os.text_block_elements=os.block_elements=null,ls(fs(e,","),function(e){var n=t.exec(e),r="~"===n[1],i=r?"span":"div",o=n[2];if(m[o]=m[i],v[o]=i,r||(u[o.toUpperCase()]={},u[o]={}),!p[o]){var a=p[i];delete(a=us({},a)).removeEmptyAttrs,delete a.removeEmpty,p[o]=a}ls(m,function(e,t){e[i]&&(m[t]=e=us({},m[t]),e[o]=e[i])})}))},k=function(t){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;os[e.schema]=null,t&&ls(fs(t,","),function(e){var t,r,i=n.exec(e);i&&(r=i[1],t=r?m[i[2]]:m[i[2]]={"#comment":{}},t=m[i[2]],ls(fs(i[3],"|"),function(e){"-"===r?delete t[e]:t[e]={}}))})},T=function(e){var t,n=p[e];if(n)return n;for(t=g.length;t--;)if((n=g[t]).pattern.test(e))return n};e.valid_elements?S(e.valid_elements):(ls(r,function(e,t){p[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},m[t]=e.children}),"html5"!==e.schema&&ls(fs("strong/b em/i"),function(e){e=fs(e,"/"),p[e[1]].outputName=e[0]}),ls(fs("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){p[e]&&(p[e].removeEmpty=!0)}),ls(fs("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){p[e].paddEmpty=!0}),ls(fs("span"),function(e){p[e].removeEmptyAttrs=!0})),x(e.custom_elements),k(e.valid_children),C(e.extended_valid_elements),k("+ol[ul|ol],+ul[ul|ol]"),ls({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){p[t]&&(p[t].parentsRequired=fs(e))}),e.invalid_elements&&ls(cs(e.invalid_elements),function(e){p[e]&&delete p[e]}),T("span")||C("span[!data-mce-type|*]");return{children:m,elements:p,getValidStyles:function(){return t},getValidClasses:function(){return l},getBlockElements:function(){return u},getInvalidStyles:function(){return n},getShortEndedElements:function(){return a},getTextBlockElements:function(){return f},getTextInlineElements:function(){return h},getBoolAttrs:function(){return s},getElementRule:T,getSelfClosingElements:function(){return o},getNonEmptyElements:function(){return c},getMoveCaretBeforeOnEnterElements:function(){return d},getWhiteSpaceElements:function(){return i},getSpecialElements:function(){return y},isValidChild:function(e,t){var n=m[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:function(e,t){var n,r,i=T(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},getCustomElements:function(){return v},addValidElements:C,setValidElements:S,addCustomElements:x,addValidChildren:k}}function S(e,t){var n,r,i,o,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,c={},d="\ufeff";for(e=e||{},t&&(i=t.getValidStyles(),o=t.getInvalidStyles()),r=("\\\" \\' \\; \\: ; : "+d).split(" "),n=0;n<r.length;n++)c[r[n]]=d+n,c[d+n]=r[n];return{toHex:function(e){return e.replace(a,ms)},parse:function(t){var r,i,o,f,h={},p=e.url_converter,m=e.url_converter_scope||this,g=function(e,t,r){var i,o,a,s;if((i=h[e+"-top"+t])&&(o=h[e+"-right"+t])&&(a=h[e+"-bottom"+t])&&(s=h[e+"-left"+t])){var l=[i,o,a,s];for(n=l.length-1;n--&&l[n]===l[n+1];);n>-1&&r||(h[e+t]=-1===n?l[0]:l.join(" "),delete h[e+"-top"+t],delete h[e+"-right"+t],delete h[e+"-bottom"+t],delete h[e+"-left"+t])}},v=function(e){var t,n=h[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return h[e]=n[0],!0}},y=function(e,t,n,r){v(t)&&v(n)&&v(r)&&(h[e]=h[t]+" "+h[n]+" "+h[r],delete h[t],delete h[n],delete h[r])},b=function(e){return f=!0,c[e]},w=function(e,t){return f&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return c[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},C=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},S=function(e){return e.replace(/\\[0-9a-f]+/gi,C)},x=function(t,n,r,i,o,a){if(o=o||a)return"'"+(o=w(o)).replace(/\'/g,"\\'")+"'";if(n=w(n||r||i),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return p&&(n=p.call(m,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,b).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,b)});r=l.exec(t);)if(l.lastIndex=r.index+r[0].length,i=r[1].replace(u,"").toLowerCase(),o=r[2].replace(u,""),i&&o){if(i=S(i),o=S(o),-1!==i.indexOf(d)||-1!==i.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===i||/expression\s*\(|\/\*|\*\//.test(o)))continue;"font-weight"===i&&"700"===o?o="bold":"color"!==i&&"background-color"!==i||(o=o.toLowerCase()),o=(o=o.replace(a,ms)).replace(s,x),h[i]=f?w(o,!0):o}g("border","",!0),g("border","-width"),g("border","-color"),g("border","-style"),g("padding",""),g("margin",""),y("border","border-width","border-style","border-color"),"medium none"===h.border&&delete h.border,"none"===h["border-image"]&&delete h["border-image"]}return h},serialize:function(e,t){var n,r,a="",s=function(t){var n,r,o,s;if(n=i[t])for(r=0,o=n.length;r<o;r++)t=n[r],(s=e[t])&&(a+=(a.length>0?" ":"")+t+": "+s+";")},l=function(e,t){var n;return(!(n=o["*"])||!n[e])&&(!(n=o[t])||!n[e])};if(t&&i)s("*"),s(t);else for(n in e)!(r=e[n])||o&&!l(n,t)||(a+=(a.length>0?" ":"")+n+": "+r+";");return a}}}function x(e,t,n){var r=function(){return Al(e),0===t},i=function(){return Al(e)?t>=e.data.length:t>=e.childNodes.length},o=function(){var n;return(n=Pl(e.ownerDocument)).setStart(e,t),n.setEnd(e,t),n},a=function(){return n||(n=Vl(x(e,t))),n},s=function(){return a().length>0},l=function(n){return n&&e===n.container()&&t===n.offset()},u=function(n){return Ol(e,n?t-1:t)};return{container:kl.constant(e),offset:kl.constant(t),toRange:o,getClientRects:a,isVisible:s,isAtStart:r,isAtEnd:i,isEqual:l,getNode:u}}function k(e,t){var n=function(n){if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return a(n).getOr("")},r=function(e){try{return i(e)}catch(t){return we.none()}},i=function(t){return e(t)?we.from(t.dom().nodeValue):we.none()},o=gi.detect().browser,a=o.isIE()&&10===o.version.major?r:i;return{get:n,getOption:a,set:function(n,r){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom().nodeValue=r}}}function T(e){var t,n,r,i,o,a=[];return e=e||{},t=e.indent,n=Rf(e.indent_before||""),r=Rf(e.indent_after||""),i=is.getEncodeFunc(e.entity_encoding||"raw",e.entities),o="html"===e.element_format,{start:function(e,s,l){var u,c,d,f;if(t&&n[e]&&a.length>0&&(f=a[a.length-1]).length>0&&"\n"!==f&&a.push("\n"),a.push("<",e),s)for(u=0,c=s.length;u<c;u++)d=s[u],a.push(" ",d.name,'="',i(d.value,!0),'"');a[a.length]=!l||o?">":" />",l&&t&&r[e]&&a.length>0&&(f=a[a.length-1]).length>0&&"\n"!==f&&a.push("\n")},end:function(e){var n;a.push("</",e,">"),t&&r[e]&&a.length>0&&(n=a[a.length-1]).length>0&&"\n"!==n&&a.push("\n")},text:function(e,t){e.length>0&&(a[a.length]=t?e:i(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("<!--",e,"-->")},pi:function(e,n){n?a.push("<?",e," ",i(n),"?>"):a.push("<?",e,"?>"),t&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}}function E(e,t){void 0===t&&(t=C());var n=T(e);(e=e||{}).validate=!("validate"in e)||e.validate;return{serialize:function(r){var i,o;o=e.validate,i={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)do{a(e)}while(e=e.next)}},n.reset();var a=function(e){var r,s,l,u,c,d,f,h,p,m=i[e.type];if(m)m(e);else{if(r=e.name,s=e.shortEnded,l=e.attributes,o&&l&&l.length>1&&(d=[],d.map={},p=t.getElementRule(e.name))){for(f=0,h=p.attributesOrder.length;f<h;f++)(u=p.attributesOrder[f])in l.map&&(c=l.map[u],d.map[u]=c,d.push({name:u,value:c}));for(f=0,h=l.length;f<h;f++)(u=l[f].name)in d.map||(c=l.map[u],d.map[u]=c,d.push({name:u,value:c}));l=d}if(n.start(e.name,l,s),!s){if(e=e.firstChild)do{a(e)}while(e=e.next);n.end(r)}}};return 1!==r.type||e.inner?i[11](r):a(r),n.getContent()}}}function D(e,t,n,r,i){return e(n,r)?we.some(n):Oi.isFunction(i)&&i(n)?we.none():t(n,r,i)}function N(e){var t,n,r,i,o={state:{},exec:{},value:{}},a=e.settings;e.on("PreInit",function(){t=e.dom,n=e.selection,a=e.settings,r=e.formatter});var s=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=o.state[t])return n(t);try{return e.getDoc().queryCommandState(t)}catch(r){}return!1}},l=function(e,t){t=t||"exec",Ty(e,function(e,n){Ty(n.toLowerCase().split(","),function(n){o[t][n]=e})})};Ey(this,{execCommand:function(t,n,r,i){var a,s,l=!1;if(!e.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||i&&i.skip_focus?Sy.restore(e):e.focus(),(i=e.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;if(s=t.toLowerCase(),a=o.exec[s])return a(s,n,r),e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(Ty(e.plugins,function(i){if(i.execCommand&&i.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),l=!0,!1}),l)return l;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{l=e.getDoc().execCommand(t,n,r)}catch(u){}return!!l&&(e.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},queryCommandState:s,queryCommandValue:function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=o.value[t])return n(t);try{return e.getDoc().queryCommandValue(t)}catch(r){}}},queryCommandSupported:function(t){if(t=t.toLowerCase(),o.exec[t])return!0;try{return e.getDoc().queryCommandSupported(t)}catch(n){}return!1},addCommands:l,addCommand:function(t,n,r){t=t.toLowerCase(),o.exec[t]=function(t,i,o,a){return n.call(r||e,i,o,a)}},addQueryStateHandler:function(t,n,r){t=t.toLowerCase(),o.state[t]=function(){return n.call(r||e)}},addQueryValueHandler:function(t,n,r){t=t.toLowerCase(),o.value[t]=function(){return n.call(r||e)}},hasCustomCommand:function(e){return e=e.toLowerCase(),!!o.exec[e]}});var u=function(t,n,r){return n===undefined&&(n=Ay),r===undefined&&(r=null),e.getDoc().execCommand(t,n,r)},c=function(e){return r.match(e)},d=function(t,n){r.toggle(t,n?{value:n}:undefined),e.nodeChanged()},f=function(e){i=n.getBookmark(e)},h=function(){n.moveToBookmark(i)};l({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(t){var n,r=e.getDoc();try{u(t)}catch(o){n=Ry}if("paste"!==t||r.queryCommandEnabled(t)||(n=!0),n||!r.queryCommandSupported(t)){var i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");it.mac&&(i=i.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:i,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else r.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),Ty("left,center,right,justify".split(","),function(e){t!==e&&r.remove("align"+e)}),"none"!==t&&d("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var r,i;u(e),(r=t.getParent(n.getNode(),"ol,ul"))&&(i=r.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)&&(f(),t.split(i,r),h()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){d(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){d(e,n)},FontSize:function(e,t,n){var r,i;n>=1&&n<=7&&(i=_y(a.font_size_style_values),n=(r=_y(a.font_size_classes))?r[n-1]||n:i[n-1]||n),d(e,n)},RemoveFormat:function(e){r.remove(e)},mceBlockQuote:function(){d("blockquote")},FormatBlock:function(e,t,n){return d(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent({cleanup:Ry}),{cleanup:Ry}),n.moveToBookmark(t)},mceRemoveNode:function(t,r,i){var o=i||n.getNode();o!==e.getBody()&&(f(),e.dom.remove(o,Ry),h())},mceSelectNodeDepth:function(r,i,o){var a=0;t.getParent(n.getNode(),function(e){if(1===e.nodeType&&a++===o)return n.select(e),Ay},e.getBody())},mceSelectNode:function(e,t,r){n.select(r)},mceInsertContent:function(t,n,r){Wf.insertAtCaret(e,r)},mceInsertRawHTML:function(t,r,i){n.setContent("tiny_mce_marker"),e.setContent(e.getContent().replace(/tiny_mce_marker/g,function(){return i}))},mceToggleFormat:function(e,t,n){d(n)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){ky(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,r,i){e.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,i,o){var a;"string"==typeof o&&(o={href:o}),a=t.getParent(n.getNode(),"a"),o.href=o.href.replace(" ","%20"),a&&o.href||r.remove("link"),o.href&&r.apply("link",o,a)},selectAll:function(){var e=t.getParent(n.getStart(),ja.isContentEditableTrue);if(e){var r=t.createRng();r.selectNodeContents(e),n.setRng(r)}},"delete":function(){Ev.deleteCommand(e)},forwardDelete:function(){Ev.forwardDeleteCommand(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){return Jv.insert(e,r),!0}}),l({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var i="align"+e.substring(7),o=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks(),a=Dy(o,function(e){return!!r.matchNode(e,i)});return-1!==Ny(a,Ry)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return c(e)},mceBlockQuote:function(){return c("blockquote")},Outdent:function(){var e;if(a.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return Ry;if((e=t.getParent(n.getEnd(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return Ry}return s("InsertUnorderedList")||s("InsertOrderedList")||!a.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var r=t.getParent(n.getNode(),"ul,ol");return r&&("insertunorderedlist"===e&&"UL"===r.tagName||"insertorderedlist"===e&&"OL"===r.tagName)}},"state"),l({"FontSize,FontName":function(e){var r,i=0;return(r=t.getParent(n.getNode(),"span"))&&(i="fontsize"===e?r.style.fontSize:r.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),i}},"value"),l({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}})}function _(e){var t=this,n={},r=[],i=function(e){var t,n,r={};Yy(Gy(e,"+"),function(e){e in Ky?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=Xy[e]||e.toUpperCase().charCodeAt(0))}),t=[r.keyCode];for(n in Ky)r[n]?t.push(n):r[n]=!1;return r.id=t.join(","),r.access&&(r.alt=!0,it.mac?r.ctrl=!0:r.shift=!0),r.meta&&(it.mac?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r},o=function(t,n,r,o){var a;return a=Vn.map(Gy(t,">"),i),a[a.length-1]=Vn.extend(a[a.length-1],{func:r,scope:o||e}),Vn.extend(a[0],{desc:e.translate(n),subpatterns:a.slice(1)})},a=function(e){return e.altKey||e.ctrlKey||e.metaKey},s=function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123},l=function(e,t){return!!t&&(t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&(t.alt===e.altKey&&t.shift===e.shiftKey&&(!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0))))},u=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",function(e){!a(e)&&!s(e)||e.isDefaultPrevented()||(Yy(n,function(t){if(l(e,t))return r=t.subpatterns.slice(0),"keydown"===e.type&&u(t),!0}),l(e,r[0])&&(1===r.length&&"keydown"===e.type&&u(r[0]),r.shift()))}),t.add=function(t,r,i,a){var s;return s=i,"string"==typeof i?i=function(){e.execCommand(s,!1,null)}:Vn.isArray(s)&&(i=function(){e.execCommand(s[0],s[1],s[2])}),Yy(Gy(Vn.trim(t.toLowerCase())),function(e){var t=o(e,r,i,a);n[t.id]=t}),!0},t.remove=function(e){var t=o(e);return!!n[t.id]&&(delete n[t.id],!0)}}function R(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}}function A(e){var t=[],n=function(){var t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():R()},r=function(){return we.from(t[0])},i=function(e,t){return!(e.type!==t.type||e.text!==t.text||e.progressBar||e.timeout||t.progressBar||t.timeout)},o=function(){t.length>0&&n().reposition(t)},a=function(e){t.push(e)},s=function(e){Ve.findIndex(t,function(t){return t===e}).each(function(e){t.splice(e,1)})},l=function(r){if(!e.removed&&xb.isEditorAttachedToDom(e))return Ve.find(t,function(e){return i(n().getArgs(e),r)}).getOrThunk(function(){e.editorManager.setActive(e);var t=n().open(r,function(){s(t),o()});return a(t),o(),t})},u=function(){r().each(function(e){n().close(e),s(e),o()})},c=function(){return t};return function(e){e.on("SkinLoaded",function(){var t=e.settings.service_message;t&&l({text:t,type:"warning",timeout:0,icon:""})}),e.on("ResizeEditor ResizeWindow",function(){dt.requestAnimationFrame(o)}),e.on("remove",function(){Ve.each(t,function(e){n().close(e)})})}(e),{open:l,close:u,getNotifications:c}}function L(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}function M(e){var t=[],n=function(){var t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():L()},r=function(e,t){return function(){return t?t.apply(e,arguments):undefined}},i=function(t){e.fire("OpenWindow",{win:t})},o=function(t){e.fire("CloseWindow",{win:t})},a=function(e){t.push(e),i(e)},s=function(n){Ve.findIndex(t,function(e){return e===n}).each(function(r){t.splice(r,1),o(n),0===t.length&&e.focus()})},l=function(){return we.from(t[t.length-1])},u=function(t,r){e.editorManager.setActive(e),Sy.store(e);var i=n().open(t,r,s);return a(i),i},c=function(e,t,i){var o=n().alert(e,r(i||this,t),s);a(o)},d=function(e,t,i){var o=n().confirm(e,r(i||this,t),s);a(o)},f=function(){l().each(function(e){n().close(e),s(e)})},h=function(){return l().map(n().getParams).getOr(null)},p=function(e){l().each(function(t){n().setParams(t,e)})},m=function(){return t};return e.on("remove",function(){Ve.each(t.slice(0),function(e){n().close(e)})}),{windows:t,open:u,alert:c,confirm:d,close:f,getParams:h,setParams:p,getWindows:m}}function O(){return new(Ze.getOrDie("XMLHttpRequest"))}function P(e,t){var n={},r=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},i=function(e,n,i,o){var a,s;(a=new O).open("POST",t.url),a.withCredentials=t.credentials,a.upload.onprogress=function(e){o(e.loaded/e.total*100)},a.onerror=function(){i("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var e;a.status<200||a.status>=300?i("HTTP Error: "+a.status):(e=JSON.parse(a.responseText))&&"string"==typeof e.location?n(r(t.basePath,e.location)):i("Invalid JSON: "+a.responseText)},(s=new FormData).append("file",e.blob(),e.filename()),a.send(s)},o=function(){return new at(function(e){e([])})},a=function(e,t){return{url:t,blobInfo:e,status:!0}},s=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},l=function(e,t){Vn.each(n[e],function(e){e(t)}),delete n[e]},u=function(t,n,r){return e.markPending(t.blobUri()),new at(function(i){var o,u=function(){};try{var c=function(){o&&(o.close(),u)};n(t,function(n){c(),e.markUploaded(t.blobUri(),n),l(t.blobUri(),a(t,n)),i(a(t,n))},function(n){c(),e.removeFailed(t.blobUri()),l(t.blobUri(),s(t,n)),i(s(t,n))},function(e){e<0||e>100||(o||(o=r()),o.progressBar.value(e))})}catch(d){i(s(t,d.message))}})},c=function(e){return e===i},d=function(e){var t=e.blobUri();return new at(function(e){n[t]=n[t]||[],n[t].push(e)})},f=function(n,r){return n=Vn.grep(n,function(t){return!e.isUploaded(t.blobUri())}),at.all(Vn.map(n,function(n){return e.isPending(n.blobUri())?d(n):u(n,t.handler,r)}))},h=function(e,n){return!t.url&&c(t.handler)?o():f(e,n)};return t=Vn.extend({credentials:!1,handler:i},t),{upload:h}}function I(e,t){return new(Ze.getOrDie("Blob"))(e,t)}function H(){return new(Ze.getOrDie("FileReader"))}function B(e){return new(Ze.getOrDie("Uint8Array"))(e)}function F(e,t){var n={};return{findAll:function(r,i){var o,a;return i||(i=kl.constant(!0)),o=An.filter(Wb(r),function(t){var n=t.src;return!!it.fileApi&&(!t.hasAttribute("data-mce-bogus")&&(!t.hasAttribute("data-mce-placeholder")&&(!(!n||n===it.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n):0===n.indexOf("data:")&&i(t)))))}),a=An.map(o,function(e){var r;return n[e.src]?new at(function(t){n[e.src].then(function(n){if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})})}):(r=new at(function(n,r){Fb(t,e,n,r)}).then(function(e){return delete n[e.image.src],e})["catch"](function(t){return delete n[e.src],t}),n[e.src]=r,r)}),at.all(a)}}}function W(){var e=[],t=kl.constant,n=function(e){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[e.toLowerCase()]||"dat"},r=function(e,t,n,r){return i("object"==typeof e?e:{id:e,name:r,blob:t,base64:n})},i=function(e){var r,i;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return r=e.id||qb.uuid("blobid"),i=e.name||r,{id:t(r),name:t(i),filename:t(i+"."+n(e.blob.type)),blob:t(e.blob),base64:t(e.base64),blobUri:t(e.blobUri||Je.createObjectURL(e.blob)),uri:t(e.uri)}},o=function(t){a(t.id())||e.push(t)},a=function(e){return s(function(t){return t.id()===e})},s=function(t){return An.filter(e,t)[0]};return{create:r,add:o,get:a,getByUri:function(e){return s(function(t){return t.blobUri()===e})},findFirst:s,removeByUri:function(t){e=An.filter(e,function(e){return e.blobUri()!==t||(Je.revokeObjectURL(e.blobUri()),!1)})},destroy:function(){An.each(e,function(e){Je.revokeObjectURL(e.blobUri())}),e=[]}}}function z(){var e=1,t=2,n={},r=function(e,t){return{status:e,resultUri:t}},i=function(e){return e in n};return{hasBlobUri:i,getResultUri:function(e){var t=n[e];return t?t.resultUri:null},isPending:function(t){return!!i(t)&&n[t].status===e},isUploaded:function(e){return!!i(e)&&n[e].status===t},markPending:function(t){n[t]=r(e,null)},markUploaded:function(e,i){n[e]=r(t,i)},removeFailed:function(e){delete n[e]},destroy:function(){n={}}}}function j(e){var t,n,r=W(),i=e.settings,o=z(),a=function(t){return function(n){return e.selection?t(n):[]}},s=function(){return"?"+(new Date).getTime()},l=function(e,t,n){var r=0;do{-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1)}while(-1!==r);return e},u=function(e,t,n){return e=l(e,'src="'+t+'"','src="'+n+'"'),e=l(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},c=function(t,n){An.each(e.undoManager.data,function(e){"fragmented"===e.type?e.fragments=An.map(e.fragments,function(e){return u(e,t,n)}):e.content=u(e.content,t,n)})},d=function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},f=function(t,n){r.removeByUri(t.src),c(t.src,n),e.$(t).attr({src:i.images_reuse_filename?n+s():n,"data-mce-src":e.convertURL(n,"src")})},h=function(n){return t||(t=P(o,{url:i.images_upload_url,basePath:i.images_upload_base_path,credentials:i.images_upload_credentials,handler:i.images_upload_handler})),g().then(a(function(r){var i;return i=An.map(r,function(e){return e.blobInfo}),t.upload(i,d).then(a(function(t){var i=An.map(t,function(t,n){var i=r[n].image;return t.status&&!1!==e.settings.images_replace_blob_uris?f(i,t.url):t.error&&_b.uploadError(e,t.error),{element:i,status:t.status}});return n&&n(i),i}))}))},p=function(e){if(!1!==i.automatic_uploads)return h(e)},m=function(e){return!i.images_dataimg_filter||i.images_dataimg_filter(e)},g=function(){return n||(n=F(o,r)),n.findAll(e.getBody(),m).then(a(function(t){return t=An.filter(t,function(t){return"string"!=typeof t||(_b.displayError(e,t),!1)}),An.each(t,function(e){c(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))},v=function(){r.destroy(),o.destroy(),n=t=null},y=function(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var i=o.getResultUri(n);if(i)return'src="'+i+'"';var a=r.getByUri(n);return a||(a=An.reduce(e.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),a?'src="data:'+a.blob().type+";base64,"+a.base64()+'"':t})};return e.on("setContent",function(){!1!==e.settings.automatic_uploads?p():g()}),e.on("RawSaveContent",function(e){e.content=y(e.content)}),e.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=y(e.content))}),e.on("PostRender",function(){e.parser.addNodeFilter("img",function(e){An.each(e,function(e){var t=e.attr("src");if(!r.getByUri(t)){var n=o.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:r,uploadImages:h,uploadImagesAuto:p,scanForImages:g,destroy:v}}function q(e){var t,n=[],r=function(t){var r,i;if((i=e.$(t).parentsUntil(e.getBody()).add(t)).length===n.length){for(r=i.length;r>=0&&i[r]===n[r];r--);if(-1===r)return n=i,!0}return n=i,!1};"onselectionchange"in e.getDoc()||e.on("NodeChange Click MouseUp KeyUp Focus",function(n){var r,i;i={startContainer:(r=e.selection.getRng()).startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset},"nodechange"!==n.type&&Dv.isEq(i,t)||e.fire("SelectionChange"),t=i}),e.on("contextmenu",function(){e.fire("SelectionChange")}),e.on("SelectionChange",function(){var t=e.selection.getStart(!0);!t||!it.range&&e.selection.isCollapsed()||!r(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("MouseUp",function(t){t.isDefaultPrevented()||("IMG"===e.selection.getNode().nodeName?dt.setEditorTimeout(e,function(){e.nodeChanged()}):e.nodeChanged())}),this.nodeChanged=function(t){var n,r,i,o=e.selection;e.initialized&&o&&!e.settings.disable_nodechange&&!e.readonly&&(i=e.getBody(),(n=o.getStart(!0)||i).ownerDocument===e.getDoc()&&e.dom.isChildOf(n,i)||(n=i),r=[],e.dom.getParent(n,function(e){if(e===i)return!0;r.push(e)}),(t=t||{}).element=n,t.parents=r,e.fire("NodeChange",t))}}function V(e,t){void 0===t&&(t=C());var n=function(){};!1!==(e=e||{}).fix_self_closing&&(e.fix_self_closing=!0),tC("comment cdata text start end pi doctype".split(" "),function(t){t&&(self[t]=e[t]||n)});var r=e.comment?e.comment:n,i=e.cdata?e.cdata:n,o=e.text?e.text:n,a=e.start?e.start:n,s=e.end?e.end:n,l=e.pi?e.pi:n,u=e.doctype?e.doctype:n;return{parse:function(n){var c,d,f,h,p,m,g,v,y,b,w,C,S,x,k,T,E,D,N,_,R,A,L,M,O,P,I,H,B,F=0,W=[],z=0,j=is.decode,q=Vn.makeMap("src,href,data,background,formaction,poster"),V=/((java|vb)script|mhtml):/i,U=/^data:/i,$=function(e){var t,n;for(t=W.length;t--&&W[t].name!==e;);if(t>=0){for(n=W.length-1;n>=t;n--)(e=W[n]).valid&&s(e.name);W.length=t}},Y=function(t,n,r,i,o){var a,s,l=/[\s\u0000-\u001F]+/g;if(n=n.toLowerCase(),r=n in w?n:j(r||i||o||""),S&&!v&&!1===nC(n)){if(!(a=D[n])&&N){for(s=N.length;s--&&!(a=N[s]).pattern.test(n););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(r in a.validValues))return}if(q[n]&&!e.allow_script_urls){var u=r.replace(l,"");try{u=decodeURIComponent(u)}catch(c){u=unescape(u)}if(V.test(u))return;if(!e.allow_html_data_urls&&U.test(u)&&!/^data:image\//i.test(u))return}v&&(n in q||0===n.indexOf("on"))||(h.map[n]=r,h.push({name:n,value:r}))};for(O=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),P=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,b=t.getShortEndedElements(),M=e.self_closing_elements||t.getSelfClosingElements(),w=t.getBoolAttrs(),S=e.validate,y=e.remove_internals,B=e.fix_self_closing,I=t.getSpecialElements(),L=n+">";c=O.exec(L);){if(F<c.index&&o(j(n.substr(F,c.index-F))),d=c[6])":"===(d=d.toLowerCase()).charAt(0)&&(d=d.substr(1)),$(d);else if(d=c[7]){if(c.index+c[0].length>n.length){o(j(n.substr(c.index))),F=c.index+c[0].length;continue}if(":"===(d=d.toLowerCase()).charAt(0)&&(d=d.substr(1)),C=d in b,B&&M[d]&&W.length>0&&W[W.length-1].name===d&&$(d),!S||(x=t.getElementRule(d))){if(k=!0,S&&(D=x.attributes,N=x.attributePatterns),(E=c[8])?((v=-1!==E.indexOf("data-mce-type"))&&y&&(k=!1),(h=[]).map={},E.replace(P,Y)):(h=[]).map={},S&&!v){if(_=x.attributesRequired,R=x.attributesDefault,A=x.attributesForced,x.removeEmptyAttrs&&!h.length&&(k=!1),A)for(p=A.length;p--;)g=(T=A[p]).name,"{$uid}"===(H=T.value)&&(H="mce_"+z++),h.map[g]=H,h.push({name:g,value:H});if(R)for(p=R.length;p--;)(g=(T=R[p]).name)in h.map||("{$uid}"===(H=T.value)&&(H="mce_"+z++),h.map[g]=H,h.push({name:g,value:H}));if(_){for(p=_.length;p--&&!(_[p]in h.map););-1===p&&(k=!1)}if(T=h.map["data-mce-bogus"]){if("all"===T){F=iC(t,n,O.lastIndex),O.lastIndex=F;continue}k=!1}}k&&a(d,h,C)}else k=!1;if(f=I[d]){f.lastIndex=F=c.index+c[0].length,(c=f.exec(n))?(k&&(m=n.substr(F,c.index-F)),F=c.index+c[0].length):(m=n.substr(F),F=n.length),k&&(m.length>0&&o(m,!0),s(d)),O.lastIndex=F;continue}C||(E&&E.indexOf("/")===E.length-1?k&&s(d):W.push({name:d,valid:k}))}else(d=c[1])?(">"===d.charAt(0)&&(d=" "+d),e.allow_conditional_comments||"[if"!==d.substr(0,3).toLowerCase()||(d=" "+d),r(d)):(d=c[2])?i(rC(d)):(d=c[3])?u(d):(d=c[4])&&l(d,c[5]);F=c.index+c[0].length}for(F<n.length&&o(j(n.substr(F))),p=W.length-1;p>=0;p--)(d=W[p]).valid&&s(d.name)}}}function U(e){var t,n,r=this,i=0,o=[],a=0,s=function(){return 0===a},l=function(e){s()&&(r.typing=e)},u=function(t){e.setDirty(t)},c=function(e){l(!1),r.add({},e)},d=function(){r.typing&&(l(!1),r.add())};return e.on("init",function(){r.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(d(),r.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&c(e)}),e.on("ObjectResizeStart Cut",function(){r.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("DragEnd",c),e.on("KeyUp",function(t){var i=t.keyCode;t.isDefaultPrevented()||((i>=33&&i<=36||i>=37&&i<=40||45===i||t.ctrlKey)&&(c(),e.nodeChanged()),46!==i&&8!==i||e.nodeChanged(),n&&r.typing&&!1===xC.isEq(xC.createFromEditor(e),o[0])&&(!1===e.isDirty()&&(u(!0),e.fire("change",{level:o[0],lastLevel:null})),e.fire("TypingUndo"),n=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented())if(t>=33&&t<=36||t>=37&&t<=40||45===t)r.typing&&c(e);else{var i=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||t>20)||224===t||91===t||r.typing||i||(r.beforeChange(),l(!0),r.add({},e),n=!0)}}),e.on("MouseDown",function(e){r.typing&&c(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),r={data:o,typing:!1,beforeChange:function(){s()&&(t=nf.getUndoBookmark(e.selection))},add:function(n,r){var a,l,c,d=e.settings;if(c=xC.createFromEditor(e),n=n||{},n=Vn.extend(n,c),!1===s()||e.removed)return null;if(l=o[i],e.fire("BeforeAddUndo",{level:n,lastLevel:l,originalEvent:r}).isDefaultPrevented())return null;if(l&&xC.isEq(l,n))return null;if(o[i]&&(o[i].beforeBookmark=t),d.custom_undo_redo_levels&&o.length>d.custom_undo_redo_levels){for(a=0;a<o.length-1;a++)o[a]=o[a+1];o.length--,i=o.length}n.bookmark=nf.getUndoBookmark(e.selection),i<o.length-1&&(o.length=i+1),o.push(n),i=o.length-1;var f={level:n,lastLevel:l,originalEvent:r};return e.fire("AddUndo",f),i>0&&(u(!0),e.fire("change",f)),n},undo:function(){var t;return r.typing&&(r.add(),r.typing=!1,l(!1)),i>0&&(t=o[--i],xC.applyToEditor(e,t,!0),u(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return i<o.length-1&&(t=o[++i],xC.applyToEditor(e,t,!1),u(!0),e.fire("redo",{level:t})),t},clear:function(){o=[],i=0,r.typing=!1,r.data=o,e.fire("ClearUndos")},hasUndo:function(){return i>0||r.typing&&o[0]&&!xC.isEq(xC.createFromEditor(e),o[0])},hasRedo:function(){return i<o.length-1&&!r.typing},transact:function(e){return d(),r.beforeChange(),r.ignore(e),r.add()},ignore:function(e){try{a++,e()}finally{a--}},extra:function(t,n){var a,s;r.transact(t)&&(s=o[i].bookmark,a=o[i-1],xC.applyToEditor(e,a,!0),r.transact(n)&&(o[i-1].beforeBookmark=s))}}}function $(e){var t={},n=function(e){return e?t[e]:t},r=function(e,n){e&&("string"!=typeof e?Vn.each(e,function(e,t){r(t,e)}):(n=n.length?n:[n],Vn.each(n,function(e){"undefined"==typeof e.deep&&(e.deep=!e.selector),"undefined"==typeof e.split&&(e.split=!e.selector||e.inline),"undefined"==typeof e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),t[e]=n))},i=function(e){return e&&t[e]&&delete t[e],t};return r(dS.get(e.dom)),r(e.settings.formats),{get:n,register:r,unregister:i}}function Y(e){var t=$(e),n=yg(null);return wS.setup(e),Xm.setup(e),{get:t.get,register:t.register,unregister:t.unregister,apply:pe.curry(aS.applyFormat,e),remove:pe.curry(UC.remove,e),toggle:pe.curry(bS.toggle,e,t),match:pe.curry(Rm.match,e),matchAll:pe.curry(Rm.matchAll,e),matchNode:pe.curry(Rm.matchNode,e),canApply:pe.curry(Rm.canApply,e),formatChanged:pe.curry(cS.formatChanged,e,n),getCssText:pe.curry(yS.getCssText,e)}}function G(e,t){void 0===t&&(t=C());var n={},r=[],i={},o={};(e=e||{}).validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var a=function(e){var n,r,i,o,a,l,u,c,d,f,h,p,m,g,v,y;for(p=YS("tr,td,th,tbody,thead,tfoot,table"),f=t.getNonEmptyElements(),h=t.getWhiteSpaceElements(),m=t.getTextBlockElements(),g=t.getSpecialElements(),n=0;n<e.length;n++)if((r=e[n]).parent&&!r.fixed)if(m[r.name]&&"li"===r.parent.name){for(v=r.next;v&&m[v.name];)v.name="li",v.fixed=!0,r.parent.insert(v,r.parent),v=v.next;r.unwrap(r)}else{for(o=[r],i=r.parent;i&&!t.isValidChild(i.name,r.name)&&!p[i.name];i=i.parent)o.push(i);if(i&&o.length>1){for(o.reverse(),a=l=s(o[0].clone()),d=0;d<o.length-1;d++){for(t.isValidChild(l.name,o[d].name)?(u=s(o[d].clone()),l.append(u)):u=l,c=o[d].firstChild;c&&c!==o[d+1];)y=c.next,u.append(c),c=y;l=u}VS(t,f,h,a)?i.insert(r,o[0],!0):(i.insert(a,o[0],!0),i.insert(r,a)),i=o[0],(VS(t,f,h,i)||jS(i,"br"))&&i.empty().remove()}else if(r.parent){if("li"===r.name){if((v=r.prev)&&("ul"===v.name||"ul"===v.name)){v.append(r);continue}if((v=r.next)&&("ul"===v.name||"ul"===v.name)){v.insert(r,v.firstChild,!0);continue}r.wrap(s(new FS("ul",1)));continue}t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)?r.wrap(s(new FS("div",1))):g[r.name]?r.empty().remove():r.unwrap()}}},s=function(e){var t,a,s;a in n&&((s=i[a])?s.push(e):i[a]=[e]),t=r.length;for(;t--;)(a=r[t].name)in e.attributes.map&&((s=o[a])?s.push(e):o[a]=[e]);return e},l={schema:t,addAttributeFilter:function(e,t){GS(XS(e),function(e){var n;for(n=0;n<r.length;n++)if(r[n].name===e)return void r[n].callbacks.push(t);r.push({name:e,callbacks:[t]})})},getAttributeFilters:function(){return[].concat(r)},addNodeFilter:function(e,t){GS(XS(e),function(e){var r=n[e];r||(n[e]=r=[]),r.push(t)})},getNodeFilters:function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},filterNode:s,parse:function(s,l){var u,c,d,f,h,p,m,g,v,y,b,w=[];l=l||{},i={},o={},v=KS(YS("script,style,head,html,body,title,meta,param"),t.getBlockElements());var C=t.getNonEmptyElements(),S=t.children,x=e.validate,k="forced_root_block"in l?l.forced_root_block:e.forced_root_block,T=t.getWhiteSpaceElements(),E=/^[ \t\r\n]+/,D=/[ \t\r\n]+$/,N=/[ \t\r\n]+/g,_=/^[ \t\r\n]+$/,R=function(){var n,r,i=O.firstChild,o=function(e){e&&((i=e.firstChild)&&3===i.type&&(i.value=i.value.replace(E,"")),(i=e.lastChild)&&3===i.type&&(i.value=i.value.replace(D,"")))};if(t.isValidChild(O.name,k.toLowerCase())){for(;i;)n=i.next,3===i.type||1===i.type&&"p"!==i.name&&!v[i.name]&&!i.attr("data-mce-type")?r?r.append(i):((r=A(k,1)).attr(e.forced_root_block_attrs),O.insert(r,i),r.append(i)):(o(r),r=null),i=n;o(r)}},A=function(e,t){var r,o=new FS(e,t);return e in n&&((r=i[e])?r.push(o):i[e]=[o]),o},L=function(e){var n,r,i,o,a=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if((i=n.value.replace(D,"")).length>0)return void(n.value=i);if(r=n.next){if(3===r.type&&r.value.length){n=n.prev;continue}if(!a[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}o=n.prev,n.remove(),n=o}},M=function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n};u=oC({validate:x,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:M(t.getSelfClosingElements()),cdata:function(e){b.append(A("#cdata",4)).value=e},text:function(e,t){var n;y||(e=e.replace(N," "),US(b.lastChild,v)&&(e=e.replace(E,""))),0!==e.length&&((n=A("#text",3)).raw=!!t,b.append(n).value=e)},comment:function(e){b.append(A("#comment",8)).value=e},pi:function(e,t){b.append(A(e,7)).value=t,L(b)},doctype:function(e){b.append(A("#doctype",10)).value=e,L(b)},start:function(e,n,i){var a,s,l,u,c;if(l=x?t.getElementRule(e):{}){for((a=A(l.outputName||e,1)).attributes=n,a.shortEnded=i,b.append(a),(c=S[b.name])&&S[a.name]&&!c[a.name]&&w.push(a),s=r.length;s--;)(u=r[s].name)in n.map&&((m=o[u])?m.push(a):o[u]=[a]);v[e]&&L(a),i||(b=a),!y&&T[e]&&(y=!0)}},end:function(n){var r,i,o,a,s;if(i=x?t.getElementRule(n):{}){if(v[n]&&!y){if((r=b.firstChild)&&3===r.type)if((o=r.value.replace(E,"")).length>0)r.value=o,r=r.next;else for(a=r.next,r.remove(),r=a;r&&3===r.type;)o=r.value,a=r.next,(0===o.length||_.test(o))&&(r.remove(),r=a),r=a;if((r=b.lastChild)&&3===r.type)if((o=r.value.replace(D,"")).length>0)r.value=o,r=r.prev;else for(a=r.prev,r.remove(),r=a;r&&3===r.type;)o=r.value,a=r.prev,(0===o.length||_.test(o))&&(r.remove(),r=a),r=a}if(y&&T[n]&&(y=!1),i.removeEmpty&&VS(t,C,T,b)&&!b.attributes.map.name&&!b.attr("id"))return s=b.parent,v[b.name]?b.empty().remove():b.unwrap(),void(b=s);i.paddEmpty&&(zS(b)||VS(t,C,T,b))&&WS(e,l,v,b),b=b.parent}}},t);var O=b=new FS(l.context||e.root_name,11);if(u.parse(s),x&&w.length&&(l.context?l.invalid=!0:a(w)),k&&("body"===O.name||l.isRootContent)&&R(),!l.invalid){for(g in i){for(m=n[g],h=(c=i[g]).length;h--;)c[h].parent||c.splice(h,1);for(d=0,f=m.length;d<f;d++)m[d](c,g,l)}for(d=0,f=r.length;d<f;d++)if((m=r[d]).name in o){for(h=(c=o[m.name]).length;h--;)c[h].parent||c.splice(h,1);for(h=0,p=m.callbacks.length;h<p;h++)m.callbacks[h](c,m.name,l)}}return O}};return $S(l,e),PS.register(l,e),l}function X(e,t){var n,r,i,o=["data-mce-selected"];n=t&&t.dom?t.dom:Ts.DOM,r=t&&t.schema?t.schema:C(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,i=G(e,r),DS.register(i,e,n);var a=function(o,a){var s=TS.merge({format:"html"},a||{}),l=RS.process(t,o,s),u=JS(n,l,s),c=ex(i,n,u,s);return"tree"===s.format?c:nx(t,e,r,c,s)};return{schema:r,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:a,addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)},addTempAttr:pe.curry(ZS,i,o),getTempAttrs:function(){return o}}}function K(e,t){var n=X(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs}}function Z(e){return{getBookmark:pe.curry(hf.getBookmark,e),moveToBookmark:pe.curry(hf.moveToBookmark,e)}}function Q(e){var t=Vn.each,n=Xw.BACKSPACE,r=Xw.DELETE,i=e.dom,o=e.selection,a=e.settings,s=e.parser,l=it.gecko,u=it.ie,c=it.webkit,d="data:text/mce-internal,",f=u?"Text":"URL",h=function(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(r){}},p=function(e){return e.isDefaultPrevented()},m=function(t){var n,r;t.dataTransfer&&(e.selection.isCollapsed()&&"IMG"===t.target.tagName&&o.select(t.target),(n=e.selection.getContent()).length>0&&(r=d+escape(e.id)+","+escape(n),t.dataTransfer.setData(f,r)))},g=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(f))&&t.indexOf(d)>=0?(t=t.substr(d.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null},v=function(t,n){e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:t,internal:n}):e.execCommand("mceInsertContent",!1,t)},y=function(){var t=function(e){var t=i.create("body"),n=e.cloneContents();return t.appendChild(n),o.serializer.serialize(t,{format:"html"})},a=function(n){var r=t(n),o=i.createRng();o.selectNode(e.getBody());return r===t(o)};e.on("keydown",function(t){var o,s,l=t.keyCode;if(!p(t)&&(l===r||l===n)){if(o=e.selection.isCollapsed(),s=e.getBody(),o&&!i.isEmpty(s))return;if(!o&&!a(e.selection.getRng()))return;t.preventDefault(),e.setContent(""),s.firstChild&&i.isBlock(s.firstChild)?e.selection.setCursorLocation(s.firstChild,0):e.selection.setCursorLocation(s,0),e.nodeChanged()}})},b=function(){e.shortcuts.add("meta+a",null,"SelectAll")},w=function(){e.settings.content_editable||i.bind(e.getDoc(),"mousedown mouseup",function(t){var n;if(t.target===e.getDoc().documentElement)if(n=o.getRng(),e.getBody().focus(),"mousedown"===t.type){if(Fs(n.startContainer))return;o.placeCaretAt(t.clientX,t.clientY)}else o.setRng(n)})},C=function(){e.on("keydown",function(t){if(!p(t)&&t.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(o.isCollapsed()&&0===o.getRng().startOffset){var r=o.getNode(),a=r.previousSibling;if("HR"===r.nodeName)return i.remove(r),void t.preventDefault();a&&a.nodeName&&"hr"===a.nodeName.toLowerCase()&&(i.remove(a),t.preventDefault())}}})},S=function(){Range.prototype.getClientRects||e.on("mousedown",function(t){if(!p(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),dt.setEditorTimeout(e,function(){n.focus()})}})},x=function(){e.on("click",function(t){var n=t.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==i.getContentEditableParent(n)&&(t.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&i.hasClass(n,"mce-item-anchor")&&(t.preventDefault(),o.select(n))})},k=function(){var n=function(){var n=i.getAttribs(o.getStart().cloneNode(!1));return function(){var r=o.getStart();r!==e.getBody()&&(i.setAttrib(r,"style",null),t(n,function(e){r.setAttributeNode(e.cloneNode(!0))}))}},r=function(){return!o.isCollapsed()&&i.getParent(o.getStart(),i.isBlock)!==i.getParent(o.getEnd(),i.isBlock)};e.on("keypress",function(t){var i;if(!p(t)&&(8===t.keyCode||46===t.keyCode)&&r())return i=n(),e.getDoc().execCommand("delete",!1,null),i(),t.preventDefault(),!1}),i.bind(e.getDoc(),"cut",function(t){var i;!p(t)&&r()&&(i=n(),dt.setEditorTimeout(e,function(){i()}))})},T=function(){e.on("keydown",function(e){if(!p(e)&&e.keyCode===n&&o.isCollapsed()&&0===o.getRng().startOffset){var t=o.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},E=function(){var t=function(){h("StyleWithCSS",!1),h("enableInlineTableEditing",!1),a.object_resizing||h("enableObjectResizing",!1)};a.readonly||e.on("BeforeExecCommand MouseDown",t)},D=function(){var n=function(){t(i.select("a"),function(e){var t=e.parentNode,n=i.getRoot();if(t.lastChild===e){for(;t&&!i.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}i.add(t,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||n()})},N=function(){a.forced_root_block&&e.on("init",function(){h("DefaultParagraphSeparator",a.forced_root_block)})},_=function(){e.on("keyup focusin mouseup",function(e){Xw.modifierPressed(e)||o.normalize()},!0)},R=function(){e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},A=function(){e.inline||e.on("keydown",function(){document.activeElement===document.body&&e.getWin().focus()})},L=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",function(t){var n;if("HTML"===t.target.nodeName){if(it.ie>11)return void e.getBody().focus();n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged()}}))},M=function(){it.mac&&e.on("keydown",function(t){!Xw.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))})},O=function(){h("AutoUrlDetect",!1)},P=function(){e.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},I=function(){e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(e){e.preventDefault()})})},H=function(){s.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})},B=function(){e.on("dragstart",function(e){m(e)}),e.on("drop",function(t){if(!p(t)){var n=g(t);if(n&&n.id!==e.id){t.preventDefault();var r=wx.fromPoint(t.x,t.y,e.getDoc());o.setRng(r),v(n.html,!0)}}})},F=function(){},W=function(){var t;return!l||e.removed?0:!(t=e.selection.getSel())||!t.rangeCount||0===t.rangeCount};return function(){e.on("keydown",function(t){var n,r,a,s,l;if(!p(t)&&t.keyCode===Xw.BACKSPACE&&(n=o.getRng(),r=n.startContainer,a=n.startOffset,s=i.getRoot(),l=r,n.collapsed&&0===a)){for(;l&&l.parentNode&&l.parentNode.firstChild===l&&l.parentNode!==s;)l=l.parentNode;"BLOCKQUOTE"===l.tagName&&(e.formatter.toggle("blockquote",null,l),(n=i.createRng()).setStart(r,0),n.setEnd(r,0),o.setRng(n))}})}(),y(),it.windowsPhone||_(),c&&(w(),x(),N(),I(),T(),H(),it.iOS?(A(),L(),P()):b()),it.ie>=11&&(L(),T()),it.ie&&(b(),O(),B()),l&&(C(),S(),k(),E(),D(),R(),M(),T()),{refreshContentEditable:F,isHidden:W}}function J(e){return{walk:function(t,n){return AC.walk(e,t,n)},split:Lm.split,normalize:function(t){return Wv.normalize(e,t).fold(pe.constant(!1),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}}var ee,te,ne,re,ie,oe,ae,se,le,ue,ce,de,fe,he=function(e){return function(){return e}},pe={noop:function(){},noarg:function(e){return function(){return e()}},compose:function(e,t){return function(){return e(t.apply(null,arguments))}},constant:he,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(e){for(var t=new Array(arguments.length-1),n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];var i=t.concat(n);return e.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new Error(e)}},apply:function(e){return e()},call:function(e){e()},never:he(!1),always:he(!0)},me=pe.never,ge=pe.always,ve=function(){return ye},ye=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r={fold:function(e){return e()},is:me,isSome:me,isNone:ge,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:n,orThunk:t,map:ve,ap:ve,each:function(){},bind:ve,flatten:ve,exists:me,forall:ge,filter:ve,equals:e,equals_:e,toArray:function(){return[]},toString:pe.constant("none()")};return Object.freeze&&Object.freeze(r),r}(),be=function(e){var t=function(){return e},n=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:ge,isNone:me,getOr:t,getOrThunk:t,getOrDie:t,or:n,orThunk:n,map:function(t){return be(t(e))},ap:function(t){return t.fold(ve,function(t){return be(t(e))})},each:function(t){t(e)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(e)?i:ye},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(me,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},we={some:be,none:ve,from:function(e){return null===e||e===undefined?ye:be(e)}},Ce=function(){var e=Array.prototype.indexOf,t=function(t,n){return e.call(t,n)},n=function(e,t){return He(e,t)};return e===undefined?n:t}(),Se=function(e,t){var n=Ce(e,t);return-1===n?we.none():we.some(n)},xe=function(e,t){return Ce(e,t)>-1},ke=function(e,t){return Ie(e,t).isSome()},Te=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},Ee=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var i=e.slice(r,r+t);n.push(i)}return n},De=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},Ne=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},_e=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},Re=function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var a=e[i];(t(a,i,e)?n:r).push(a)}return{pass:n,fail:r}},Ae=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},Le=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],i=[],o=0,a=e.length;o<a;o++){var s=e[o],l=t(s);l!==n&&(r.push(i),i=[]),n=l,i.push(s)}return 0!==i.length&&r.push(i),r},Me=function(e,t,n){return _e(e,function(e){n=t(n,e)}),n},Oe=function(e,t,n){return Ne(e,function(e){n=t(n,e)}),n},Pe=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return we.some(i)}return we.none()},Ie=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n,e))return we.some(n)}return we.none()},He=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},Be=Array.prototype.push,Fe=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Be.apply(t,e[n])}return t},We=function(e,t){var n=De(e,t);return Fe(n)},ze=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},je=function(e,t){return e.length===t.length&&ze(e,function(e,n){return e===t[n]})},qe=Array.prototype.slice,Ve={map:De,each:Ne,eachr:_e,partition:Re,filter:Ae,groupBy:Le,indexOf:Se,foldr:Me,foldl:Oe,find:Pe,findIndex:Ie,flatten:Fe,bind:We,forall:ze,exists:ke,contains:xe,equal:je,reverse:function(e){var t=qe.call(e,0);return t.reverse(),t},chunk:Ee,difference:function(e,t){return Ae(e,function(e){return!xe(t,e)})},mapToObject:function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];n[String(o)]=t(o,r)}return n},pure:function(e){return[e]},sort:function(e,t){var n=qe.call(e,0);return n.sort(t),n},range:Te,head:function(e){return 0===e.length?we.none():we.some(e[0])},last:function(e){return 0===e.length?we.none():we.some(e[e.length-1])}},Ue="undefined"!=typeof window?window:Function("return this;")(),$e=function(e,t){for(var n=t!==undefined&&null!==t?t:Ue,r=0;r<e.length&&n!==undefined&&null!==n;++r)n=n[e[r]];return n},Ye=function(e,t){return e[t]!==undefined&&null!==e[t]||(e[t]={}),e[t]},Ge=function(e,t){for(var n=t!==undefined?t:Ue,r=0;r<e.length;++r)n=Ye(n,e[r]);return n},Xe={path:$e,resolve:function(e,t){var n=e.split(".");return $e(n,t)},forge:Ge,namespace:function(e,t){var n=e.split(".");return Ge(n,t)}},Ke=function(e,t){return Xe.resolve(e,t)},Ze={getOrDie:function(e,t){var n=Ke(e,t);if(n===undefined||null===n)throw e+" not available on this browser";return n}},Qe=function(){return Ze.getOrDie("URL")},Je={createObjectURL:function(e){return Qe().createObjectURL(e)},revokeObjectURL:function(e){Qe().revokeObjectURL(e)}},et=navigator,tt=et.userAgent,nt=function(e){return"matchMedia"in window&&matchMedia(e).matches};ee=!1,le=/Android/.test(tt),ne=(ne=!(te=/WebKit/.test(tt))&&!ee&&/MSIE/gi.test(tt)&&/Explorer/gi.test(et.appName))&&/MSIE (\w+)\./.exec(tt)[1],re=-1!==tt.indexOf("Trident/")&&(-1!==tt.indexOf("rv:")||-1!==et.appName.indexOf("Netscape"))&&11,ie=-1!==tt.indexOf("Edge/")&&!ne&&!re&&12,ne=ne||re||ie,oe=!te&&!re&&/Gecko/.test(tt),ae=-1!==tt.indexOf("Mac"),se=/(iPad|iPhone)/.test(tt),ue="FormData"in window&&"FileReader"in window&&"URL"in window&&!!Je.createObjectURL,ce=nt("only screen and (max-device-width: 480px)")&&(le||se),de=nt("only screen and (min-width: 800px)")&&(le||se),fe=-1!==tt.indexOf("Windows Phone"),ie&&(te=!1);var rt,it={opera:ee,webkit:te,ie:ne,gecko:oe,mac:ae,iOS:se,android:le,contentEditable:!se||ue||parseInt(tt.match(/AppleWebKit\/(\d*)/)[1],10)>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==ne,range:window.getSelection&&"Range"in window,documentMode:ne&&!ie?document.documentMode||7:10,fileApi:ue,ceFalse:!1===ne||ne>8,cacheSuffix:"",container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===ne||ne>11,desktop:!ce&&!de,windowsPhone:fe},ot=function(){function e(e,t){return function(){e.apply(t,arguments)}}function t(e){var t=this;null!==this._state?u(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(i){return void e.reject(i)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)}):this._deferreds.push(e)}function n(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var o=t.then;if("function"==typeof o)return void a(e(o,t),e(n,this),e(r,this))}this._state=!0,this._value=t,i.call(this)}catch(s){r.call(this,s)}}function r(e){this._state=!1,this._value=e,i.call(this)}function i(){for(var e=0,n=this._deferreds.length;e<n;e++)t.call(this,this._deferreds[e]);this._deferreds=null}function o(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function a(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(i){if(r)return;r=!0,n(i)}}var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],a(t,e(n,this),e(r,this))},u=l.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};return l.prototype["catch"]=function(e){return this.then(null,e)},l.prototype.then=function(e,n){var r=this;return new l(function(i,a){t.call(r,new o(e,n,i,a))})},l.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&s(arguments[0])?arguments[0]:arguments);return new l(function(t,n){function r(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(o,e)},n)}e[o]=a,0==--i&&t(e)}catch(l){n(l)}}if(0===e.length)return t([]);for(var i=e.length,o=0;o<e.length;o++)r(o,e[o])})},l.resolve=function(e){return e&&"object"==typeof e&&e.constructor===l?e:new l(function(t){t(e)})},l.reject=function(e){return new l(function(t,n){n(e)})},l.race=function(e){return new l(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},l},at=window.Promise?window.Promise:ot(),st=function(e,t){var n,r=window.requestAnimationFrame,i=["ms","moz","webkit"],o=function(e){window.setTimeout(e,0)};for(n=0;n<i.length&&!r;n++)r=window[i[n]+"RequestAnimationFrame"];r||(r=o),r(e,t)},lt=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},ut=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},ct=function(e,t){var n,r;return r=function(){var r=arguments;clearTimeout(n),n=lt(function(){e.apply(this,r)},t)},r.stop=function(){clearTimeout(n)},r},dt={requestAnimationFrame:function(e,t){rt?rt.then(e):rt=new at(function(e){t||(t=document.body),st(e,t)}).then(e)},setTimeout:lt,setInterval:ut,setEditorTimeout:function(e,t,n){return lt(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r;return r=ut(function(){e.removed?clearInterval(r):t()},n)},debounce:ct,throttle:ct,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},ft="mce-data-",ht=/^(?:mouse|contextmenu)|click/,pt={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},mt=function(e){return e.isDefaultPrevented===vt||e.isDefaultPrevented===gt},gt=function(){return!1},vt=function(){return!0},yt=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},bt=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},wt=function(e,t){var n,r=t;return(n=e.path)&&n.length>0&&(r=n[0]),e.composedPath&&(n=e.composedPath())&&n.length>0&&(r=n[0]),r},Ct=function(e,t){var n,r=t||{};for(n in e)pt[n]||(r[n]=e[n]);if(r.target||(r.target=r.srcElement||document),it.experimentalShadowDom&&(r.target=wt(e,r.target)),e&&ht.test(e.type)&&e.pageX===undefined&&e.clientX!==undefined){var i=r.target.ownerDocument||document,o=i.documentElement,a=i.body;r.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),r.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}return r.preventDefault=function(){r.isDefaultPrevented=vt,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=vt,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=vt,r.stopPropagation()},!1===mt(r)&&(r.isDefaultPrevented=gt,r.isPropagationStopped=gt,r.isImmediatePropagationStopped=gt),"undefined"==typeof r.metaKey&&(r.metaKey=!1),r},St=function(e,t,n){var r=e.document,i={type:"ready"};if(n.domLoaded)t(i);else{var o=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},a=function(){n.domLoaded||(n.domLoaded=!0,t(i))},s=function(){o()&&(bt(r,"readystatechange",s),a())},l=function(){try{r.documentElement.doScroll("left")}catch(e){return void dt.setTimeout(l)}a()};!r.addEventListener||it.ie&&it.ie<11?(yt(r,"readystatechange",s),r.documentElement.doScroll&&e.self===e.top&&l()):o()?a():yt(e,"DOMContentLoaded",a),yt(e,"load",a)}},xt=function(){var e,t,n,r,i,o=this,a={};t=ft+(+new Date).toString(32),r="onmouseenter"in document.documentElement,n="onfocusin"in document.documentElement,i={mouseenter:"mouseover",mouseleave:"mouseout"},e=1,o.domLoaded=!1,o.events=a;var s=function(e,t){var n,r,i,o,s=a[t];if(n=s&&s[e.type])for(r=0,i=n.length;r<i;r++)if((o=n[r])&&!1===o.func.call(o.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};o.bind=function(l,u,c,d){var f,h,p,m,g,v,y,b=window,w=function(e){s(Ct(e||b.event),f)};if(l&&3!==l.nodeType&&8!==l.nodeType){for(l[t]?f=l[t]:(f=e++,l[t]=f,a[f]={}),d=d||l,p=(u=u.split(" ")).length;p--;)v=w,g=y=!1,"DOMContentLoaded"===(m=u[p])&&(m="ready"),o.domLoaded&&"ready"===m&&"complete"===l.readyState?c.call(d,Ct({type:m})):(r||(g=i[m])&&(v=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=Ct(e||b.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,s(e,f))}),n||"focusin"!==m&&"focusout"!==m||(y=!0,g="focusin"===m?"focus":"blur",v=function(e){(e=Ct(e||b.event)).type="focus"===e.type?"focusin":"focusout",s(e,f)}),(h=a[f][m])?"ready"===m&&o.domLoaded?c({type:m}):h.push({func:c,scope:d}):(a[f][m]=h=[{func:c,scope:d}],h.fakeName=g,h.capture=y,h.nativeHandler=v,"ready"===m?St(l,v,o):yt(l,g||m,v,y)));return l=h=0,c}},o.unbind=function(e,n,r){var i,s,l,u,c,d;if(!e||3===e.nodeType||8===e.nodeType)return o;if(i=e[t]){if(d=a[i],n){for(l=(n=n.split(" ")).length;l--;)if(c=n[l],s=d[c]){if(r)for(u=s.length;u--;)if(s[u].func===r){var f=s.nativeHandler,h=s.fakeName,p=s.capture;(s=s.slice(0,u).concat(s.slice(u+1))).nativeHandler=f,s.fakeName=h,s.capture=p,d[c]=s}r&&0!==s.length||(delete d[c],bt(e,s.fakeName||c,s.nativeHandler,s.capture))}}else{for(c in d)s=d[c],bt(e,s.fakeName||c,s.nativeHandler,s.capture);d={}}for(c in d)return o;delete a[i];try{delete e[t]}catch(m){e[t]=null}}return o},o.fire=function(e,n,r){var i;if(!e||3===e.nodeType||8===e.nodeType)return o;(r=Ct(null,r)).type=n,r.target=e;do{(i=e[t])&&s(r,i),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return o},o.clean=function(e){var n,r,i=o.unbind;if(!e||3===e.nodeType||8===e.nodeType)return o;if(e[t]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),n=(r=e.getElementsByTagName("*")).length;n--;)(e=r[n])[t]&&i(e);return o},o.destroy=function(){a={}},o.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};xt.Event=new xt,xt.Event.bind(window,"ready",function(){});var kt,Tt,Et,Dt,Nt,_t,Rt,At,Lt,Mt,Ot,Pt,It,Ht,Bt,Ft,Wt,zt,jt,qt="sizzle"+-new Date,Vt=window.document,Ut=0,$t=0,Yt=e(),Gt=e(),Xt=e(),Kt=function(e,t){return e===t&&(Ot=!0),0},Zt=typeof undefined,Qt=1<<31,Jt={}.hasOwnProperty,en=[],tn=en.pop,nn=en.push,rn=en.push,on=en.slice,an=en.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},sn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ln="[\\x20\\t\\r\\n\\f]",un="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",cn="\\["+ln+"*("+un+")(?:"+ln+"*([*^$|!~]?=)"+ln+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+un+"))|)"+ln+"*\\]",dn=":("+un+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+cn+")*)|.*)\\)|)",fn=new RegExp("^"+ln+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ln+"+$","g"),hn=new RegExp("^"+ln+"*,"+ln+"*"),pn=new RegExp("^"+ln+"*([>+~]|"+ln+")"+ln+"*"),mn=new RegExp("="+ln+"*([^\\]'\"]*?)"+ln+"*\\]","g"),gn=new RegExp(dn),vn=new RegExp("^"+un+"$"),yn={ID:new RegExp("^#("+un+")"),CLASS:new RegExp("^\\.("+un+")"),TAG:new RegExp("^("+un+"|[*])"),ATTR:new RegExp("^"+cn),PSEUDO:new RegExp("^"+dn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ln+"*(even|odd|(([+-]|)(\\d*)n|)"+ln+"*(?:([+-]|)"+ln+"*(\\d+)|))"+ln+"*\\)|)","i"),bool:new RegExp("^(?:"+sn+")$","i"),needsContext:new RegExp("^"+ln+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ln+"*((?:-\\d)?\\d*)"+ln+"*\\)|)(?=[^-]|$)","i")},bn=/^(?:input|select|textarea|button)$/i,wn=/^h\d$/i,Cn=/^[^{]+\{\s*\[native \w/,Sn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xn=/[+~]/,kn=/'|\\/g,Tn=new RegExp("\\\\([\\da-f]{1,6}"+ln+"?|("+ln+")|.)","ig"),En=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{rn.apply(en=on.call(Vt.childNodes),Vt.childNodes),en[Vt.childNodes.length].nodeType}catch(uN){rn={apply:en.length?function(e,t){nn.apply(e,on.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var Dn=function(e,t,n,r){var i,o,s,u,c,d,f,h,p,m;if((t?t.ownerDocument||t:Vt)!==It&&Pt(t),t=t||It,n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=t.nodeType)&&9!==u)return[];if(Bt&&!r){if(i=Sn.exec(e))if(s=i[1]){if(9===u){if(!(o=t.getElementById(s))||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&jt(t,o)&&o.id===s)return n.push(o),n}else{if(i[2])return rn.apply(n,t.getElementsByTagName(e)),n;if((s=i[3])&&Tt.getElementsByClassName)return rn.apply(n,t.getElementsByClassName(s)),n}if(Tt.qsa&&(!Ft||!Ft.test(e))){if(h=f=qt,p=t,m=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){for(d=_t(e),(f=t.getAttribute("id"))?h=f.replace(kn,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",c=d.length;c--;)d[c]=h+l(d[c]);p=xn.test(e)&&a(t.parentNode)||t,m=d.join(",")}if(m)try{return rn.apply(n,p.querySelectorAll(m)),n}catch(g){}finally{f||t.removeAttribute("id")}}}return At(e.replace(fn,"$1"),t,n,r)};Tt=Dn.support={},Nt=Dn.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},Pt=Dn.setDocument=function(e){function t(e){try{return e.top}catch(t){}return null}var r,i=e?e.ownerDocument||e:Vt,o=i.defaultView;return i!==It&&9===i.nodeType&&i.documentElement?(It=i,Ht=i.documentElement,Bt=!Nt(i),o&&o!==t(o)&&(o.addEventListener?o.addEventListener("unload",function(){Pt()},!1):o.attachEvent&&o.attachEvent("onunload",function(){Pt()})),Tt.attributes=!0,Tt.getElementsByTagName=!0,Tt.getElementsByClassName=Cn.test(i.getElementsByClassName),Tt.getById=!0,Et.find.ID=function(e,t){if(typeof t.getElementById!==Zt&&Bt){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},Et.filter.ID=function(e){var t=e.replace(Tn,En);return function(e){return e.getAttribute("id")===t}},Et.find.TAG=Tt.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==Zt)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},Et.find.CLASS=Tt.getElementsByClassName&&function(e,t){if(Bt)return t.getElementsByClassName(e)},Wt=[],Ft=[],Tt.disconnectedMatch=!0,Ft=Ft.length&&new RegExp(Ft.join("|")),Wt=Wt.length&&new RegExp(Wt.join("|")),r=Cn.test(Ht.compareDocumentPosition),jt=r||Cn.test(Ht.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Kt=r?function(e,t){if(e===t)return Ot=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!Tt.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===Vt&&jt(Vt,e)?-1:t===i||t.ownerDocument===Vt&&jt(Vt,t)?1:Mt?an.call(Mt,e)-an.call(Mt,t):0:4&n?-1:1)}:function(e,t){if(e===t)return Ot=!0,0;var r,o=0,a=e.parentNode,s=t.parentNode,l=[e],u=[t];if(!a||!s)return e===i?-1:t===i?1:a?-1:s?1:Mt?an.call(Mt,e)-an.call(Mt,t):0;if(a===s)return n(e,t);for(r=e;r=r.parentNode;)l.unshift(r);for(r=t;r=r.parentNode;)u.unshift(r);for(;l[o]===u[o];)o++;return o?n(l[o],u[o]):l[o]===Vt?-1:u[o]===Vt?1:0},i):It},Dn.matches=function(e,t){return Dn(e,null,null,t)},Dn.matchesSelector=function(e,t){if((e.ownerDocument||e)!==It&&Pt(e),t=t.replace(mn,"='$1']"),Tt.matchesSelector&&Bt&&(!Wt||!Wt.test(t))&&(!Ft||!Ft.test(t)))try{var n=zt.call(e,t);if(n||Tt.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(uN){}return Dn(t,It,null,[e]).length>0},Dn.contains=function(e,t){return(e.ownerDocument||e)!==It&&Pt(e),jt(e,t)},Dn.attr=function(e,t){(e.ownerDocument||e)!==It&&Pt(e);var n=Et.attrHandle[t.toLowerCase()],r=n&&Jt.call(Et.attrHandle,t.toLowerCase())?n(e,t,!Bt):undefined;return r!==undefined?r:Tt.attributes||!Bt?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},Dn.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},Dn.uniqueSort=function(e){var t,n=[],r=0,i=0;if(Ot=!Tt.detectDuplicates,Mt=!Tt.sortStable&&e.slice(0),e.sort(Kt),Ot){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return Mt=null,e},Dt=Dn.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=Dt(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=Dt(t);return n},(Et=Dn.selectors={cacheLength:50,createPseudo:t,match:yn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Tn,En),e[3]=(e[3]||e[4]||e[5]||"").replace(Tn,En),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Dn.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Dn.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return yn.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&gn.test(n)&&(t=_t(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Tn,En).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Yt[e+" "];return t||(t=new RegExp("(^|"+ln+")"+e+"("+ln+"|$)"))&&Yt(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Zt&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=Dn.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,f,h,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){for(h=(u=(c=g[qt]||(g[qt]={}))[e]||[])[0]===Ut&&u[1],f=u[0]===Ut&&u[2],d=h&&g.childNodes[h];d=++h&&d&&d[m]||(f=h=0)||p.pop();)if(1===d.nodeType&&++f&&d===t){c[e]=[Ut,h,f];break}}else if(y&&(u=(t[qt]||(t[qt]={}))[e])&&u[0]===Ut)f=u[1];else for(;(d=++h&&d&&d[m]||(f=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[qt]||(d[qt]={}))[e]=[Ut,f]),d!==t)););return(f-=i)===r||f%r==0&&f/r>=0}}},PSEUDO:function(e,n){var r,i=Et.pseudos[e]||Et.setFilters[e.toLowerCase()]||Dn.error("unsupported pseudo: "+e);return i[qt]?i(n):i.length>1?(r=[e,e,"",n],Et.setFilters.hasOwnProperty(e.toLowerCase())?t(function(e,t){for(var r,o=i(e,n),a=o.length;a--;)e[r=an.call(e,o[a])]=!(t[r]=o[a])}):function(e){return i(e,0,r)}):i}},pseudos:{not:t(function(e){var n=[],r=[],i=Rt(e.replace(fn,"$1"));return i[qt]?t(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,t,o){return n[0]=e,i(n,null,o,r),!r.pop()}}),has:t(function(e){return function(t){return Dn(e,t).length>0}}),contains:t(function(e){return e=e.replace(Tn,En),function(t){return(t.textContent||t.innerText||Dt(t)).indexOf(e)>-1}}),lang:t(function(e){return vn.test(e||"")||Dn.error("unsupported lang: "+e),e=e.replace(Tn,En).toLowerCase(),function(t){var n;do{if(n=Bt?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===Ht},focus:function(e){return e===It.activeElement&&(!It.hasFocus||It.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!Et.pseudos.empty(e)},header:function(e){return wn.test(e.nodeName)},input:function(e){return bn.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:o(function(){return[0]}),last:o(function(e,t){return[t-1]}),eq:o(function(e,t,n){return[n<0?n+t:n]}),even:o(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:o(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:o(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:o(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=Et.pseudos.eq;for(kt in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Et.pseudos[kt]=r(kt);for(kt in{submit:!0,reset:!0})Et.pseudos[kt]=i(kt);s.prototype=Et.filters=Et.pseudos,Et.setFilters=new s,_t=Dn.tokenize=function(e,t){var n,r,i,o,a,s,l,u=Gt[e+" "];if(u)return t?0:u.slice(0);for(a=e,s=[],l=Et.preFilter;a;){n&&!(r=hn.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=pn.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(fn," ")}),a=a.slice(n.length));for(o in Et.filter)!(r=yn[o].exec(a))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?Dn.error(e):Gt(e,s).slice(0)},Rt=Dn.compile=function(e,t){var n,r=[],i=[],o=Xt[e+" "];if(!o){for(t||(t=_t(e)),n=t.length;n--;)(o=p(t[n]))[qt]?r.push(o):i.push(o);(o=Xt(e,m(i,r))).selector=e}return o},At=Dn.select=function(e,t,n,r){var i,o,s,u,c,d="function"==typeof e&&e,f=!r&&_t(e=d.selector||e);if(n=n||[],1===f.length){if((o=f[0]=f[0].slice(0)).length>2&&"ID"===(s=o[0]).type&&Tt.getById&&9===t.nodeType&&Bt&&Et.relative[o[1].type]){if(!(t=(Et.find.ID(s.matches[0].replace(Tn,En),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=yn.needsContext.test(e)?0:o.length;i--&&(s=o[i],!Et.relative[u=s.type]);)if((c=Et.find[u])&&(r=c(s.matches[0].replace(Tn,En),xn.test(o[0].type)&&a(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&l(o)))return rn.apply(n,r),n;break}}return(d||Rt(e,f))(r,t,!Bt,n,xn.test(e)&&a(t.parentNode)||t),n},Tt.sortStable=qt.split("").sort(Kt).join("")===qt,Tt.detectDuplicates=!!Ot,Pt(),Tt.sortDetached=!0;var Nn=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},_n=function(e,t,n){var r,i;if(!e)return 0;if(n=n||e,e.length!==undefined){for(r=0,i=e.length;r<i;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},Rn=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return r;return-1},An={isArray:Nn,toArray:function(e){var t,n,r=e;if(!Nn(e))for(r=[],t=0,n=e.length;t<n;t++)r[t]=e[t];return r},each:_n,map:function(e,t){var n=[];return _n(e,function(r,i){n.push(t(r,i,e))}),n},filter:function(e,t){var n=[];return _n(e,function(r,i){t&&!t(r,i,e)||n.push(r)}),n},indexOf:function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,r){var i=0;for(arguments.length<3&&(n=e[0]);i<e.length;i++)n=t.call(r,n,e[i],i);return n},findIndex:Rn,find:function(e,t,n){var r=Rn(e,t,n);return-1!==r?e[r]:undefined},last:function(e){return e[e.length-1]}},Ln=/^\s*|\s*$/g,Mn=function(e){return null===e||e===undefined?"":(""+e).replace(Ln,"")},On=function(e,t){return t?!("array"!==t||!An.isArray(e))||typeof e===t:e!==undefined},Pn=function(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},In=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Hn=function(e,t,n){var r,i,o,a,s,l=this,u=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],!(i=l.createNS(e[3].replace(/\.\w+$/,""),n))[o]){if("static"===e[2])return i[o]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[o]));t[o]||(t[o]=function(){},u=1),i[o]=t[o],l.extend(i[o].prototype,t),e[5]&&(r=l.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=i[o],i[o]=u?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],s.apply(this,arguments)},i[o].prototype[o]=i[o],l.each(r,function(e,t){i[o].prototype[t]=r[t]}),l.each(t,function(e,t){r[t]?i[o].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==o&&(i[o].prototype[t]=e)})),l.each(t["static"],function(e,t){i[o][t]=e})}},Bn=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i,o,a,s,l=arguments;for(i=1,o=l.length;i<o;i++){t=l[i];for(a in t)t.hasOwnProperty(a)&&(s=t[a])!==undefined&&(e[a]=s)}return e},Fn=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),An.each(e,function(e,i){if(!1===t.call(r,e,i,n))return!1;Fn(e,t,n,r)}))},Wn=function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t},zn=function(e,t){var n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},jn=function(e,t){return!e||On(e,"array")?e:An.map(e.split(t||","),Mn)},qn=function(e){var t=it.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e},Vn={trim:Mn,isArray:An.isArray,is:On,toArray:An.toArray,makeMap:Pn,each:An.each,map:An.map,grep:An.filter,inArray:An.indexOf,hasOwn:In,extend:Bn,create:Hn,walk:Fn,createNS:Wn,resolve:zn,explode:jn,_addCacheSuffix:qn},Un=document,$n=Array.prototype.push,Yn=Array.prototype.slice,Gn=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Xn=xt.Event,Kn=Vn.makeMap("children,contents,next,prev"),Zn=function(e){return void 0!==e},Qn=function(e){return"string"==typeof e},Jn=function(e){return e&&e===e.window},er=function(e,t){var n,r,i;for(i=(t=t||Un).createElement("div"),n=t.createDocumentFragment(),i.innerHTML=e;r=i.firstChild;)n.appendChild(r);return n},tr=function(e,t,n,r){var i;if(Qn(t))t=er(t,gr(e[0]));else if(t.length&&!t.nodeType){if(t=cr.makeArray(t),r)for(i=t.length-1;i>=0;i--)tr(e,t[i],n,r);else for(i=0;i<t.length;i++)tr(e,t[i],n,r);return e}if(t.nodeType)for(i=e.length;i--;)n.call(e[i],t);return e},nr=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},rr=function(e,t,n){var r,i;return t=cr(t)[0],e.each(function(){var e=this;n&&r===e.parentNode?i.appendChild(e):(r=e.parentNode,i=t.cloneNode(!1),e.parentNode.insertBefore(i,e),i.appendChild(e))}),e},ir=Vn.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),or=Vn.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),ar={"for":"htmlFor","class":"className",readonly:"readOnly"},sr={"float":"cssFloat"},lr={},ur={},cr=function(e,t){return new cr.fn.init(e,t)},dr=function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},fr=/^\s*|\s*$/g,hr=function(e){return null===e||e===undefined?"":(""+e).replace(fr,"")},pr=function(e,t){var n,r,i,o;if(e)if((n=e.length)===undefined){for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],!1===t.call(o,r,o)))break}else for(i=0;i<n&&(o=e[i],!1!==t.call(o,i,o));i++);return e},mr=function(e,t){var n=[];return pr(e,function(e,r){t(r,e)&&n.push(r)}),n},gr=function(e){return e?9===e.nodeType?e:e.ownerDocument:Un};cr.fn=cr.prototype={constructor:cr,selector:"",context:null,length:0,init:function(e,t){var n,r,i=this;if(!e)return i;if(e.nodeType)return i.context=i[0]=e,i.length=1,i;if(t&&t.nodeType)i.context=t;else{if(t)return cr(e).attr(t);i.context=t=document}if(Qn(e)){if(i.selector=e,!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:Gn.exec(e)))return cr(t).find(e);if(n[1])for(r=er(e,gr(t)).firstChild;r;)$n.call(i,r),r=r.nextSibling;else{if(!(r=gr(t).getElementById(n[2])))return i;if(r.id!==n[2])return i.find(e);i.length=1,i[0]=r}}else this.add(e,!1);return i},toArray:function(){return Vn.toArray(this)},add:function(e,t){var n,r,i=this;if(Qn(e))return i.add(cr(e));if(!1!==t)for(n=cr.unique(i.toArray().concat(cr.makeArray(e))),i.length=n.length,r=0;r<n.length;r++)i[r]=n[r];else $n.apply(i,cr.makeArray(e));return i},attr:function(e,t){var n,r=this;if("object"==typeof e)pr(e,function(e,t){r.attr(e,t)});else{if(!Zn(t)){if(r[0]&&1===r[0].nodeType){if((n=lr[e])&&n.get)return n.get(r[0],e);if(or[e])return r.prop(e)?e:undefined;null===(t=r[0].getAttribute(e,2))&&(t=undefined)}return t}this.each(function(){var n;if(1===this.nodeType){if((n=lr[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=ar[e]||e))pr(e,function(e,t){n.prop(e,t)});else{if(!Zn(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(e,t){var n,r,i=this,o=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof e)pr(e,function(e,t){i.css(e,t)});else if(Zn(t))e=o(e),"number"!=typeof t||ir[e]||(t=t.toString()+"px"),i.each(function(){var n=this.style;if((r=ur[e])&&r.set)r.set(this,t);else{try{this.style[sr[e]||e]=t}catch(i){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(a(e)):n.removeAttribute(e))}});else{if(n=i[0],(r=ur[e])&&r.get)return r.get(n);if(n.ownerDocument.defaultView)try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(e))}catch(s){return undefined}else if(n.currentStyle)return n.currentStyle[o(e)]}return i},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],Xn.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(Zn(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(r){cr(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(Zn(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return tr(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return tr(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?tr(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?tr(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return cr(e).append(this),this},prependTo:function(e){return cr(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return rr(this,e)},wrapAll:function(e){return rr(this,e,!0)},wrapInner:function(e){return this.each(function(){cr(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){cr(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),cr(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?pr(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var i,o;(o=nr(r,e))!==t&&(i=r.className,o?r.className=hr((" "+i+" ").replace(" "+e+" "," ")):r.className+=i?" "+e:e)}),n)},hasClass:function(e){return nr(this[0],e)},each:function(e){return pr(this,e)},on:function(e,t){return this.each(function(){Xn.bind(this,e,t)})},off:function(e,t){return this.each(function(){Xn.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?Xn.fire(this,e.type,e):Xn.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new cr(Yn.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)cr.find(e,this[t],r);return cr(r)},filter:function(e){return cr("function"==typeof e?mr(this.toArray(),function(t,n){return e(n,t)}):cr.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof cr&&(e=e[0]),this.each(function(n,r){for(;r;){if("string"==typeof e&&cr(r).is(e)){t.push(r);break}if(r===e){t.push(r);break}r=r.parentNode}}),cr(t)},offset:function(e){var t,n,r,i,o=0,a=0;return e?this.css(e):((t=this[0])&&(r=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(o=(i=t.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=i.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:o,top:a})},push:$n,sort:[].sort,splice:[].splice},Vn.extend(cr,{extend:Vn.extend,makeArray:function(e){return Jn(e)||e.nodeType?[e]:Vn.toArray(e)},inArray:dr,isArray:Vn.isArray,each:pr,trim:hr,grep:mr,find:Dn,expr:Dn.selectors,unique:Dn.uniqueSort,text:Dn.getText,contains:Dn.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return t=1===t.length?cr.find.matchesSelector(t[0],e)?[t[0]]:[]:cr.find.matches(e,t)}});var vr=function(e,t,n){var r=[],i=e[t];for("string"!=typeof n&&n instanceof cr&&(n=n[0]);i&&9!==i.nodeType;){if(n!==undefined){if(i===n)break;if("string"==typeof n&&cr(i).is(n))break}1===i.nodeType&&r.push(i),i=i[t]}return r},yr=function(e,t,n,r){var i=[];for(r instanceof cr&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(r!==undefined){if(e===r)break;if("string"==typeof r&&cr(e).is(r))break}i.push(e)}return i},br=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};pr({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return vr(e,"parentNode")},next:function(e){return br(e,"nextSibling",1)},prev:function(e){return br(e,"previousSibling",1)},children:function(e){return yr(e.firstChild,"nextSibling",1)},contents:function(e){return Vn.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){cr.fn[e]=function(n){var r=[];return this.each(function(){var e=t.call(r,this,n,r);e&&(cr.isArray(e)?r.push.apply(r,e):r.push(e))}),this.length>1&&(Kn[e]||(r=cr.unique(r)),0===e.indexOf("parents")&&(r=r.reverse())),r=cr(r),n?r.filter(n):r}}),pr({parentsUntil:function(e,t){return vr(e,"parentNode",t)},nextUntil:function(e,t){return yr(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return yr(e,"previousSibling",1,t).slice(1)}},function(e,t){cr.fn[e]=function(n,r){var i=[];return this.each(function(){var e=t.call(i,this,n,i);e&&(cr.isArray(e)?i.push.apply(i,e):i.push(e))}),this.length>1&&(i=cr.unique(i),0!==e.indexOf("parents")&&"prevUntil"!==e||(i=i.reverse())),i=cr(i),r?i.filter(r):i}}),cr.fn.is=function(e){return!!e&&this.filter(e).length>0},cr.fn.init.prototype=cr.fn,cr.overrideDefaults=function(e){var t,n=function(r,i){return t=t||e(),0===arguments.length&&(r=t.element),i||(i=t.context),new n.fn.init(r,i)};return cr.extend(n,this),n};var wr=function(e,t,n){pr(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})};it.ie&&it.ie<8&&(wr(lr,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?undefined:t},size:function(e){var t=e.size;return 20===t?undefined:t},"class":function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?undefined:t}}),wr(lr,"set",{"class":function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),it.ie&&it.ie<9&&(sr["float"]="styleFloat",wr(ur,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),cr.attrHooks=lr,cr.cssHooks=ur;var Cr,Sr,xr,kr={cached:function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}}},Tr=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}return undefined},Er=function(e,t){var n=Tr(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return _r(r(1),r(2))},Dr=function(e,t){var n=String(t).toLowerCase();return 0===e.length?Nr():Er(e,n)},Nr=function(){return _r(0,0)},_r=function(e,t){return{major:e,minor:t}},Rr={nu:_r,detect:Dr,unknown:Nr},Ar="Edge",Lr="Chrome",Mr="IE",Or="Opera",Pr="Firefox",Ir="Safari",Hr=function(e,t){return function(){return t===e}},Br=function(){return Fr({current:undefined,version:Rr.unknown()})},Fr=function(e){var t=e.current;return{current:t,version:e.version,isEdge:Hr(Ar,t),isChrome:Hr(Lr,t),isIE:Hr(Mr,t),isOpera:Hr(Or,t),isFirefox:Hr(Pr,t),isSafari:Hr(Ir,t)}},Wr={unknown:Br,nu:Fr,edge:pe.constant(Ar),chrome:pe.constant(Lr),ie:pe.constant(Mr),opera:pe.constant(Or),firefox:pe.constant(Pr),safari:pe.constant(Ir)},zr="Windows",jr="iOS",qr="Android",Vr="Linux",Ur="OSX",$r="Solaris",Yr="FreeBSD",Gr=function(e,t){return function(){return t===e}},Xr=function(){return Kr({current:undefined,version:Rr.unknown()})},Kr=function(e){var t=e.current;return{current:t,version:e.version,isWindows:Gr(zr,t),isiOS:Gr(jr,t),isAndroid:Gr(qr,t),isOSX:Gr(Ur,t),isLinux:Gr(Vr,t),isSolaris:Gr($r,t),isFreeBSD:Gr(Yr,t)}},Zr={unknown:Xr,nu:Kr,windows:pe.constant(zr),ios:pe.constant(jr),android:pe.constant(qr),linux:pe.constant(Vr),osx:pe.constant(Ur),solaris:pe.constant($r),freebsd:pe.constant(Yr)},Qr=function(e,t){var n=String(t).toLowerCase();return Ve.find(e,function(e){return e.search(n)})},Jr={detectBrowser:function(e,t){return Qr(e,t).map(function(e){var n=Rr.detect(e.versionRegexes,t);return{current:e.name,version:n}})},detectOs:function(e,t){return Qr(e,t).map(function(e){var n=Rr.detect(e.versionRegexes,t);return{current:e.name,version:n}})}},ei={addToStart:function(e,t){return t+e},addToEnd:function(e,t){return e+t},removeFromStart:function(e,t){return e.substring(t)},removeFromEnd:function(e,t){return e.substring(0,e.length-t)}},ti={first:function(e,t){return e.substr(0,t)},last:function(e,t){return e.substr(e.length-t,e.length)},head:function(e){return""===e?we.none():we.some(e.substr(0,1))},tail:function(e){return""===e?we.none():we.some(e.substring(1))}},ni=function(e,t,n){if(""===t)return!0;if(e.length<t.length)return!1;return e.substr(n,n+t.length)===t},ri=function(e,t){return si(e,t)?ei.removeFromStart(e,t.length):e},ii=function(e,t){return li(e,t)?ei.removeFromEnd(e,t.length):e},oi=function(e,t){return si(e,t)?e:ei.addToStart(e,t)},ai=function(e,t){return li(e,t)?e:ei.addToEnd(e,t)},si=function(e,t){return ni(e,t,0)},li=function(e,t){return ni(e,t,e.length-t.length)},ui={supplant:function(e,t){var n=function(e){var t=typeof e;return"string"===t||"number"===t};return e.replace(/\${([^{}]*)}/g,function(e,r){var i=t[r];return n(i)?i:e})},startsWith:si,removeLeading:ri,removeTrailing:ii,ensureLeading:oi,ensureTrailing:ai,endsWith:li,contains:function(e,t){return-1!==e.indexOf(t)},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},lTrim:function(e){return e.replace(/^\s+/g,"")},rTrim:function(e){return e.replace(/\s+$/g,"")},capitalize:function(e){return ti.head(e).bind(function(t){return ti.tail(e).map(function(e){return t.toUpperCase()+e})}).getOr(e)}},ci=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,di=function(e){return function(t){return ui.contains(t,e)}},fi=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return ui.contains(e,"edge/")&&ui.contains(e,"chrome")&&ui.contains(e,"safari")&&ui.contains(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ci],search:function(e){return ui.contains(e,"chrome")&&!ui.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return ui.contains(e,"msie")||ui.contains(e,"trident")}},{name:"Opera",versionRegexes:[ci,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:di("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:di("firefox")},{name:"Safari",versionRegexes:[ci,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(ui.contains(e,"safari")||ui.contains(e,"mobile/"))&&ui.contains(e,"applewebkit")}}],hi=[{name:"Windows",search:di("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return ui.contains(e,"iphone")||ui.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:di("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:di("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:di("linux"),versionRegexes:[]},{name:"Solaris",search:di("sunos"),versionRegexes:[]},{name:"FreeBSD",search:di("freebsd"),versionRegexes:[]}],pi={browsers:pe.constant(fi),oses:pe.constant(hi)},mi={detect:function(e){var t=pi.browsers(),n=pi.oses(),r=Jr.detectBrowser(t,e).fold(Wr.unknown,Wr.nu),i=Jr.detectOs(n,e).fold(Zr.unknown,Zr.nu);return{browser:r,os:i,deviceType:g(i,r,e)}}},gi={detect:kr.cached(function(){var e=navigator.userAgent;return mi.detect(e)})},vi=function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return wi(n.childNodes[0])},yi=function(e,t){var n=(t||document).createElement(e);return wi(n)},bi=function(e,t){var n=(t||document).createTextNode(e);return wi(n)},wi=function(e){if(null===e||e===undefined)throw new Error("Node cannot be null or undefined");return{dom:pe.constant(e)}},Ci={fromHtml:vi,fromTag:yi,fromText:bi,fromDom:wi,fromPoint:function(e,t,n){return we.from(e.dom().elementFromPoint(t,n)).map(wi)}},Si={ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12},xi=function(e){return e.dom().nodeName.toLowerCase()},ki=function(e){return e.dom().nodeType},Ti=function(e){return e.dom().nodeValue},Ei=function(e){return function(t){return ki(t)===e}},Di=function(e){return ki(e)===Si.COMMENT||"#comment"===xi(e)},Ni=Ei(Si.ELEMENT),_i=Ei(Si.TEXT),Ri=Ei(Si.DOCUMENT),Ai={name:xi,type:ki,value:Ti,isElement:Ni,isText:_i,isDocument:Ri,isComment:Di},Li=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},Mi=function(e){return function(t){return Li(t)===e}},Oi={isString:Mi("string"),isObject:Mi("object"),isArray:Mi("array"),isNull:Mi("null"),isBoolean:Mi("boolean"),isUndefined:Mi("undefined"),isFunction:Mi("function"),isNumber:Mi("number")},Pi=function(){var e=Object.keys,t=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};return e===undefined?t:e}(),Ii=function(e,t){for(var n=Pi(e),r=0,i=n.length;r<i;r++){var o=n[r];t(e[o],o,e)}},Hi=function(e,t){return Bi(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},Bi=function(e,t){var n={};return Ii(e,function(r,i){var o=t(r,i,e);n[o.k]=o.v}),n},Fi=function(e,t){var n=[];return Ii(e,function(e,r){n.push(t(e,r))}),n},Wi=function(e){return Fi(e,function(e){return e})},zi={bifilter:function(e,t){var n={},r={};return Ii(e,function(e,i){(t(e,i)?n:r)[i]=e}),{t:n,f:r}},each:Ii,map:Hi,mapToArray:Fi,tupleMap:Bi,find:function(e,t){for(var n=Pi(e),r=0,i=n.length;r<i;r++){var o=n[r],a=e[o];if(t(a,o,e))return we.some(a)}return we.none()},keys:Pi,values:Wi,size:function(e){return Wi(e).length}},ji=function(e,t,n){if(!(Oi.isString(n)||Oi.isBoolean(n)||Oi.isNumber(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},qi=function(e,t,n){ji(e.dom(),t,n)},Vi=function(e,t){var n=e.dom().getAttribute(t);return null===n?undefined:n},Ui=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},$i=function(e,t,n){Ui(e,n)&&!Ui(t,n)&&qi(t,n,Vi(e,n))},Yi={clone:function(e){return Ve.foldl(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:qi,setAll:function(e,t){var n=e.dom();zi.each(t,function(e,t){ji(n,t,e)})},get:Vi,has:Ui,remove:function(e,t){e.dom().removeAttribute(t)},hasNone:function(e){var t=e.dom().attributes;return t===undefined||null===t||0===t.length},transfer:function(e,t,n){Ai.isElement(e)&&Ai.isElement(t)&&Ve.each(n,function(n){$i(e,t,n)})}},Gi=function(e){var t=Ai.isText(e)?e.dom().parentNode:e.dom();return t!==undefined&&null!==t&&t.ownerDocument.body.contains(t)},Xi=kr.cached(function(){return Ki(Ci.fromDom(document))}),Ki=function(e){var t=e.dom().body;if(null===t||t===undefined)throw"Body is not available yet";return Ci.fromDom(t)},Zi={body:Xi,getBody:Ki,inBody:Gi},Qi={isSupported:function(e){return e.style!==undefined}},Ji=function(e,t,n){if(!Oi.isString(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Qi.isSupported(e)&&e.style.setProperty(t,n)},eo=function(e,t){Qi.isSupported(e)&&e.style.removeProperty(t)},to=function(e,t,n){var r=e.dom();Ji(r,t,n)},no=function(e,t){var n=e.dom(),r=window.getComputedStyle(n).getPropertyValue(t),i=""!==r||Zi.inBody(e)?r:ro(n,t);return null===i?undefined:i},ro=function(e,t){return Qi.isSupported(e)?e.style.getPropertyValue(t):""},io=function(e,t){var n=e.dom(),r=ro(n,t);return we.from(r).filter(function(e){return e.length>0})},oo=function(e,t,n){io(e,n).each(function(e){io(t,n).isNone()&&to(t,n,e)})},ao={copy:function(e,t){var n=e.dom(),r=t.dom();Qi.isSupported(n)&&Qi.isSupported(r)&&(r.style.cssText=n.style.cssText)},set:to,preserve:function(e,t){var n=Yi.get(e,"style"),r=t(e);return(n===undefined?Yi.remove:Yi.set)(e,"style",n),r},setAll:function(e,t){var n=e.dom();zi.each(t,function(e,t){Ji(n,t,e)})},setOptions:function(e,t){var n=e.dom();zi.each(t,function(e,t){e.fold(function(){eo(n,t)},function(e){Ji(n,t,e)})})},remove:function(e,t){var n=e.dom();eo(n,t),Yi.has(e,"style")&&""===ui.trim(Yi.get(e,"style"))&&Yi.remove(e,"style")},get:no,getRaw:io,getAllRaw:function(e){var t={},n=e.dom();if(Qi.isSupported(n))for(var r=0;r<n.style.length;r++){var i=n.style.item(r);t[i]=n.style[i]}return t},isValidValue:function(e,t,n){var r=Ci.fromTag(e);to(r,t,n);return io(r,t).isSome()},reflow:function(e){return e.dom().offsetWidth},transfer:function(e,t,n){Ai.isElement(e)&&Ai.isElement(t)&&Ve.each(n,function(n){oo(e,t,n)})}},so=function(e){return e.slice(0).sort()},lo={sort:so,reqMessage:function(e,t){throw new Error("All required keys ("+so(e).join(", ")+") were not specified. Specified keys were: "+so(t).join(", ")+".")},unsuppMessage:function(e){throw new Error("Unsupported keys for object: "+so(e).join(", "))},validateStrArr:function(e,t){if(!Oi.isArray(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");Ve.each(t,function(t){if(!Oi.isString(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")})},invalidTypeMessage:function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+so(e).join(", ")+") were not.")},checkDupes:function(e){var t=so(e);Ve.find(t,function(e,n){return n<t.length-1&&e===t[n+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})}},uo={immutable:v,immutableBag:y},co={toArray:function(e,t){var n=[],r=function(e){return n.push(e),t(e)},i=t(e);do{i=i.bind(r)}while(i.isSome());return n}},fo=function(){return Ze.getOrDie("Node")},ho=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},po={documentPositionPreceding:function(e,t){return ho(e,t,fo().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy:function(e,t){return ho(e,t,fo().DOCUMENT_POSITION_CONTAINED_BY)}},mo=Si.ELEMENT,go=Si.DOCUMENT,vo=function(e){return e.nodeType!==mo&&e.nodeType!==go||0===e.childElementCount},yo={all:function(e,t){var n=t===undefined?document:t.dom();return vo(n)?[]:Ve.map(n.querySelectorAll(e),Ci.fromDom)},is:function(e,t){var n=e.dom();if(n.nodeType!==mo)return!1;if(n.matches!==undefined)return n.matches(t);if(n.msMatchesSelector!==undefined)return n.msMatchesSelector(t);if(n.webkitMatchesSelector!==undefined)return n.webkitMatchesSelector(t);if(n.mozMatchesSelector!==undefined)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},one:function(e,t){var n=t===undefined?document:t.dom();return vo(n)?we.none():we.from(n.querySelector(e)).map(Ci.fromDom)}},bo=function(e,t){return e.dom()===t.dom()},wo=function(e,t){return e.dom().isEqualNode(t.dom())},Co=function(e,t){return Ve.exists(t,pe.curry(bo,e))},So=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},xo=function(e,t){return po.documentPositionContainedBy(e.dom(),t.dom())},ko=gi.detect().browser.isIE()?xo:So,To={eq:bo,isEqualNode:wo,member:Co,contains:ko,is:yo.is},Eo=function(e){return Ci.fromDom(e.dom().ownerDocument)},Do=function(e){var t=Eo(e);return Ci.fromDom(t.dom().documentElement)},No=function(e){var t=e.dom().ownerDocument.defaultView;return Ci.fromDom(t)},_o=function(e){var t=e.dom();return we.from(t.parentNode).map(Ci.fromDom)},Ro=function(e){return _o(e).bind(function(t){var n=Bo(t);return Ve.findIndex(n,function(t){return To.eq(e,t)})})},Ao=function(e,t){for(var n=Oi.isFunction(t)?t:pe.constant(!1),r=e.dom(),i=[];null!==r.parentNode&&r.parentNode!==undefined;){var o=r.parentNode,a=Ci.fromDom(o);if(i.push(a),!0===n(a))break;r=o}return i},Lo=function(e){var t=function(t){return Ve.filter(t,function(t){return!To.eq(e,t)})};return _o(e).map(Bo).map(t).getOr([])},Mo=function(e){var t=e.dom();return we.from(t.offsetParent).map(Ci.fromDom)},Oo=function(e){var t=e.dom();return we.from(t.previousSibling).map(Ci.fromDom)},Po=function(e){var t=e.dom();return we.from(t.nextSibling).map(Ci.fromDom)},Io=function(e){return Ve.reverse(co.toArray(e,Oo))},Ho=function(e){return co.toArray(e,Po)},Bo=function(e){var t=e.dom();return Ve.map(t.childNodes,Ci.fromDom)},Fo=function(e,t){var n=e.dom().childNodes;return we.from(n[t]).map(Ci.fromDom)},Wo=function(e){return Fo(e,0)},zo=function(e){return Fo(e,e.dom().childNodes.length-1)},jo=function(e){return e.dom().childNodes.length},qo=function(e){return e.dom().hasChildNodes()},Vo=uo.immutable("element","offset"),Uo={owner:Eo,defaultView:No,documentElement:Do,parent:_o,findIndex:Ro,parents:Ao,siblings:Lo,prevSibling:Oo,offsetParent:Mo,prevSiblings:Io,nextSibling:Po,nextSiblings:Ho,children:Bo,child:Fo,firstChild:Wo,lastChild:zo,childNodesCount:jo,hasChildNodes:qo,leaf:function(e,t){var n=Bo(e);return n.length>0&&t<n.length?Vo(n[t],0):Vo(e,t)}},$o=gi.detect().browser,Yo=function(e){return Ve.find(e,Ai.isElement)},Go=function(e){return $o.isFirefox()&&"table"===Ai.name(e)?Yo(Uo.children(e)).filter(function(e){return"caption"===Ai.name(e)}).bind(function(e){return Yo(Uo.nextSiblings(e)).map(function(t){var n=t.dom().offsetTop,r=e.dom().offsetTop,i=e.dom().offsetHeight;return n<=r?-i:0})}).getOr(0):0},Xo={getPos:function(e,t,n){var r,i,o=0,a=0,s=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===ao.get(Ci.fromDom(e),"position"))return i=t.getBoundingClientRect(),o=i.left+(s.documentElement.scrollLeft||e.scrollLeft)-s.documentElement.clientLeft,a=i.top+(s.documentElement.scrollTop||e.scrollTop)-s.documentElement.clientTop,{x:o,y:a};for(r=t;r&&r!==n&&r.nodeType;)o+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType;)o-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=Go(Ci.fromDom(t))}return{x:o,y:a}}},Ko=function(e){var t=we.none(),n=[],r=function(e){return Ko(function(t){i(function(n){t(e(n))})})},i=function(e){a()?l(e):n.push(e)},o=function(e){t=we.some(e),s(n),n=[]},a=function(){return t.isSome()},s=function(e){Ve.each(e,l)},l=function(e){t.each(function(t){setTimeout(function(){e(t)},0)})};return e(o),{get:i,map:r,isReady:a}},Zo={nu:Ko,pure:function(e){return Ko(function(t){t(e)})}},Qo={bounce:function(e){return function(){var t=Array.prototype.slice.call(arguments),n=this;setTimeout(function(){e.apply(n,t)},0)}}},Jo=function(e){var t=function(t){e(Qo.bounce(t))};return{map:function(e){return Jo(function(n){t(function(t){var r=e(t);n(r)})})},bind:function(e){return Jo(function(n){t(function(t){e(t).get(n)})})},anonBind:function(e){return Jo(function(n){t(function(){e.get(n)})})},toLazy:function(){return Zo.nu(t)},get:t}},ea={nu:Jo,pure:function(e){return Jo(function(t){t(e)})}},ta={par:function(e,t){return t(function(t){var n=[],r=0,i=function(i){return function(o){n[i]=o,++r>=e.length&&t(n)}};0===e.length?t([]):Ve.each(e,function(e,t){e.get(i(t))})})}},na=function(e){return ta.par(e,ea.nu)},ra={par:na,mapM:function(e,t){var n=Ve.map(e,t);return na(n)},compose:function(e,t){return function(n){return t(n).bind(e)}}},ia=function(e){var t=function(){return ia(e)},n=function(){return ia(e)},r=function(t){return ia(t(e))},i=function(t){t(e)},o=function(t){return t(e)},a=function(t,n){return n(e)},s=function(t){return t(e)},l=function(t){return t(e)},u=function(){return we.some(e)};return{is:function(t){return e===t},isValue:pe.always,isError:pe.never,getOr:pe.constant(e),getOrThunk:pe.constant(e),getOrDie:pe.constant(e),or:t,orThunk:n,fold:a,map:r,each:i,bind:o,exists:s,forall:l,toOption:u}},oa=function(e){var t=function(e){return e()},n=function(){return pe.die(e)()},r=function(e){return e},i=function(e){return e()},o=function(){return oa(e)},a=function(){return oa(e)},s=function(t){return t(e)};return{is:pe.never,isValue:pe.never,isError:pe.always,getOr:pe.identity,getOrThunk:t,getOrDie:n,or:r,orThunk:i,fold:s,map:o,each:pe.noop,bind:a,exists:pe.never,forall:pe.always,toOption:we.none}},aa={value:ia,error:oa},sa=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],la=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],ua=["td","th"],ca=["thead","tbody","tfoot"],da=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],fa=["li","dd","dt"],ha=["ul","ol","dl"],pa=function(e){var t;return function(n){return(t=t||Ve.mapToObject(e,pe.constant(!0))).hasOwnProperty(Ai.name(n))}},ma=pa(["h1","h2","h3","h4","h5","h6"]),ga=pa(sa),va=function(e){return Ai.isElement(e)&&!ga(e)},ya=function(e){return Ai.isElement(e)&&"br"===Ai.name(e)},ba=pa(da),wa=pa(ha),Ca=pa(fa),Sa=pa(la),xa=pa(ca),ka=pa(ua),Ta=function(e){return function(t){return!!t&&t.nodeType===e}},Ea=Ta(1),Da=function(e){var t=e.toLowerCase().split(" ");return function(e){var n,r;if(e&&e.nodeType)for(r=e.nodeName.toLowerCase(),n=0;n<t.length;n++)if(r===t[n])return!0;return!1}},Na=function(e,t){var n=t.toLowerCase().split(" ");return function(t){var r;if(Ea(t))for(r=0;r<n.length;r++)if(t.ownerDocument.defaultView.getComputedStyle(t,null).getPropertyValue(e)===n[r])return!0;return!1}},_a=function(e,t){return function(n){return Ea(n)&&n[e]===t}},Ra=function(e){return function(t){return Ea(t)&&t.hasAttribute(e)}},Aa=function(e,t){return function(n){return Ea(n)&&n.getAttribute(e)===t}},La=function(e){return Ea(e)&&e.hasAttribute("data-mce-bogus")},Ma=function(e){return Ea(e)&&"all"===e.getAttribute("data-mce-bogus")},Oa=function(e){return Ea(e)&&"TABLE"===e.tagName},Pa=function(e){return function(t){if(Ea(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Ia=Ta(3),Ha=Ta(8),Ba=Ta(9),Fa=Da("br"),Wa=Pa("true"),za=Pa("false"),ja={isText:Ia,isElement:Ea,isComment:Ha,isDocument:Ba,isBr:Fa,isContentEditableTrue:Wa,isContentEditableFalse:za,matchNodeNames:Da,hasPropValue:_a,hasAttribute:Ra,hasAttributeValue:Aa,matchStyleValues:Na,isBogus:La,isBogusAll:Ma,isTable:Oa},qa=function(e){var t=e.previousSibling&&"SPAN"===e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"===e.nextSibling.nodeName;return t&&n},Va=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Ua=function(e,t){var n,r=t.childNodes;if(!ja.isElement(t)||!Va(t)){for(n=r.length-1;n>=0;n--)Ua(e,r[n]);if(!1===ja.isDocument(t)){if(ja.isText(t)&&t.nodeValue.length>0){var i=Vn.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||i>0)return;if(0===i&&qa(t))return}else if(ja.isElement(t)&&(1===(r=t.childNodes).length&&Va(r[0])&&t.parentNode.insertBefore(r[0],t),r.length||Sa(Ci.fromDom(t))))return;e.remove(t)}return t}},$a={trimNode:Ua},Ya=Vn.makeMap,Ga=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Xa=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ka=/[<>&\"\']/g,Za=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Qa={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};Sr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},xr={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var Ja=function(e){var t;return t=Ci.fromTag("div").dom(),t.innerHTML=e,t.textContent||t.innerText||e},es=function(e,t){var n,r,i,o={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),Sr[r]||(i="&"+e[n+1]+";",o[r]=i,o[i]=r);return o}};Cr=es("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var ts=function(e,t){return e.replace(t?Ga:Xa,function(e){return Sr[e]||e})},ns=function(e,t){return e.replace(t?Ga:Xa,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Sr[e]||"&#"+e.charCodeAt(0)+";"})},rs=function(e,t,n){return n=n||Cr,e.replace(t?Ga:Xa,function(e){return Sr[e]||n[e]||e})},is={encodeRaw:ts,encodeAllRaw:function(e){return(""+e).replace(Ka,function(e){return Sr[e]||e})},encodeNumeric:ns,encodeNamed:rs,getEncodeFunc:function(e,t){var n=es(t)||Cr,r=function(e,t){return e.replace(t?Ga:Xa,function(e){return Sr[e]!==undefined?Sr[e]:n[e]!==undefined?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})},i=function(e,t){return rs(e,t,n)},o=Ya(e.replace(/\+/g,","));return o.named&&o.numeric?r:o.named?t?i:rs:o.numeric?ns:ts},decode:function(e){return e.replace(Za,function(e,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Qa[t]||String.fromCharCode(t):xr[e]||Cr[e]||Ja(e)})}},os={},as={},ss=Vn.makeMap,ls=Vn.each,us=Vn.extend,cs=Vn.explode,ds=Vn.inArray,fs=function(e,t){return(e=Vn.trim(e))?e.split(t||" "):[]},hs=function(e){var t,n,r,i,o,a,s={},l=function(e,n,r){var i,o,a,l=function(e,t){var n,r,i={};for(n=0,r=e.length;n<r;n++)i[e[n]]=t||{};return i};for(r=r||[],n=n||"","string"==typeof r&&(r=fs(r)),i=(e=fs(e)).length;i--;)a={attributes:l(o=fs([t,n].join(" "))),attributesOrder:o,children:l(r,as)},s[e[i]]=a},u=function(e,t){var n,r,i,o;for(n=(e=fs(e)).length,t=fs(t);n--;)for(r=s[e[n]],i=0,o=t.length;i<o;i++)r.attributes[t[i]]={},r.attributesOrder.push(t[i])};return os[e]?os[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",r=[r,a="acronym applet basefont big font strike tt"].join(" "),ls(fs(a),function(e){l(e,"",r)}),n=[n,o="center dir isindex noframes"].join(" "),i=[n,r].join(" "),ls(fs(o),function(e){l(e,"",i)})),i=i||[n,r].join(" "),l("html","manifest","head body"),l("head","","base command link meta noscript script style title"),l("title hr noscript br"),l("base","href target"),l("link","href rel media hreflang type sizes hreflang"),l("meta","name http-equiv content charset"),l("style","media type scoped"),l("script","src async defer type charset"),l("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),l("address dt dd div caption","",i),l("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),l("blockquote","cite",i),l("ol","reversed start type","li"),l("ul","","li"),l("li","value",i),l("dl","","dt dd"),l("a","href target rel media hreflang type",r),l("q","cite",r),l("ins del","cite datetime",i),l("img","src sizes srcset alt usemap ismap width height"),l("iframe","src name width height",i),l("embed","src type width height"),l("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),l("param","name value"),l("map","name",[i,"area"].join(" ")),l("area","alt coords shape href target rel media hreflang type"),l("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),l("colgroup","span","col"),l("col","span"),l("tbody thead tfoot","","tr"),l("tr","","td th"),l("td","colspan rowspan headers",i),l("th","colspan rowspan headers scope abbr",i),l("form","accept-charset action autocomplete enctype method name novalidate target",i),l("fieldset","disabled form name",[i,"legend"].join(" ")),l("label","form for",r),l("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),l("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?i:r),l("select","disabled form multiple name required size","option optgroup"),l("optgroup","disabled label","option"),l("option","disabled label selected value"),l("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),l("menu","type label",[i,"li"].join(" ")),l("noscript","",i),"html4"!==e&&(l("wbr"),l("ruby","",[r,"rt rp"].join(" ")),l("figcaption","",i),l("mark rt rp summary bdi","",r),l("canvas","width height",i),l("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),l("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),l("picture","","img source"),l("source","src srcset type media sizes"),l("track","kind src srclang label default"),l("datalist","",[r,"option"].join(" ")),l("article section nav aside header footer","",i),l("hgroup","","h1 h2 h3 h4 h5 h6"),l("figure","",[i,"figcaption"].join(" ")),l("time","datetime",r),l("dialog","open",i),l("command","type label icon disabled checked radiogroup command"),l("output","for form name",r),l("progress","value max",r),l("meter","value min max low high optimum",r),l("details","open",[i,"summary"].join(" ")),l("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(u("script","language xml:space"),u("style","xml:space"),u("object","declare classid code codebase codetype archive standby align border hspace vspace"),u("embed","align name hspace vspace"),u("param","valuetype type"),u("a","charset name rev shape coords"),u("br","clear"),u("applet","codebase archive code object alt name width height align hspace vspace"),u("img","name longdesc align border hspace vspace"),u("iframe","longdesc frameborder marginwidth marginheight scrolling align"),u("font basefont","size color face"),u("input","usemap align"),u("select","onchange"),u("textarea"),u("h1 h2 h3 h4 h5 h6 div p legend caption","align"),u("ul","type compact"),u("li","type"),u("ol dl menu dir","compact"),u("pre","width xml:space"),u("hr","align noshade size width"),u("isindex","prompt"),u("table","summary width frame rules cellspacing cellpadding align bgcolor"),u("col","width align char charoff valign"),u("colgroup","width align char charoff valign"),u("thead","align char charoff valign"),u("tr","align char charoff valign bgcolor"),u("th","axis align char charoff valign nowrap bgcolor width height"),u("form","accept"),u("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),u("tfoot","align char charoff valign"),u("tbody","align char charoff valign"),u("area","nohref"),u("body","background bgcolor text link vlink alink")),"html4"!==e&&(u("input button select textarea","autofocus"),u("input textarea","placeholder"),u("a","download"),u("link script img","crossorigin"),u("iframe","sandbox seamless allowfullscreen")),ls(fs("a form meter progress dfn"),function(e){s[e]&&delete s[e].children[e]}),delete s.caption.children.table,delete s.script,os[e]=s,s)},ps=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),ls(e,function(e,r){n[r]=n[r.toUpperCase()]="map"===t?ss(e,/[, ]/):cs(e,/[, ]/)})),n},ms=function(e,t,n,r){var i=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+i(t)+i(n)+i(r)},gs=Vn.each,vs=Vn.is,ys=Vn.grep,bs=it.ie,ws=/^([a-z0-9],?)+$/i,Cs=/^[ \t\r\n]*$/,Ss=function(e,t){var n,r={},i=t.keep_values;return n={set:function(n,r,i){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||e,r,i,n[0])),n.attr("data-mce-"+i,r).attr(i,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},r={style:{set:function(e,t){null===t||"object"!=typeof t?(i&&e.attr("data-mce-style",t),e.attr("style",t)):e.css(t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serializeStyle(e.parseStyle(n),t[0].nodeName)}}},i&&(r.href=r.src=n),r},xs=function(e,t){var n=t.attr("style");(n=e.serializeStyle(e.parseStyle(n),t[0].nodeName))||(n=null),t.attr("data-mce-style",n)},ks=function(e,t){var n,r,i=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(i++,n=r);return i},Ts=function(e,t){var n,r=this;r.doc=e,r.win=window,r.files={},r.counter=0,r.stdMode=!bs||e.documentMode>=8,r.boxModel=!bs||"CSS1Compat"===e.compatMode||r.stdMode,r.styleSheetLoader=b(e),r.boundEvents=[],r.settings=t=t||{},r.schema=t.schema?t.schema:C({}),r.styles=S({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),r.fixDoc(e),r.events=t.ownEvents?new xt(t.proxy):xt.Event,r.attrHooks=Ss(r,t),n=r.schema.getBlockElements(),r.$=cr.overrideDefaults(function(){return{context:e,element:r.getRoot()}}),r.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!n[e.nodeName]):!!n[e]}};Ts.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(){},clone:function(e,t){var n,r,i=this;return!bs||1!==e.nodeType||t?e.cloneNode(t):(r=i.doc,t?n.firstChild:(n=r.createElement(e.nodeName),gs(i.getAttribs(e),function(t){i.setAttrib(n,t.nodeName,i.getAttrib(e,t.nodeName))}),n))},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;return e=e||this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,r=this;return e=r.get(e),t=r.getPos(e),n=r.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,r=this;return e=r.get(e),t=r.getStyle(e,"width"),n=r.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,n,r){var i,o=this,a=[];for(e=o.get(e),r=r===undefined,n=n||("BODY"!==o.getRoot().nodeName?o.getRoot().parentNode:null),vs(t,"string")&&(i=t,t="*"===t?function(e){return 1===e.nodeType}:function(e){return o.is(e,i)});e&&e!==n&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!r)return e;a.push(e)}e=e.parentNode}return r?a:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,(e=this.doc.getElementById(e))&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(e,t){var n=this;return Dn(e,n.get(t)||n.settings.root_element||n.doc,[])},is:function(e,t){var n;if(!e)return!1;if(e.length===undefined){if("*"===t)return 1===e.nodeType;if(ws.test(t)){for(t=t.toLowerCase().split(/,/),e=e.nodeName.toLowerCase(),n=t.length-1;n>=0;n--)if(t[n]===e)return!0;return!1}}if(e.nodeType&&1!==e.nodeType)return!1;var r=e.nodeType?[e]:e;return Dn(t,r[0].ownerDocument||r[0],null,r).length>0},add:function(e,t,n,r,i){var o=this;return this.run(e,function(e){var a;return a=vs(t,"string")?o.doc.createElement(t):t,o.setAttribs(a,n),r&&(r.nodeType?a.appendChild(r):o.setHTML(a,r)),i?a:e.appendChild(a)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r,i="";i+="<"+e;for(r in t)t.hasOwnProperty(r)&&null!==t[r]&&"undefined"!=typeof t[r]&&(i+=" "+r+'="'+this.encode(t[r])+'"');return void 0!==n?i+">"+n+"</"+e+">":i+" />"},createFragment:function(e){var t,n,r,i=this.doc;for(r=i.createElement("div"),t=i.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&xs(this,e)},getStyle:function(e,t,n){return e=this.$$(e),n?e.css(t):("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=it.ie&&it.ie<12?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[t]:undefined)},setStyles:function(e,t){e=this.$$(e).css(t),this.settings.update_styles&&xs(this,e)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var r,i,o=this,a=o.settings;""===n&&(n=null),r=(e=o.$$(e)).attr(t),e.length&&((i=o.attrHooks[t])&&i.set?i.set(e,n,t):e.attr(t,n),r!==n&&a.onSetAttrib&&a.onSetAttrib({attrElm:e,attrName:t,attrValue:n}))},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,r){gs(t,function(e,t){n.setAttrib(r,t,e)})})},getAttrib:function(e,t,n){var r,i,o=this;return(e=o.$$(e)).length&&(i=(r=o.attrHooks[t])&&r.get?r.get(e,t):e.attr(t)),void 0===i&&(i=n||""),i},getPos:function(e,t){return Xo.getPos(this.doc.body,this.get(e),t)},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n,r=this,i=r.doc;if(r!==Ts.DOM&&i===document){var o=Ts.DOM.addedStyles;if((o=o||[])[e])return;o[e]=!0,Ts.DOM.addedStyles=o}(n=i.getElementById("mceDefaultStyles"))||((n=i.createElement("style")).id="mceDefaultStyles",n.type="text/css",(t=i.getElementsByTagName("head")[0]).firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(i.createTextNode(e))},loadCSS:function(e){var t,n=this,r=n.doc;n===Ts.DOM||r!==document?(e||(e=""),t=r.getElementsByTagName("head")[0],gs(e.split(","),function(e){var i;e=Vn._addCacheSuffix(e),n.files[e]||(n.files[e]=!0,i=n.create("link",{rel:"stylesheet",href:e}),bs&&r.documentMode&&r.recalc&&(i.onload=function(){r.recalc&&r.recalc(),i.onload=null}),t.appendChild(i))})):Ts.DOM.loadCSS(e)},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,n){this.$$(e).toggleClass(t,n).each(function(){""===this.className&&cr(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"===this.$$(e).css("display")},uniqueId:function(e){return(e||"mce_")+this.counter++},setHTML:function(e,t){e=this.$$(e),bs?e.each(function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(r){cr("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}}):e.html(t)},getOuterHTML:function(e){return 1===(e=this.get(e)).nodeType&&"outerHTML"in e?e.outerHTML:cr("<div></div>").append(cr(e).clone()).html()},setOuterHTML:function(e,t){var n=this;n.$$(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}n.remove(cr(this).html(t),!0)})},decode:is.decode,encode:is.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,(r=t.nextSibling)?n.insertBefore(e,r):n.appendChild(e),e})},replace:function(e,t,n){return this.run(t,function(t){return vs(t,"array")&&(e=e.cloneNode(!0)),n&&gs(ys(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n,r=this;return e.nodeName!==t.toUpperCase()&&(n=r.create(t),gs(r.getAttribs(e),function(t){r.setAttrib(n,t.nodeName,r.getAttrib(e,t.nodeName))}),r.replace(n,e,1)),n||e},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return this.styles.toHex(Vn.trim(e))},run:function(e,t,n){var r,i=this;return"string"==typeof e&&(e=i.get(e)),!!e&&(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(r=[],gs(e,function(e,o){e&&("string"==typeof e&&(e=i.get(e)),r.push(t.call(n,e,o)))}),r))},getAttribs:function(e){var t;if(!(e=this.get(e)))return[];if(bs){if(t=[],"OBJECT"===e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n,r,i,o,a,s,l=this,u=0;if(e=e.firstChild){a=new w(e,e.parentNode),t=t||(l.schema?l.schema.getNonEmptyElements():null),o=l.schema?l.schema.getWhiteSpaceElements():{};do{if(1===(i=e.nodeType)){var c=e.getAttribute("data-mce-bogus");if(c){e=a.next("all"===c);continue}if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){u++,e=a.next();continue}return!1}for(n=(r=l.getAttribs(e)).length;n--;)if("name"===(s=r[n].nodeName)||"data-mce-bookmark"===s)return!1}if(8===i)return!1;if(3===i&&!Cs.test(e.nodeValue))return!1;if(3===i&&e.parentNode&&o[e.parentNode.nodeName]&&Cs.test(e.nodeValue))return!1;e=a.next()}while(e)}return u<=1},createRng:function(){return this.doc.createRange()},nodeIndex:ks,split:function(e,t,n){var r,i,o,a=this,s=a.createRng();if(e&&t)return s.setStart(e.parentNode,a.nodeIndex(e)),s.setEnd(t.parentNode,a.nodeIndex(t)),r=s.extractContents(),(s=a.createRng()).setStart(t.parentNode,a.nodeIndex(t)+1),s.setEnd(e.parentNode,a.nodeIndex(e)+1),i=s.extractContents(),(o=e.parentNode).insertBefore($a.trimNode(a,r),e),n?o.insertBefore(n,e):o.insertBefore(t,e),o.insertBefore($a.trimNode(a,i),e),a.remove(e),n||t},bind:function(e,t,n,r){var i=this;if(Vn.isArray(e)){for(var o=e.length;o--;)e[o]=i.bind(e[o],t,n,r);return e}return!i.settings.collect||e!==i.doc&&e!==i.win||i.boundEvents.push([e,t,n,r]),i.events.bind(e,t,n,r||i)},unbind:function(e,t,n){var r,i=this;if(Vn.isArray(e)){for(r=e.length;r--;)e[r]=i.unbind(e[r],t,n);return e}if(i.boundEvents&&(e===i.doc||e===i.win))for(r=i.boundEvents.length;r--;){var o=i.boundEvents[r];e!==o[0]||t&&t!==o[1]||n&&n!==o[2]||this.events.unbind(o[0],o[1],o[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1===e.nodeType?(t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null:null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&null===(n=this.getContentEditable(e));e=e.parentNode);return n},destroy:function(){var e=this;if(e.boundEvents){for(var t=e.boundEvents.length;t--;){var n=e.boundEvents[t];this.events.unbind(n[0],n[1],n[2])}e.boundEvents=null}Dn.setDocument&&Dn.setDocument(),e.win=e.doc=e.root=e.events=e.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,i=t;if(e)for("string"==typeof i&&(i=function(e){return r.is(e,t)}),e=e[n];e;e=e[n])if(i(e))return e;return null}},Ts.DOM=new Ts(document),Ts.nodeIndex=ks;var Es=Ts.DOM,Ds=Vn.each,Ns=Vn.grep,_s=function(e){return"function"==typeof e},Rs=function(){var e=0,t=1,n=2,r=3,i={},o=[],a={},s=[],l=0,u=function(e,t,n){var r,i,o=Es,a=function(){o.remove(i),r&&(r.onreadystatechange=r.onload=r=null),t()},s=function(){_s(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)};i=o.uniqueId(),(r=document.createElement("script")).id=i,r.type="text/javascript",r.src=Vn._addCacheSuffix(e),"onreadystatechange"in r?r.onreadystatechange=function(){/loaded|complete/.test(r.readyState)&&a()}:r.onload=a,r.onerror=s,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)};this.isDone=function(e){return i[e]===n},this.markDone=function(e){i[e]=n},this.add=this.load=function(t,n,r,s){i[t]===undefined&&(o.push(t),i[t]=e),n&&(a[t]||(a[t]=[]),a[t].push({success:n,failure:s,scope:r||this}))},this.remove=function(e){delete i[e],delete a[e]},this.loadQueue=function(e,t,n){this.loadScripts(o,e,t,n)},this.loadScripts=function(e,o,c,d){var f,h=[],p=function(e,t){Ds(a[t],function(t){_s(t[e])&&t[e].call(t.scope)}),a[t]=undefined};s.push({success:o,failure:d,scope:c||this}),(f=function(){var o=Ns(e);if(e.length=0,Ds(o,function(e){i[e]!==n?i[e]!==r?i[e]!==t&&(i[e]=t,l++,u(e,function(){i[e]=n,l--,p("success",e),f()},function(){i[e]=r,l--,h.push(e),p("failure",e),f()})):p("failure",e):p("success",e)}),!l){var a=s.slice(0);s.length=0,Ds(a,function(e){0===h.length?_s(e.success)&&e.success.call(e.scope):_s(e.failure)&&e.failure.call(e.scope,h)})}})()}};Rs.ScriptLoader=new Rs;var As=Vn.each,Ls=function(){var e=this;e.items=[],e.urls={},e.lookup={},e._listeners=[]};Ls.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:undefined},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(e,t){var n=Ls.language;if(n&&!1!==Ls.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+n.substr(0,2)+","))n=n.substr(0,2);else if(-1===t.indexOf(","+n+","))return;Rs.ScriptLoader.add(this.urls[e]+"/langs/"+n+".js")}},add:function(e,t,n){this.items.push(t),this.lookup[e]={instance:t,dependencies:n};var r=Ve.partition(this._listeners,function(t){return t.name===e});return this._listeners=r.fail,As(r.pass,function(e){e.callback()}),t},remove:function(e){delete this.urls[e],delete this.lookup[e]},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(e,t){var n=this.urls[e];As(t,function(e){Rs.ScriptLoader.add(n+"/"+e)})},load:function(e,t,n,r,i){var o=this,a=t,s=function(){var i=o.dependencies(e);As(i,function(e){var n=o.createUrl(t,e);o.load(n.resource,n,undefined,undefined)}),n&&(r?n.call(r):n.call(Rs))};o.urls[e]||("object"==typeof t&&(a=t.prefix+t.resource+t.suffix),0!==a.indexOf("/")&&-1===a.indexOf("://")&&(a=Ls.baseURL+"/"+a),o.urls[e]=a.substring(0,a.lastIndexOf("/")),o.lookup[e]?s():Rs.ScriptLoader.add(a,s,r,i))},waitFor:function(e,t){this.lookup.hasOwnProperty(e)?t():this._listeners.push({name:e,callback:t})}},Ls.PluginManager=new Ls,Ls.ThemeManager=new Ls;var Ms="\ufeff",Os={isZwsp:function(e){return e===Ms},ZWSP:Ms,trim:function(e){return e.replace(new RegExp(Ms,"g"),"")}},Ps=ja.isElement,Is=ja.isText,Hs=function(e){return Is(e)&&(e=e.parentNode),Ps(e)&&e.hasAttribute("data-mce-caret")},Bs=function(e){return Is(e)&&Os.isZwsp(e.data)},Fs=function(e){return Hs(e)||Bs(e)},Ws=function(e){return e.firstChild!==e.lastChild||!ja.isBr(e.firstChild)},zs=function(e,t){var n,r,i,o;if(n=e.ownerDocument,i=n.createTextNode(Os.ZWSP),o=e.parentNode,t){if(r=e.previousSibling,Is(r)){if(Fs(r))return r;if(Ys(r))return r.splitText(r.data.length-1)}o.insertBefore(i,e)}else{if(r=e.nextSibling,Is(r)){if(Fs(r))return r;if($s(r))return r.splitText(1),r}e.nextSibling?o.insertBefore(i,e.nextSibling):o.appendChild(i)}return i},js=function(e){var t=e.container();return e&&ja.isText(t)&&t.data.charAt(e.offset())===Os.ZWSP},qs=function(e){var t=e.container();return e&&ja.isText(t)&&t.data.charAt(e.offset()-1)===Os.ZWSP},Vs=function(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},Us=function(e,t,n){var r,i,o;return r=t.ownerDocument,(i=r.createElement(e)).setAttribute("data-mce-caret",n?"before":"after"),i.setAttribute("data-mce-bogus","all"),i.appendChild(Vs()),o=t.parentNode,n?o.insertBefore(i,t):t.nextSibling?o.insertBefore(i,t.nextSibling):o.appendChild(i),i},$s=function(e){return Is(e)&&e.data[0]===Os.ZWSP},Ys=function(e){return Is(e)&&e.data[e.data.length-1]===Os.ZWSP},Gs=function(e){var t=e.getElementsByTagName("br"),n=t[t.length-1];ja.isBogus(n)&&n.parentNode.removeChild(n)},Xs=function(e){return e&&e.hasAttribute("data-mce-caret")?(Gs(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},Ks=function(e){return Hs(e.startContainer)},Zs=ja.isContentEditableTrue,Qs=ja.isContentEditableFalse,Js=ja.isBr,el=ja.isText,tl=ja.matchNodeNames("script style textarea"),nl=ja.matchNodeNames("img input textarea hr iframe video audio object"),rl=ja.matchNodeNames("table"),il=Fs,ol=function(e){return!il(e)&&(el(e)?!tl(e.parentNode):nl(e)||Js(e)||rl(e)||Qs(e))},al=function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Qs(e))return!1;if(Zs(e))return!0}return!0},sl=function(e){return!!Qs(e)&&!0!==An.reduce(e.getElementsByTagName("*"),function(e,t){return e||Zs(t)},!1)},ll=function(e){return nl(e)||sl(e)},ul=function(e,t){return ol(e)&&al(e,t)},cl=Math.round,dl=function(e){return e?{left:cl(e.left),top:cl(e.top),bottom:cl(e.bottom),right:cl(e.right),width:cl(e.width),height:cl(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},fl=function(e,t){return e=dl(e),t?e.right=e.left:(e.left=e.left+e.width,e.right=e.left),e.width=0,e},hl=function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right},pl=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},ml=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&pl(t.top-e.bottom,e,t)},gl=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&pl(t.bottom-e.top,e,t)},vl=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},yl=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},bl=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},wl=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Cl=function(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&wl.test(e)},Sl=[].slice,xl=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Sl.call(arguments);return r.length-1>=e.length?e.apply(this,r.slice(1)):function(){var e=r.concat([].slice.call(arguments));return xl.apply(this,e)}},kl={constant:function(e){return function(){return e}},negate:function(e){return function(t){return!e(t)}},and:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Sl.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}},or:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Sl.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}},curry:xl,compose:function(e,t){return function(n){return e(t(n))}},noop:function(){}},Tl=ja.isElement,El=ol,Dl=ja.matchStyleValues("display","block table"),Nl=ja.matchStyleValues("float","left right"),_l=kl.and(Tl,El,kl.negate(Nl)),Rl=kl.negate(ja.matchStyleValues("white-space","pre pre-line pre-wrap")),Al=ja.isText,Ll=ja.isBr,Ml=Ts.nodeIndex,Ol=bl,Pl=function(e){return"createRange"in e?e.createRange():Ts.DOM.createRng()},Il=function(e){return e&&/[\r\n\t ]/.test(e)},Hl=function(e){return!!e.setStart&&!!e.setEnd},Bl=function(e){var t,n=e.startContainer,r=e.startOffset;return!!(Il(e.toString())&&Rl(n.parentNode)&&ja.isText(n)&&(t=n.data,Il(t[r-1])||Il(t[r+1])))},Fl=function(e){var t,n=e.ownerDocument,r=Pl(n),i=n.createTextNode("\xa0"),o=e.parentNode;return o.insertBefore(i,e),r.setStart(i,0),r.setEnd(i,1),t=dl(r.getBoundingClientRect()),o.removeChild(i),t},Wl=function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,i=e.endOffset;if(t===n&&ja.isText(n)&&0===r&&1===i){var o=e.cloneRange();return o.setEndAfter(n),jl(o)}return null},zl=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},jl=function(e){var t,n;return n=e.getClientRects(),t=n.length>0?dl(n[0]):dl(e.getBoundingClientRect()),!Hl(e)&&Ll(e)&&zl(t)?Fl(e):zl(t)&&Hl(e)?Wl(e):t},ql=function(e,t){var n=fl(e,t);return n.width=1,n.right=n.left+1,n},Vl=function(e){var t,n,r=[],i=function(e){0!==e.height&&(r.length>0&&hl(e,r[r.length-1])||r.push(e))},o=function(e,t){var n=Pl(e.ownerDocument);if(t<e.data.length){if(Cl(e.data[t]))return r;if(Cl(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!Bl(n)))return i(ql(jl(n),!1)),r}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),Bl(n)||i(ql(jl(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),Bl(n)||i(ql(jl(n),!0)))};if(Al(e.container()))return o(e.container(),e.offset()),r;if(Tl(e.container()))if(e.isAtEnd())n=Ol(e.container(),e.offset()),Al(n)&&o(n,n.data.length),_l(n)&&!Ll(n)&&i(ql(jl(n),!1));else{if(n=Ol(e.container(),e.offset()),Al(n)&&o(n,0),_l(n)&&e.isAtEnd())return i(ql(jl(n),!1)),r;t=Ol(e.container(),e.offset()-1),_l(t)&&!Ll(t)&&(Dl(t)||Dl(n)||!_l(n))&&i(ql(jl(t),!1)),_l(n)&&i(ql(jl(n),!0))}return r};!function(e){e.fromRangeStart=function(t){return e(t.startContainer,t.startOffset)},e.fromRangeEnd=function(t){return e(t.endContainer,t.endOffset)},e.after=function(t){return e(t.parentNode,Ml(t)+1)},e.before=function(t){return e(t.parentNode,Ml(t))},e.isAtStart=function(e){return!!e&&e.isAtStart()},e.isAtEnd=function(e){return!!e&&e.isAtEnd()},e.isTextPosition=function(e){return!!e&&ja.isText(e.container())}}(x||(x={}));var Ul,$l=x,Yl=ja.isElement,Gl=ja.isText,Xl=function(e){var t=e.parentNode;t&&t.removeChild(e)},Kl=function(e){try{return e.nodeValue}catch(t){return""}},Zl=function(e,t){0===t.length?Xl(e):e.nodeValue=t},Ql=function(e){var t=Os.trim(e);return{count:e.length-t.length,text:t}},Jl=function(e,t){return iu(e),t},eu=function(e,t){var n=Ql(e.data.substr(0,t.offset())),r=Ql(e.data.substr(t.offset())),i=n.text+r.text;return i.length>0?(Zl(e,i),$l(e,t.offset()-n.count)):t},tu=function(e,t){var n=t.container(),r=Ve.indexOf(n.childNodes,e).map(function(e){return e<t.offset()?$l(n,t.offset()-1):t}).getOr(t);return iu(e),r},nu=function(e,t){return Gl(e)&&t.container()===e?eu(e,t):Jl(e,t)},ru=function(e,t){return t.container()===e.parentNode?tu(e,t):Jl(e,t)},iu=function(e){if(Yl(e)&&Fs(e)&&(Ws(e)?e.removeAttribute("data-mce-caret"):Xl(e)),Gl(e)){var t=Os.trim(Kl(e));Zl(e,t)}},ou={removeAndReposition:function(e,t){return $l.isTextPosition(t)?nu(e,t):ru(e,t)},remove:iu},au=function(e,t,n){var r=e?$l.before(n):$l.after(n);return hu(e,t,r)},su=function(e){return ja.isBr(e)?$l.before(e):$l.after(e)},lu=function(e){return $l.isTextPosition(e)?0===e.offset():ol(e.getNode())},uu=function(e){if($l.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return ol(e.getNode(!0))},cu=function(e,t){return!$l.isTextPosition(e)&&!$l.isTextPosition(t)&&e.getNode()===t.getNode(!0)},du=function(e){return!$l.isTextPosition(e)&&ja.isBr(e.getNode())},fu=function(e,t,n){return e?!cu(t,n)&&!du(t)&&uu(t)&&lu(n):!cu(n,t)&&lu(t)&&uu(n)},hu=function(e,t,n){var r=ld(t);return we.from(e?r.next(n):r.prev(n))},pu=function(e,t,n){return hu(e,t,n).bind(function(r){return Oc(n,r,t)&&fu(e,n,r)?hu(e,t,r):we.some(r)})},mu=function(e,t){var n=e?t.firstChild:t.lastChild;return ja.isText(n)?we.some($l(n,e?0:n.data.length)):n?ol(n)?we.some(e?$l.before(n):su(n)):au(e,t,n):we.none()},gu={fromPosition:hu,nextPosition:pe.curry(hu,!0),prevPosition:pe.curry(hu,!1),navigate:pu,positionIn:mu,firstPositionIn:pe.curry(mu,!0),lastPositionIn:pe.curry(mu,!1)},vu=ja.isContentEditableTrue,yu=ja.isContentEditableFalse,bu=function(e,t,n,r){return t._selectionOverrides.showCaret(e,n,r)},wu=function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t},Cu=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:wu(t)},Su=function(e,t){var n,r;return t=zc(1,e.getBody(),t),n=$l.fromRangeStart(t),yu(n.getNode())?bu(1,e,n.getNode(),!n.isAtEnd()):yu(n.getNode(!0))?bu(1,e,n.getNode(!0),!1):(r=e.dom.getParent(n.getNode(),function(e){return yu(e)||vu(e)}),yu(r)?bu(1,e,r,!1):null)},xu=function(e,t){return t&&t.collapsed?Su(e,t)||t:t},ku={cat:function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},findMap:function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return we.none()},liftN:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(!i.isSome())return we.none();n.push(i.getOrDie())}return we.some(t.apply(null,n))}};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(Ul||(Ul={}));var Tu,Eu=function(e,t){return ku.liftN([Ve.head(t.getClientRects()),Ve.last(e.getClientRects())],ml).getOr(!1)},Du=function(e,t){return ku.liftN([Ve.last(t.getClientRects()),Ve.head(e.getClientRects())],function(e,t){return gl(e,t)}).getOr(!1)},Nu=function(e,t){return e===Tu.Backwards?t.reverse():t},_u=function(e,t,n){return e===Tu.Forwards?t.next(n):t.prev(n)},Ru=function(e,t,n,r){return ja.isBr(r.getNode(t===Tu.Forwards))?Ul.Br:!1===Oc(n,r)?Ul.Block:Ul.Wrap},Au=function(e,t,n,r){for(var i,o=ld(n),a=r,s=[];a&&(i=_u(t,o,a));){if(ja.isBr(i.getNode(!1)))return t===Tu.Forwards?{positions:Nu(t,s).concat([i]),breakType:Ul.Br,breakAt:we.some(i)}:{positions:Nu(t,s),breakType:Ul.Br,breakAt:we.some(i)};if(i.isVisible()){if(e(a,i)){var l=Ru(n,t,a,i);return{positions:Nu(t,s),breakType:l,breakAt:we.some(i)}}s.push(i),a=i}else a=i}return{positions:Nu(t,s),breakType:Ul.Eol,breakAt:we.none()}},Lu=function(e,t,n,r){return t(n,r).breakAt.map(function(r){var i=t(n,r).positions;return e===Tu.Backwards?i.concat(r):[r].concat(i)}).getOr([])},Mu=function(e,t){return Ve.foldl(e,function(e,n){return e.fold(function(){return we.some(n)},function(r){return ku.liftN([Ve.head(r.getClientRects()),Ve.head(n.getClientRects())],function(e,i){var o=Math.abs(t-e.left);return Math.abs(t-i.left)<=o?n:r}).or(e)})},we.none())},Ou=function(e,t){return Ve.head(t.getClientRects()).bind(function(t){return Mu(e,t.left)})},Pu=pe.curry(Au,Eu,-1),Iu=pe.curry(Au,Du,1),Hu=pe.curry(Lu,-1,Pu),Bu=pe.curry(Lu,1,Iu),Fu=function(e){return gu.firstPositionIn(e).map(function(t){return[t].concat(Iu(e,t).positions)}).getOr([])},Wu=function(e){return gu.lastPositionIn(e).map(function(t){return Pu(e,t).positions.concat(t)}).getOr([])},zu=function(e){return ju(Zi.body(),e)},ju=function(e,t){var n=[];return Ve.each(Uo.children(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(ju(e,t))}),n},qu={all:zu,ancestors:function(e,t,n){return Ve.filter(Uo.parents(e,n),t)},siblings:function(e,t){return Ve.filter(Uo.siblings(e),t)},children:function(e,t){return Ve.filter(Uo.children(e),t)},descendants:ju},Vu={all:function(e){return yo.all(e)},ancestors:function(e,t,n){return qu.ancestors(e,function(e){return yo.is(e,t)},n)},siblings:function(e,t){return qu.siblings(e,function(e){return yo.is(e,t)})},children:function(e,t){return qu.children(e,function(e){return yo.is(e,t)})},descendants:function(e,t){return yo.all(t,e)}},Uu=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}},$u=function(e,t){return Ve.bind(t,function(t){var n=Uu(t.getBoundingClientRect(),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]})},Yu=function(e,t,n){return Ve.foldl(e,function(e,r){return e.fold(function(){return we.some(r)},function(e){var i=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),o=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return we.some(o<i?r:e)})},we.none())},Gu=function(e,t,n,r,i){var o=Vu.descendants(Ci.fromDom(n),"td,th").map(function(e){return e.dom()}),a=Ve.filter($u(e,o),function(e){return t(e,i)});return Yu(a,r,i).map(function(e){return e.cell})},Xu=function(e){return e.bottom},Ku=function(e){return e.top},Zu=function(e,t){return e.y<t},Qu=function(e,t){return e.y>t},Ju=pe.curry(Gu,Xu,Zu),ec=pe.curry(Gu,Ku,Qu),tc=function(e,t){return Ve.head(t.getClientRects()).bind(function(t){return Ju(e,t.left,t.top)}).bind(function(e){return Ou(Wu(e),t)})},nc=function(e,t){return Ve.last(t.getClientRects()).bind(function(t){return ec(e,t.left,t.top)}).bind(function(e){return Ou(Fu(e),t)})},rc=gi.detect().browser,ic=function(){return rc.isIE()||rc.isEdge()||rc.isFirefox()},oc=function(e,t,n){var r=e(t,n);return r.breakType===Ul.Wrap&&0===r.positions.length?r.breakAt.map(function(n){return e(t,n).breakAt.isNone()}).getOr(!0):r.breakAt.isNone()},ac=kl.curry(oc,Pu),sc=kl.curry(oc,Iu),lc=function(e,t,n){var r=$l.fromRangeStart(t);return gu.positionIn(!e,n).map(function(e){return e.isEqual(r)}).getOr(!1)},uc=function(e,t,n){var r=e.selection.getRng(),i=t?1:-1;if(ic()&&lc(t,r,n)){var o=bu(i,e,n,!t);return e.selection.setRng(o),!0}return!1},cc=function(e,t,n){return tc(t,n).orThunk(function(){return Ve.head(n.getClientRects()).bind(function(n){return Mu(Hu(e,$l.before(t)),n.left)})}).getOr($l.before(t))},dc=function(e,t,n){return nc(t,n).orThunk(function(){return Ve.head(n.getClientRects()).bind(function(n){return Mu(Bu(e,$l.after(t)),n.left)})}).getOr($l.after(t))},fc=function(e,t,n,r){var i=e.selection.getRng(),o=$l.fromRangeStart(i),a=e.getBody();if(!t&&ac(r,o)){var s=cc(a,n,o);return e.selection.setRng(s.toRange()),!0}if(t&&sc(r,o)){s=dc(a,n,o);return e.selection.setRng(s.toRange()),!0}return!1},hc=function(e,t){return function(){return we.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return we.from(e.dom.getParent(n,"table")).map(function(r){return uc(e,t,r,n)})}).getOr(!1)}},pc=function(e,t){return function(){return we.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return we.from(e.dom.getParent(n,"table")).map(function(r){return fc(e,t,r,n)})}).getOr(!1)}},mc=ja.isContentEditableFalse,gc=function(e){return ja.isElement(e)&&/^(TD|TH)$/i.test(e.tagName)},vc=function(e){return e.ownerDocument.activeElement===e},yc=function(e,t,n){var r,i,o,a,s,l=fl(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(r=e.ownerDocument.documentElement,i=e.scrollLeft||r.scrollLeft,o=e.scrollTop||r.scrollTop):(s=e.getBoundingClientRect(),i=e.scrollLeft-s.left,o=e.scrollTop-s.top),l.left+=i,l.right+=i,l.top+=o,l.bottom+=o,l.width=1,(a=t.offsetWidth-t.clientWidth)>0&&(n&&(a*=-1),l.left+=a,l.right+=a),l},bc=function(e){var t,n,r,i,o;for(t=cr("*[contentEditable=false]",e),i=0;i<t.length;i++)r=(n=t[i]).previousSibling,Ys(r)&&(1===(o=r.data).length?r.parentNode.removeChild(r):r.deleteData(o.length-1,1)),r=n.nextSibling,$s(r)&&(1===(o=r.data).length?r.parentNode.removeChild(r):r.deleteData(0,1))},wc=function(e,t){var n,r,i=null,o=function(n,o){var l,u;return a(),gc(o)?null:t(o)?(r=Us("p",o,n),l=yc(e,o,n),cr(r).css("top",l.top),i=cr('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(l).appendTo(e),n&&i.addClass("mce-visual-caret-before"),s(),(u=o.ownerDocument.createRange()).setStart(r,0),u.setEnd(r,0),u):(r=zs(o,n),u=o.ownerDocument.createRange(),mc(r.nextSibling)?(u.setStart(r,0),u.setEnd(r,0)):(u.setStart(r,1),u.setEnd(r,1)),u)},a=function(){bc(e),r&&(ou.remove(r),r=null),i&&(i.remove(),i=null),clearInterval(n)},s=function(){n=dt.setInterval(function(){vc(e)?cr("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden"):cr("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")},500)};return{show:o,hide:a,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},destroy:function(){return dt.clearInterval(n)}}},Cc=function(e){return mc(e)||ja.isTable(e)&&ic()},Sc=ja.isContentEditableFalse,xc=ja.matchStyleValues("display","block table table-cell table-caption list-item"),kc=Fs,Tc=Hs,Ec=kl.curry,Dc=ja.isElement,Nc=ol,_c=function(e){return e>0},Rc=function(e){return e<0},Ac=function(e,t){for(var n;n=e(t);)if(!Tc(n))return n;return null},Lc=function(e,t,n,r,i){var o=new w(e,r);if(Rc(t)){if((Sc(e)||Tc(e))&&(e=Ac(o.prev,!0),n(e)))return e;for(;e=Ac(o.prev,i);)if(n(e))return e}if(_c(t)){if((Sc(e)||Tc(e))&&(e=Ac(o.next,!0),n(e)))return e;for(;e=Ac(o.next,i);)if(n(e))return e}return null},Mc=function(e,t){for(;e&&e!==t;){if(xc(e))return e;e=e.parentNode}return null},Oc=function(e,t,n){return Mc(e.container(),n)===Mc(t.container(),n)},Pc=function(e,t){var n,r;return t?(n=t.container(),r=t.offset(),Dc(n)?n.childNodes[r+e]:null):null},Ic=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},Hc=function(e,t,n){return Mc(t,e)===Mc(n,e)},Bc=function(e,t,n){var r,i;for(i=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[i],kc(r)&&(r=r[i]),Sc(r)){if(Hc(t,r,n))return r;break}if(Nc(r))break;n=n.parentNode}return null},Fc=Ec(Ic,!0),Wc=Ec(Ic,!1),zc=function(e,t,n){var r,i,o,a,s=Ec(Bc,!0,t),l=Ec(Bc,!1,t);if(i=n.startContainer,o=n.startOffset,Hs(i)){if(Dc(i)||(i=i.parentNode),"before"===(a=i.getAttribute("data-mce-caret"))&&(r=i.nextSibling,Cc(r)))return Fc(r);if("after"===a&&(r=i.previousSibling,Cc(r)))return Wc(r)}if(!n.collapsed)return n;if(ja.isText(i)){if(kc(i)){if(1===e){if(r=l(i))return Fc(r);if(r=s(i))return Wc(r)}if(-1===e){if(r=s(i))return Wc(r);if(r=l(i))return Fc(r)}return n}if(Ys(i)&&o>=i.data.length-1)return 1===e&&(r=l(i))?Fc(r):n;if($s(i)&&o<=1)return-1===e&&(r=s(i))?Wc(r):n;if(o===i.data.length)return(r=l(i))?Fc(r):n;if(0===o)return(r=s(i))?Wc(r):n}return n},jc=function(e,t){var n=Pc(e,t);return Sc(n)&&!ja.isBogusAll(n)},qc=function(e,t){return ja.isTable(Pc(e,t))},Vc=function(e,t){return we.from(Pc(e?0:-1,t)).filter(Sc)},Uc=function(e,t,n){var r=zc(e,t,n);return-1===e?x.fromRangeStart(r):x.fromRangeEnd(r)},$c=Ec(jc,0),Yc=Ec(jc,-1),Gc=Ec(qc,0),Xc=Ec(qc,-1);!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(Tu||(Tu={}));var Kc=ja.isContentEditableFalse,Zc=ja.isText,Qc=ja.isElement,Jc=ja.isBr,ed=ol,td=ll,nd=ul,rd=function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n},id=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},od=function(e,t){if(_c(e)){if(ed(t.previousSibling)&&!Zc(t.previousSibling))return $l.before(t);if(Zc(t))return $l(t,0)}if(Rc(e)){if(ed(t.nextSibling)&&!Zc(t.nextSibling))return $l.after(t);if(Zc(t))return $l(t,t.data.length)}return Rc(e)?Jc(t)?$l.before(t):$l.after(t):$l.before(t)},ad=function(e,t){var n;return!!ja.isBr(e)&&(!!(n=sd(1,$l.after(e),t))&&!Oc($l.before(e),$l.before(n),t))},sd=function(e,t,n){var r,i,o,a,s;if(!Qc(n)||!t)return null;if(t.isEqual($l.after(n))&&n.lastChild){if(s=$l.after(n.lastChild),Rc(e)&&ed(n.lastChild)&&Qc(n.lastChild))return Jc(n.lastChild)?$l.before(n.lastChild):s}else s=t;var l=s.container(),u=s.offset();if(Zc(l)){if(Rc(e)&&u>0)return $l(l,--u);if(_c(e)&&u<l.length)return $l(l,++u);r=l}else{if(Rc(e)&&u>0&&(i=id(l,u-1),ed(i)))return!td(i)&&(o=Lc(i,e,nd,i))?Zc(o)?$l(o,o.data.length):$l.after(o):Zc(i)?$l(i,i.data.length):$l.before(i);if(_c(e)&&u<l.childNodes.length&&(i=id(l,u),ed(i)))return ad(i,n)?sd(e,$l.after(i),n):!td(i)&&(o=Lc(i,e,nd,i))?Zc(o)?$l(o,0):$l.before(o):Zc(i)?$l(i,0):$l.after(i);r=i||s.getNode()}return(_c(e)&&s.isAtEnd()||Rc(e)&&s.isAtStart())&&(r=Lc(r,e,kl.constant(!0),n,!0),nd(r,n))?od(e,r):(i=Lc(r,e,nd,n),!(a=An.last(An.filter(rd(l,n),Kc)))||i&&a.contains(i)?i?od(e,i):null:s=_c(e)?$l.after(a):$l.before(a))},ld=function(e){return{next:function(t){return sd(Tu.Forwards,t,e)},prev:function(t){return sd(Tu.Backwards,t,e)}}},ud=function(e){return e.firstChild&&e.firstChild===e.lastChild},cd=function(e){return"br"===e.name||"\xa0"===e.value},dd=function(e,t){return e.getBlockElements()[t.name]&&ud(t)&&cd(t.firstChild)},fd=function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||dd(e,t))},hd=function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e},pd=function(e,t,n){var r=t.serialize(n),i=e.createFragment(r);return hd(i)},md=function(e){return Vn.grep(e.childNodes,function(e){return"LI"===e.nodeName})},gd=function(e){return"\xa0"===e.data||ja.isBr(e)},vd=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&gd(e.firstChild)},yd=function(e){return!e.firstChild||vd(e)},bd=function(e){return e.length>0&&yd(e[e.length-1])?e.slice(0,-1):e},wd=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},Cd=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]},Sd=function(e,t){var n=$l.before(e),r=ld(t).next(n);return r?r.toRange():null},xd=function(e,t){var n=$l.after(e),r=ld(t).prev(n);return r?r.toRange():null},kd=function(e,t,n,r){var i=Cd(e,r),o=e.parentNode;return o.insertBefore(i[0],e),Vn.each(t,function(t){o.insertBefore(t,e)}),o.insertBefore(i[1],e),o.removeChild(e),xd(t[t.length-1],n)},Td=function(e,t,n){var r=e.parentNode;return Vn.each(t,function(t){r.insertBefore(t,e)}),Sd(e,n)},Ed=function(e,t,n,r){return r.insertAfter(t.reverse(),e),xd(t[0],n)},Dd={isListFragment:function(e,t){var n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),fd(e,r)&&(r=r.prev),!(!n||n!==r)&&("ul"===n.name||"ol"===n.name)},insertAtCaret:function(e,t,n,r){var i=pd(t,e,r),o=wd(t,n.startContainer),a=bd(md(i.firstChild)),s=1,l=2,u=t.getRoot(),c=function(e){var r=$l.fromRangeStart(n),i=ld(t.getRoot()),a=e===s?i.prev(r):i.next(r);return!a||wd(t,a.getNode())!==o};return c(s)?Td(o,a,u):c(l)?Ed(o,a,u,t):kd(o,a,u,n)},isParentBlockLi:function(e,t){return!!wd(e,t)},trimListItems:bd,listItems:md},Nd=ja.isText,_d=ja.isBogus,Rd=Ts.nodeIndex,Ad=function(e){var t=e.parentNode;return _d(t)?Ad(t):t},Ld=function(e){return e?An.reduce(e.childNodes,function(e,t){return _d(t)&&"BR"!==t.nodeName?e=e.concat(Ld(t)):e.push(t),e},[]):[]},Md=function(e,t){for(;(e=e.previousSibling)&&Nd(e);)t+=e.data.length;return t},Od=function(e){return function(t){return e===t}},Pd=function(e){var t,n,r;return t=Ld(Ad(e)),n=An.findIndex(t,Od(e),e),t=t.slice(0,n+1),r=An.reduce(t,function(e,n,r){return Nd(n)&&Nd(t[r-1])&&e++,e},0),t=An.filter(t,ja.matchNodeNames(e.nodeName)),(n=An.findIndex(t,Od(e),e))-r},Id=function(e){return(Nd(e)?"text()":e.nodeName.toLowerCase())+"["+Pd(e)+"]"},Hd=function(e,t,n){var r=[];for(t=t.parentNode;t!==e&&(!n||!n(t));t=t.parentNode)r.push(t);return r},Bd=function(e,t){var n,r,i,o,a,s=[];return n=t.container(),r=t.offset(),Nd(n)?i=Md(n,r):(r>=(o=n.childNodes).length?(i="after",r=o.length-1):i="before",n=o[r]),s.push(Id(n)),a=Hd(e,n),a=An.filter(a,kl.negate(ja.isBogus)),(s=s.concat(An.map(a,function(e){return Id(e)}))).reverse().join("/")+","+i},Fd=function(e,t,n){var r=Ld(e);return r=An.filter(r,function(e,t){return!Nd(e)||!Nd(r[t-1])}),(r=An.filter(r,ja.matchNodeNames(t)))[n]},Wd=function(e,t){for(var n,r=e,i=0;Nd(r);){if(n=r.data.length,t>=i&&t<=i+n){e=r,t-=i;break}if(!Nd(r.nextSibling)){e=r,t=n;break}i+=n,r=r.nextSibling}return Nd(e)&&t>e.data.length&&(t=e.data.length),$l(e,t)},zd=function(e,t){var n,r,i;return t?(n=t.split(","),t=n[0].split("/"),i=n.length>1?n[1]:"before",(r=An.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),Fd(e,t[1],parseInt(t[2],10))):null},e))?Nd(r)?Wd(r,parseInt(i,10)):(i="after"===i?Rd(r)+1:Rd(r),$l(r.parentNode,i)):null):null},jd=ja.isContentEditableFalse,qd=function(e,t,n){var r,i;for(i=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&ja.isText(r);r=r.previousSibling)i+=e(r.data).length;return i},Vd=function(e,t,n,r,i){var o,a=r[i?"startContainer":"endContainer"],s=r[i?"startOffset":"endOffset"],l=[],u=0,c=e.getRoot();for(ja.isText(a)?l.push(n?qd(t,a,s):s):(s>=(o=a.childNodes).length&&o.length&&(u=1,s=Math.max(0,o.length-1)),l.push(e.nodeIndex(o[s],n)+u));a&&a!==c;a=a.parentNode)l.push(e.nodeIndex(a,n));return l},Ud=function(e,t,n,r){var i=t.dom,o={};return o.start=Vd(i,e,n,r,!0),t.isCollapsed()||(o.end=Vd(i,e,n,r,!1)),o},$d=function(e){ja.isText(e)&&0===e.data.length&&e.parentNode.removeChild(e)},Yd=function(e,t,n){var r=0;return Vn.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},Gd=function(e,t){var n,r,i,o=t?"start":"end";n=e[o+"Container"],r=e[o+"Offset"],ja.isElement(n)&&"TR"===n.nodeName&&(n=(i=n.childNodes)[Math.min(t?r:r-1,i.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r))},Xd=function(e){return Gd(e,!0),Gd(e,!1),e},Kd=function(e,t){var n;if(ja.isElement(e)&&(e=bl(e,t),jd(e)))return e;if(Fs(e)){if(ja.isText(e)&&Hs(e)&&(e=e.parentNode),n=e.previousSibling,jd(n))return n;if(n=e.nextSibling,jd(n))return n}},Zd=function(e){return Kd(e.startContainer,e.startOffset)||Kd(e.endContainer,e.endOffset)},Qd=function(e,t,n){var r=n.getNode(),i=r?r.nodeName:null,o=n.getRng();return jd(r)||"IMG"===i?{name:i,index:Yd(n.dom,i,r)}:(r=Zd(o))?(i=r.tagName,{name:i,index:Yd(n.dom,i,r)}):Ud(e,n,t,o)},Jd=function(e){var t=e.getRng();return{start:Bd(e.dom.getRoot(),$l.fromRangeStart(t)),end:Bd(e.dom.getRoot(),$l.fromRangeEnd(t))}},ef=function(e){return{rng:e.getRng()}},tf=function(e){var t=e.dom,n=e.getRng(),r=t.uniqueId(),i=e.isCollapsed(),o="overflow:hidden;line-height:0px",a=e.getNode(),s=a.nodeName,l="&#xFEFF;";if("IMG"===s)return{name:s,index:Yd(t,s,a)};var u=Xd(n.cloneRange());if(!i){u.collapse(!1);var c=t.create("span",{"data-mce-type":"bookmark",id:r+"_end",style:o},l);u.insertNode(c),$d(c.nextSibling)}(n=Xd(n)).collapse(!0);var d=t.create("span",{"data-mce-type":"bookmark",id:r+"_start",style:o},l);return n.insertNode(d),$d(d.previousSibling),e.moveToBookmark({id:r,keep:1}),{id:r}},nf={getBookmark:function(e,t,n){return 2===t?Qd(Os.trim,n,e):3===t?Jd(e):t?ef(e):tf(e)},getUndoBookmark:pe.curry(Qd,pe.identity,!0)},rf=function(e,t){return!e.isBlock(t)||t.innerHTML||it.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},of=function(e,t){var n,r;return n=e.createRng(),r=zd(e.getRoot(),t.start),n.setStart(r.container(),r.offset()),r=zd(e.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n},af=function(e,t,n,r){var i,o,a,s,l=n[t?"start":"end"],u=e.getRoot();if(l){for(a=l[0],o=u,i=l.length-1;i>=1;i--){if(s=o.childNodes,l[i]>s.length-1)return;o=s[l[i]]}3===o.nodeType&&(a=Math.min(l[0],o.nodeValue.length)),1===o.nodeType&&(a=Math.min(l[0],o.childNodes.length)),t?r.setStart(o,a):r.setEnd(o,a)}return!0},sf=function(e,t,n){var r,i,o,a,s,l,u=e.get(n.id+"_"+t),c=n.keep;if(u){if(r=u.parentNode,c?(r=u.firstChild,i=1):i=e.nodeIndex(u),s=r,l=i,!c){for(a=u.previousSibling,o=u.nextSibling,Vn.each(Vn.grep(u.childNodes),function(e){ja.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});u=e.get(n.id+"_"+t);)e.remove(u,1);a&&o&&a.nodeType===o.nodeType&&ja.isText(a)&&!it.opera&&(i=a.nodeValue.length,a.appendData(o.nodeValue),e.remove(o),s=a,l=i)}return we.some($l(s,l))}return we.none()},lf=function(e,t){return e.isSome()?e:t},uf=function(e,t){var n=e.createRng();return af(e,!0,t,n)&&af(e,!1,t,n)?we.some(n):we.none()},cf=function(e,t){var n=sf(e,"start",t),r=sf(e,"end",t);return ku.liftN([n,lf(r,n)],function(t,n){var r=e.createRng();return r.setStart(rf(e,t.container()),t.offset()),r.setEnd(rf(e,n.container()),n.offset()),r})},df=function(e,t){return we.from(e.select(t.name)[t.index]).map(function(t){var n=e.createRng();return n.selectNode(t),n})},ff={resolve:function(e,t){var n=e.dom;if(t){if(Vn.isArray(t.start))return uf(n,t);if("string"==typeof t.start)return we.some(of(n,t));if(t.id)return cf(n,t);if(t.name)return df(n,t);if(t.rng)return we.some(t.rng)}return we.none()}},hf={getBookmark:function(e,t,n){return nf.getBookmark(e,t,n)},moveToBookmark:function(e,t){ff.resolve(e,t).each(function(t){e.setRng(t)})},isBookmarkNode:function(e){return ja.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")}},pf=Vn.each,mf=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var r=function(t){var n={};return pf(e.getAttribs(t),function(r){var i=r.nodeName.toLowerCase();0!==i.indexOf("_")&&"style"!==i&&0!==i.indexOf("data-")&&(n[i]=e.getAttrib(t,i))}),n},i=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!!i(r(t),r(n))&&(!!i(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))&&(!hf.isBookmarkNode(t)&&!hf.isBookmarkNode(n)))}},gf=function(e,t){Uo.parent(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})},vf=function(e,t){Uo.nextSibling(e).fold(function(){Uo.parent(e).each(function(e){bf(e,t)})},function(e){gf(e,t)})},yf=function(e,t){Uo.firstChild(e).fold(function(){bf(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})},bf=function(e,t){e.dom().appendChild(t.dom())},wf={before:gf,after:vf,prepend:yf,append:bf,appendAt:function(e,t,n){Uo.child(e,n).fold(function(){bf(e,t)},function(e){gf(e,t)})},wrap:function(e,t){gf(e,t),bf(t,e)}},Cf={before:function(e,t){Ve.each(t,function(t){wf.before(e,t)})},after:function(e,t){Ve.each(t,function(n,r){var i=0===r?e:t[r-1];wf.after(i,n)})},prepend:function(e,t){Ve.each(t.slice().reverse(),function(t){wf.prepend(e,t)})},append:function(e,t){Ve.each(t,function(t){wf.append(e,t)})}},Sf=function(e){e.dom().textContent="",Ve.each(Uo.children(e),function(e){xf(e)})},xf=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},kf={empty:Sf,remove:xf,unwrap:function(e){var t=Uo.children(e);t.length>0&&Cf.before(e,t),xf(e)}},Tf=k(Ai.isText,"text"),Ef={get:function(e){return Tf.get(e)},getOption:function(e){return Tf.getOption(e)},set:function(e,t){Tf.set(e,t)}},Df=function(e){for(var t=[],n=e.dom();n;)t.push(Ci.fromDom(n)),n=n.lastChild;return t},Nf=function(e){return Ai.isText(e)?"\xa0"===Ef.get(e):ya(e)},_f={removeTrailingBr:function(e){var t=Vu.descendants(e,"br"),n=Ve.filter(Df(e).slice(-1),ya);t.length===n.length&&Ve.each(n,kf.remove)},fillWithPaddingBr:function(e){kf.empty(e),wf.append(e,Ci.fromHtml('<br data-mce-bogus="1">'))},isPaddedElement:function(e){return 1===Ve.filter(Uo.children(e),Nf).length},trimBlockTrailingBr:function(e){Uo.lastChild(e).each(function(t){Uo.prevSibling(t).each(function(n){ga(e)&&ya(t)&&ga(n)&&kf.remove(t)})})}},Rf=Vn.makeMap,Af=function(e,t,n,r){var i=document.createRange();return i.setStart(e,t),i.setEnd(n,r),i},Lf=function(e){var t=$l.fromRangeStart(e),n=$l.fromRangeEnd(e),r=e.commonAncestorContainer;return gu.fromPosition(!1,r,n).map(function(i){return!Oc(t,n,r)&&Oc(t,i,r)?Af(t.container(),t.offset(),i.container(),i.offset()):e}).getOr(e)},Mf=function(e){return e.collapsed?e:Lf(e)},Of={normalize:function(e){return Mf(e)}},Pf=ja.matchNodeNames("td th"),If=function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,i=n.lastChild;!r||r===i&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}},Hf=function(e,t){we.from(e.getParent(t,"td,th")).map(Ci.fromDom).each(_f.trimBlockTrailingBr)},Bf=function(e,t,n){var r,i,o,a,s,l,u,c,d,f,h,p,m=e.schema.getTextInlineElements(),g=e.selection,v=e.dom,y=function(e){var t,n,r;t=g.getRng(),n=t.startContainer,r=t.startOffset;var i=function(e){return n[e]&&3===n[e].nodeType};return 3===n.nodeType&&(r>0?e=e.replace(/^&nbsp;/," "):i("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<n.length?e=e.replace(/&nbsp;(<br>|)$/," "):i("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e},b=function(){var e,n,r;n=(e=g.getRng()).startContainer,r=e.startOffset,3===n.nodeType&&e.collapsed&&("\xa0"===n.data[r]?(n.deleteData(r,1),/[\u00a0| ]$/.test(t)||(t+=" ")):"\xa0"===n.data[r-1]&&(n.deleteData(r-1,1),/[\u00a0| ]$/.test(t)||(t=" "+t)))},w=function(){if(p){var t=e.getBody(),n=new mf(v);Vn.each(v.select("*[data-mce-fragment]"),function(e){for(var r=e.parentNode;r&&r!==t;r=r.parentNode)m[e.nodeName.toLowerCase()]&&n.compare(r,e)&&v.remove(e,!0)})}},C=function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")},S=function(e){Vn.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})},x=function(e){return!!e.getAttribute("data-mce-fragment")},k=function(t){return t&&!e.schema.getShortEndedElements()[t.nodeName]},T=function(t){var n,r,i,o=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===e.dom.getContentEditable(t))return t;return null};if(t){if(g.scrollIntoView(t),n=o(t))return v.remove(t),void g.select(n);c=v.createRng(),(d=t.previousSibling)&&3===d.nodeType?(c.setStart(d,d.nodeValue.length),it.ie||(f=t.nextSibling)&&3===f.nodeType&&(d.appendData(f.data),f.parentNode.removeChild(f))):(c.setStartBefore(t),c.setEndBefore(t));var a=function(t){var n=$l.fromRangeStart(t);if(n=ld(e.getBody()).next(n))return n.toRange()};r=v.getParent(t,v.isBlock),v.remove(t),r&&v.isEmpty(r)&&(e.$(r).empty(),c.setStart(r,0),c.setEnd(r,0),Pf(r)||x(r)||!(i=a(c))?v.add(r,v.create("br",{"data-mce-bogus":"1"})):(c=i,v.remove(r))),g.setRng(c)}};if(/^ | $/.test(t)&&(t=y(t)),r=e.parser,p=n.merge,i=E({validate:e.settings.validate},e.schema),h='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',l={content:t,format:"html",selection:!0,paste:n.paste},(l=e.fire("BeforeSetContent",l)).isDefaultPrevented())e.fire("SetContent",{content:l.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=l.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,h);var D=(c=g.getRng()).startContainer||(c.parentElement?c.parentElement():null),N=e.getBody();D===N&&g.isCollapsed()&&v.isBlock(N.firstChild)&&k(N.firstChild)&&v.isEmpty(N.firstChild)&&((c=v.createRng()).setStart(N.firstChild,0),c.setEnd(N.firstChild,0),g.setRng(c)),g.isCollapsed()||(e.selection.setRng(Of.normalize(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),b());var _={context:(o=g.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0};if(s=r.parse(t,_),!0===n.paste&&Dd.isListFragment(e.schema,s)&&Dd.isParentBlockLi(v,o))return c=Dd.insertAtCaret(i,v,e.selection.getRng(!0),s),e.selection.setRng(c),void e.fire("SetContent",l);if(C(s),"mce_marker"===(d=s.lastChild).attr("id"))for(u=d,d=d.prev;d;d=d.walk(!0))if(3===d.type||!v.isBlock(d.name)){e.schema.isValidChild(d.parent.name,"span")&&d.parent.insert(u,d,"br"===d.name);break}if(e._selectionOverrides.showBlockCaretContainer(o),_.invalid){for(g.setContent(h),o=g.getNode(),a=e.getBody(),9===o.nodeType?o=d=a:d=o;d!==a;)o=d,d=d.parentNode;t=o===a?a.innerHTML:v.getOuterHTML(o),t=i.serialize(r.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return i.serialize(s)}))),o===a?v.setHTML(a,t):v.setOuterHTML(o,t)}else t=i.serialize(s),If(e,t,o);w(),T(v.get("mce_marker")),S(e.getBody()),Hf(e.dom,e.selection.getStart()),e.fire("SetContent",l),e.addVisual()}},Ff=function(e){var t;return"string"!=typeof e?(t=Vn.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}},Wf={insertAtCaret:function(e,t){var n=Ff(t);Bf(e,n.content,n.details)}},zf=function(e){return Uf(Zi.body(),e)},jf=function(e,t,n){for(var r=e.dom(),i=Oi.isFunction(n)?n:pe.constant(!1);r.parentNode;){r=r.parentNode;var o=Ci.fromDom(r);if(t(o))return we.some(o);if(i(o))break}return we.none()},qf=function(e,t){var n=e.dom();return n.parentNode?Vf(Ci.fromDom(n.parentNode),function(n){return!To.eq(e,n)&&t(n)}):we.none()},Vf=function(e,t){return Ve.find(e.dom().childNodes,pe.compose(t,Ci.fromDom)).map(Ci.fromDom)},Uf=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){if(t(Ci.fromDom(e.childNodes[r])))return we.some(Ci.fromDom(e.childNodes[r]));var i=n(e.childNodes[r]);if(i.isSome())return i}return we.none()};return n(e.dom())},$f={first:zf,ancestor:jf,closest:function(e,t,n){return D(function(e){return t(e)},jf,e,t,n)},sibling:qf,child:Vf,descendant:Uf},Yf=uo.immutable("sections","settings"),Gf=gi.detect().deviceType.isTouch(),Xf=["lists","autolink","autosave"],Kf={theme:"mobile"},Zf=function(e){var t=Oi.isArray(e)?e.join(" "):e,n=Ve.map(Oi.isString(t)?t.split(" "):[],ui.trim);return Ve.filter(n,function(e){return e.length>0})},Qf=function(e){return Ve.filter(e,pe.curry(Ve.contains,Xf))},Jf=function(e,t){var n=zi.bifilter(t,function(t,n){return Ve.contains(e,n)});return Yf(n.t,n.f)},eh=function(e,t,n){var r=e.sections(),i=r.hasOwnProperty(t)?r[t]:{};return Vn.extend({},n,i)},th=function(e,t){return e.sections().hasOwnProperty(t)},nh=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:!0}},rh=function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?Vn.extend({},e.external_plugins,n):n},ih=function(e,t){return[].concat(Zf(e)).concat(Zf(t))},oh=function(e,t,n,r){var i=Zf(n.forced_plugins),o=Zf(r.plugins),a=e&&th(t,"mobile")?Qf(o):o,s=ih(i,a);return Vn.extend(r,{plugins:s.join(" ")})},ah=function(e,t){var n=t.settings().inline;return e&&th(t,"mobile")&&!n},sh=function(e,t,n,r){var i=Jf(["mobile"],r),o=Vn.extend(t,n,i.settings(),ah(e,i)?eh(i,"mobile",Kf):{},{validate:!0,content_editable:i.settings().inline,external_plugins:rh(n,i.settings())});return oh(e,i,n,o)},lh=function(e,t,n,r,i){var o=nh(t,n,e);return sh(Gf,o,r,i)},uh=function(e,t,n){return we.from(t.settings[n]).filter(e)},ch=pe.curry(uh,Oi.isString),dh=function(e){var t={};return"string"==typeof e?Ve.each(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(e){(e=e.split("=")).length>1?t[Vn.trim(e[0])]=Vn.trim(e[1]):t[Vn.trim(e[0])]=Vn.trim(e)}):t=e,t},fh=function(e,t,n,r){var i=t in e.settings?e.settings[t]:n;return"hash"===r?dh(i):"string"===r?uh(Oi.isString,e,t).getOr(n):"number"===r?uh(Oi.isNumber,e,t).getOr(n):"boolean"===r?uh(Oi.isBoolean,e,t).getOr(n):"object"===r?uh(Oi.isObject,e,t).getOr(n):"array"===r?uh(Oi.isArray,e,t).getOr(n):"function"===r?uh(Oi.isFunction,e,t).getOr(n):i},hh=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ph=function(e){return hh.test(e)},mh=function(e,t,n){return Ve.filter(Ts.DOM.getParents(n.container(),"*",t),e)},gh=function(e,t,n){var r=Mc(t,e),i=Mc(n,e);return r&&r===i},vh=function(e,t){var n=t.container(),r=t.offset();return e?Bs(n)?ja.isText(n.nextSibling)?$l(n.nextSibling,0):$l.after(n):js(t)?$l(n,r+1):t:Bs(n)?ja.isText(n.previousSibling)?$l(n.previousSibling,n.previousSibling.data.length):$l.before(n):qs(t)?$l(n,r-1):t},yh={isInlineTarget:function(e,t){var n=ch(e,"inline_boundaries_selector").getOr("a[href],code");return yo.is(Ci.fromDom(t),n)},findRootInline:function(e,t,n){var r=mh(e,t,n);return we.from(r[r.length-1])},isRtl:function(e){return"rtl"===Ts.DOM.getStyle(e,"direction",!0)||ph(e.textContent)},isAtZwsp:function(e){return js(e)||qs(e)},normalizePosition:vh,normalizeForwards:pe.curry(vh,!0),normalizeBackwards:pe.curry(vh,!1),hasSameParentBlock:gh},bh=function(e){return function(t){return To.eq(e,Ci.fromDom(t.dom().parentNode))}},wh=function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)},Ch={getParentBlock:function(e,t){return To.contains(e,t)?$f.closest(t,function(e){return ba(e)||Ca(e)},bh(e)):we.none()},paddEmptyBody:function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),wh(e))},willDeleteLastPositionInElement:function(e,t,n){return ku.liftN([gu.firstPositionIn(n),gu.lastPositionIn(n)],function(r,i){var o=yh.normalizePosition(!0,r),a=yh.normalizePosition(!1,i),s=yh.normalizePosition(!1,t);return e?gu.nextPosition(n,s).map(function(e){return e.isEqual(a)&&t.isEqual(o)}).getOr(!1):gu.prevPosition(n,s).map(function(e){return e.isEqual(o)&&t.isEqual(a)}).getOr(!1)}).getOr(!0)}},Sh=function(e,t,n){return $f.ancestor(e,function(e){return yo.is(e,t)},n)},xh={first:function(e){return yo.one(e)},ancestor:Sh,sibling:function(e,t){return $f.sibling(e,function(e){return yo.is(e,t)})},child:function(e,t){return $f.child(e,function(e){return yo.is(e,t)})},descendant:function(e,t){return yo.one(t,e)},closest:function(e,t,n){return D(yo.is,Sh,e,t,n)}},kh={any:function(e){return xh.first(e).isSome()},ancestor:function(e,t,n){return xh.ancestor(e,t,n).isSome()},sibling:function(e,t){return xh.sibling(e,t).isSome()},child:function(e,t){return xh.child(e,t).isSome()},descendant:function(e,t){return xh.descendant(e,t).isSome()},closest:function(e,t,n){return xh.closest(e,t,n).isSome()}},Th=function(e,t){var n=Ci.fromDom(e),r=Ci.fromDom(t);return kh.ancestor(r,"pre,code",pe.curry(To.eq,n))},Eh=function(e,t){return ja.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&!1===Th(e,t)},Dh=function(e){return ja.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")},Nh=function(e,t){return ol(t)&&!1===Eh(e,t)||Dh(t)||_h(t)},_h=ja.hasAttribute("data-mce-bookmark"),Rh=ja.hasAttribute("data-mce-bogus"),Ah=ja.hasAttributeValue("data-mce-bogus","all"),Lh=function(e){var t,n,r=0;if(Nh(e,e))return!1;if(!(n=e.firstChild))return!0;t=new w(n,e);do{if(Ah(n))n=t.next(!0);else if(Rh(n))n=t.next();else if(ja.isBr(n))r++,n=t.next();else{if(Nh(e,n))return!1;n=t.next()}}while(n);return r<=1},Mh={isEmpty:function(e){return Lh(e.dom())}},Oh=uo.immutable("block","position"),Ph=uo.immutable("from","to"),Ih=function(e,t){var n=Ci.fromDom(e),r=Ci.fromDom(t.container());return Ch.getParentBlock(n,r).map(function(e){return Oh(e,t)})},Hh=function(e){return!1===To.eq(e.from().block(),e.to().block())},Bh=function(e){return Uo.parent(e.from().block()).bind(function(t){return Uo.parent(e.to().block()).filter(function(e){return To.eq(t,e)})}).isSome()},Fh=function(e){return!1===ja.isContentEditableFalse(e.from().block())&&!1===ja.isContentEditableFalse(e.to().block())},Wh=function(e,t,n){return ja.isBr(n.position().getNode())&&!1===Mh.isEmpty(n.block())?gu.positionIn(!1,n.block().dom()).bind(function(r){return r.isEqual(n.position())?gu.fromPosition(t,e,r).bind(function(t){return Ih(e,t)}):we.some(n)}).getOr(n):n},zh=function(e,t,n){var r=Ih(e,$l.fromRangeStart(n)),i=r.bind(function(n){return gu.fromPosition(t,e,n.position()).bind(function(n){return Ih(e,n).map(function(n){return Wh(e,t,n)})})});return ku.liftN([r,i],Ph).filter(function(e){return Hh(e)&&Bh(e)&&Fh(e)})},jh={read:function(e,t,n){return n.collapsed?zh(e,t,n):we.none()}},qh=function(e){return e.slice(0,-1)},Vh=function(e,t,n){return To.contains(t,e)?qh(Uo.parents(e,function(e){return n(e)||To.eq(e,t)})):[]},Uh=function(e,t){return Vh(e,t,pe.constant(!1))},$h={parentsUntil:Vh,parents:Uh,parentsAndSelf:function(e,t){return[e].concat(Uh(e,t))}},Yh=function(e){var t=Uo.children(e);return Ve.findIndex(t,ga).fold(function(){return t},function(e){return t.slice(0,e)})},Gh=function(e){var t=Yh(e);return Ve.each(t,function(e){kf.remove(e)}),t},Xh=function(e,t){gu.positionIn(e,t.dom()).each(function(e){var t=e.getNode();ja.isBr(t)&&kf.remove(Ci.fromDom(t))})},Kh=function(e,t){var n=$h.parentsAndSelf(t,e);return Ve.find(n.reverse(),Mh.isEmpty).each(kf.remove)},Zh=function(e,t){var n=Uo.parents(t,function(t){return To.eq(t,e)});return we.from(n[n.length-2])},Qh=function(e,t){return To.contains(t,e)?Uo.parent(e).bind(function(n){return To.eq(n,t)?we.some(e):Zh(t,e)}):we.none()},Jh=function(e,t,n){if(Mh.isEmpty(n))return kf.remove(n),Mh.isEmpty(t)&&_f.fillWithPaddingBr(t),gu.firstPositionIn(t.dom());Xh(!0,t),Xh(!1,n);var r=Gh(t);return Qh(t,n).fold(function(){Kh(e,t);var i=gu.lastPositionIn(n.dom());return Ve.each(r,function(e){wf.append(n,e)}),i},function(i){var o=gu.prevPosition(n.dom(),$l.before(i.dom()));return Ve.each(r,function(e){wf.before(i,e)}),Kh(e,t),o})},ep={mergeBlocks:function(e,t,n,r){return t?Jh(e,r,n):Jh(e,n,r)}},tp={backspaceDelete:function(e,t){var n,r=Ci.fromDom(e.getBody());return(n=jh.read(r.dom(),t,e.selection.getRng()).bind(function(e){return ep.mergeBlocks(r,t,e.from().block(),e.to().block())})).each(function(t){e.selection.setRng(t.toRange())}),n.isSome()}},np=function(e,t){var n=t.getRng();return ku.liftN([Ch.getParentBlock(e,Ci.fromDom(n.startContainer)),Ch.getParentBlock(e,Ci.fromDom(n.endContainer))],function(r,i){return!1===To.eq(r,i)&&(n.deleteContents(),ep.mergeBlocks(e,!0,r,i).each(function(e){t.setRng(e.toRange())}),!0)}).getOr(!1)},rp=function(e,t){var n=Ci.fromDom(t),r=pe.curry(To.eq,e);return $f.ancestor(n,ka,r).isSome()},ip=function(e,t){return rp(e,t.startContainer)||rp(e,t.endContainer)},op=function(e,t){var n=gu.prevPosition(e.dom(),$l.fromRangeStart(t)).isNone(),r=gu.nextPosition(e.dom(),$l.fromRangeEnd(t)).isNone();return!ip(e,t)&&n&&r},ap=function(e){return e.setContent(""),e.selection.setCursorLocation(),!0},sp=function(e){var t=Ci.fromDom(e.getBody()),n=e.selection.getRng();return op(t,n)?ap(e):np(t,e.selection)},lp={backspaceDelete:function(e){return!e.selection.isCollapsed()&&sp(e)}},up={generate:function(e){if(!Oi.isArray(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return Ve.each(e,function(r,i){var o=zi.keys(r);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],s=r[a];if(n[a]!==undefined)throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!Oi.isArray(s))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),o=0;o<r.length;o++)r[o]=arguments[o];return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[i].apply(null,r)},match:function(e){var n=zi.keys(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!Ve.forall(t,function(e){return Ve.contains(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)},log:function(e){console.log(e,{constructors:t,constructor:a,params:r})}}}}),n}},cp=function(e){return ka(Ci.fromDom(e))||Ca(Ci.fromDom(e))},dp=up.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),fp=function(e,t){var n=t.getNode(!1===e),r=e?"after":"before";return ja.isElement(n)&&n.getAttribute("data-mce-caret")===r},hp=function(e,t,n,r){var i=function(t){return va(Ci.fromDom(t))&&!Oc(n,r,e)};return Vc(!t,n).fold(function(){return Vc(t,r).fold(pe.constant(!1),i)},i)},pp=function(e,t,n,r){var i=r.getNode(!1===t);return Ch.getParentBlock(Ci.fromDom(e),Ci.fromDom(n.getNode())).map(function(e){return Mh.isEmpty(e)?dp.remove(e.dom()):dp.moveToElement(i)}).orThunk(function(){return we.some(dp.moveToElement(i))})},mp=function(e,t,n){return gu.fromPosition(t,e,n).bind(function(r){return cp(r.getNode())?we.none():hp(e,t,n,r)?we.none():t&&ja.isContentEditableFalse(r.getNode())?pp(e,t,n,r):!1===t&&ja.isContentEditableFalse(r.getNode(!0))?pp(e,t,n,r):t&&Yc(n)?we.some(dp.moveToPosition(r)):!1===t&&$c(n)?we.some(dp.moveToPosition(r)):we.none()})},gp=function(e,t){return e&&ja.isContentEditableFalse(t.nextSibling)?we.some(dp.moveToElement(t.nextSibling)):!1===e&&ja.isContentEditableFalse(t.previousSibling)?we.some(dp.moveToElement(t.previousSibling)):we.none()},vp=function(e,t,n){return n.fold(function(e){return we.some(dp.remove(e))},function(e){return we.some(dp.moveToElement(e))},function(n){return Oc(t,n,e)?we.none():we.some(dp.moveToPosition(n))})},yp=function(e,t,n){return fp(t,n)?gp(t,n.getNode(!1===t)).fold(function(){return mp(e,t,n)},we.some):mp(e,t,n).bind(function(t){return vp(e,n,t)})},bp=function(e,t,n){var r=zc(t?1:-1,e,n),i=$l.fromRangeStart(r);return!1===t&&Yc(i)?we.some(dp.remove(i.getNode(!0))):t&&$c(i)?we.some(dp.remove(i.getNode())):yp(e,t,i)},wp=function(e,t){var n=e.container(),r=e.offset();return!1===$l.isTextPosition(e)&&n===t.parentNode&&r>$l.before(t).offset()},Cp=function(e,t){return wp(t,e)?$l(t.container(),t.offset()-1):t},Sp=function(e){return ja.isText(e)?$l(e,0):$l.before(e)},xp=function(e){return ja.isText(e)?$l(e,e.data.length):$l.after(e)},kp=function(e){return ol(e.previousSibling)?we.some(xp(e.previousSibling)):e.previousSibling?gu.lastPositionIn(e.previousSibling):we.none()},Tp=function(e){return ol(e.nextSibling)?we.some(Sp(e.nextSibling)):e.nextSibling?gu.firstPositionIn(e.nextSibling):we.none()},Ep=function(e,t){var n=$l.before(t.previousSibling?t.previousSibling:t.parentNode);return gu.prevPosition(e,n).fold(function(){return gu.nextPosition(e,$l.after(t))},we.some)},Dp=function(e,t){return gu.nextPosition(e,$l.after(t)).fold(function(){return gu.prevPosition(e,$l.before(t))},we.some)},Np=function(e,t){return kp(t).orThunk(function(){return Tp(t)}).orThunk(function(){return Ep(e,t)})},_p=function(e,t){return Tp(t).orThunk(function(){return kp(t)}).orThunk(function(){return Dp(e,t)})},Rp=function(e,t,n){return e?_p(t,n):Np(t,n)},Ap=function(e,t,n){return Rp(e,t,n).map(pe.curry(Cp,n))},Lp=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},Mp=function(e){return function(t){return t.dom()===e}},Op=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(Ai.name(t))},Pp=function(e){if(Mh.isEmpty(e)){var t=Ci.fromHtml('<br data-mce-bogus="1">');return kf.empty(e),wf.append(e,t),we.some($l.before(t.dom()))}return we.none()},Ip=function(e,t){return ku.liftN([Uo.prevSibling(e),Uo.nextSibling(e),t],function(t,n,r){var i,o=t.dom(),a=n.dom();return ja.isText(o)&&ja.isText(a)?(i=o.data.length,o.appendData(a.data),kf.remove(n),kf.remove(e),r.container()===a?$l(o,i):r):(kf.remove(e),r)}).orThunk(function(){return kf.remove(e),t})},Hp={deleteElement:function(e,t,n){var r=Ap(t,e.getBody(),n.dom()),i=$f.ancestor(n,pe.curry(Op,e),Mp(e.getBody())),o=Ip(n,r);e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):i.bind(Pp).fold(function(){Lp(e,t,o)},function(n){Lp(e,t,we.some(n))})}},Bp=function(e,t){return function(n){return e._selectionOverrides.hideFakeCaret(),Hp.deleteElement(e,t,Ci.fromDom(n)),!0}},Fp=function(e,t){return function(n){var r=t?$l.before(n):$l.after(n);return e.selection.setRng(r.toRange()),!0}},Wp=function(e){return function(t){return e.selection.setRng(t.toRange()),!0}},zp=function(e,t){return bp(e.getBody(),t,e.selection.getRng()).map(function(n){return n.fold(Bp(e,t),Fp(e,t),Wp(e))}).getOr(!1)},jp=function(e){Ve.each(Vu.descendants(e,".mce-offscreen-selection"),kf.remove)},qp=function(e,t){var n=e.selection.getNode();return!!ja.isContentEditableFalse(n)&&(jp(Ci.fromDom(e.getBody())),Hp.deleteElement(e,t,Ci.fromDom(e.selection.getNode())),Ch.paddEmptyBody(e),!0)},Vp=function(e,t){for(;t&&t!==e;){if(ja.isContentEditableTrue(t)||ja.isContentEditableFalse(t))return t;t=t.parentNode}return null},Up={backspaceDelete:function(e,t){return e.selection.isCollapsed()?zp(e,t):qp(e,t)},paddEmptyElement:function(e){var t,n=Vp(e.getBody(),e.selection.getNode());return ja.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng($l.before(t).toRange())),!0}},$p=ja.isText,Yp=function(e){return $p(e)&&e.data[0]===Os.ZWSP},Gp=function(e){return $p(e)&&e.data[e.data.length-1]===Os.ZWSP},Xp=function(e){return e.ownerDocument.createTextNode(Os.ZWSP)},Kp=function(e){if($p(e.previousSibling))return Gp(e.previousSibling)?e.previousSibling:(e.previousSibling.appendData(Os.ZWSP),e.previousSibling);if($p(e))return Yp(e)?e:(e.insertData(0,Os.ZWSP),e);var t=Xp(e);return e.parentNode.insertBefore(t,e),t},Zp=function(e){if($p(e.nextSibling))return Yp(e.nextSibling)?e.nextSibling:(e.nextSibling.insertData(0,Os.ZWSP),e.nextSibling);if($p(e))return Gp(e)?e:(e.appendData(Os.ZWSP),e);var t=Xp(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t},Qp=function(e,t){return e?Kp(t):Zp(t)},Jp=pe.curry(Qp,!0),em=pe.curry(Qp,!1),tm=function(e,t){return ja.isText(e.container())?Qp(t,e.container()):Qp(t,e.getNode())},nm=function(e,t){var n=t.get();return n&&e.container()===n&&Bs(n)},rm={renderCaret:function(e,t){return t.fold(function(t){ou.remove(e.get());var n=Jp(t);return e.set(n),we.some($l(n,n.length-1))},function(t){return gu.firstPositionIn(t).map(function(t){if(nm(t,e))return $l(e.get(),1);ou.remove(e.get());var n=tm(t,!0);return e.set(n),$l(n,1)})},function(t){return gu.lastPositionIn(t).map(function(t){if(nm(t,e))return $l(e.get(),e.get().length-1);ou.remove(e.get());var n=tm(t,!1);return e.set(n),$l(n,n.length-1)})},function(t){ou.remove(e.get());var n=em(t);return e.set(n),we.some($l(n,1))})}},im=function(e){return e&&/^(IMG)$/.test(e.nodeName)},om=function(e,t,n){var r,i,o,a=n.startContainer,s=n.startOffset;if((n.startContainer!==n.endContainer||!im(n.startContainer.childNodes[n.startOffset]))&&(3===a.nodeType&&s>=a.nodeValue.length&&(s=e.nodeIndex(a),a=a.parentNode),1===a.nodeType))for(s<(o=a.childNodes).length?r=new w(a=o[s],e.getParent(a,e.isBlock)):(r=new w(a=o[o.length-1],e.getParent(a,e.isBlock))).next(!0),i=r.current();i;i=r.next())if(3===i.nodeType&&!sm(i))return n.setStart(i,0),void t.setRng(n)},am=function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!sm(e))return e},sm=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},lm=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},um={isInlineBlock:im,moveStart:om,getNonWhiteSpaceSibling:am,isTextBlock:function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},isValid:function(e,t,n){return e.schema.isValidChild(t,n)},isWhiteSpaceNode:sm,replaceVars:function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e},isEq:function(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},normalizeStyleValue:lm,getStyle:function(e,t,n){return lm(e,e.getStyle(t,n),n)},getTextDecoration:function(e,t){var n;return e.getParent(t,function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n}),n},getParents:function(e,t,n){return e.getParents(t,n,e.getRoot())}},cm=hf.isBookmarkNode,dm=um.getParents,fm=um.isWhiteSpaceNode,hm=um.isTextBlock,pm=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},mm=function(e,t){var n=pm(e,t);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=pm(n.node.previousSibling);n.node&&n.offset>0&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&n.offset>1&&(e=n.node).splitText(n.offset-1)}return e},gm=function(e){return"BR"===e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},vm=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},ym=function(e,t,n,r){var i,o,a=n.nodeValue;return void 0===r&&(r=e?a.length:0),e?-1===(i=(i=a.lastIndexOf(" ",r))>(o=a.lastIndexOf("\xa0",r))?i:o)||t||i++:(i=a.indexOf(" ",r),o=a.indexOf("\xa0",r),i=-1!==i&&(-1===o||i<o)?i:o),i},bm=function(e,t,n,r,i,o){var a,s,l,u;if(3===n.nodeType){if(-1!==(l=ym(i,o,n,r)))return{container:n,offset:l};u=n}for(a=new w(n,e.getParent(n,e.isBlock)||t);s=a[i?"prev":"next"]();)if(3===s.nodeType){if(u=s,-1!==(l=ym(i,o,s)))return{container:s,offset:l}}else if(e.isBlock(s))break;if(u)return r=i?0:u.length,{container:u,offset:r}},wm=function(e,t,n,r,i){var o,a,s,l;for(3===r.nodeType&&0===r.nodeValue.length&&r[i]&&(r=r[i]),o=dm(e,r),a=0;a<o.length;a++)for(s=0;s<t.length;s++)if(!("collapsed"in(l=t[s])&&l.collapsed!==n.collapsed)&&e.is(o[a],l.selector))return o[a];return r},Cm=function(e,t,n,r){var i,o=e.dom,a=o.getRoot();if(t[0].wrapper||(i=o.getParent(n,t[0].block,a)),!i){var s=o.getParent(n,"LI,TD,TH");i=o.getParent(3===n.nodeType?n.parentNode:n,function(t){return t!==a&&hm(e,t)},s)}if(i&&t[0].wrapper&&(i=dm(o,i,"ul,ol").reverse()[0]||i),!i)for(i=n;i[r]&&!o.isBlock(i[r])&&(i=i[r],!um.isEq(i,"br")););return i||n},Sm=function(e,t,n,r,i,o,a){var s,l,u,c,d;if(s=l=a?n:i,c=a?"previousSibling":"nextSibling",d=e.getRoot(),3===s.nodeType&&!fm(s)&&(a?r>0:o<s.nodeValue.length))return s;for(;;){if(!t[0].block_expand&&e.isBlock(l))return l;for(u=l[c];u;u=u[c])if(!cm(u)&&!fm(u)&&!gm(u))return l;if(l===d||l.parentNode===d){s=l;break}l=l.parentNode}return s},xm={expandRng:function(e,t,n,r){var i,o=t.startContainer,a=t.startOffset,s=t.endContainer,l=t.endOffset,u=e.dom;return 1===o.nodeType&&o.hasChildNodes()&&3===(o=bl(o,a)).nodeType&&(a=0),1===s.nodeType&&s.hasChildNodes()&&3===(s=bl(s,t.collapsed?l:l-1)).nodeType&&(l=s.nodeValue.length),o=vm(u,o),s=vm(u,s),(cm(o.parentNode)||cm(o))&&3===(o=(o=cm(o)?o:o.parentNode).nextSibling||o).nodeType&&(a=0),(cm(s.parentNode)||cm(s))&&3===(s=(s=cm(s)?s:s.parentNode).previousSibling||s).nodeType&&(l=s.length),n[0].inline&&(t.collapsed&&((i=bm(u,e.getBody(),o,a,!0,r))&&(o=i.container,a=i.offset),(i=bm(u,e.getBody(),s,l,!1,r))&&(s=i.container,l=i.offset)),s=r?s:mm(s,l)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===o.nodeType&&0!==a||(o=Sm(u,n,o,a,s,l,!0)),n[0].inline&&3===s.nodeType&&l!==s.nodeValue.length||(s=Sm(u,n,o,a,s,l,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(o=wm(u,n,t,o,"previousSibling"),s=wm(u,n,t,s,"nextSibling")),(n[0].block||n[0].selector)&&(o=Cm(e,n,o,"previousSibling"),s=Cm(e,n,s,"nextSibling"),n[0].block&&(u.isBlock(o)||(o=Sm(u,n,o,a,s,l,!0)),u.isBlock(s)||(s=Sm(u,n,o,a,s,l,!1)))),1===o.nodeType&&(a=u.nodeIndex(o),o=o.parentNode),1===s.nodeType&&(l=u.nodeIndex(s)+1,s=s.parentNode),{startContainer:o,startOffset:a,endContainer:s,endOffset:l}}},km=um.isEq,Tm=function(e,t,n){var r=e.formatter.get(n);if(r)for(var i=0;i<r.length;i++)if(!1===r[i].inherit&&e.dom.is(t,r[i].selector))return!0;return!1},Em=function(e,t,n,r){var i=e.dom.getRoot();return t!==i&&(t=e.dom.getParent(t,function(t){return!!Tm(e,t,n)||(t.parentNode===i||!!_m(e,t,n,r,!0))}),_m(e,t,n,r))},Dm=function(e,t,n){return!!km(t,n.inline)||(!!km(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0))},Nm=function(e,t,n,r,i,o){var a,s,l,u=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(u)if("undefined"==typeof u.length){for(a in u)if(u.hasOwnProperty(a)){if(s="attributes"===r?e.getAttrib(t,a):um.getStyle(e,t,a),i&&!s&&!n.exact)return;if((!i||n.exact)&&!km(s,um.normalizeStyleValue(e,um.replaceVars(u[a],o),a)))return}}else for(l=0;l<u.length;l++)if("attributes"===r?e.getAttrib(t,u[l]):um.getStyle(e,t,u[l]))return n;return n},_m=function(e,t,n,r,i){var o,a,s,l,u=e.formatter.get(n),c=e.dom;if(u&&t)for(a=0;a<u.length;a++)if(o=u[a],Dm(e.dom,t,o)&&Nm(c,t,o,"attributes",i,r)&&Nm(c,t,o,"styles",i,r)){if(l=o.classes)for(s=0;s<l.length;s++)if(!e.dom.hasClass(t,l[s]))return;return o}},Rm={matchNode:_m,matchName:Dm,match:function(e,t,n,r){var i;return r?Em(e,r,t,n):(r=e.selection.getNode(),!!Em(e,r,t,n)||!((i=e.selection.getStart())===r||!Em(e,i,t,n)))},matchAll:function(e,t,n){var r,i=[],o={};return r=e.selection.getStart(),e.dom.getParent(r,function(r){var a,s;for(a=0;a<t.length;a++)s=t[a],!o[s]&&_m(e,r,s,n)&&(o[s]=!0,i.push(s))},e.dom.getRoot()),i},canApply:function(e,t){var n,r,i,o,a,s=e.formatter.get(t),l=e.dom;if(s)for(n=e.selection.getStart(),r=um.getParents(l,n),o=s.length-1;o>=0;o--){if(!(a=s[o].selector)||s[o].defaultBlock)return!0;for(i=r.length-1;i>=0;i--)if(l.is(r[i],a))return!0}return!1},matchesUnInheritedFormatSelector:Tm},Am=function(e,t){return e.splitText(t)},Lm={split:function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;return t===r&&ja.isText(t)?n>0&&n<t.nodeValue.length&&(t=(r=Am(t,n)).previousSibling,i>n?(t=r=Am(r,i-=n).previousSibling,i=r.nodeValue.length,n=0):i=0):(ja.isText(t)&&n>0&&n<t.nodeValue.length&&(t=Am(t,n),n=0),ja.isText(r)&&i>0&&i<r.nodeValue.length&&(i=(r=Am(r,i).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:i}}},Mm=Os.ZWSP,Om="_mce_caret",Pm=function(e,t){return e.importNode(t,!0)},Im=function(e){return 1===e.nodeType&&e.id===Om},Hm=function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==Mm||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t},Bm=function(e){return Hm(e).length>0},Fm=function(e){var t;if(e)for(e=(t=new w(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},Wm=function(e){var t=Ci.fromTag("span");return Yi.setAll(t,{id:Om,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&wf.append(t,Ci.fromText(Mm)),t},zm=function(e,t){for(;t&&t!==e;){if(t.id===Om)return t;t=t.parentNode}return null},jm=function(e){var t=Fm(e);return t&&t.nodeValue.charAt(0)===Mm&&t.deleteData(0,1),t},qm=function(e,t,n,r){var i,o,a;i=t.getRng(!0),o=e.getParent(n,e.isBlock),Bm(n)?(!1!==r&&(i.setStartBefore(n),i.setEndBefore(n)),e.remove(n)):(a=jm(n),i.startContainer===a&&i.startOffset>0&&i.setStart(a,i.startOffset-1),i.endContainer===a&&i.endOffset>0&&i.setEnd(a,i.endOffset-1),e.remove(n,!0)),o&&e.isEmpty(o)&&_f.fillWithPaddingBr(Ci.fromDom(o)),t.setRng(i)},Vm=function(e,t,n,r,i){if(r)qm(t,n,r,i);else if(!(r=zm(e,n.getStart())))for(;r=t.get(Om);)qm(t,n,r,!1)},Um=function(e,t,n){var r=e.dom,i=r.getParent(n,kl.curry(um.isTextBlock,e));i&&r.isEmpty(i)?n.parentNode.replaceChild(t,n):(_f.removeTrailingBr(Ci.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))},$m=function(e,t){return e.appendChild(t),t},Ym=function(e,t){var n=Ve.foldr(e,function(e,t){return $m(e,t.cloneNode(!1))},t);return $m(n,n.ownerDocument.createTextNode(Mm))},Gm=function(e,t,n,r){Vm(e,t,n,null,!1),8===r&&n.isCollapsed()&&n.getStart().innerHTML===Mm&&Vm(e,t,n,zm(e,n.getStart())),37!==r&&39!==r||Vm(e,t,n,zm(e,n.getStart()))},Xm={setup:function(e){var t=e.dom,n=e.selection,r=e.getBody();e.on("mouseup keydown",function(e){Gm(r,t,n,e.keyCode)})},applyCaretFormat:function(e,t,n){var r,i,o,a,s,l,u=e.selection;a=(r=u.getRng(!0)).startOffset,l=r.startContainer.nodeValue,(i=zm(e.getBody(),u.getStart()))&&(o=Fm(i));var c=/[^\s\u00a0\u00ad\u200b\ufeff]/;l&&a>0&&a<l.length&&c.test(l.charAt(a))&&c.test(l.charAt(a-1))?(s=u.getBookmark(),r.collapse(!0),r=xm.expandRng(e,r,e.formatter.get(t)),r=Lm.split(r),e.formatter.apply(t,n,r),u.moveToBookmark(s)):(i&&o.nodeValue===Mm?e.formatter.apply(t,n,i):(o=(i=Pm(e.getDoc(),Wm(!0).dom())).firstChild,r.insertNode(i),a=1,e.formatter.apply(t,n,i)),u.setCursorLocation(o,a))},removeCaretFormat:function(e,t,n,r){var i,o,a,s,l,u,c,d=e.dom,f=e.selection,h=[],p=f.getRng();for(i=p.startContainer,o=p.startOffset,l=i,3===i.nodeType&&(o!==i.nodeValue.length&&(s=!0),l=l.parentNode);l;){if(Rm.matchNode(e,l,t,n,r)){u=l;break}l.nextSibling&&(s=!0),h.push(l),l=l.parentNode}if(u)if(s){a=f.getBookmark(),p.collapse(!0);var m=xm.expandRng(e,p,e.formatter.get(t),!0);m=Lm.split(m),e.formatter.remove(t,n,m),f.moveToBookmark(a)}else{c=zm(e.getBody(),u);var g=Wm(!1).dom(),v=Ym(h,g);Um(e,g,c||u),qm(d,f,c,!1),f.setCursorLocation(v,1),d.isEmpty(u)&&d.remove(u)}},isCaretNode:Im,getParentCaretContainer:zm,replaceWithCaretFormat:function(e,t){var n=Wm(!1),r=Ym(t,n.dom());return wf.before(Ci.fromDom(e),n),kf.remove(Ci.fromDom(e)),$l(r,0)},isFormatElement:function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(Ai.name(t))&&!Im(t.dom())&&!ja.isBogus(t.dom())}},Km={evaluateUntil:function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return we.none()}},Zm=up.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Qm=function(e,t){var n=Mc(t,e);return n||e},Jm=function(e,t,n){var r=yh.normalizeForwards(n),i=Qm(t,r.container());return yh.findRootInline(e,i,r).fold(function(){return gu.nextPosition(i,r).bind(pe.curry(yh.findRootInline,e,i)).map(function(e){return Zm.before(e)})},we.none)},eg=function(e,t){return null===Xm.getParentCaretContainer(e,t)},tg=function(e,t,n){return yh.findRootInline(e,t,n).filter(pe.curry(eg,t))},ng=function(e,t,n){var r=yh.normalizeBackwards(n);return tg(e,t,r).bind(function(e){return gu.prevPosition(e,r).isNone()?we.some(Zm.start(e)):we.none()})},rg=function(e,t,n){var r=yh.normalizeForwards(n);return tg(e,t,r).bind(function(e){return gu.nextPosition(e,r).isNone()?we.some(Zm.end(e)):we.none()})},ig=function(e,t,n){var r=yh.normalizeBackwards(n),i=Qm(t,r.container());return yh.findRootInline(e,i,r).fold(function(){return gu.prevPosition(i,r).bind(pe.curry(yh.findRootInline,e,i)).map(function(e){return Zm.after(e)})},we.none)},og=function(e){return!1===yh.isRtl(sg(e))},ag=function(e,t,n){return Km.evaluateUntil([Jm,ng,rg,ig],[e,t,n]).filter(og)},sg=function(e){return e.fold(pe.identity,pe.identity,pe.identity,pe.identity)},lg=function(e){return e.fold(pe.constant("before"),pe.constant("start"),pe.constant("end"),pe.constant("after"))},ug=function(e){return e.fold(Zm.before,Zm.before,Zm.after,Zm.after)},cg=function(e){return e.fold(Zm.start,Zm.start,Zm.end,Zm.end)},dg=function(e,t){return lg(e)===lg(t)&&sg(e)===sg(t)},fg=function(e,t,n,r,i,o){return ku.liftN([yh.findRootInline(t,n,r),yh.findRootInline(t,n,i)],function(t,r){return t!==r&&yh.hasSameParentBlock(n,t,r)?Zm.after(e?t:r):o}).getOr(o)},hg=function(e,t){return e.fold(pe.constant(!0),function(e){return!dg(e,t)})},pg=function(e,t,n,r,i){var o=yh.normalizePosition(e,i);return gu.fromPosition(e,n,o).map(pe.curry(yh.normalizePosition,e)).fold(function(){return r.map(ug)},function(i){return ag(t,n,i).map(pe.curry(fg,e,t,n,o,i)).filter(pe.curry(hg,r))}).filter(og)},mg=function(e,t){return e?t.fold(pe.compose(we.some,Zm.start),we.none,pe.compose(we.some,Zm.after),we.none):t.fold(we.none,pe.compose(we.some,Zm.before),we.none,pe.compose(we.some,Zm.end))},gg=function(e,t,n,r){var i=yh.normalizePosition(e,r),o=ag(t,n,i);return ag(t,n,i).bind(pe.curry(mg,e)).orThunk(function(){return pg(e,t,n,o,r)})},vg={readLocation:ag,findLocation:gg,prevLocation:pe.curry(gg,!1),nextLocation:pe.curry(gg,!0),getElement:sg,outside:ug,inside:cg},yg=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return yg(n())}}},bg=function(e){return Oi.isFunction(e.selection.getSel().modify)},wg=function(e,t,n){var r=e?1:-1;return t.setRng($l(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Cg={hasSelectionModifyApi:bg,moveByWord:function(e,t){var n=t.selection.getRng(),r=e?$l.fromRangeEnd(n):$l.fromRangeStart(n);return!!bg(t)&&(e&&js(r)?wg(!0,t.selection,r):!(e||!qs(r))&&wg(!1,t.selection,r))}},Sg=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},xg=function(e){return!1!==e.settings.inline_boundaries},kg=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Tg=function(e,t,n){return rm.renderCaret(t,n).map(function(t){return Sg(e,t),n})},Eg=function(e,t,n){var r=e.getBody(),i=$l.fromRangeStart(e.selection.getRng()),o=pe.curry(yh.isInlineTarget,e);return vg.findLocation(n,o,r,i).bind(function(n){return Tg(e,t,n)})},Dg=function(e,t,n){var r=Ve.filter(t.select('*[data-mce-selected="inline-boundary"]'),e),i=Ve.filter(n,e);Ve.each(Ve.difference(r,i),pe.curry(kg,!1)),Ve.each(Ve.difference(i,r),pe.curry(kg,!0))},Ng=function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=$l.fromRangeStart(e.selection.getRng());$l.isTextPosition(n)&&!1===yh.isAtZwsp(n)&&(Sg(e,ou.removeAndReposition(t.get(),n)),t.set(null))}},_g=function(e,t,n,r){if(t.selection.isCollapsed()){var i=Ve.filter(r,e);Ve.each(i,function(){var r=$l.fromRangeStart(t.selection.getRng());vg.readLocation(e,t.getBody(),r).bind(function(e){return Tg(t,n,e)})})}},Rg=function(e,t){return function(){return!!xg(t)&&Cg.moveByWord(e,t)}},Ag=function(e){var t=new yg(null),n=pe.curry(yh.isInlineTarget,e);return e.on("NodeChange",function(r){xg(e)&&(Dg(n,e.dom,r.parents),Ng(e,t),_g(n,e,t,r.parents))}),t},Lg={move:function(e,t,n){return function(){return!!xg(e)&&Eg(e,t,n).isSome()}},moveNextWord:pe.curry(Rg,!0),movePrevWord:pe.curry(Rg,!1),setupSelectedState:Ag,setCaretPosition:Sg},Mg=function(e){return!1!==e.settings.inline_boundaries},Og=function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},Pg=function(e){return ku.liftN([gu.firstPositionIn(e),gu.lastPositionIn(e)],function(t,n){var r=yh.normalizePosition(!0,t),i=yh.normalizePosition(!1,n);return gu.nextPosition(e,r).map(function(e){return e.isEqual(i)}).getOr(!0)}).getOr(!0)},Ig=function(e,t){return function(n){return rm.renderCaret(t,n).map(function(t){return Lg.setCaretPosition(e,t),!0}).getOr(!1)}},Hg=function(e,t,n,r){var i=e.getBody(),o=pe.curry(yh.isInlineTarget,e);e.undoManager.ignore(function(){e.selection.setRng(Og(n,r)),e.execCommand("Delete"),vg.readLocation(o,i,$l.fromRangeStart(e.selection.getRng())).map(vg.inside).map(Ig(e,t))}),e.nodeChanged()},Bg=function(e,t){var n=Mc(t,e);return n||e},Fg=function(e,t,n,r){var i=Bg(e.getBody(),r.container()),o=pe.curry(yh.isInlineTarget,e),a=vg.readLocation(o,i,r);return a.bind(function(e){return n?e.fold(pe.constant(we.some(vg.inside(e))),we.none,pe.constant(we.some(vg.outside(e))),we.none):e.fold(we.none,pe.constant(we.some(vg.outside(e))),we.none,pe.constant(we.some(vg.inside(e))))}).map(Ig(e,t)).getOrThunk(function(){var s=gu.navigate(n,i,r),l=s.bind(function(e){return vg.readLocation(o,i,e)});return a.isSome()&&l.isSome()?yh.findRootInline(o,i,r).map(function(t){return!!Pg(t)&&(Hp.deleteElement(e,n,Ci.fromDom(t)),!0)}).getOr(!1):l.bind(function(){return s.map(function(i){return n?Hg(e,t,r,i):Hg(e,t,i,r),!0})}).getOr(!1)})},Wg={backspaceDelete:function(e,t,n){if(e.selection.isCollapsed()&&Mg(e)){var r=$l.fromRangeStart(e.selection.getRng());return Fg(e,t,n,r)}return!1}},zg=uo.immutable("start","end"),jg=uo.immutable("rng","table","cells"),qg=up.generate([{removeTable:["element"]},{emptyCells:["cells"]}]),Vg=function(e,t){return xh.closest(Ci.fromDom(e),"td,th",t)},Ug=function(e,t){return xh.ancestor(e,"table",t)},$g=function(e){return!1===To.eq(e.start(),e.end())},Yg=function(e,t){return Ug(e.start(),t).bind(function(n){return Ug(e.end(),t).bind(function(e){return To.eq(n,e)?we.some(n):we.none()})})},Gg=function(e,t){return ku.liftN([Vg(e.startContainer,t),Vg(e.endContainer,t)],zg).filter($g)},Xg=function(e,t){return Yg(e,t).bind(function(t){var n=Vu.descendants(t,"td,th");return jg(e,t,n)})},Kg=function(e,t){var n=pe.curry(To.eq,e);return Gg(t,n).map(function(e){return Xg(e,n)})},Zg=function(e,t){return Ve.findIndex(e,function(e){return To.eq(e,t)})},Qg=function(e){return ku.liftN([Zg(e.cells(),e.rng().start()),Zg(e.cells(),e.rng().end())],function(t,n){return e.cells().slice(t,n+1)})},Jg=function(e){return Qg(e).bind(function(t){var n=e.cells();return t.length===n.length?qg.removeTable(e.table()):qg.emptyCells(t)})},ev={getActionFromRange:function(e,t){return Kg(e,t).map(Jg)},getActionFromCells:function(e){return qg.emptyCells(e)}},tv=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},nv={getRanges:tv,getSelectedNodes:function(e){return Ve.bind(e,function(e){var t=yl(e);return t?[Ci.fromDom(t)]:[]})},hasMultipleRanges:function(e){return tv(e).length>1}},rv=function(e){return Ve.filter(nv.getSelectedNodes(e),ka)},iv=function(e){return Vu.descendants(e,"td[data-mce-selected],th[data-mce-selected]")},ov=function(e,t){var n=iv(t),r=rv(e);return n.length>0?n:r},av={getCellsFromRanges:rv,getCellsFromElement:iv,getCellsFromElementOrRanges:ov,getCellsFromEditor:function(e){return ov(nv.getRanges(e.selection.getSel()),Ci.fromDom(e.getBody()))}},sv=function(e,t){return Ve.each(t,_f.fillWithPaddingBr),e.selection.setCursorLocation(t[0].dom(),0),!0},lv=function(e,t){return Hp.deleteElement(e,!1,t),!0},uv=function(e,t,n){return ev.getActionFromRange(t,n).map(function(t){return t.fold(pe.curry(lv,e),pe.curry(sv,e))})},cv=function(e,t){return gv(e,t)},dv=function(e,t,n,r){return pv(t,r).fold(function(){return uv(e,t,n)},function(t){return cv(e,t)}).getOr(!1)},fv=function(e,t){var n=Ci.fromDom(e.getBody()),r=e.selection.getRng(),i=av.getCellsFromEditor(e);return 0!==i.length?sv(e,i):dv(e,n,r,t)},hv=function(e,t){return Ve.find($h.parentsAndSelf(t,e),ka)},pv=function(e,t){return Ve.find($h.parentsAndSelf(t,e),function(e){return"caption"===Ai.name(e)})},mv=function(e,t,n,r,i){return gu.navigate(n,e.getBody(),i).bind(function(e){return hv(t,Ci.fromDom(e.getNode())).map(function(e){return!1===To.eq(e,r)})})},gv=function(e,t){return _f.fillWithPaddingBr(t),e.selection.setCursorLocation(t.dom(),0),we.some(!0)},vv=function(e,t,n,r){return gu.firstPositionIn(e.dom()).bind(function(i){return gu.lastPositionIn(e.dom()).map(function(e){return t?n.isEqual(i)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(i)})}).getOr(!0)},yv=function(e,t){return gv(e,t)},bv=function(e,t,n){return pv(e,Ci.fromDom(n.getNode())).map(function(e){return!1===To.eq(e,t)})},wv=function(e,t,n,r,i){return gu.navigate(n,e.getBody(),i).bind(function(o){return vv(r,n,i,o)?yv(e,r):bv(t,r,o)}).or(we.some(!0))},Cv=function(e,t,n,r){var i=$l.fromRangeStart(e.selection.getRng());return hv(n,r).bind(function(r){return Mh.isEmpty(r)?gv(e,r):mv(e,n,t,r,i)})},Sv=function(e,t,n,r){var i=$l.fromRangeStart(e.selection.getRng());return Mh.isEmpty(r)?gv(e,r):wv(e,n,t,r,i)},xv=function(e,t,n){var r=Ci.fromDom(e.getBody());return pv(r,n).fold(function(){return Cv(e,t,r,n)},function(n){return Sv(e,t,r,n)}).getOr(!1)},kv={backspaceDelete:function(e,t){var n=Ci.fromDom(e.selection.getStart(!0));return e.selection.isCollapsed()?xv(e,t,n):fv(e,n)}},Tv=function(e,t){e.getDoc().execCommand(t,!1,null)},Ev={deleteCommand:function(e){Up.backspaceDelete(e,!1)||Wg.backspaceDelete(e,!1)||tp.backspaceDelete(e,!1)||kv.backspaceDelete(e)||lp.backspaceDelete(e,!1)||(Tv(e,"Delete"),Ch.paddEmptyBody(e))},forwardDeleteCommand:function(e){Up.backspaceDelete(e,!0)||Wg.backspaceDelete(e,!0)||tp.backspaceDelete(e,!0)||kv.backspaceDelete(e)||lp.backspaceDelete(e,!0)||Tv(e,"ForwardDelete")}},Dv={isEq:function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}},Nv=uo.immutable("container","offset"),_v=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},Rv=function(e,t,n){return null!==_v(e,t,n)},Av=function(e,t,n){return Rv(e,t,function(e){return e.nodeName===n})},Lv=function(e){return e&&"TABLE"===e.nodeName},Mv=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},Ov=function(e,t){return Fs(e)&&!1===Rv(e,t,Xm.isCaretNode)},Pv=function(e,t,n){for(var r=new w(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(ja.isBr(t))return!0},Iv=function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t},Hv=function(e,t){for(;t&&t!==e;){if(ja.isContentEditableFalse(t))return!0;t=t.parentNode}return!1},Bv=function(e,t,n,r,i){var o,a,s,l,u=e.getRoot(),c=e.schema.getNonEmptyElements();if(s=e.getParent(i.parentNode,e.isBlock)||u,r&&ja.isBr(i)&&t&&e.isEmpty(s))return we.some(Nv(i.parentNode,e.nodeIndex(i)));for(o=new w(i,s);l=o[r?"prev":"next"]();){if("false"===e.getContentEditableParent(l)||Ov(l,u))return we.none();if(ja.isText(l)&&l.nodeValue.length>0)return!1===Av(l,u,"A")?we.some(Nv(l,r?l.nodeValue.length:0)):we.none();if(e.isBlock(l)||c[l.nodeName.toLowerCase()])return we.none();a=l}return n&&a?we.some(Nv(a,0)):we.none()},Fv=function(e,t,n,r){var i,o,a,s,l,u,c,d=e.getRoot(),f=!1;if(i=r[(n?"start":"end")+"Container"],o=r[(n?"start":"end")+"Offset"],c=ja.isElement(i)&&o===i.childNodes.length,l=e.schema.getNonEmptyElements(),u=n,Fs(i))return we.none();if(ja.isElement(i)&&o>i.childNodes.length-1&&(u=!1),ja.isDocument(i)&&(i=d,o=0),i===d){if(u&&(s=i.childNodes[o>0?o-1:0])){if(Fs(s))return we.none();if(l[s.nodeName]||Lv(s))return we.none()}if(i.hasChildNodes()){if(o=Math.min(!u&&o>0?o-1:o,i.childNodes.length-1),i=i.childNodes[o],o=ja.isText(i)&&c?i.data.length:0,!t&&i===d.lastChild&&Lv(i))return we.none();if(Hv(d,i)||Fs(i))return we.none();if(i.hasChildNodes()&&!1===Lv(i)){s=i,a=new w(i,d);do{if(ja.isContentEditableFalse(s)||Fs(s)){f=!1;break}if(ja.isText(s)&&s.nodeValue.length>0){o=u?0:s.nodeValue.length,i=s,f=!0;break}if(l[s.nodeName.toLowerCase()]&&!Mv(s)){o=e.nodeIndex(s),i=s.parentNode,"IMG"!==s.nodeName&&"PRE"!==s.nodeName||u||o++,f=!0;break}}while(s=u?a.next():a.prev())}}}return t&&(ja.isText(i)&&0===o&&Bv(e,c,t,!0,i).each(function(e){i=e.container(),o=e.offset(),f=!0}),ja.isElement(i)&&((s=i.childNodes[o])||(s=i.childNodes[o-1]),!s||!ja.isBr(s)||Iv(s,"A")||Pv(e,s,!1)||Pv(e,s,!0)||Bv(e,c,t,!0,s).each(function(e){i=e.container(),o=e.offset(),f=!0}))),u&&!t&&ja.isText(i)&&o===i.nodeValue.length&&Bv(e,c,t,!1,i).each(function(e){i=e.container(),o=e.offset(),f=!0}),f?we.some(Nv(i,o)):we.none()},Wv={normalize:function(e,t){var n=t.collapsed,r=t.cloneRange();return Fv(e,n,!0,r).each(function(e){r.setStart(e.container(),e.offset())}),n||Fv(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),Dv.isEq(t,r)?we.none():we.some(r)}},zv=function(e,t,n){for(var r,i=new w(t,n),o=e.getNonEmptyElements();r=i.next();)if(o[r.nodeName.toLowerCase()]||r.length>0)return!0},jv=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},qv=function(e,t,n,r){var i=e.createRng();r?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),t.setRng(i)},Vv=function(e,t){var n,r,i=e.selection,o=e.dom,a=i.getRng();Wv.normalize(o,a).each(function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)});var s=a.startOffset,l=a.startContainer;if(1===l.nodeType&&l.hasChildNodes()){var u=s>l.childNodes.length-1;l=l.childNodes[Math.min(s,l.childNodes.length-1)]||l,s=u&&3===l.nodeType?l.nodeValue.length:0}var c=o.getParent(l,o.isBlock),d=c?o.getParent(c.parentNode,o.isBlock):null,f=d?d.nodeName.toUpperCase():"",h=t&&t.ctrlKey;"LI"!==f||h||(c=d),l&&3===l.nodeType&&s>=l.nodeValue.length&&(zv(e.schema,l,c)||(n=o.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0)),n=o.create("br"),a.insertNode(n),jv(o,i,n),qv(o,i,n,r),e.undoManager.add()},Uv=function(e,t){var n=Ci.fromTag("br");wf.before(Ci.fromDom(t),n),e.undoManager.add()},$v=function(e,t){Gv(e.getBody(),t)||wf.after(Ci.fromDom(t),Ci.fromTag("br"));var n=Ci.fromTag("br");wf.after(Ci.fromDom(t),n),jv(e.dom,e.selection,n.dom()),qv(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},Yv=function(e){return ja.isBr(e.getNode())},Gv=function(e,t){return!!Yv($l.after(t))||gu.nextPosition(e,$l.after(t)).map(function(e){return ja.isBr(e.getNode())}).getOr(!1)},Xv=function(e){return e&&"A"===e.nodeName&&"href"in e},Kv=function(e){return e.fold(pe.constant(!1),Xv,Xv,pe.constant(!1))},Zv=function(e){var t=pe.curry(yh.isInlineTarget,e),n=$l.fromRangeStart(e.selection.getRng());return vg.readLocation(t,e.getBody(),n).filter(Kv)},Qv=function(e,t){t.fold(pe.noop,pe.curry(Uv,e),pe.curry($v,e),pe.noop)},Jv={insert:function(e,t){var n=Zv(e);n.isSome()?n.each(pe.curry(Qv,e)):Vv(e,t)}},ey=up.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ty=function(e,t,n,r){return e.fold(t,n,r)},ny=function(e){return e.fold(pe.identity,pe.identity,pe.identity)},ry={before:ey.before,on:ey.on,after:ey.after,cata:ty,getStart:ny},iy=up.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),oy=uo.immutable("start","soffset","finish","foffset"),ay=function(e){return iy.exact(e.start(),e.soffset(),e.finish(),e.foffset())},sy=function(e){return e.match({domRange:function(e){return Ci.fromDom(e.startContainer)},relative:function(e){return ry.getStart(e)},exact:function(e){return e}})},ly=function(e){var t=sy(e);return Uo.defaultView(t)},uy={domRange:iy.domRange,relative:iy.relative,exact:iy.exact,exactFromRange:ay,range:oy,getWin:ly},cy=gi.detect().browser,dy=function(e,t){var n=Ai.isText(t)?Ef.get(t).length:Uo.children(t).length+1;return e>n?n:e<0?0:e},fy=function(e){return uy.range(e.start(),dy(e.soffset(),e.start()),e.finish(),dy(e.foffset(),e.finish()))},hy=function(e,t){return To.contains(e,t)||To.eq(e,t)},py=function(e){return function(t){return hy(e,t.start())&&hy(e,t.finish())}},my=function(e){return!0===e.inline||cy.isIE()},gy=function(e){return uy.range(Ci.fromDom(e.startContainer),e.startOffset,Ci.fromDom(e.endContainer),e.endOffset)},vy=function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?we.from(t.getRangeAt(0)):we.none()).map(gy)},yy=function(e){var t=Uo.defaultView(e);return vy(t.dom()).filter(py(e))},by=function(e,t){return we.from(t).filter(py(e)).map(fy)},wy=function(e){var t=document.createRange();return t.setStart(e.start().dom(),e.soffset()),t.setEnd(e.finish().dom(),e.foffset()),we.some(t)},Cy=function(e){return(e.bookmark?e.bookmark:we.none()).bind(pe.curry(by,Ci.fromDom(e.getBody()))).bind(wy)},Sy={store:function(e){var t=my(e)?yy(Ci.fromDom(e.getBody())):we.none();e.bookmark=t.isSome()?t:e.bookmark},storeNative:function(e,t){var n=Ci.fromDom(e.getBody()),r=(my(e)?we.from(t):we.none()).map(gy).filter(py(n));e.bookmark=r.isSome()?r:e.bookmark},readRange:vy,restore:function(e){Cy(e).each(function(t){e.selection.setRng(t)})},getRng:Cy,getBookmark:yy,validate:by},xy=function(e,t,n,r,i,o){if("false"!==e.getContentEditable(o)&&"LI"!==o.nodeName){var a=n?"margin":"padding";if(a="TABLE"===o.nodeName?"margin":a,a+="rtl"===e.getStyle(o,"direction",!0)?"Right":"Left","outdent"===t){var s=Math.max(0,parseInt(o.style[a]||0,10)-r);e.setStyle(o,a,s?s+i:"")}else{s=parseInt(o.style[a]||0,10)+r+i;e.setStyle(o,a,s)}}},ky=function(e,t){var n=e.settings,r=e.dom,i=e.selection,o=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],s=parseInt(n.indentation,10),l=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||(n.forced_root_block||r.getParent(i.getNode(),r.isBlock)||o.apply("div"),Ve.each(i.getSelectedBlocks(),function(e){return xy(r,t,l,s,a,e)}))},Ty=Vn.each,Ey=Vn.extend,Dy=Vn.map,Ny=Vn.inArray,_y=Vn.explode,Ry=!0,Ay=!1,Ly=Vn.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),My=function(e){var t,n,r=this,i={},o=function(){return!1},a=function(){return!0};t=(e=e||{}).scope||r,n=e.toggleEvent||o;var s=function(n,r){var s,l,c,d;if(n=n.toLowerCase(),r=r||{},r.type=n,r.target||(r.target=t),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=a},r.stopPropagation=function(){r.isPropagationStopped=a},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=a},r.isDefaultPrevented=o,r.isPropagationStopped=o,r.isImmediatePropagationStopped=o),e.beforeFire&&e.beforeFire(r),s=i[n])for(l=0,c=s.length;l<c;l++){if((d=s[l]).once&&u(n,d.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===d.func.call(t,r))return r.preventDefault(),r}return r},l=function(e,t,a,s){var l,u,c;if(!1===t&&(t=o),t)for(t={func:t},s&&Vn.extend(t,s),c=(u=e.toLowerCase().split(" ")).length;c--;)e=u[c],(l=i[e])||(l=i[e]=[],n(e,!0)),a?l.unshift(t):l.push(t);return r},u=function(e,t){var o,a,s,l,u;if(e)for(o=(l=e.toLowerCase().split(" ")).length;o--;){if(e=l[o],a=i[e],!e){for(s in i)n(s,!1),delete i[s];return r}if(a){if(t)for(u=a.length;u--;)a[u].func===t&&(a=a.slice(0,u).concat(a.slice(u+1)),i[e]=a);else a.length=0;a.length||(n(e,!1),delete i[e])}}else{for(e in i)n(e,!1);i={}}return r},c=function(e,t,n){return l(e,t,n,{once:!0})},d=function(e){return e=e.toLowerCase(),!(!i[e]||0===i[e].length)};r.fire=s,r.on=l,r.off=u,r.once=c,r.has=d};My.isNative=function(e){return!!Ly[e.toLowerCase()]};var Oy,Py,Iy=function(e){return e._eventDispatcher||(e._eventDispatcher=new My({scope:e,toggleEvent:function(t,n){My.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},Hy={fire:function(e,t,n){var r=this;if(r.removed&&"remove"!==e)return t;if(t=Iy(r).fire(e,t,n),!1!==n&&r.parent)for(var i=r.parent();i&&!t.isPropagationStopped();)i.fire(e,t,!1),i=i.parent();return t},on:function(e,t,n){return Iy(this).on(e,t,n)},off:function(e,t){return Iy(this).off(e,t)},once:function(e,t){return Iy(this).once(e,t)},hasEventListeners:function(e){return Iy(this).has(e)}},By=Ts.DOM,Fy=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=By.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},Wy=function(e,t){var n,r,i=function(e){return!e.hidden&&!e.readonly};if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=Fy(e,t),e.settings.event_root){if(Oy||(Oy={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&Oy){for(t in Oy)e.dom.unbind(Fy(e,t));Oy=null}})),Oy[t])return;r=function(n){for(var r=n.target,o=e.editorManager.get(),a=o.length;a--;){var s=o[a].getBody();(s===r||By.isChildOf(r,s))&&i(o[a])&&o[a].fire(t,n)}},Oy[t]=r,By.bind(n,t,r)}else r=function(n){i(e)&&e.fire(t,n)},By.bind(n,t,r),e.delegates[t]=r},zy={bindPendingEventDelegates:function(){var e=this;Vn.each(e._pendingNativeEvents,function(t){Wy(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?Wy(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(Fy(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,n=t.getBody(),r=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind(Fy(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&n&&r&&(n.onload=null,r.unbind(t.getWin()),r.unbind(t.getDoc())),r&&(r.unbind(n),r.unbind(t.getContainer()))}},jy=zy=Vn.extend({},Hy,zy),qy=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(r){}},Vy=function(e){var t,n;return t=e.getBody(),n=function(t){e.dom.getParents(t.target,"a").length>0&&t.preventDefault()},e.dom.bind(t,"click",n),{unbind:function(){e.dom.unbind(t,"click",n)}}},Uy=function(e,t){e._clickBlocker&&(e._clickBlocker.unbind(),e._clickBlocker=null),t?(e._clickBlocker=Vy(e),e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable=!1):(e.readonly=!1,e.getBody().contentEditable=!0,qy(e,"StyleWithCSS",!1),qy(e,"enableInlineTableEditing",!1),qy(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},$y={setMode:function(e,t){var n=e.readonly?"readonly":"design";t!==n&&(e.initialized?Uy(e,"readonly"===t):e.on("init",function(){Uy(e,"readonly"===t)}),e.fire("SwitchMode",{mode:t}))}},Yy=Vn.each,Gy=Vn.explode,Xy={f9:120,f10:121,f11:122},Ky=Vn.makeMap("alt,ctrl,shift,meta,access"),Zy={any:function(e){return $f.first(e).isSome()},ancestor:function(e,t,n){return $f.ancestor(e,t,n).isSome()},closest:function(e,t,n){return $f.closest(e,t,n).isSome()},sibling:function(e,t){return $f.sibling(e,t).isSome()},child:function(e,t){return $f.child(e,t).isSome()},descendant:function(e,t){return $f.descendant(e,t).isSome()}},Qy=function(e){e.dom().focus()},Jy=function(e){var t=e!==undefined?e.dom():document;return we.from(t.activeElement).map(Ci.fromDom)},eb={hasFocus:function(e){var t=Uo.owner(e).dom();return e.dom()===t.activeElement},focus:Qy,blur:function(e){e.dom().blur()},active:Jy,search:function(e){return Jy(Uo.owner(e)).filter(function(t){return e.dom().contains(t.dom())})},focusInside:function(e){var t=Uo.owner(e);Jy(t).filter(function(t){return Zy.closest(t,pe.curry(To.eq,e))}).fold(function(){Qy(e)},pe.noop)}},tb=function(e,t){return e.dom.getParent(t,function(t){return"true"===e.dom.getContentEditable(t)})},nb=function(e){return e.collapsed?we.from(bl(e.startContainer,e.startOffset)).map(Ci.fromDom):we.none()},rb=function(e,t){return nb(t).bind(function(t){return xa(t)?we.some(t):!1===To.contains(e,t)?we.some(e):we.none()})},ib=function(e,t){rb(Ci.fromDom(e.getBody()),t).bind(function(e){return gu.firstPositionIn(e.dom())}).fold(function(){return e.selection.normalize()},function(t){return e.selection.setRng(t.toRange())})},ob=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},ab=function(e){return eb.hasFocus(e)||eb.search(e).isSome()},sb=function(e){return e.iframeElement&&eb.hasFocus(Ci.fromDom(e.iframeElement))},lb=function(e){var t=e.getBody();return t&&ab(Ci.fromDom(t))},ub=function(e){return e.inline?lb(e):sb(e)},cb=function(e){var t,n=e.selection,r=e.settings.content_editable,i=e.getBody(),o=n.getRng();if(e.quirks.refreshContentEditable(),t=tb(e,n.getNode()),e.$.contains(i,t))return ob(t),ib(e,o),void db(e);e.bookmark!==undefined&&!1===ub(e)&&Sy.getRng(e).each(function(t){e.selection.setRng(t),o=t}),r||(it.opera||ob(i),e.getWin().focus()),(it.gecko||r)&&(ob(i),ib(e,o)),db(e)},db=function(e){e.editorManager.setActive(e)},fb={focus:function(e,t){e.removed||(t?db(e):cb(e))},hasFocus:ub},hb=function(e,t){return t.dom()[e]},pb=function(e,t){return parseInt(ao.get(t,e),10)},mb=pe.curry(hb,"clientWidth"),gb=pe.curry(hb,"clientHeight"),vb=pe.curry(pb,"margin-top"),yb=pe.curry(pb,"margin-left"),bb=function(e){return e.dom().getBoundingClientRect()},wb=function(e,t,n){var r=mb(e),i=gb(e);return t>=0&&n>=0&&t<=r&&n<=i},Cb=function(e,t,n,r){var i=bb(t);return{x:n-(e?i.left+t.dom().clientLeft+yb(t):0),y:r-(e?i.top+t.dom().clientTop+vb(t):0)}},Sb=function(e){return we.from(e).map(Ci.fromDom)},xb={isXYInContentArea:function(e,t,n){var r=Ci.fromDom(e.getBody()),i=e.inline?r:Uo.documentElement(r),o=Cb(e.inline,i,t,n);return wb(i,o.x,o.y)},isEditorAttachedToDom:function(e){var t=e.inline?e.getBody():e.getContentAreaContainer();return Sb(t).map(function(e){return To.contains(Uo.owner(e),e)}).getOr(!1)}},kb=Ls.PluginManager,Tb=function(e,t){for(var n in kb.urls){if(kb.urls[n]+"/plugin"+t+".js"===e)return n}return null},Eb=function(e,t){var n=Tb(t,e.suffix);return n?"Failed to load plugin: "+n+" from url "+t:"Failed to load plugin url: "+t},Db=function(e,t){e.notificationManager.open({type:"error",text:t})},Nb=function(e,t){e._skinLoaded?Db(e,t):e.on("SkinLoaded",function(){Db(e,t)})},_b={pluginLoadError:function(e,t){Nb(e,Eb(e,t))},uploadError:function(e,t){Nb(e,"Failed to upload image: "+t)},displayError:Nb,initError:function(){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var n=window.console;n&&(n.error?n.error.apply(n,arguments):n.log.apply(n,arguments))}},Rb=Ls.PluginManager,Ab=Ls.ThemeManager,Lb={atob:function(e){return Ze.getOrDie("atob")(e)},requestAnimationFrame:function(e){Ze.getOrDie("requestAnimationFrame")(e)}},Mb=function(e){return new at(function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var i=new O;i.open("GET",e,!0),i.responseType="blob",i.onload=function(){200===this.status?t(this.response):r()},i.onerror=r,i.send()}catch(o){r()}})},Ob=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},Pb=function(e){return new at(function(t){var n,r,i;e=Ob(e);try{n=Lb.atob(e.data)}catch(uN){return void t(new I([]))}for(r=new B(n.length),i=0;i<r.length;i++)r[i]=n.charCodeAt(i);t(new I([r],{type:e.type}))})},Ib={uriToBlob:function(e){return 0===e.indexOf("blob:")?Mb(e):0===e.indexOf("data:")?Pb(e):null},blobToDataUri:function(e){return new at(function(t){var n=new H;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})},parseDataUri:Ob},Hb=0,Bb=function(e){return(e||"blobid")+Hb++},Fb=function(e,t,n,r){var i,o;0!==t.src.indexOf("blob:")?(i=Ib.parseDataUri(t.src).data,(o=e.findFirst(function(e){return e.base64()===i}))?n({image:t,blobInfo:o}):Ib.uriToBlob(t.src).then(function(r){o=e.create(Bb(),r,i),e.add(o),n({image:t,blobInfo:o})},function(e){r(e)})):(o=e.getByUri(t.src))?n({image:t,blobInfo:o}):Ib.uriToBlob(t.src).then(function(r){Ib.blobToDataUri(r).then(function(a){i=Ib.parseDataUri(a).data,o=e.create(Bb(),r,i),e.add(o),n({image:t,blobInfo:o})})},function(e){r(e)})},Wb=function(e){return e?e.getElementsByTagName("img"):[]},zb=0,jb=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+e()+e()+e()},qb={uuid:function(e){return e+zb+++jb()}},Vb=function(e,t){return e.hasOwnProperty(t.nodeName)},Ub=function(e,t){return!!ja.isText(t)||!!ja.isElement(t)&&(!Vb(e,t)&&!hf.isBookmarkNode(t))},$b=function(e,t,n){return Ve.exists($h.parents(Ci.fromDom(n),Ci.fromDom(t)),function(t){return Vb(e,t.dom())})},Yb=function(e,t){if(ja.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||Vb(e,t.nextSibling)))return!0}return!1},Gb=function(e){var t,n,r,i,o,a,s,l,u,c,d,f=e.settings,h=e.dom,p=e.selection,m=e.schema,g=m.getBlockElements(),v=p.getStart(),y=e.getBody();if(d=f.forced_root_block,v&&ja.isElement(v)&&d&&(c=y.nodeName.toLowerCase(),m.isValidChild(c,d.toLowerCase())&&!$b(g,y,v))){for(n=(t=p.getRng()).startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,u=fb.hasFocus(e),v=y.firstChild;v;)if(Ub(g,v)){if(Yb(g,v)){s=v,v=v.nextSibling,h.remove(s);continue}a||(a=h.create(d,e.settings.forced_root_block_attrs),v.parentNode.insertBefore(a,v),l=!0),s=v,v=v.nextSibling,a.appendChild(s)}else a=null,v=v.nextSibling;l&&u&&(t.setStart(n,r),t.setEnd(i,o),p.setRng(t),e.nodeChanged())}},Xb={setup:function(e){e.settings.forced_root_block&&e.on("NodeChange",pe.curry(Gb,e))}},Kb=function(e){var t,n,r,i;return i=e.getBoundingClientRect(),t=e.ownerDocument,n=t.documentElement,r=t.defaultView,{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}},Zb=function(e){return e.inline?Kb(e.getBody()):{left:0,top:0}},Qb=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},Jb=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},i={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:i},ew=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=Kb(e.getContentAreaContainer()),r=Jb(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}},tw=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}},nw={calc:function(e,t){return tw(Zb(e),Qb(e),ew(e,t))}},rw=ja.isContentEditableFalse,iw=ja.isContentEditableTrue,ow=function(e,t){return rw(t)&&t!==e},aw=function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!rw(t)},sw=function(e){var t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},lw=function(e,t,n,r){var i=t.cloneNode(!0);e.dom.setStyles(i,{width:n,height:r}),e.dom.setAttrib(i,"data-mce-selected",null);var o=e.dom.create("div",{"class":"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(o,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(i,{margin:0,boxSizing:"border-box"}),o.appendChild(i),o},uw=function(e,t){e.parentNode!==t&&t.appendChild(e)},cw=function(e,t,n,r,i,o){var a=0,s=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>i&&(a=t.pageX+n-i),t.pageY+r>o&&(s=t.pageY+r-o),e.style.width=n-a+"px",e.style.height=r-s+"px"},dw=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},fw=function(e){return 0===e.button},hw=function(e){return e.element},pw=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}},mw=function(e,t){return function(n){if(fw(n)){var r=An.find(t.dom.getParents(n.target),kl.or(rw,iw));if(ow(t.getBody(),r)){var i=t.dom.getPos(r),o=t.getBody(),a=t.getDoc().documentElement;e.element=r,e.screenX=n.screenX,e.screenY=n.screenY,e.maxX=(t.inline?o.scrollWidth:a.offsetWidth)-2,e.maxY=(t.inline?o.scrollHeight:a.offsetHeight)-2,e.relX=n.pageX-i.x,e.relY=n.pageY-i.y,e.width=r.offsetWidth,e.height=r.offsetHeight,e.ghost=lw(t,r,e.width,e.height)}}}},gw=function(e,t){var n=dt.throttle(function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)},0);return function(r){var i=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(hw(e)&&!e.dragging&&i>10){if(t.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var o=pw(e,nw.calc(t,r));uw(e.ghost,t.getBody()),cw(e.ghost,o,e.width,e.height,e.maxX,e.maxY),n(r.clientX,r.clientY)}}},vw=function(e){var t=e.getSel().getRangeAt(0).startContainer;return 3===t.nodeType?t.parentNode:t},yw=function(e,t){return function(n){if(e.dragging&&aw(t,vw(t.selection),e.element)){var r=sw(e.element),i=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});i.isDefaultPrevented()||(r=i.targetClone,t.undoManager.transact(function(){dw(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()}))}ww(e)}},bw=function(e,t){return function(){ww(e),e.dragging&&t.fire("dragend")}},ww=function(e){e.dragging=!1,e.element=null,dw(e.ghost)},Cw=function(e){var t,n,r,i,o,a,s={};t=Ts.DOM,a=document,n=mw(s,e),r=gw(s,e),i=yw(s,e),o=bw(s,e),e.on("mousedown",n),e.on("mousemove",r),e.on("mouseup",i),t.bind(a,"mousemove",r),t.bind(a,"mouseup",o),e.on("remove",function(){t.unbind(a,"mousemove",r),t.unbind(a,"mouseup",o)})},Sw=function(e){e.on("drop",function(t){var n="undefined"!=typeof t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(rw(n)||rw(e.dom.getContentEditableParent(n)))&&t.preventDefault()})},xw={init:function(e){Cw(e),Sw(e)}},kw=function(e){var t=function(t){return An.map(t,function(t){return t=dl(t),t.node=e,t})};if(ja.isElement(e))return t(e.getClientRects());if(ja.isText(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}},Tw=function(e){return An.reduce(e,function(e,t){return e.concat(kw(t))},[])};!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(Py||(Py={}));var Ew=function(e,t,n,r){for(;r=Lc(r,e,ul,t);)if(n(r))return},Dw=function(e,t,n,r,i,o){var a,s,l=0,u=[],c=function(r){var o,a,c;for(c=Tw([r]),-1===e&&(c=c.reverse()),o=0;o<c.length;o++)if(a=c[o],!n(a,s)){if(u.length>0&&t(a,An.last(u))&&l++,a.line=l,i(a))return!0;u.push(a)}};return(s=An.last(o.getClientRects()))?(a=o.getNode(),c(a),Ew(e,r,c,a),u):u},Nw=function(e,t){return t.line>e},_w=function(e,t){return t.line===e},Rw=pe.curry(Dw,Py.Up,ml,gl),Aw=pe.curry(Dw,Py.Down,gl,ml),Lw=function(e,t,n,r){var i,o,a,s,l,u,c=ld(t),d=[],f=0,h=function(e){return An.last(e.getClientRects())};1===e?(i=c.next,o=gl,a=ml,s=$l.after(r)):(i=c.prev,o=ml,a=gl,s=$l.before(r)),u=h(s);do{if(s.isVisible()&&(l=h(s),!a(l,u))){if(d.length>0&&o(l,An.last(d))&&f++,l=dl(l),l.position=s,l.line=f,n(l))return d;d.push(l)}}while(s=i(s));return d},Mw=function(e){return function(t){return Nw(e,t)}},Ow=function(e){return function(t){return _w(e,t)}},Pw=ja.isContentEditableFalse,Iw=Lc,Hw=function(e,t){return Math.abs(e.left-t)},Bw=function(e,t){return Math.abs(e.right-t)},Fw=function(e,t){return e>=t.left&&e<=t.right},Ww=function(e,t){return An.reduce(e,function(e,n){var r,i;return r=Math.min(Hw(e,t),Bw(e,t)),i=Math.min(Hw(n,t),Bw(n,t)),Fw(t,n)?n:Fw(t,e)?e:i===r&&Pw(n.node)?n:i<r?n:e})},zw=function(e,t,n,r){for(;r=Iw(r,e,ul,t);)if(n(r))return},jw=function(e,t){var n=[],r=function(e,r){var i;return i=An.filter(Tw([r]),function(n){return!e(n,t)}),n=n.concat(i),0===i.length};return n.push(t),zw(Py.Up,e,pe.curry(r,ml),t.node),zw(Py.Down,e,pe.curry(r,gl),t.node),n},qw=function(e){return An.filter(An.toArray(e.getElementsByTagName("*")),Cc)},Vw=function(e,t){return{node:e.node,before:Hw(e,t)<Bw(e,t)}},Uw=function(e,t,n){var r,i=Tw(qw(e)),o=An.filter(i,function(e){return n>=e.top&&n<=e.bottom});return(r=Ww(o,t))&&(r=Ww(jw(e,r),t))&&Cc(r.node)?Vw(r,t):null},$w={isXYWithinRange:function(e,t,n){return!n.collapsed&&Ve.foldl(n.getClientRects(),function(n,r){return n||vl(r,e,t)},!1)}},Yw={adaptable:function(e,t){var n=null,r=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null,r=null)},throttle:function(){r=arguments,null===n&&(n=setTimeout(function(){e.apply(null,r),n=null,r=null},t))}}},first:function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){var r=arguments;null===n&&(n=setTimeout(function(){e.apply(null,r),n=null,r=null},t))}}},last:function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){var r=arguments;null!==n&&clearTimeout(n),n=setTimeout(function(){e.apply(null,r),n=null,r=null},t)}}}},Gw={setup:function(e){var t=Yw.first(function(){if(!e.removed){if(e.selection.getRng().collapsed){var t=xu(e,e.selection.getRng());e.selection.setRng(t)}}},0);e.on("focus",function(){t.throttle()}),e.on("blur",function(){t.cancel()})}},Xw={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return it.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Kw=ja.isContentEditableTrue,Zw=ja.isContentEditableFalse,Qw=Yc,Jw=$c,eC=function(e){var t,n=function(t){return e.dom.isBlock(t)},r=e.getBody(),i=wc(e.getBody(),n),o="sel-"+e.dom.uniqueId(),a=function(t){return e.dom.hasClass(t,"mce-offscreen-selection")},s=function(){var t=e.dom.get(o);return t?t.getElementsByTagName("*")[0]:t},l=function(t){t&&e.selection.setRng(t)},u=function(){return e.selection.getRng()},c=function(t,n){e.selection.scrollIntoView(t,n)},d=function(t,n,r){return e.fire("ShowCaret",{target:n,direction:t,before:r}).isDefaultPrevented()?null:(c(n,-1===t),i.show(r,n))},f=function(e,t){return t=zc(e,r,t),-1===e?$l.fromRangeStart(t):$l.fromRangeEnd(t)},h=function(e){e.hasAttribute("data-mce-caret")&&(Xs(e),l(u()),c(e[0]))},p=function(){var n=function(t){for(var n=e.getBody();t&&t!==n;){if(Kw(t)||Zw(t))return t;t=t.parentNode}return null};e.on("mouseup",function(t){var n=u();n.collapsed&&xb.isXYInContentArea(e,t.clientX,t.clientY)&&l(Su(e,n))}),e.on("click",function(t){var r;(r=n(t.target))&&(Zw(r)&&(t.preventDefault(),e.focus()),Kw(r)&&e.dom.isChildOf(r,e.selection.getNode())&&b())}),e.on("blur NewBlock",function(){b()});var i=function(e){var t=ld(e);if(!e.firstChild)return!1;var n=$l.before(e.firstChild),r=t.next(n);return r&&!Jw(r)&&!Qw(r)},o=function(t,n){return e.dom.getParent(t,e.dom.isBlock)===e.dom.getParent(n,e.dom.isBlock)},c=function(t,n){var r=e.dom.getParent(t,e.dom.isBlock),a=e.dom.getParent(n,e.dom.isBlock);return r&&!o(r,a)&&i(r)};(function(e){var t=!1;e.on("touchstart",function(){t=!1}),e.on("touchmove",function(){t=!0}),e.on("touchend",function(r){var i=n(r.target);Zw(i)&&(t||(r.preventDefault(),y(Cu(e,i))))})})(e),e.on("mousedown",function(t){var i,o=t.target;if((o===r||"HTML"===o.nodeName||e.dom.isChildOf(o,r))&&!1!==xb.isXYInContentArea(e,t.clientX,t.clientY))if(i=n(o))Zw(i)?(t.preventDefault(),y(Cu(e,i))):(b(),Kw(i)&&t.shiftKey||$w.isXYWithinRange(t.clientX,t.clientY,e.selection.getRng())||e.selection.placeCaretAt(t.clientX,t.clientY));else if(!1===Cc(o)){b(),C();var a=Uw(r,t.clientX,t.clientY);a&&(c(t.target,a.node)||(t.preventDefault(),e.getBody().focus(),l(d(1,a.node,a.before))))}}),e.on("keypress",function(t){Xw.modifierPressed(t)||(t.keyCode,Zw(e.selection.getNode())&&t.preventDefault())}),e.on("getSelectionRange",function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);(n=n.cloneRange()).selectNode(t),e.range=n}}),e.on("setSelectionRange",function(e){var t;(t=y(e.range,e.forward))&&(e.range=t)}),e.on("AfterSetSelectionRange",function(e){var t=e.range;v(t)||C(),a(t.startContainer.parentNode)||b()}),e.on("copy",function(e){var t=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!it.ie){var n=s();n&&(e.preventDefault(),t.clearData(),t.setData("text/html",n.outerHTML),t.setData("text/plain",n.outerText))}}),xw.init(e),Gw.setup(e)},m=function(){var t=e.contentStyles,n=".mce-content-body";t.push(i.getCss()),t.push(n+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+n+" *[contentEditable=false] {cursor: default;}"+n+" *[contentEditable=true] {cursor: text;}")},g=function(e){return Fs(e)||$s(e)||Ys(e)},v=function(e){return g(e.startContainer)||g(e.endContainer)},y=function(n,r){var i,a,s,l,u,c,h,p,m,g,y=e.$,b=e.dom;if(!n)return null;if(n.collapsed){if(!v(n))if(!1===r){if(p=f(-1,n),Cc(p.getNode(!0)))return d(-1,p.getNode(!0),!1);if(Cc(p.getNode()))return d(-1,p.getNode(),!p.isAtEnd())}else{if(p=f(1,n),Cc(p.getNode()))return d(1,p.getNode(),!p.isAtEnd());if(Cc(p.getNode(!0)))return d(1,p.getNode(!0),!1)}return null}return l=n.startContainer,u=n.startOffset,c=n.endOffset,3===l.nodeType&&0===u&&Zw(l.parentNode)&&(l=l.parentNode,u=b.nodeIndex(l),l=l.parentNode),1!==l.nodeType?null:(c===u+1&&(i=l.childNodes[u]),Zw(i)?(m=g=i.cloneNode(!0),(h=e.fire("ObjectSelected",{target:i,targetClone:m})).isDefaultPrevented()?null:(a=xh.descendant(Ci.fromDom(e.getBody()),"#"+o).fold(function(){return y([])},function(e){return y([e.dom()])}),m=h.targetClone,0===a.length&&(a=y('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",o)).appendTo(e.getBody()),n=e.dom.createRng(),m===g&&it.ie?(a.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(m),n.setStartAfter(a[0].firstChild.firstChild),n.setEndAfter(m)):(a.empty().append("\xa0").append(m).append("\xa0"),n.setStart(a[0].firstChild,1),n.setEnd(a[0].lastChild,0)),a.css({top:b.getPos(i,e.getBody()).y}),a[0].focus(),(s=e.selection.getSel()).removeAllRanges(),s.addRange(n),Ve.each(Vu.descendants(Ci.fromDom(e.getBody()),"*[data-mce-selected]"),function(e){Yi.remove(e,"data-mce-selected")}),i.setAttribute("data-mce-selected","1"),t=i,C(),n)):null)},b=function(){t&&(t.removeAttribute("data-mce-selected"),xh.descendant(Ci.fromDom(e.getBody()),"#"+o).each(kf.remove),t=null)},w=function(){i.destroy(),t=null},C=function(){i.hide()};return it.ceFalse&&(p(),m()),{showCaret:d,showBlockCaretContainer:h,hideFakeCaret:C,destroy:w}},tC=Vn.each,nC=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},rC=function(e){return e.replace(/<!--|-->/g,"")},iC=function(e,t,n){var r,i,o,a,s=1;for(a=e.getShortEndedElements(),(o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=r=n;i=o.exec(t);){if(r=o.lastIndex,"/"===i[1])s--;else if(!i[1]){if(i[2]in a)continue;s++}if(0===s)break}return r};(V||(V={})).findEndTag=iC;var oC=V,aC=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},sC=function(e,t){var n,r,i,o,a,s=t,l=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,u=e.schema;for(s=aC(e.getTempAttrs(),s),a=u.getShortEndedElements();o=l.exec(s);)r=l.lastIndex,i=o[0].length,n=a[o[1]]?r:oC.findEndTag(u,s,r),s=s.substring(0,r-i)+s.substring(n),l.lastIndex=r-i;return s},lC={trimExternal:function(e,t){return Os.trim(sC(e,t))},trimInternal:sC},uC=0,cC=1,dC=2,fC={KEEP:uC,DELETE:dC,INSERT:cC,diff:function(e,t){var n=e.length+t.length+2,r=new Array(n),i=new Array(n),o=function(e,t,n){return{start:e,end:t,diag:n}},a=function(n,r,i,o,s){var u=l(n,r,i,o);if(null===u||u.start===r&&u.diag===r-o||u.end===n&&u.diag===n-i)for(var c=n,d=i;c<r||d<o;)c<r&&d<o&&e[c]===t[d]?(s.push([uC,e[c]]),++c,++d):r-n>o-i?(s.push([dC,e[c]]),++c):(s.push([cC,t[d]]),++d);else{a(n,u.start,i,u.start-u.diag,s);for(var f=u.start;f<u.end;++f)s.push([uC,e[f]]);a(u.end,r,u.end-u.diag,o,s)}},s=function(n,r,i,a){for(var s=n;s-r<a&&s<i&&e[s]===t[s-r];)++s;return o(n,s,r)},l=function(n,o,a,l){var u=o-n,c=l-a;if(0===u||0===c)return null;var d=u-c,f=c+u,h=(f%2==0?f:f+1)/2;r[1+h]=n,i[1+h]=o+1;var p,m,g,v,y;for(p=0;p<=h;++p){for(m=-p;m<=p;m+=2){for(g=m+h,m===-p||m!==p&&r[g-1]<r[g+1]?r[g]=r[g+1]:r[g]=r[g-1]+1,y=(v=r[g])-n+a-m;v<o&&y<l&&e[v]===t[y];)r[g]=++v,++y;if(d%2!=0&&d-p<=m&&m<=d+p&&i[g-d]<=r[g])return s(i[g-d],m+n-a,o,l)}for(m=d-p;m<=d+p;m+=2){for(g=m+h-d,m===d-p||m!==d+p&&i[g+1]<=i[g-1]?i[g]=i[g+1]-1:i[g]=i[g-1],y=(v=i[g]-1)-n+a-m;v>=n&&y>=a&&e[v]===t[y];)i[g]=v--,y--;if(d%2==0&&-p<=m&&m<=p&&i[g]<=r[g+d])return s(i[g],m+n-a,o,l)}}},u=[];return a(0,e.length,0,t.length,u),u}},hC=function(e){return 1===e.nodeType?e.outerHTML:3===e.nodeType?is.encodeRaw(e.data,!1):8===e.nodeType?"<!--"+e.data+"-->":""},pC=function(e){var t,n,r;for(r=document.createElement("div"),t=document.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},mC=function(e,t,n){var r=pC(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(r,i)}else e.appendChild(r)},gC=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}},vC=function(e,t){var n=0;An.each(e,function(e){e[0]===fC.KEEP?n++:e[0]===fC.INSERT?(mC(t,e[1],n),n++):e[0]===fC.DELETE&&gC(t,n)})},yC={read:function(e){return An.filter(An.map(e.childNodes,hC),function(e){return e.length>0})},write:function(e,t){var n=An.map(t.childNodes,hC);return vC(fC.diff(n,e),t),t}},bC=function(e){return-1!==e.indexOf("</iframe>")},wC=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},CC=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},SC=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},xC={createFragmentedLevel:wC,createCompleteLevel:CC,createFromEditor:function(e){var t,n,r;return t=yC.read(e.getBody()),r=Ve.bind(t,function(t){var n=lC.trimInternal(e.serializer,t);return n.length>0?[n]:[]}),n=r.join(""),bC(n)?wC(r):CC(n)},applyToEditor:function(e,t,n){"fragmented"===t.type?yC.write(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},isEq:function(e,t){return!!e&&!!t&&SC(e)===SC(t)}},kC={},TC=An.filter,EC=An.each,DC=function(e,t){EC(kC[e],function(e){e(t)})};(function(e,t){var n=kC[e];n||(kC[e]=n=[]),kC[e].push(t)})("pre",function(e){var t,n,r=e.selection.getRng(),i=function(e){return t(e.previousSibling)&&-1!==An.indexOf(n,e.previousSibling)},o=function(e,t){cr(t).remove(),cr(e).append("<br><br>").append(t.childNodes)};t=ja.matchNodeNames("pre"),r.collapsed||(n=e.selection.getSelectedBlocks(),EC(TC(TC(n,t),i),function(e){o(e.previousSibling,e)}))});var NC={postProcess:DC},_C=Vn.each,RC=function(e,t){var n=e.childNodes;return--t>n.length-1?t=n.length-1:t<0&&(t=0),n[t]||e},AC={walk:function(e,t,n){var r,i,o,a,s,l,u,c=t.startContainer,d=t.startOffset,f=t.endContainer,h=t.endOffset;if((u=e.select("td[data-mce-selected],th[data-mce-selected]")).length>0)_C(u,function(e){n([e])});else{var p=function(e){var t;return 3===(t=e[0]).nodeType&&t===c&&d>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===h&&e.length>0&&t===f&&3===t.nodeType&&e.splice(e.length-1,1),e},m=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},g=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},v=function(e,t,r){var i=r?"nextSibling":"previousSibling";for(s=(a=e).parentNode;a&&a!==t;a=s)s=a.parentNode,(l=m(a===e?a:a[i],i)).length&&(r||l.reverse(),n(p(l)))};if(1===c.nodeType&&c.hasChildNodes()&&(c=c.childNodes[d]),1===f.nodeType&&f.hasChildNodes()&&(f=RC(f,h)),c===f)return n(p([c]));for(r=e.findCommonAncestor(c,f),a=c;a;a=a.parentNode){if(a===f)return v(c,r,!0);if(a===r)break}for(a=f;a;a=a.parentNode){if(a===c)return v(f,r);if(a===r)break}i=g(c,r)||c,o=g(f,r)||f,v(c,i,!0),(l=m(i===c?i:i.nextSibling,"nextSibling",o===f?o.nextSibling:o)).length&&n(p(l)),v(f,o)}}},LC=/^(src|href|style)$/,MC=Vn.each,OC=um.isEq,PC=function(e){return/^(TH|TD)$/.test(e.nodeName)},IC=function(e,t,n){var r,i,o;return r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],ja.isElement(r)&&(o=r.childNodes.length-1,!n&&i&&i--,r=r.childNodes[i>o?o:i]),ja.isText(r)&&n&&i>=r.nodeValue.length&&(r=new w(r,e.getBody()).next()||r),ja.isText(r)&&!n&&0===i&&(r=new w(r,e.getBody()).prev()||r),r},HC=function(e,t,n,r){var i=e.create(n,r);return t.parentNode.insertBefore(i,t),i.appendChild(t),i},BC=function(e,t,n){return!!OC(t,n.inline)||(!!OC(t,n.block)||(n.selector?ja.isElement(t)&&e.is(t,n.selector):void 0))},FC=function(e,t){return t.links&&"A"===e.tagName},WC=function(e,t,n,r){return!(t=um.getNonWhiteSpaceSibling(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},zC=function(e,t,n){var r,i=t.parentNode,o=e.dom,a=e.settings.forced_root_block;n.block&&(a?i===o.getRoot()&&(n.list_block&&OC(t,n.list_block)||MC(Vn.grep(t.childNodes),function(t){um.isValid(e,a,t.nodeName.toLowerCase())?r?r.appendChild(t):(r=HC(o,t,a),o.setAttribs(r,e.settings.forced_root_block_attrs)):r=0})):o.isBlock(t)&&!o.isBlock(i)&&(WC(o,t,!1)||WC(o,t.firstChild,!0,1)||t.insertBefore(o.create("br"),t.firstChild),WC(o,t,!0)||WC(o,t.lastChild,!1,1)||t.appendChild(o.create("br")))),n.selector&&n.inline&&!OC(n.inline,t)||o.remove(t,1)},jC=function(e,t,n,r,i){var o,a,s,l=e.dom;if(!BC(l,r,t)&&!FC(r,t))return!1;if("all"!==t.remove)for(MC(t.styles,function(e,o){e=um.normalizeStyleValue(l,um.replaceVars(e,n),o),"number"==typeof o&&(o=e,i=0),(t.remove_similar||!i||OC(um.getStyle(l,i,o),e))&&l.setStyle(r,o,""),s=1}),s&&""===l.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),MC(t.attributes,function(e,t){var o;if(e=um.replaceVars(e,n),"number"==typeof t&&(t=e,i=0),!i||OC(l.getAttrib(i,t),e)){if("class"===t&&(e=l.getAttrib(r,t))&&(o="",MC(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(o+=(o?" ":"")+e)}),o))return void l.setAttrib(r,t,o);"class"===t&&r.removeAttribute("className"),LC.test(t)&&r.removeAttribute("data-mce-"+t),r.removeAttribute(t)}}),MC(t.classes,function(e){e=um.replaceVars(e,n),i&&!l.hasClass(i,e)||l.removeClass(r,e)}),a=l.getAttribs(r),o=0;o<a.length;o++){var u=a[o].nodeName;if(0!==u.indexOf("_")&&0!==u.indexOf("data-"))return!1}return"none"!==t.remove?(zC(e,r,t),!0):void 0},qC=function(e,t,n,r,i){var o;return MC(um.getParents(e.dom,t.parentNode).reverse(),function(t){var a;o||"_start"===t.id||"_end"===t.id||(a=Rm.matchNode(e,t,n,r,i))&&!1!==a.split&&(o=t)}),o},VC=function(e,t,n,r,i,o,a,s){var l,u,c,d,f,h,p=e.dom;if(n){for(h=n.parentNode,l=r.parentNode;l&&l!==h;l=l.parentNode){for(u=p.clone(l,!1),f=0;f<t.length;f++)if(jC(e,t[f],s,u,u)){u=0;break}u&&(c&&u.appendChild(c),d||(d=u),c=u)}!o||a.mixed&&p.isBlock(n)||(r=p.split(n,r)),c&&(i.parentNode.insertBefore(c,i),d.appendChild(i))}return r},UC={removeFormat:jC,remove:function(e,t,n,r,i){var o,a,s=e.formatter.get(t),l=s[0],u=!0,c=e.dom,d=e.selection,f=function(r){var o=qC(e,r,t,n,i);return VC(e,s,o,r,r,!0,l,n)},h=function(t){var r,i,o,a,d;if(ja.isElement(t)&&c.getContentEditable(t)&&(a=u,u="true"===c.getContentEditable(t),d=!0),r=Vn.grep(t.childNodes),u&&!d)for(i=0,o=s.length;i<o&&!jC(e,s[i],n,t,t);i++);if(l.deep&&r.length){for(i=0,o=r.length;i<o;i++)h(r[i]);d&&(u=a)}},p=function(e){var t=c.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return hf.isBookmarkNode(n)&&(n=n[e?"firstChild":"lastChild"]),ja.isText(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),c.remove(t,!0),n},m=function(t){var n,r,i=t.commonAncestorContainer;if(t=xm.expandRng(e,t,s,!0),l.split){if(n=IC(e,t,!0),r=IC(e,t),n!==r){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n="TR"===n.nodeName?n.firstChild.firstChild||n:n.firstChild||n),i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&PC(r)&&r.firstChild&&(r=r.firstChild||r),c.isChildOf(n,r)&&n!==r&&!c.isBlock(r)&&!PC(n)&&!PC(r))return n=HC(c,n,"span",{id:"_start","data-mce-type":"bookmark"}),f(n),void(n=p(!0));n=HC(c,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=HC(c,r,"span",{id:"_end","data-mce-type":"bookmark"}),f(n),f(r),n=p(!0),r=p()}else n=r=f(n);t.startContainer=n.parentNode?n.parentNode:n,t.startOffset=c.nodeIndex(n),t.endContainer=r.parentNode?r.parentNode:r,t.endOffset=c.nodeIndex(r)+1}AC.walk(c,t,function(t){MC(t,function(t){h(t),ja.isElement(t)&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===um.getTextDecoration(c,t.parentNode)&&jC(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})};if(r)r.nodeType?((a=c.createRng()).setStartBefore(r),a.setEndAfter(r),m(a)):m(r);else if("false"!==c.getContentEditable(d.getNode()))d.isCollapsed()&&l.inline&&!c.select("td[data-mce-selected],th[data-mce-selected]").length?Xm.removeCaretFormat(e,t,n,i):(o=d.getBookmark(),m(d.getRng()),d.moveToBookmark(o),l.inline&&Rm.match(e,t,n,d.getStart())&&um.moveStart(c,d,d.getRng()),e.nodeChanged());else{r=d.getNode();for(var g=0,v=s.length;g<v&&(!s[g].ceFalseOverride||!jC(e,s[g],n,r,r));g++);}}},$C=Vn.each,YC=function(e){return e&&1===e.nodeType&&!hf.isBookmarkNode(e)&&!Xm.isCaretNode(e)&&!ja.isBogus(e)},GC=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!hf.isBookmarkNode(n))return n}return e},XC=function(e,t,n){var r,i,o=new mf(e);if(t&&n&&(t=GC(t,"previousSibling"),n=GC(n,"nextSibling"),o.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)i=r,r=r.nextSibling,t.appendChild(i);return e.remove(n),Vn.each(Vn.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},KC=function(e,t,n){$C(e.childNodes,function(e){YC(e)&&(t(e)&&n(e),e.hasChildNodes()&&KC(e,t,n))})},ZC=function(e,t){return pe.curry(function(t,n){return!(!n||!um.getStyle(e,n,t))},t)},QC=function(e,t,n){return pe.curry(function(t,n,r){e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),JC(e,r)},t,n)},JC=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},eS=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=um.getTextDecoration(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},tS=function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";$C(e.select(r,n),function(n){YC(n)&&$C(t.styles,function(t,r){e.setStyle(n,r,"")})})}},nS={mergeWithChildren:function(e,t,n,r){$C(t,function(t){$C(e.dom.select(t.inline,r),function(r){YC(r)&&UC.removeFormat(e,t,n,r,t.exact?r:null)}),tS(e.dom,t,r)})},mergeUnderlineAndColor:function(e,t,n,r){(t.styles.color||t.styles.textDecoration)&&(Vn.walk(r,pe.curry(eS,e),"childNodes"),eS(e,r))},mergeBackgroundColorAndFontSize:function(e,t,n,r){t.styles&&t.styles.backgroundColor&&KC(r,ZC(e,"fontSize"),QC(e,"backgroundColor",um.replaceVars(t.styles.backgroundColor,n)))},mergeSubSup:function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(KC(r,ZC(e,"fontSize"),QC(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))},mergeSiblings:function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=XC(e,um.getNonWhiteSpaceSibling(r),r),r=XC(e,r,um.getNonWhiteSpaceSibling(r,!0)))},mergeWithParents:function(e,t,n,r,i){Rm.matchNode(e,i.parentNode,n,r)&&UC.removeFormat(e,t,r,i)||t.merge_with_parents&&e.dom.getParent(i.parentNode,function(o){if(Rm.matchNode(e,o,n,r))return UC.removeFormat(e,t,r,i),!0})}},rS=Vn.each,iS=function(e){return e&&1===e.nodeType&&!hf.isBookmarkNode(e)&&!Xm.isCaretNode(e)&&!ja.isBogus(e)},oS=function(e,t,n,r){var i,o,a=e.formatter.get(t),s=a[0],l=!r&&e.selection.isCollapsed(),u=e.dom,c=e.selection,d=function(e,t){if(t=t||s,e){if(t.onformat&&t.onformat(e,t,n,r),rS(t.styles,function(t,r){u.setStyle(e,r,um.replaceVars(t,n))}),t.styles){var i=u.getAttrib(e,"style");i&&e.setAttribute("data-mce-style",i)}rS(t.attributes,function(t,r){u.setAttrib(e,r,um.replaceVars(t,n))}),rS(t.classes,function(t){t=um.replaceVars(t,n),u.hasClass(e,t)||u.addClass(e,t)})}},f=function(e,t){var n=!1;return!!s.selector&&(rS(e,function(e){if(!("collapsed"in e&&e.collapsed!==l))return u.is(t,e.selector)&&!Xm.isCaretNode(t)?(d(t,e),n=!0,!1):void 0}),n)},h=function(r,i,o,l){var u,c,h=[],p=!0;u=s.inline||s.block,c=r.create(u),d(c),AC.walk(r,i,function(i){var o,m=function(i){var g,v,y,b;if(b=p,g=i.nodeName.toLowerCase(),v=i.parentNode.nodeName.toLowerCase(),1===i.nodeType&&r.getContentEditable(i)&&(b=p,p="true"===r.getContentEditable(i),y=!0),um.isEq(g,"br"))return o=0,void(s.block&&r.remove(i));if(s.wrapper&&Rm.matchNode(e,i,t,n))o=0;else{if(p&&!y&&s.block&&!s.wrapper&&um.isTextBlock(e,g)&&um.isValid(e,v,u))return i=r.rename(i,u),d(i),h.push(i),void(o=0);if(s.selector){var w=f(a,i);if(!s.inline||w)return void(o=0)}!p||y||!um.isValid(e,u,g)||!um.isValid(e,v,u)||!l&&3===i.nodeType&&1===i.nodeValue.length&&65279===i.nodeValue.charCodeAt(0)||Xm.isCaretNode(i)||s.inline&&r.isBlock(i)?(o=0,rS(Vn.grep(i.childNodes),m),y&&(p=b),o=0):(o||(o=r.clone(c,!1),i.parentNode.insertBefore(o,i),h.push(o)),o.appendChild(i))}};rS(i,m)}),!0===s.links&&rS(h,function(e){var t=function(e){"A"===e.nodeName&&d(e,s),rS(Vn.grep(e.childNodes),t)};t(e)}),rS(h,function(i){var o,l=function(e){var t=!1;return rS(e.childNodes,function(e){if(iS(e))return t=e,!1}),t},u=function(e){var t,n;return(t=l(e))&&!hf.isBookmarkNode(t)&&Rm.matchName(r,t,s)&&(n=r.clone(t,!1),d(n),r.replace(n,e,!0),r.remove(t,1)),n||e};o=function(e){var t=0;return rS(e.childNodes,function(e){um.isWhiteSpaceNode(e)||hf.isBookmarkNode(e)||t++}),t}(i),!(h.length>1)&&r.isBlock(i)||0!==o?(s.inline||s.wrapper)&&(s.exact||1!==o||(i=u(i)),nS.mergeWithChildren(e,a,n,i),nS.mergeWithParents(e,s,t,n,i),nS.mergeBackgroundColorAndFontSize(r,s,n,i),nS.mergeSubSup(r,s,n,i),nS.mergeSiblings(r,s,n,i)):r.remove(i,1)})};if("false"!==u.getContentEditable(c.getNode())){if(s){if(r)r.nodeType?f(a,r)||((o=u.createRng()).setStartBefore(r),o.setEndAfter(r),h(u,xm.expandRng(e,o,a),null,!0)):h(u,r,null,!0);else if(l&&s.inline&&!u.select("td[data-mce-selected],th[data-mce-selected]").length)Xm.applyCaretFormat(e,t,n);else{var p=e.selection.getNode();e.settings.forced_root_block||!a[0].defaultBlock||u.getParent(p,u.isBlock)||oS(e,a[0].defaultBlock),e.selection.setRng(Of.normalize(e.selection.getRng())),i=c.getBookmark(),h(u,xm.expandRng(e,c.getRng(),a),i),s.styles&&nS.mergeUnderlineAndColor(u,s,n,p),c.moveToBookmark(i),um.moveStart(u,c,c.getRng()),e.nodeChanged()}NC.postProcess(t,e)}}else{r=c.getNode();for(var m=0,g=a.length;m<g;m++)if(a[m].ceFalseOverride&&u.is(r,a[m].selector))return void d(r,a[m])}},aS={applyFormat:oS},sS=Vn.each,lS=function(e,t){var n={};e.set({}),t.on("NodeChange",function(r){var i=um.getParents(t.dom,r.element),o={};i=Vn.grep(i,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}),sS(e.get(),function(e,r){sS(i,function(a){return t.formatter.matchNode(a,r,{},e.similar)?(n[r]||(sS(e,function(e){e(!0,{node:a,format:r,parents:i})}),n[r]=e),o[r]=e,!1):!Rm.matchesUnInheritedFormatSelector(t,a,r)&&void 0})}),sS(n,function(e,t){o[t]||(delete n[t],sS(e,function(e){e(!1,{node:r.element,format:t,parents:i})}))})})},uS=function(e,t,n,r){var i=e.get();sS(t.split(","),function(e){i[e]||(i[e]=[],i[e].similar=r),i[e].push(n)}),e.set(i)},cS={formatChanged:function(e,t,n,r,i){null===t.get()&&lS(t,e),uS(t,n,r,i)}},dS={get:function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,n,r){Vn.each(r,function(n,r){e.setAttrib(t,r,n)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Vn.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t}},fS=Vn.each,hS=Ts.DOM,pS=function(e,t){var n,r,i,o=t&&t.schema||C({}),a=function(e,t){t.classes.length&&hS.addClass(e,t.classes.join(" ")),hS.setAttribs(e,t.attrs)},s=function(e){var t;return r="string"==typeof e?{name:e,classes:[],attrs:{}}:e,t=hS.create(r.name),a(t,r),t},l=function(e,t){var n="string"!=typeof e?e.nodeName.toLowerCase():e,r=o.getElementRule(n),i=r&&r.parentsRequired;return!(!i||!i.length)&&(t&&-1!==Vn.inArray(i,t)?t:i[0])},u=function(e,t,n){var r,i,o,a=t.length>0&&t[0],c=a&&a.name;if(o=l(e,c))c===o?(i=t[0],t=t.slice(1)):i=o;else if(a)i=t[0],t=t.slice(1);else if(!n)return e;return i&&(r=s(i)).appendChild(e),n&&(r||(r=hS.create("div")).appendChild(e),Vn.each(n,function(t){var n=s(t);r.insertBefore(n,e)})),u(r,t,i&&i.siblings)};return e&&e.length?(r=e[0],n=s(r),(i=hS.create("div")).appendChild(u(n,e.slice(1),r.siblings)),i):""},mS=function(e,t){return pS(vS(e),t)},gS=function(e){var t,n={classes:[],attrs:{}};return"*"!==(e=n.selector=Vn.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,r,i,o){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==Vn.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===i){var a=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""})),n.name=t||"div",n},vS=function(e){return e&&"string"==typeof e?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Vn.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=Vn.map(e.split(/(?:~\+|~|\+)/),gS),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]},yS={getCssText:function(e,t){var n,r,i,o,a,s,l="";if(!1===(s=e.settings.preview_styles))return"";"string"!=typeof s&&(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var u=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}
return"preview"in t&&!1===(s=t.preview)?"":(n=t.block||t.inline||"span",(o=vS(t.selector)).length?(o[0].name||(o[0].name=n),n=t.selector,r=pS(o,e)):r=pS([n],e),i=hS.select(n,r)[0]||r.firstChild,fS(t.styles,function(e,t){(e=u(e))&&hS.setStyle(i,t,e)}),fS(t.attributes,function(e,t){(e=u(e))&&hS.setAttrib(i,t,e)}),fS(t.classes,function(e){e=u(e),hS.hasClass(i,e)||hS.addClass(i,e)}),e.fire("PreviewFormats"),hS.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),a=hS.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,fS(s.split(" "),function(t){var n=hS.getStyle(i,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=hS.getStyle(e.getBody(),t,!0),"#ffffff"===hS.toHex(n).toLowerCase())||"color"===t&&"#000000"===hS.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===a)return;n=(n=parseFloat(n)/(/%$/.test(n)?100:1))*a+"px"}"border"===t&&n&&(l+="padding:0 2px;"),l+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),hS.remove(r),l)},parseSelector:vS,selectorToHtml:mS},bS={toggle:function(e,t,n,r,i){var o=t.get(n);!Rm.match(e,n,r,i)||"toggle"in o[0]&&!o[0].toggle?aS.applyFormat(e,n,r,i):UC.remove(e,n,r,i)}},wS={setup:function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}},CS=function(e,t){return t},SS=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},i=0;i<t.length;i++){var o=t[i];for(var a in o)o.hasOwnProperty(a)&&(r[a]=e(r[a],o[a]))}return r}},xS=SS(function(e,t){return Oi.isObject(e)&&Oi.isObject(t)?xS(e,t):t}),kS=SS(CS),TS={deepMerge:xS,merge:kS},ES={firePreProcess:function(e,t){return e.fire("PreProcess",t)},firePostProcess:function(e,t){return e.fire("PostProcess",t)},fireRemove:function(e){return e.fire("remove")}},DS={register:function(e,t,n){e.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),e.addAttributeFilter("src,href,style",function(e,r){for(var i,o,a=e.length,s="data-mce-"+r,l=t.url_converter,u=t.url_converter_scope;a--;)(o=(i=e[a]).attributes.map[s])!==undefined?(i.attr(r,o.length>0?o:null),i.attr(s,null)):(o=i.attributes.map[r],"style"===r?o=n.serializeStyle(n.parseStyle(o),i.name):l&&(o=l.call(u,o,r,i.name)),i.attr(r,o.length>0?o:null))}),e.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)(n=(t=e[r]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),e.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,i=e.length;i--;)"bookmark"!==(r=e[i]).attributes.map["data-mce-type"]||n.cleanup||r.remove()}),e.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=is.decode(t.value))}),e.addNodeFilter("script,style",function(e,n){for(var r,i,o,a=e.length,s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};a--;)i=(r=e[a]).firstChild?r.firstChild.value:"","script"===n?((o=r.attr("type"))&&r.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===t.element_format&&i.length>0&&(r.firstChild.value="// <![CDATA[\n"+s(i)+"\n// ]]>")):"xhtml"===t.element_format&&i.length>0&&(r.firstChild.value="<!--\n"+s(i)+"\n-->")}),e.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),e.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.addAttributeFilter("data-mce-type",function(t){Ve.each(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})},trimTrailingBr:function(e){var t,n,r=function(e){return e&&"br"===e.name};r(t=e.lastChild)&&r(n=t.prev)&&(t.remove(),n.remove())}},NS=function(e,t,n){var r,i,o,a=e.dom;return t=t.cloneNode(!0),(r=document.implementation).createHTMLDocument&&(i=r.createHTMLDocument(""),Vn.each("BODY"===t.nodeName?t.childNodes:[t],function(e){i.body.appendChild(i.importNode(e,!0))}),t="BODY"!==t.nodeName?i.body.firstChild:i.body,o=a.doc,a.doc=i),ES.firePreProcess(e,TS.merge(n,{node:t})),o&&(a.doc=o),t},_S=function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events},RS={process:function(e,t,n){return _S(e,n)?NS(e,t,n):t}},AS=function(e,t){Ve.each(t,function(t){e.attr(t,null)})},LS=function(e,t,n){e.addNodeFilter("font",function(e){Ve.each(e,function(e){var r=t.parse(e.attr("style")),i=e.attr("color"),o=e.attr("face"),a=e.attr("size");i&&(r.color=i),o&&(r["font-family"]=o),a&&(r["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(r)),AS(e,["color","face","size"])})})},MS=function(e,t){e.addNodeFilter("strike",function(e){Ve.each(e,function(e){var n=t.parse(e.attr("style"));n["text-decoration"]="line-through",e.name="span",e.attr("style",t.serialize(n))})})},OS=function(e,t){var n=S();t.convert_fonts_to_spans&&LS(e,n,Vn.explode(t.font_size_legacy_values)),MS(e,n)},PS={register:function(e,t){t.inline_styles&&OS(e,t)}},IS=/^[ \t\r\n]*$/,HS={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},BS=function(e,t,n){var r,i,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(r=e[a])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[a])return r}},FS=function(){function e(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var r,i;if(r=new e(t,HS[t]||1),n)for(i in n)r.attr(i,n[i]);return r},e.prototype.replace=function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},e.prototype.attr=function(e,t){var n,r,i=this;if("string"!=typeof e){for(r in e)i.attr(r,e[r]);return i}if(n=i.attributes){if(t!==undefined){if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),i;return i}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,i}return n.map[e]}},e.prototype.clone=function(){var t,n,r,i,o,a=this,s=new e(a.name,a.type);if(r=a.attributes){for((o=[]).map={},t=0,n=r.length;t<n;t++)"id"!==(i=r[t]).name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value);s.attributes=o}return s.value=a.value,s.shortEnded=a.shortEnded,s},e.prototype.wrap=function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},e.prototype.unwrap=function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},e.prototype.remove=function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},e.prototype.append=function(e){var t,n=this;return e.parent&&e.remove(),(t=n.lastChild)?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},e.prototype.insert=function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},e.prototype.getAll=function(e){var t,n=this,r=[];for(t=n.firstChild;t;t=BS(t,n))t.name===e&&r.push(t);return r},e.prototype.empty=function(){var e,t,n,r=this;if(r.firstChild){for(e=[],n=r.firstChild;n;n=BS(n,r))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return r.firstChild=r.lastChild=null,r},e.prototype.isEmpty=function(e,t,n){var r,i,o=this,a=o.firstChild;if(t=t||{},a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(e[a.name])return!1;for(r=a.attributes.length;r--;)if("name"===(i=a.attributes[r].name)||0===i.indexOf("data-mce-bookmark"))return!1}if(8===a.type)return!1;if(3===a.type&&!IS.test(a.value))return!1;if(3===a.type&&a.parent&&t[a.parent.name]&&IS.test(a.value))return!1;if(n&&n(a))return!1}while(a=BS(a,o));return!0},e.prototype.walk=function(e){return BS(this,null,e)},e}(),WS=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new FS("br",1)).shortEnded=!0:r.empty().append(new FS("#text",3)).value="\xa0"},zS=function(e){return jS(e,"#text")&&"\xa0"===e.firstChild.value},jS=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},qS=function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty},VS=function(e,t,n,r){return r.isEmpty(t,n,function(t){return qS(e,t)})},US=function(e,t){return e&&(t[e.name]||"br"===e.name)},$S=function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",function(e,r,i){var o,a,s,l,u,c,d,f,h=e.length,p=Vn.extend({},n.getBlockElements()),m=n.getNonEmptyElements(),g=n.getNonEmptyElements();for(p.body=1,o=0;o<h;o++)if(a=e[o],s=a.parent,p[a.parent.name]&&a===s.lastChild){for(u=a.prev;u;){if("span"!==(c=u.name)||"bookmark"!==u.attr("data-mce-type")){if("br"!==c)break;if("br"===c){a=null;break}}u=u.prev}a&&(a.remove(),VS(n,m,g,s)&&(d=n.getElementRule(s.name))&&(d.removeEmpty?s.remove():d.paddEmpty&&WS(t,i,p,s)))}else{for(l=a;s&&s.firstChild===l&&s.lastChild===l&&(l=s,!p[s.name]);)s=s.parent;l===s&&!0!==t.padd_empty_with_br&&((f=new FS("#text",3)).value="\xa0",a.replace(f))}}),e.addAttributeFilter("href",function(e){var n,r=e.length,i=function(e){return e.split(" ").filter(function(e){return e.length>0}).concat(["noopener"]).sort().join(" ")},o=function(e){var t=e?Vn.trim(e):"";return/\b(noopener)\b/g.test(t)?t:i(t)};if(!t.allow_unsafe_link_target)for(;r--;)"a"===(n=e[r]).name&&"_blank"===n.attr("target")&&n.attr("rel",o(n.attr("rel")))}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,i,o=e.length;o--;)if("a"===(i=e[o]).name&&i.firstChild&&!i.attr("href")){r=i.parent,t=i.lastChild;do{n=t.prev,r.insert(t,i),t=n}while(t)}}),t.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)if(t=e[r],"ul"===(n=t.parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var i=new FS("li",1);i.attr("style","list-style-type: none"),t.wrap(i)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,r,i,o,a,s,l,u=e.length,c=n.getValidClasses();u--;){for(r=(t=e[u]).attr("class").split(" "),a="",i=0;i<r.length;i++)o=r[i],l=!1,(s=c["*"])&&s[o]&&(l=!0),s=c[t.name],!l&&s&&s[o]&&(l=!0),l&&(a&&(a+=" "),a+=o);a.length||(a=null),t.attr("class",a)}})},YS=Vn.makeMap,GS=Vn.each,XS=Vn.explode,KS=Vn.extend,ZS=function(e,t,n){-1===Vn.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},QS=function(e,t,n){if(!t.no_events&&e){return ES.firePostProcess(e,TS.merge(t,{content:n})).content}return n},JS=function(e,t,n){var r=Os.trim(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection?r:Vn.trim(r)},ex=function(e,t,n,r){var i=r.selection?TS.merge({forced_root_block:!1},r):r,o=e.parse(n,i);return DS.trimTrailingBr(o),o},tx=function(e,t,n){return E(e,t).serialize(n)},nx=function(e,t,n,r,i){var o=tx(t,n,r);return QS(e,i,o)},rx=function(e){return xh.descendant(Ci.fromDom(e.getBody()),"*[data-mce-caret]").fold(pe.constant(null),function(e){return e.dom()})},ix=function(e){e.selection.setRng(e.selection.getRng())},ox=function(e,t){t.hasAttribute("data-mce-caret")&&(Xs(t),ix(e),e.selection.scrollIntoView(t))},ax=function(e,t){var n=rx(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void ox(e,n)):void(Ws(n)&&ox(e,n))},sx={setup:function(e){e.on("keyup compositionstart",pe.curry(ax,e))}};(Z||(Z={})).isBookmarkNode=hf.isBookmarkNode;var lx=Z,ux=ja.isContentEditableFalse,cx=ja.isContentEditableTrue,dx=function(e,t){for(;t&&t!==e;){if(cx(t)||ux(t))return t;t=t.parentNode}return null},fx=function(e,t){var n,r,i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b=t.dom,w=Vn.each,C=t.getDoc(),S=document,x=Math.abs,k=Math.round,T=t.getBody();o={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var E=".mce-content-body";t.contentStyles.push(E+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+E+" .mce-resizehandle:hover {background: #000}"+E+" img[data-mce-selected],"+E+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+E+" .mce-clonedresizable {position: absolute;"+(it.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+E+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var D=function(e){return e&&("IMG"===e.nodeName||t.dom.is(e,"figure.image"))},N=function(e,t){return D(e.target)&&!$w.isXYWithinRange(e.clientX,e.clientY,t)},_=function(e){var n=e.target;N(e,t.selection.getRng())&&!e.isDefaultPrevented()&&(e.preventDefault(),t.selection.select(n))},R=function(e){return t.dom.is(e,"figure.image")?e.querySelector("img"):e},A=function(e){var n=t.settings.object_resizing;return!1!==n&&!it.iOS&&("string"!=typeof n&&(n="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&(e!==t.getBody()&&yo.is(Ci.fromDom(e),n)))},L=function(e){var o,w,C,S;o=e.screenX-s,w=e.screenY-l,m=o*a[2]+d,g=w*a[3]+f,m=m<5?5:m,g=g<5?5:g,(D(n)&&!1!==t.settings.resize_img_proportional?!Xw.modifierPressed(e):Xw.modifierPressed(e)||D(n)&&a[2]*a[3]!=0)&&(x(o)>x(w)?(g=k(m*h),m=k(g/h)):(m=k(g/h),g=k(m*h))),b.setStyles(R(r),{width:m,height:g}),C=a.startPos.x+o,S=a.startPos.y+w,C=C>0?C:0,S=S>0?S:0,b.setStyles(i,{left:C,top:S,display:"block"}),i.innerHTML=m+" &times; "+g,a[2]<0&&r.clientWidth<=m&&b.setStyle(r,"left",u+(d-m)),a[3]<0&&r.clientHeight<=g&&b.setStyle(r,"top",c+(f-g)),(o=T.scrollWidth-v)+(w=T.scrollHeight-y)!==0&&b.setStyles(i,{left:C-o,top:S-w}),p||(t.fire("ObjectResizeStart",{target:n,width:d,height:f}),p=!0)},M=function(){p=!1;var e=function(e,r){r&&(n.style[e]||!t.schema.isValid(n.nodeName.toLowerCase(),e)?b.setStyle(R(n),e,r):b.setAttrib(R(n),e,r))};e("width",m),e("height",g),b.unbind(C,"mousemove",L),b.unbind(C,"mouseup",M),S!==C&&(b.unbind(S,"mousemove",L),b.unbind(S,"mouseup",M)),b.remove(r),b.remove(i),O(n),t.fire("ObjectResized",{target:n,width:m,height:g}),b.setAttrib(n,"style",b.getAttrib(n,"style")),t.nodeChanged()},O=function(e){var p,x,k,E,D;P(),B(),p=b.getPos(e,T),u=p.x,c=p.y,D=e.getBoundingClientRect(),x=D.width||D.right-D.left,k=D.height||D.bottom-D.top,n!==e&&(n=e,m=g=0),E=t.fire("ObjectSelected",{target:e}),A(e)&&!E.isDefaultPrevented()?w(o,function(e,t){var o,p=function(t){s=t.screenX,l=t.screenY,d=R(n).clientWidth,f=R(n).clientHeight,h=f/d,a=e,e.startPos={x:x*e[0]+u,y:k*e[1]+c},v=T.scrollWidth,y=T.scrollHeight,r=n.cloneNode(!0),b.addClass(r,"mce-clonedresizable"),b.setAttrib(r,"data-mce-bogus","all"),r.contentEditable=!1,r.unSelectabe=!0,b.setStyles(r,{left:u,top:c,margin:0}),r.removeAttribute("data-mce-selected"),T.appendChild(r),b.bind(C,"mousemove",L),b.bind(C,"mouseup",M),S!==C&&(b.bind(S,"mousemove",L),b.bind(S,"mouseup",M)),i=b.add(T,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},d+" &times; "+f)};(o=b.get("mceResizeHandle"+t))&&b.remove(o),o=b.add(T,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),it.ie&&(o.contentEditable=!1),b.bind(o,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),p(e)}),e.elm=o,b.setStyles(o,{left:x*e[0]+u-o.offsetWidth/2,top:k*e[1]+c-o.offsetHeight/2})}):P(),n.setAttribute("data-mce-selected","1")},P=function(){var e,t;B(),n&&n.removeAttribute("data-mce-selected");for(e in o)(t=b.get("mceResizeHandle"+e))&&(b.unbind(t),b.remove(t))},I=function(n){var r,i,o=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};p||t.removed||(w(b.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),i="mousedown"===n.type?n.target:e.getNode(),o(i=b.$(i).closest("table,img,figure.image,hr")[0],T)&&(F(),r=e.getStart(!0),o(r,i)&&o(e.getEnd(!0),i))?O(i):P())},H=function(e){return ux(dx(t.getBody(),e))},B=function(){for(var e in o){var t=o[e];t.elm&&(b.unbind(t.elm),delete t.elm)}},F=function(){try{t.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}};t.on("init",function(){F(),it.ie&&it.ie>=11&&(t.on("mousedown click",function(e){var n=e.target,r=n.nodeName;p||!/^(TABLE|IMG|HR)$/.test(r)||H(n)||(2!==e.button&&t.selection.select(n,"TABLE"===r),"mousedown"===e.type&&t.nodeChanged())}),t.dom.bind(T,"mscontrolselect",function(e){var n=function(e){dt.setEditorTimeout(t,function(){t.selection.select(e)})};if(H(e.target))return e.preventDefault(),void n(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&n(e.target))}));var e=dt.throttle(function(e){t.composing||I(e)});t.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e),t.on("keyup compositionend",function(t){n&&"TABLE"===n.nodeName&&e(t)}),t.on("hide blur",P),t.on("contextmenu",_)}),t.on("remove",B);return{isResizable:A,showResizeRect:O,hideResizeRect:P,updateResizeRect:I,destroy:function(){n=r=null}}},hx=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},px=function(e,t,n){var r={elm:t,alignToTop:n};return e.fire("scrollIntoView",r),r.isDefaultPrevented()},mx={scrollIntoView:function(e,t,n){var r,i,o,a,s=e.dom,l=s.getRoot(),u=0;if(!px(e,t,n)&&ja.isElement(t)){if(!1===n&&(u=t.offsetHeight),"BODY"!==l.nodeName){var c=e.selection.getScrollContainer();if(c)return r=hx(t).y-hx(c).y+u,a=c.clientHeight,o=c.scrollTop,void((r<o||r+25>o+a)&&(c.scrollTop=r<o?r:r-a+25))}i=s.getViewPort(e.getWin()),r=s.getPos(t).y+u,o=i.y,a=i.h,(r<i.y||r+25>o+a)&&e.getWin().scrollTo(0,r<o?r:r-a+25)}}},gx=function(e){return ja.isContentEditableTrue(e)||ja.isContentEditableFalse(e)},vx=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},yx=function(e,t,n){var r,i,o;if(r=n.elementFromPoint(e,t),i=n.body.createTextRange(),r&&"HTML"!==r.tagName||(r=n.body),i.moveToElementText(r),o=Vn.toArray(i.getClientRects()),(o=o.sort(function(e,n){return e=Math.abs(Math.max(e.top-t,e.bottom-t)),n=Math.abs(Math.max(n.top-t,n.bottom-t)),e-n})).length>0){t=(o[0].bottom+o[0].top)/2;try{return i.moveToPoint(e,t),i.collapse(!0),i}catch(a){}}return null},bx=function(e,t){var n=e&&e.parentElement?e.parentElement():null;return ja.isContentEditableFalse(vx(n,t,gx))?null:e},wx={fromPoint:function(e,t,n){var r,i,o=n;if(o.caretPositionFromPoint)(i=o.caretPositionFromPoint(e,t))&&((r=n.createRange()).setStart(i.offsetNode,i.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(o.body.createTextRange){r=o.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(a){r=yx(e,t,n)}return bx(r,n.body)}return r}},Cx={processRanges:function(e,t){return Ve.map(t,function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t})}},Sx=function(e,t){return Ci.fromDom(e.dom().cloneNode(t))},xx=function(e){return Sx(e,!0)},kx=function(e,t){var n=Ci.fromTag(t),r=Yi.clone(e);return Yi.setAll(n,r),n},Tx={shallow:function(e){return Sx(e,!1)},shallowAs:kx,deep:xx,copy:function(e,t){var n=kx(e,t),r=Uo.children(xx(e));return Cf.append(n,r),n},mutate:function(e,t){var n=kx(e,t);wf.before(e,n);var r=Uo.children(e);return Cf.append(n,r),kf.remove(e),n}},Ex={fromElements:function(e,t){var n=(t||document).createDocumentFragment();return Ve.each(e,function(e){n.appendChild(e.dom())}),Ci.fromDom(n)}},Dx=function(e){var t=e.startContainer,n=e.startOffset;return ja.isText(t)?0===n?we.some(Ci.fromDom(t)):we.none():we.from(t.childNodes[n]).map(Ci.fromDom)},Nx=function(e){var t=e.endContainer,n=e.endOffset;return ja.isText(t)?n===t.data.length?we.some(Ci.fromDom(t)):we.none():we.from(t.childNodes[n-1]).map(Ci.fromDom)},_x=function(e){return Uo.firstChild(e).fold(pe.constant([e]),function(t){return[e].concat(_x(t))})},Rx=function(e){return Uo.lastChild(e).fold(pe.constant([e]),function(t){return"br"===Ai.name(t)?Uo.prevSibling(t).map(function(t){return[e].concat(Rx(t))}).getOr([]):[e].concat(Rx(t))})},Ax=function(e,t){return ku.liftN([Dx(t),Nx(t)],function(t,n){var r=Ve.find(_x(e),pe.curry(To.eq,t)),i=Ve.find(Rx(e),pe.curry(To.eq,n));return r.isSome()&&i.isSome()}).getOr(!1)},Lx=function(e,t,n,r){var i=n,o=new w(n,i),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==Vn.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(it.ie&&it.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?o.next():o.prev());"BODY"===i.nodeName&&(r?t.setStart(i,0):t.setEnd(i,i.childNodes.length))},Mx=uo.immutable("element","width","rows"),Ox=uo.immutable("element","cells"),Px=uo.immutable("x","y"),Ix=function(e,t){var n=parseInt(Yi.get(e,t),10);return isNaN(n)?1:n},Hx=function(e,t,n,r,i){for(var o=Ix(i,"rowspan"),a=Ix(i,"colspan"),s=e.rows(),l=n;l<n+o;l++){s[l]||(s[l]=Ox(Tx.deep(r),[]));for(var u=t;u<t+a;u++){s[l].cells()[u]=l===n&&u===t?i:Tx.shallow(i)}}},Bx=function(e,t,n){var r=e.rows();return!!(r[n]?r[n].cells():[])[t]},Fx=function(e,t,n){for(;Bx(e,t,n);)t++;return t},Wx=function(e){return Ve.foldl(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},zx=function(e,t){for(var n=e.rows(),r=0;r<n.length;r++)for(var i=n[r].cells(),o=0;o<i.length;o++)if(To.eq(i[o],t))return we.some(Px(o,r));return we.none()},jx=function(e,t,n,r,i){for(var o=[],a=e.rows(),s=n;s<=i;s++){var l=a[s].cells(),u=t<r?l.slice(t,r+1):l.slice(r,t+1);o.push(Ox(a[s].element(),u))}return o},qx=function(e,t,n){var r=t.x(),i=t.y(),o=n.x(),a=n.y(),s=i<a?jx(e,r,i,o,a):jx(e,r,a,o,i);return Mx(e.element(),Wx(s),s)},Vx=function(e,t){var n=Tx.shallow(e.element()),r=Ci.fromTag("tbody");return Cf.append(r,t),wf.append(n,r),n},Ux=function(e){return Ve.map(e.rows(),function(e){var t=Ve.map(e.cells(),function(e){var t=Tx.deep(e);return Yi.remove(t,"colspan"),Yi.remove(t,"rowspan"),t}),n=Tx.shallow(e.element());return Cf.append(n,t),n})},$x={fromDom:function(e){var t=Mx(Tx.shallow(e),0,[]);return Ve.each(Vu.descendants(e,"tr"),function(e,n){Ve.each(Vu.descendants(e,"td,th"),function(r,i){Hx(t,Fx(t,i,n),n,e,r)})}),Mx(t.element(),Wx(t.rows()),t.rows())},toDom:function(e){return Vx(e,Ux(e))},subsection:function(e,t,n){return zx(e,t).bind(function(t){return zx(e,n).map(function(n){return qx(e,t,n)})})}},Yx=function(e){return Ve.find(e,function(e){return"ul"===Ai.name(e)||"ol"===Ai.name(e)})},Gx=function(e,t){return Ve.find(e,function(e){return"li"===Ai.name(e)&&Ax(e,t)}).fold(pe.constant([]),function(){return Yx(e).map(function(e){return[Ci.fromTag("li"),Ci.fromTag(Ai.name(e))]}).getOr([])})},Xx=function(e,t){var n=Ve.foldl(t,function(e,t){return wf.append(t,e),t},e);return t.length>0?Ex.fromElements([n]):n},Kx=function(e){return Ca(e)?Uo.parent(e).filter(wa).fold(pe.constant([]),function(t){return[e,t]}):wa(e)?[e]:[]},Zx=function(e,t){var n=Ci.fromDom(t.commonAncestorContainer),r=$h.parentsAndSelf(n,e),i=Ve.filter(r,function(e){return va(e)||ma(e)}),o=Gx(r,t),a=i.concat(o.length?o:Kx(n));return Ve.map(a,Tx.shallow)},Qx=function(){return Ex.fromElements([])},Jx=function(e,t){return Xx(Ci.fromDom(t.cloneContents()),Zx(e,t))},ek=function(e,t){return xh.ancestor(t,"table",pe.curry(To.eq,e))},tk=function(e,t){return ek(e,t[0]).bind(function(e){var n=t[0],r=t[t.length-1],i=$x.fromDom(e);return $x.subsection(i,n,r).map(function(e){return Ex.fromElements([$x.toDom(e)])})}).getOrThunk(Qx)},nk=function(e,t){return t.length>0&&t[0].collapsed?Qx():Jx(e,t[0])},rk={read:function(e,t){var n=av.getCellsFromElementOrRanges(t,e);return n.length>0?tk(e,n):nk(e,t)}},ik={getContent:function(e,t){var n,r=e.selection.getRng(),i=e.dom.create("body"),o=e.selection.getSel(),a=Cx.processRanges(e,nv.getRanges(o));if(t=t||{},t.get=!0,t.format=t.format||"html",t.selection=!0,(t=e.fire("BeforeGetContent",t)).isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return e.selection.isCollapsed()?"":Os.trim(r.text||(o.toString?o.toString():""));r.cloneContents?(n=t.contextual?rk.read(Ci.fromDom(e.getBody()),a).dom():r.cloneContents())&&i.appendChild(n):r.item!==undefined||r.htmlText!==undefined?(i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),i.removeChild(i.firstChild)):i.innerHTML=r.toString(),t.getInner=!0;var s=e.selection.serializer.serialize(i,t);return"tree"===t.format?s:(t.content=e.selection.isCollapsed()?"":s,e.fire("GetContent",t),t.content)}},ok={setContent:function(e,t,n){var r,i,o,a=e.selection.getRng(),s=e.getDoc();if(n=n||{format:"html"},n.set=!0,n.selection=!0,n.content=t,n.no_events||!(n=e.fire("BeforeSetContent",n)).isDefaultPrevented()){if(t=n.content,a.insertNode){t+='<span id="__caret">_</span>',a.startContainer===s&&a.endContainer===s?s.body.innerHTML=t:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=t:a.createContextualFragment?a.insertNode(a.createContextualFragment(t)):(i=s.createDocumentFragment(),o=s.createElement("div"),i.appendChild(o),o.outerHTML=t,a.insertNode(i))),r=e.dom.get("__caret"),(a=s.createRange()).setStartBefore(r),a.setEndBefore(r),e.selection.setRng(a),e.dom.remove("__caret");try{e.selection.setRng(a)}catch(l){}}else a.item&&(s.execCommand("Delete",!1,null),a=e.getRng()),/^\s+/.test(t)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):a.pasteHTML(t);n.no_events||e.fire("SetContent",n)}else e.fire("SetContent",n)}},ak=function(e,t,n,r,i){var o=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return we.from(o).map(Ci.fromDom).map(function(e){return r&&t.collapsed?e:Uo.child(e,i(e,a)).getOr(e)}).bind(function(e){return Ai.isElement(e)?we.some(e):Uo.parent(e)}).map(function(e){return e.dom()}).getOr(e)},sk=function(e,t,n){return ak(e,t,!0,n,function(e,t){return Math.min(Uo.childNodesCount(e),t)})},lk=function(e,t,n){return ak(e,t,!1,n,function(e,t){return t>0?t-1:t})},uk=function(e,t){for(var n=e;e&&ja.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},ck=function(e,t){var n,r,i,o,a;return t?(r=t.startContainer,i=t.endContainer,o=t.startOffset,a=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(r===i&&a-o<2&&r.hasChildNodes()&&(n=r.childNodes[o]),3===r.nodeType&&3===i.nodeType&&(r=r.length===o?uk(r.nextSibling,!0):r.parentNode,i=0===a?uk(i.previousSibling,!1):i.parentNode,r&&r===i))?r:n&&3===n.nodeType?n.parentNode:n):e},dk=function(e,t,n,r){var i,o,a=[];if(o=e.getRoot(),n=e.getParent(n||sk(o,t,!1),e.isBlock),r=e.getParent(r||lk(o,t,!1),e.isBlock),n&&n!==o&&a.push(n),n&&r&&n!==r){i=n;for(var s=new w(n,o);(i=s.next())&&i!==r;)e.isBlock(i)&&a.push(i)}return r&&n!==r&&r!==o&&a.push(r),a},fk=function(e,t,n){return we.from(t).map(function(t){var r=e.nodeIndex(t),i=e.createRng();return i.setStart(t.parentNode,r),i.setEnd(t.parentNode,r+1),n&&(Lx(e,i,t,!0),Lx(e,i,t,!1)),i})},hk=Vn.each,pk=function(e){return!!e.select},mk=function(e){return!(!e||!e.ownerDocument)&&To.contains(Ci.fromDom(e.ownerDocument),Ci.fromDom(e))},gk=function(e){return!!e&&(!!pk(e)||mk(e.startContainer)&&mk(e.endContainer))},vk=function(e,t,n,r){var i,o,a,s,l,u=function(t,n){var i=e.createRng();t?(i.setStart(t,n),i.setEnd(t,n),y(i),m(!1)):(Lx(e,i,r.getBody(),!0),y(i))},c=function(e,t){return ok.setContent(r,e,t)},d=function(e){return sk(r.getBody(),v(),e)},f=function(e){return lk(r.getBody(),v(),e)},h=function(t,n){return fk(e,t,n).each(y),t},p=function(){var e=v(),t=g();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},m=function(e){var t=v();t.collapse(!!e),y(t)},g=function(){return t.getSelection?t.getSelection():t.document.selection},v=function(){var n,i,o,l,u=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(r){return-1}};if(!t)return null;if(void 0===(l=t.document)||null===l)return null;if(r.bookmark!==undefined&&!1===fb.hasFocus(r)){var c=Sy.getRng(r);if(c.isSome())return c.map(function(e){return Cx.processRanges(r,[e])[0]}).getOr(l.createRange())}try{(n=g())&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():l.createRange())}catch(d){}return(i=Cx.processRanges(r,[i])[0])||(i=l.createRange?l.createRange():l.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(o=e.getRoot(),i.setStart(o,0),i.setEnd(o,0)),a&&s&&(0===u(i.START_TO_START,i,a)&&0===u(i.END_TO_END,i,a)?i=s:(a=null,s=null)),i},y=function(e,t){var n,i,o;if(gk(e)){var l=pk(e)?e:null;if(l){s=null;try{l.select()}catch(u){}}else{if(n=g(),o=r.fire("SetSelectionRange",{range:e,forward:t}),e=o.range,n){s=e;try{n.removeAllRanges(),n.addRange(e)}catch(u){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),a=n.rangeCount>0?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||it.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(i=e.startContainer.childNodes[e.startOffset])&&"IMG"===i.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(i,0,i,1)),r.fire("AfterSetSelectionRange",{range:e,forward:t})}}},b=function(){var t,n,r=g();return!(r&&r.anchorNode&&r.focusNode)||((t=e.createRng()).setStart(r.anchorNode,r.anchorOffset),t.collapse(!0),(n=e.createRng()).setStart(r.focusNode,r.focusOffset),n.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,n)<=0)},w=function(){t=null,o.destroy()},C={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:m,setCursorLocation:u,getContent:function(e){return ik.getContent(r,e)},setContent:c,getBookmark:function(e,t){return i.getBookmark(e,t)},moveToBookmark:function(e){return i.moveToBookmark(e)},select:h,isCollapsed:p,isForward:b,setNode:function(t){return c(e.getOuterHTML(t)),t},getNode:function(){return ck(r.getBody(),v())},getSel:g,setRng:y,getRng:v,getStart:d,getEnd:f,getSelectedBlocks:function(t,n){return dk(e,v(),t,n)},normalize:function(){var t=v();if(!nv.hasMultipleRanges(g())){var n=Wv.normalize(e,t);return n.each(function(e){y(e,b())}),n.getOr(t)}return t},selectorChanged:function(t,n){var i;return l||(l={},i={},r.on("NodeChange",function(t){var n=t.element,r=e.getParents(n,null,e.getRoot()),o={};hk(l,function(t,n){hk(r,function(a){if(e.is(a,n))return i[n]||(hk(t,function(e){e(!0,{node:a,selector:n,parents:r})}),i[n]=t),o[n]=t,!1})}),hk(i,function(e,t){o[t]||(delete i[t],hk(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),l[t]||(l[t]=[]),l[t].push(n),C},getScrollContainer:function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(e,t){return mx.scrollIntoView(r,e,t)},placeCaretAt:function(e,t){return y(wx.fromPoint(e,t,r.getDoc()))},getBoundingClientRect:function(){var e=v();return e.collapsed?$l.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:w};return i=lx(C),o=fx(C,r),C.bookmarkManager=i,C.controlSelection=o,C},yk=ja.isContentEditableFalse,bk=yl,wk=Yc,Ck=$c,Sk=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},xk=function(e,t){var n=Oc(e,t);return!(n||!ja.isBr(e.getNode()))||n},kk=function(e,t,n,r){var i,o,a,s,l=e===Tu.Forwards,u=l?Ck:wk;return!r.collapsed&&(i=bk(r),yk(i))?bu(e,t,i,e===Tu.Backwards):(s=Ks(r),o=Uc(e,t.getBody(),r),u(o)?Cu(t,o.getNode(!l)):(o=n(o))?u(o)?bu(e,t,o.getNode(!l),l):(a=n(o),u(a)&&xk(o,a)?bu(e,t,a.getNode(!l),l):s?xu(t,o.toRange()):null):s?r:null)},Tk=function(e,t,n,r){var i,o,a,s,l,u,c,d,f;if(f=bk(r),i=Uc(e,t.getBody(),r),o=n(t.getBody(),Mw(1),i),a=An.filter(o,Ow(1)),l=An.last(i.getClientRects()),(Ck(i)||Gc(i))&&(f=i.getNode()),(wk(i)||Xc(i))&&(f=i.getNode(!0)),!l)return null;if(u=l.left,(s=Ww(a,u))&&yk(s.node))return c=Math.abs(u-s.left),d=Math.abs(u-s.right),bu(e,t,s.node,c<d);if(f){var h=Lw(e,t.getBody(),Mw(1),f);if(s=Ww(An.filter(h,Ow(1)),u))return xu(t,s.position.toRange());if(s=An.last(An.filter(h,Ow(0))))return xu(t,s.position.toRange())}},Ek=function(e){var t=e.dom.create(e.settings.forced_root_block);return(!it.ie||it.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t},Dk=function(e,t,n){var r,i,o=ld(e.getBody()),a=kl.curry(Sk,o.next),s=kl.curry(Sk,o.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(r=e.dom.getParent(n.startContainer,"PRE")))return;(1===t?a($l.fromRangeStart(n)):s($l.fromRangeStart(n)))||(i=Ek(e),1===t?e.$(r).after(i):e.$(r).before(i),e.selection.select(i,!0),e.selection.collapse())}},Nk=function(e,t){var n,r=ld(e.getBody()),i=kl.curry(Sk,r.next),o=kl.curry(Sk,r.prev),a=t?Tu.Forwards:Tu.Backwards,s=t?i:o,l=e.selection.getRng();return(n=kk(a,e,s,l))?n:(n=Dk(e,a,l))||null},_k=function(e,t){var n,r=t?1:-1,i=t?Aw:Rw,o=e.selection.getRng();return(n=Tk(r,e,i,o))?n:(n=Dk(e,r,o))||null},Rk=function(e,t){return function(){var n=Nk(e,t);return!!n&&(e.selection.setRng(n),!0)}},Ak=function(e,t){return function(){var n=_k(e,t);return!!n&&(e.selection.setRng(n),!0)}},Lk=function(e){return Ve.map(e,function(e){return TS.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:pe.noop},e)})},Mk=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey},Ok=function(e,t){return Ve.bind(Lk(e),function(e){return Mk(e,t)?[e]:[]})},Pk={match:Ok,action:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}},execute:function(e,t){return Ve.find(Ok(e,t),function(e){return e.action()})}},Ik=function(e,t,n){var r=gi.detect().os;Pk.execute([{keyCode:Xw.RIGHT,action:Rk(e,!0)},{keyCode:Xw.LEFT,action:Rk(e,!1)},{keyCode:Xw.UP,action:Ak(e,!1)},{keyCode:Xw.DOWN,action:Ak(e,!0)},{keyCode:Xw.RIGHT,action:hc(e,!0)},{keyCode:Xw.LEFT,action:hc(e,!1)},{keyCode:Xw.UP,action:pc(e,!1)},{keyCode:Xw.DOWN,action:pc(e,!0)},{keyCode:Xw.RIGHT,action:Lg.move(e,t,!0)},{keyCode:Xw.LEFT,action:Lg.move(e,t,!1)},{keyCode:Xw.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:Lg.moveNextWord(e,t)},{keyCode:Xw.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:Lg.movePrevWord(e,t)}],n).each(function(){n.preventDefault()})},Hk={setup:function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&Ik(e,t,n)})}},Bk=function(e,t){var n=$h.parentsAndSelf(t,e);return Ve.findIndex(n,ga).fold(pe.constant(n),function(e){return n.slice(0,e)})},Fk=function(e){return 1===Uo.children(e).length},Wk=function(e,t,n,r){var i=pe.curry(Xm.isFormatElement,t),o=Ve.map(Ve.filter(r,i),function(e){return e.dom()});if(0===o.length)Hp.deleteElement(t,e,n);else{var a=Xm.replaceWithCaretFormat(n.dom(),o);t.selection.setRng(a.toRange())}},zk=function(e,t){var n=Ci.fromDom(e.getBody()),r=Ci.fromDom(e.selection.getStart()),i=Ve.filter(Bk(n,r),Fk);return Ve.last(i).map(function(n){var r=$l.fromRangeStart(e.selection.getRng());return!!Ch.willDeleteLastPositionInElement(t,r,n.dom())&&(Wk(t,e,n,i),!0)}).getOr(!1)},jk={backspaceDelete:function(e,t){return!!e.selection.isCollapsed()&&zk(e,t)}},qk=function(e,t,n){Pk.execute([{keyCode:Xw.BACKSPACE,action:Pk.action(Up.backspaceDelete,e,!1)},{keyCode:Xw.DELETE,action:Pk.action(Up.backspaceDelete,e,!0)},{keyCode:Xw.BACKSPACE,action:Pk.action(Wg.backspaceDelete,e,t,!1)},{keyCode:Xw.DELETE,action:Pk.action(Wg.backspaceDelete,e,t,!0)},{keyCode:Xw.BACKSPACE,action:Pk.action(lp.backspaceDelete,e,!1)},{keyCode:Xw.DELETE,action:Pk.action(lp.backspaceDelete,e,!0)},{keyCode:Xw.BACKSPACE,action:Pk.action(tp.backspaceDelete,e,!1)},{keyCode:Xw.DELETE,action:Pk.action(tp.backspaceDelete,e,!0)},{keyCode:Xw.BACKSPACE,action:Pk.action(kv.backspaceDelete,e,!1)},{keyCode:Xw.DELETE,action:Pk.action(kv.backspaceDelete,e,!0)},{keyCode:Xw.BACKSPACE,action:Pk.action(jk.backspaceDelete,e,!1)},{keyCode:Xw.DELETE,action:Pk.action(jk.backspaceDelete,e,!0)}],n).each(function(){n.preventDefault()})},Vk=function(e,t){Pk.execute([{keyCode:Xw.BACKSPACE,action:Pk.action(Up.paddEmptyElement,e)},{keyCode:Xw.DELETE,action:Pk.action(Up.paddEmptyElement,e)}],t)},Uk={setup:function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&qk(e,t,n)}),e.on("keyup",function(t){!1===t.isDefaultPrevented()&&Vk(e,t)})}},$k=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var i=e.getParam(t,"","hash");return i.hasOwnProperty(e.id)?i[e.id]:n}return r},Yk={getIframeAttrs:function(e){return e.getParam("iframe_attrs",{})},getDocType:function(e){return e.getParam("doctype","<!DOCTYPE html>")},getDocumentBaseUrl:function(e){return e.getParam("document_base_url","")},getBodyId:function(e){return $k(e,"body_id","tinymce")},getBodyClass:function(e){return $k(e,"body_class","")},getContentSecurityPolicy:function(e){return e.getParam("content_security_policy","")},shouldPutBrInPre:function(e){return e.getParam("br_in_pre",!0)},getForcedRootBlock:function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},getForcedRootBlockAttrs:function(e){return e.getParam("forced_root_block_attrs",{})},getBrNewLineSelector:function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},getNoNewLineSelector:function(e){return e.getParam("no_newline_selector","")},shouldKeepStyles:function(e){return e.getParam("keep_styles",!0)},shouldEndContainerOnEmtpyBlock:function(e){return e.getParam("end_container_on_empty_block",!1)}},Gk=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},Xk=function(e){return we.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},Kk={moveToCaretPosition:function(e,t){var n,r,i,o,a=t,s=e.dom,l=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var u=Gk(t.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&t.insertBefore(s.doc.createTextNode("\xa0"),t.firstChild)}if(i=s.createRng(),t.normalize(),t.hasChildNodes()){for(n=new w(t,t);r=n.current();){if(ja.isText(r)){i.setStart(r,0),i.setEnd(r,0);break}if(l[r.nodeName.toLowerCase()]){i.setStartBefore(r),i.setEndBefore(r);break}a=r,r=n.next()}r||(i.setStart(a,0),i.setEnd(a,0))}else ja.isBr(t)?t.nextSibling&&s.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),s.remove(o),e.selection.scrollIntoView(t)}},getEditableRoot:function(e,t){var n,r,i=e.getRoot();for(n=t;n!==i&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i},getParentBlock:Xk,getParentBlockName:function(e){return Xk(e).fold(pe.constant(""),function(e){return e.nodeName.toUpperCase()})},isListItemParentBlock:function(e){return Xk(e).filter(function(e){return Ca(Ci.fromDom(e))}).isSome()}},Zk=function(e,t){return e.firstChild&&e.firstChild.nodeName===t},Qk=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},Jk=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},eT=function(e){return Jk(e)&&Jk(e.parentNode)},tT=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},nT=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!ja.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},rT={insert:function(e,t,n,r,i){var o=e.dom,a=e.selection.getRng();if(n!==e.getBody()){eT(n)&&(i="LI");var s=i?t(i):o.create("BR");if(nT(n,r,!0)&&nT(n,r,!1))Qk(n,"LI")?o.insertAfter(s,tT(n)):o.replace(s,n);else if(nT(n,r,!0))Qk(n,"LI")?(o.insertAfter(s,tT(n)),s.appendChild(o.doc.createTextNode(" ")),s.appendChild(n)):n.parentNode.insertBefore(s,n);else if(nT(n,r,!1))o.insertAfter(s,tT(n));else{n=tT(n);var l=a.cloneRange();l.setStartAfter(r),l.setEndAfter(n);var u=l.extractContents();"LI"===i&&Zk(u,"LI")?(s=u.firstChild,o.insertAfter(u,n)):(o.insertAfter(u,n),o.insertAfter(s,n))}o.remove(r),Kk.moveToCaretPosition(e,s)}}},iT=function(e){return e&&"A"===e.nodeName&&0===Vn.trim(Os.trim(e.innerText||e.textContent)).length},oT=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},aT=function(e){e.innerHTML='<br data-mce-bogus="1">'},sT=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},lT=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},uT=function(e,t,n){var r,i=n,o=[];if(i){for(;i=i.firstChild;){if(e.isBlock(i))return;ja.isElement(i)&&!t[i.nodeName.toLowerCase()]&&o.push(i)}for(r=o.length;r--;)!(i=o[r]).hasChildNodes()||i.firstChild===i.lastChild&&""===i.firstChild.nodeValue?e.remove(i):iT(i)&&e.remove(i)}},cT=function(e,t,n){return!1===ja.isText(t)?n:e?1===n&&t.data.charAt(n-1)===Os.ZWSP?0:n:n===t.data.length-1&&t.data.charAt(n)===Os.ZWSP?t.data.length:n},dT=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,cT(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,cT(!1,e.endContainer,e.endOffset)),t},fT=function(e){do{ja.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)},hT=function(e,t){var n,r,i=e.getRoot();for(n=t;n!==i&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i},pT=function(e,t){var n=Yk.getForcedRootBlock(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,Yk.getForcedRootBlockAttrs(e))},mT=function(e,t,n,r,i){var o,a,s,l,u,c,d=t||"P",f=e.dom,h=hT(f,r);if(!(a=f.getParent(r,f.isBlock))||!lT(f,a)){if(a=a||h,c=a===e.getBody()||oT(a)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return o=f.create(d),pT(e,o),a.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o;for(l=r;l.parentNode!==a;)l=l.parentNode;for(;l&&!f.isBlock(l);)s=l,l=l.previousSibling;if(s&&e.schema.isValidChild(c,d.toLowerCase())){for(o=f.create(d),pT(e,o),s.parentNode.insertBefore(o,s),l=s;l&&!f.isBlock(l);)u=l.nextSibling,o.appendChild(l),l=u;n.setStart(r,i),n.setEnd(r,i)}}return r},gT=function(e,t){var n;t.normalize(),(n=t.lastChild)&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")},vT={insert:function(e,t){var n,r,i,o,a,s,l,u,c,d,f,h,p,m=e.dom,g=e.schema,v=g.getNonEmptyElements(),y=e.selection.getRng(),b=function(t){var n,o,s,l=i,u=g.getTextInlineElements();if(t||"TABLE"===d||"HR"===d?(n=m.create(t||h),pT(e,n)):n=a.cloneNode(!1),s=n,!1===Yk.shouldKeepStyles(e))m.setAttrib(n,"style",null),m.setAttrib(n,"class",null);else do{if(u[l.nodeName]){if(Xm.isCaretNode(l))continue;o=l.cloneNode(!1),m.setAttrib(o,"id",""),n.hasChildNodes()?(o.appendChild(n.firstChild),n.appendChild(o)):(s=o,n.appendChild(o))}}while((l=l.parentNode)&&l!==r);return aT(s),n},C=function(e){var t,n,r,s;if(s=cT(e,i,o),ja.isText(i)&&(e?s>0:s<i.nodeValue.length))return!1;if(i.parentNode===a&&p&&!e)return!0;if(e&&ja.isElement(i)&&i===a.firstChild)return!0;if(sT(i,"TABLE")||sT(i,"HR"))return p&&!e||!p&&e;for(t=new w(i,a),ja.isText(i)&&(e&&0===s?t.prev():e||s!==i.nodeValue.length||t.next());n=t.current();){if(ja.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),v[r]&&"br"!==r))return!1}else if(ja.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},S=function(){l=/^(H[1-6]|PRE|FIGURE)$/.test(d)&&"HGROUP"!==f?b(h):b(),Yk.shouldEndContainerOnEmtpyBlock(e)&&lT(m,c)&&m.isEmpty(a)?l=m.split(c,a):m.insertAfter(l,a),Kk.moveToCaretPosition(e,l)};Wv.normalize(m,y).each(function(e){y.setStart(e.startContainer,e.startOffset),y.setEnd(e.endContainer,e.endOffset)}),i=y.startContainer,o=y.startOffset,h=Yk.getForcedRootBlock(e),s=t.shiftKey,ja.isElement(i)&&i.hasChildNodes()&&(p=o>i.childNodes.length-1,i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i,o=p&&ja.isText(i)?i.nodeValue.length:0),(r=hT(m,i))&&((h&&!s||!h&&s)&&(i=mT(e,h,y,i,o)),a=m.getParent(i,m.isBlock),c=a?m.getParent(a.parentNode,m.isBlock):null,d=a?a.nodeName.toUpperCase():"","LI"!==(f=c?c.nodeName.toUpperCase():"")||t.ctrlKey||(a=c,c=c.parentNode,d=f),/^(LI|DT|DD)$/.test(d)&&m.isEmpty(a)?rT.insert(e,b,c,a,h):h&&a===e.getBody()||(h=h||"P",Hs(a)?(l=Xs(a),m.isEmpty(a)&&aT(a),Kk.moveToCaretPosition(e,l)):C()?S():C(!0)?(l=a.parentNode.insertBefore(b(),a),Kk.moveToCaretPosition(e,sT(a,"HR")?l:a)):((n=dT(y).cloneRange()).setEndAfter(a),u=n.extractContents(),fT(u),l=u.firstChild,m.insertAfter(u,a),uT(m,v,l),gT(m,a),m.isEmpty(a)&&aT(a),l.normalize(),m.isEmpty(l)?(m.remove(l),S()):Kk.moveToCaretPosition(e,l)),m.setAttrib(l,"id",""),e.fire("NewBlock",{newBlock:l})))}},yT=function(e,t){return Kk.getParentBlock(e).filter(function(e){return t.length>0&&yo.is(Ci.fromDom(e),t)}).isSome()},bT={shouldInsertBr:function(e){return yT(e,Yk.getBrNewLineSelector(e))},shouldBlockNewLine:function(e){return yT(e,Yk.getNoNewLineSelector(e))}},wT=up.generate([{br:[]},{block:[]},{none:[]}]),CT=function(e){return bT.shouldBlockNewLine(e)},ST=function(e){return function(t){return""===Yk.getForcedRootBlock(t)===e}},xT=function(e){return function(t){return Kk.isListItemParentBlock(t)===e}},kT=function(e){return function(t){return"PRE"===Kk.getParentBlockName(t)===e}},TT=function(e){return function(t){return Yk.shouldPutBrInPre(t)===e}},ET=function(e){return bT.shouldInsertBr(e)},DT=function(e,t){return t},NT=function(e){var t=Yk.getForcedRootBlock(e),n=Kk.getEditableRoot(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},_T=function(e,t){return function(n,r){return Ve.foldl(e,function(e,t){return e&&t(n,r)},!0)?we.some(t):we.none()}},RT={getAction:function(e,t){return Km.evaluateUntil([_T([CT],wT.none()),_T([kT(!0),TT(!1),DT],wT.br()),_T([kT(!0),TT(!1)],wT.block()),_T([kT(!0),TT(!0),DT],wT.block()),_T([kT(!0),TT(!0)],wT.br()),_T([xT(!0),DT],wT.br()),_T([xT(!0)],wT.block()),_T([ST(!0),DT,NT],wT.block()),_T([ST(!0)],wT.br()),_T([ET],wT.br()),_T([ST(!1),DT],wT.br()),_T([NT],wT.block())],[e,t.shiftKey]).getOr(wT.none())}},AT={insert:function(e,t){RT.getAction(e,t).fold(function(){Jv.insert(e,t)},function(){vT.insert(e,t)},pe.noop)}},LT=function(e){e.typing&&(e.typing=!1,e.add())},MT=function(e,t){t.isDefaultPrevented()||(t.preventDefault(),LT(e.undoManager),e.undoManager.transact(function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete"),AT.insert(e,t)}))},OT={setup:function(e){e.on("keydown",function(t){t.keyCode===Xw.ENTER&&MT(e,t)})}},PT=function(e,t){return FT(e)&&ja.isText(t.container())},IT=function(e,t){var n=t.container(),r=t.offset();n.insertData(r,"\xa0"),e.selection.setCursorLocation(n,r+1)},HT=function(e,t,n){return!!PT(n,t)&&(IT(e,t),!0)},BT=function(e){var t=pe.curry(yh.isInlineTarget,e),n=$l.fromRangeStart(e.selection.getRng());return vg.readLocation(t,e.getBody(),n).map(pe.curry(HT,e,n)).getOr(!1)},FT=function(e){return e.fold(pe.constant(!1),pe.constant(!0),pe.constant(!0),pe.constant(!1))},WT={insertAtSelection:function(e){return!!e.selection.isCollapsed()&&BT(e)}},zT=function(e,t){Pk.execute([{keyCode:Xw.SPACEBAR,action:Pk.action(WT.insertAtSelection,e)}],t).each(function(){t.preventDefault()})},jT={setup:function(e){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&zT(e,t)})}},qT={setup:function(e){var t=Lg.setupSelectedState(e);Hk.setup(e,t),Uk.setup(e,t),OT.setup(e),jT.setup(e)}},VT=Ts.DOM,UT=function(e,t){var n=Ci.fromDom(e.getDoc().head),r=Ci.fromTag("style");Yi.set(r,"type","text/css"),wf.append(r,Ci.fromText(t)),wf.append(n,r)},$T=function(e){var t=G(e.settings,e.schema);return t.addAttributeFilter("src,href,style,tabindex",function(t,n){for(var r,i,o,a=t.length,s=e.dom;a--;)if(r=t[a],i=r.attr(n),o="data-mce-"+n,!r.attributes.map[o]){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===n?((i=s.serializeStyle(s.parseStyle(i),r.name)).length||(i=null),r.attr(o,i),r.attr(n,i)):"tabindex"===n?(r.attr(o,i),r.attr(n,null)):r.attr(o,e.convertURL(i,n,r.name))}}),t.addNodeFilter("script",function(e){for(var t,n,r=e.length;r--;)0!==(n=(t=e[r]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)}),t.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n,r=t.length,i=e.schema.getNonEmptyElements();r--;)(n=t[r]).isEmpty(i)&&0===n.getAll("br").length&&(n.append(new FS("br",1)).shortEnded=!0)}),t},YT=function(e){e.settings.auto_focus&&dt.setEditorTimeout(e,function(){var t;(t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus)).destroyed||t.focus()},100)},GT=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),YT(e)},XT=function(e){return e.inline?VT.styleSheetLoader:e.dom.styleSheetLoader},KT={initContentBody:function(e,t){var n,r,i=e.settings,o=e.getElement(),a=e.getDoc();i.inline||(e.getElement().style.visibility=e.orgVisibility),t||i.content_editable||(a.open(),a.write(e.iframeHTML),a.close()),i.content_editable&&(e.on("remove",function(){var e=this.getBody();VT.removeClass(e,"mce-content-body"),VT.removeClass(e,"mce-edit-focus"),VT.setAttrib(e,"contentEditable",null)}),VT.addClass(o,"mce-content-body"),e.contentDocument=a=i.content_document||document,e.contentWindow=i.content_window||window,e.bodyElement=o,i.content_document=i.content_window=null,i.root_name=o.nodeName.toLowerCase()),(n=e.getBody()).disabled=!0,e.readonly=i.readonly,e.readonly||(e.inline&&"static"===VT.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=e.getParam("content_editable_state",!0)),n.disabled=!1,e.editorUpload=j(e),e.schema=C(i),e.dom=new Ts(a,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:i.force_hex_style_colors,class_filter:i.class_filter,update_styles:!0,root_element:e.inline?e.getBody():null,collect:i.content_editable,schema:e.schema,onSetAttrib:function(t){e.fire("SetAttrib",t)}}),e.parser=$T(e),e.serializer=K(i,e),e.selection=vk(e.dom,e.getWin(),e.serializer,e),e.formatter=Y(e),e.undoManager=U(e),e._nodeChangeDispatcher=new q(e),e._selectionOverrides=eC(e),sx.setup(e),qT.setup(e),Xb.setup(e),e.fire("PreInit"),i.browser_spellcheck||i.gecko_spellcheck||(a.body.spellcheck=!1,VT.setAttrib(n,"spellcheck","false")),e.quirks=Q(e),e.fire("PostRender"),i.directionality&&(n.dir=i.directionality),i.nowrap&&(n.style.whiteSpace="nowrap"),i.protect&&e.on("BeforeSetContent",function(e){Vn.each(i.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),i.padd_empty_editor&&e.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.on("compositionstart compositionend",function(t){e.composing="compositionstart"===t.type}),e.contentStyles.length>0&&(r="",Vn.each(e.contentStyles,function(e){r+=e+"\r\n"}),e.dom.addStyle(r)),XT(e).loadAll(e.contentCSS,function(){GT(e)},function(){GT(e)}),i.content_style&&UT(e,i.content_style)}},ZT=Ts.DOM,QT=function(e,t){if(document.domain!==window.location.hostname&&it.ie&&it.ie<12){var n=qb.uuid("mce");e[n]=function(){KT.initContentBody(e)};var r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return ZT.setAttrib(t,"src",r),!0}return!1},JT=function(e){var t="number"==typeof e?e+"px":e;return t||""},eE=function(e,t,n,r){var i=Ci.fromTag("iframe");return Yi.setAll(i,r),Yi.setAll(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),ao.setAll(i,{width:"100%",height:JT(n),display:"block"}),i},tE=function(e){var t,n,r;return r=Yk.getDocType(e)+"<html><head>",Yk.getDocumentBaseUrl(e)!==e.documentBaseUrl&&(r+='<base href="'+e.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',t=Yk.getBodyId(e),n=Yk.getBodyClass(e),Yk.getContentSecurityPolicy(e)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+Yk.getContentSecurityPolicy(e)+'" />'),r+='</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>'},nE=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),r=eE(e.id,n,t.height,Yk.getIframeAttrs(e)).dom();r.onload=function(){r.onload=null,e.fire("load")};var i=QT(e,r);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=tE(e),ZT.add(t.iframeContainer,r),i},rE={init:function(e,t){var n=nE(e,t);t.editorContainer&&(ZT.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=ZT.isHidden(t.editorContainer)),e.getElement().style.display="none",ZT.setAttrib(e.id,"aria-hidden",!0),n||KT.initContentBody(e)}},iE=Ts.DOM,oE=function(e,t,n){var r,i,o=Rb.get(n);if(r=Rb.urls[n]||e.documentBaseUrl.replace(/\/$/,""),n=Vn.trim(n),o&&-1===Vn.inArray(t,n)){if(Vn.each(Rb.dependencies(n),function(n){oE(e,t,n)}),e.plugins[n])return;i=new o(e,r,e.$),e.plugins[n]=i,i.init&&(i.init(e,r),t.push(n))}},aE=function(e){return e.replace(/^\-/,"")},sE=function(e){var t=[];Vn.each(e.settings.plugins.split(/[ ,]/),function(n){oE(e,t,aE(n))})},lE=function(e){var t,n=e.settings.theme;Oi.isString(n)?(e.settings.theme=aE(n),t=Ab.get(n),e.theme=new t(e,Ab.urls[n]),e.theme.init&&e.theme.init(e,Ab.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme={}},uE=function(e){var t,n,r,i,o,a=e.settings,s=e.getElement();return t=a.width||iE.getStyle(s,"width")||"100%",n=a.height||iE.getStyle(s,"height")||s.offsetHeight,r=a.min_height||100,(i=/^[0-9\.]+(|px)$/i).test(""+t)&&(t=Math.max(parseInt(t,10),100)),i.test(""+n)&&(n=Math.max(parseInt(n,10),r)),o=e.theme.renderUI({targetNode:s,width:t,height:n,deltaWidth:a.delta_width,deltaHeight:a.delta_height}),a.content_editable||(n=(o.iframeHeight||n)+("number"==typeof n?o.deltaHeight||0:""))<r&&(n=r),o.height=n,o},cE=function(e){var t,n=e.getElement();return(t=e.settings.theme(e,n)).editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||e.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"),t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight,t},dE=function(e){return{editorContainer:e,iframeContainer:e}},fE=function(e){var t=iE.create("div");return iE.insertAfter(t,e),dE(t)},hE=function(e){var t=e.getElement();return e.inline?dE(null):fE(t)},pE=function(e){var t=e.settings,n=e.getElement();return e.orgDisplay=n.style.display,Oi.isString(t.theme)?uE(e):Oi.isFunction(t.theme)?cE(e):hE(e)},mE={init:function(e){var t,n=e.settings,r=e.getElement();return e.rtl=n.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(n.language),n.aria_label=n.aria_label||iE.getAttrib(r,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),lE(e),sE(e),t=pE(e),e.editorContainer=t.editorContainer?t.editorContainer:null,n.content_css&&Vn.each(Vn.explode(n.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))}),n.content_editable?KT.initContentBody(e):rE.init(e,t)}},gE=Ts.DOM,vE=function(e){return"-"===e.charAt(0)},yE=function(e,t){var n=t.settings;n.language&&"en"!==n.language&&!n.language_url&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&!t.editorManager.i18n.data[n.language]&&e.add(n.language_url)},bE=function(e,t,n,r){var i=t.settings,o=i.theme;if(Oi.isString(o)){if(!vE(o)&&!Ab.urls.hasOwnProperty(o)){var a=i.theme_url;a?Ab.load(o,t.documentBaseURI.toAbsolute(a)):Ab.load(o,"themes/"+o+"/theme"+n+".js")}e.loadQueue(function(){Ab.waitFor(o,r)})}else r()},wE=function(e,t){Vn.isArray(e.plugins)&&(e.plugins=e.plugins.join(" ")),Vn.each(e.external_plugins,function(t,n){Rb.load(n,t),e.plugins+=" "+n}),Vn.each(e.plugins.split(/[ ,]/),function(e){if((e=Vn.trim(e))&&!Rb.urls[e])if(vE(e)){e=e.substr(1,e.length);var n=Rb.dependencies(e);Vn.each(n,function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=Rb.createUrl(n,e),Rb.load(e.resource,e)})}else Rb.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})})},CE=function(e,t){var n=Rs.ScriptLoader;bE(n,e,t,function(){yE(n,e),wE(e.settings,t),n.loadQueue(function(){e.removed||mE.init(e)},e,function(t){_b.pluginLoadError(e,t[0]),e.removed||mE.init(e)})})},SE={render:function(e){var t=e.settings,n=e.id,r=function(){gE.unbind(window,"ready",r),e.render()};if(xt.Event.domLoaded){if(e.getElement()&&it.contentEditable){t.inline?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var i=e.getElement().form||gE.getParent(n,"form");i&&(e.formElement=i,t.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&(gE.insertAfter(gE.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},gE.bind(i,"submit reset",e.formEventDelegate),e.on("reset",function(){e.setContent(e.startContent,{format:"raw"})}),!t.submit_patch||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),i._mceOldSubmit(i)})),e.windowManager=M(e),e.notificationManager=A(e),"xml"===t.encoding&&e.on("GetContent",function(e){e.save&&(e.content=gE.encode(e.content))}),t.add_form_submit_trigger&&e.on("submit",function(){e.initialized&&e.save()}),t.add_unload_trigger&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),CE(e,e.suffix)}}else gE.bind(window,"ready",r)}},xE={add:function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r}},kE=Vn.each,TE=Vn.trim,EE="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),DE={ftp:21,http:80,https:443,mailto:25},NE=function(e,t){var n,r,i=this;if(e=TE(e),t=i.settings=t||{},n=t.base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))i.source=e;else{var o=0===e.indexOf("//");0!==e.indexOf("/")||o||(e=(n?n.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(r=t.base_uri?t.base_uri.path:new NE(document.location.href).directory,""==t.base_uri.protocol?e="//mce_host"+i.toAbsPath(r,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(n&&n.protocol||"http")+"://mce_host"+i.toAbsPath(r,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),kE(EE,function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),i[t]=r}),n&&(i.protocol||(i.protocol=n.protocol),i.userInfo||(i.userInfo=n.userInfo),i.port||"mce_host"!==i.host||(i.port=n.port),i.host&&"mce_host"!==i.host||(i.host=n.host),i.source=""),o&&(i.protocol="")}};NE.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;if("./"===e)return e;if("mce_host"!==(e=new NE(e,{base_uri:n})).host&&n.host!==e.host&&e.host||n.port!==e.port||n.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var r=n.getURI(),i=e.getURI();return r===i||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===i?r:(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new NE(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=DE[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,i,o=0,a="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(r=0,i=e.length;r<i;r++)if(r>=n.length||e[r]!==n[r]){o=r+1;break}if(e.length<n.length)for(r=0,i=n.length;r<i;r++)if(r>=e.length||e[r]!==n[r]){o=r+1;break}if(1===o)return t;for(r=0,i=e.length-(o-1);r<i;r++)a+="../";for(r=o-1,i=n.length;r<i;r++)a+=r!==o-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var n,r,i,o=0,a=[];for(r=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),kE(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];n>=0;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?o>0?o--:a.push(t[n]):o++);return n=e.length-o,0!==(i=n<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/")).indexOf("/")&&(i="/"+i),r&&i.lastIndexOf("/")!==i.length-1&&(i+=r),i},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(n.protocol?t+=n.protocol+"://":t+="//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},NE.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},NE.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var _E=function(e,t){t(e),e.firstChild&&_E(e.firstChild,t),e.next&&_E(e.next,t)},RE=function(e,t,n){var r={},i={},o=[];n.firstChild&&_E(n.firstChild,function(n){Ve.each(e,function(e){e.name===n.name&&(r[e.name]?r[e.name].nodes.push(n):r[e.name]={filter:e,nodes:[n]})}),Ve.each(t,function(e){"string"==typeof n.attr(e.name)&&(i[e.name]?i[e.name].nodes.push(n):i[e.name]={filter:e,nodes:[n]})})});for(var a in r)r.hasOwnProperty(a)&&o.push(r[a]);for(var s in i)i.hasOwnProperty(s)&&o.push(i[s]);return o},AE=function(e,t,n){var r=RE(e,t,n);Ve.each(r,function(e){Ve.each(e.filter.callbacks,function(t){t(e.nodes,e.filter.name,{})})})},LE="html",ME=function(e){return e instanceof FS},OE=function(e,t,n){var r,i,o=e.getBody();return 0===t.length||/^\s+$/.test(t)?(i='<br data-mce-bogus="1">',"TABLE"===o.nodeName?t="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(o.nodeName)&&(t="<li>"+i+"</li>"),(r=e.settings.forced_root_block)&&e.schema.isValidChild(o.nodeName.toLowerCase(),r.toLowerCase())?(t=i,t=e.dom.createHTML(r,e.settings.forced_root_block_attrs,t)):t||(t='<br data-mce-bogus="1">'),e.dom.setHTML(o,t),e.fire("SetContent",n)):("raw"!==n.format&&(t=E({validate:e.validate},e.schema).serialize(e.parser.parse(t,{isRootContent:!0,insert:!0}))),n.content=Vn.trim(t),e.dom.setHTML(o,n.content),n.no_events||e.fire("SetContent",n)),n.content},PE=function(e,t,n){AE(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),t);var r=E({validate:e.validate},e.schema).serialize(t);return n.content=Vn.trim(r),e.dom.setHTML(e.getBody(),n.content),n.no_events||e.fire("SetContent",n),t},IE=function(e,t,n){return void 0===n&&(n={}),n.format=n.format?n.format:LE,n.set=!0,n.content=ME(t)?"":t,ME(t)||n.no_events||(e.fire("BeforeSetContent",n),t=n.content),ME(t)?PE(e,t,n):OE(e,t,n)},HE=function(e,t){void 0===t&&(t={});var n,r=e.getBody();if(e.removed)return"";if(t.format=t.format?t.format:LE,t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)n=Vn.trim(lC.trimExternal(e.serializer,r.innerHTML));else if("text"===t.format)n=r.innerText||r.textContent;else{if("tree"===t.format)return e.serializer.serialize(r,t);n=e.serializer.serialize(r,t)}return"text"!==t.format?t.content=Vn.trim(n):t.content=n,t.no_events||e.fire("GetContent",t),t.content},BE=Ts.DOM,FE=function(e){e.orgDisplay&&BE.setStyle(e.id,"display",e.orgDisplay)},WE=function(e){return we.from(e).each(function(e){return e.destroy()})},zE=function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},jE=function(e){var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),BE.unbind(t,"submit reset",e.formEventDelegate))},qE=function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),i=e.getElement();r&&e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&i&&BE.remove(i.nextSibling),!e.inline&&r&&FE(e),ES.fireRemove(e),e.editorManager.remove(e),BE.remove(e.getContainer()),WE(t),WE(n),e.destroy()}},VE=function(e,t){var n=e.selection,r=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),WE(n),WE(r)),jE(e),zE(e),e.destroyed=1):e.remove())},UE=Ts.DOM,$E=Vn.extend,YE=Vn.each,GE=Vn.resolve,XE=it.ie,KE=function(e,t,n){var r,i,o=this;r=o.documentBaseUrl=n.documentBaseURL,i=n.baseURI,t=lh(o,e,r,n.defaultSettings,t),o.settings=t,Ls.language=t.language||"en",Ls.languageLoad=t.language_load,Ls.baseURL=n.baseURL,o.id=e,o.setDirty(!1),o.plugins={},o.documentBaseURI=new NE(t.document_base_url,{base_uri:i}),o.baseURI=i,o.contentCSS=[],o.contentStyles=[],o.shortcuts=new _(o),o.loadedCSS={},o.editorCommands=new N(o),o.suffix=n.suffix,o.editorManager=n,o.inline=t.inline,o.buttons={},o.menuItems={},t.cache_suffix&&(it.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(it.overrideViewPort=!1),n.fire("SetupEditor",{editor:o}),o.execCallback("setup",o),o.$=cr.overrideDefaults(function(){return{context:o.inline?o.getBody():o.getDoc(),element:o.getBody()}})};KE.prototype={render:function(){SE.render(this)},focus:function(e){fb.focus(this,e)},execCallback:function(e){var t,n=this,r=n.settings[e];if(r)return n.callbackLookup&&(t=n.callbackLookup[e])&&(r=t.func,t=t.scope),"string"==typeof r&&(t=(t=r.replace(/\.\w+$/,""))?GE(t):0,r=GE(r),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:r,scope:t}),r.apply(t||n,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&Vn.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(t!==undefined?t:"{#"+e+"}")},getParam:function(e,t,n){return fh(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&"undefined"==typeof t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),n.buttons=n.buttons,t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return xE.add(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems,n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:qb.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(UE.show(e.getContainer()),UE.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(XE&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(UE.hide(e.getContainer()),UE.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this,r=n.getElement();return n.removed?"":r?(e=e||{},e.load=!0,t=n.setContent(r.value!==undefined?r.value:r.innerHTML,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=r=null,t):void 0},save:function(e){var t,n,r=this,i=r.getElement();if(i&&r.initialized&&!r.removed)return e=e||{},e.save=!0,e.element=i,t=e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(i.nodeName)?i.value=t:(r.inline||(i.innerHTML=t),(n=UE.getParent(r.id,"form"))&&YE(n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=i=null,!1!==e.set_dirty&&r.setDirty(!1),t},setContent:function(e,t){return IE(this,e,t)},getContent:function(e){return HE(this,e)},insertContent:function(e,t){t&&(e=$E({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){$y.setMode(this,e)},getContainer:function(){var e=this;return e.container||(e.container=UE.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=UE.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.iframeElement)&&(t.contentWindow=e.contentWindow),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin())&&(t.contentDocument=e.document),t.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var t,n=this,r=n.settings,i=n.dom;e=e||n.getBody(),n.hasVisual===undefined&&(n.hasVisual=r.visual),YE(i.select("table,a",e),function(e){var o;switch(e.nodeName){case"TABLE":return t=r.visual_table_class||"mce-item-table",void((o=i.getAttrib(e,"border"))&&"0"!==o||!n.hasVisual?i.removeClass(e,t):i.addClass(e,t));case"A":return void(i.getAttrib(e,"href",!1)||(o=i.getAttrib(e,"name")||e.id,t=r.visual_anchor_class||"mce-item-anchor",o&&n.hasVisual?i.addClass(e,t):i.removeClass(e,t)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){qE(this)},destroy:function(e){VE(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},$E(KE.prototype,jy);var ZE,QE,JE,eD={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}},tD=function(e){return"nodechange"===e.type&&e.selectionChange},nD=function(e,t){var n=function(){t.throttle()};Ts.DOM.bind(document,"mouseup",n),e.on("remove",function(){Ts.DOM.unbind(document,"mouseup",n)})},rD=function(e){e.on("focusout",function(){Sy.store(e)})},iD=function(e,t){e.on("mouseup touchend",function(){t.throttle()})},oD=function(e,t){var n=gi.detect().browser;n.isIE()||n.isEdge()?rD(e):iD(e,t),e.on("keyup nodechange",function(t){tD(t)||Sy.store(e)})},aD={register:function(e){var t=Yw.first(function(){Sy.store(e)},0);e.inline&&nD(e,t),e.on("init",function(){oD(e,t)}),e.on("remove",function(){t.cancel()})}},sD=Ts.DOM,lD=function(e){return eD.isEditorUIElement(e)},uD=function(e,t){var n=e?e.settings.custom_ui_selector:"";return null!==sD.getParent(t,function(t){return lD(t)||!!n&&e.dom.is(t,n)})},cD=function(){try{return document.activeElement}catch(e){return document.body}},dD=function(e,t){var n=t.editor;aD.register(n),n.on("focusin",function(){var t=this,n=e.focusedEditor;n!==t&&(n&&n.fire("blur",{focusedEditor:t}),e.setActive(t),e.focusedEditor=t,t.fire("focus",{blurredEditor:n}),t.focus(!0))}),n.on("focusout",function(){var t=this;dt.setEditorTimeout(t,function(){var n=e.focusedEditor;uD(t,cD())||n!==t||(t.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),ZE||(ZE=function(t){var n,r=e.activeEditor;n=t.target,r&&n.ownerDocument===document&&(n===document.body||uD(r,n)||e.focusedEditor!==r||(r.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},sD.bind(document,"focusin",ZE))},fD=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(sD.unbind(document,"focusin",ZE),ZE=null)},hD={setup:function(e){e.on("AddEditor",pe.curry(dD,e)),e.on("RemoveEditor",pe.curry(fD,e))},isEditorUIElement:lD,isUIElement:uD},pD={},mD="en",gD={setCode:function(e){e&&(mD=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return mD},rtl:!1,add:function(e,t){var n=pD[e];n||(pD[e]=n={});for(var r in t)n[r]=t[r];this.setCode(e)},translate:function(e){var t=pD[mD]||{},n=function(e){return Vn.is(e,"function")?Object.prototype.toString.call(e):r(e)?"":""+e},r=function(e){return""===e||null===e||Vn.is(e,"undefined")},i=function(e){return e=n(e),Vn.hasOwn(t,e)?n(t[e]):e};if(r(e))return"";if(Vn.is(e,"object")&&Vn.hasOwn(e,"raw"))return n(e.raw);if(Vn.is(e,"array")){var o=e.slice(1);e=i(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return Vn.hasOwn(o,t)?n(o[t]):e})}return i(e).replace(/{context:\w+}$/,"")},data:pD},vD=Ts.DOM,yD=Vn.explode,bD=Vn.each,wD=Vn.extend,CD=0,SD=!1,xD=[],kD=[],TD=function(e){return"length"!==e},ED=function(e){bD(JE.get(),function(t){"scroll"===e.type?t.fire("ScrollWindow",e):t.fire("ResizeWindow",e)})},DD=function(e){e!==SD&&(e?cr(window).on("resize scroll",ED):cr(window).off("resize scroll",ED),SD=e)},ND=function(e){var t=kD;delete xD[e.id];for(var n=0;n<xD.length;n++)if(xD[n]===e){xD.splice(n,1);break}return kD=Ve.filter(kD,function(t){return e!==t}),JE.activeEditor===e&&(JE.activeEditor=kD.length>0?kD[0]:null),JE.focusedEditor===e&&(JE.focusedEditor=null),t.length!==kD.length},_D=function(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(ND(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e};wD(JE={defaultSettings:{},$:cr,majorVersion:"4",minorVersion:"7.7",releaseDate:"2018-02-19",editors:xD,i18n:gD,activeEditor:null,settings:{},setup:function(){var e,t,n,r,i=this,o="";if(t=NE.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,o=n.suffix;else{for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var l=(r=a[s].src).substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){-1!==l.indexOf(".min")&&(o=".min"),e=r.substring(0,r.lastIndexOf("/"));break}}!e&&document.currentScript&&(-1!==(r=document.currentScript.src).indexOf(".min")&&(o=".min"),e=r.substring(0,r.lastIndexOf("/")))}i.baseURL=new NE(t).toAbsolute(e),i.documentBaseURL=t,i.baseURI=new NE(i.baseURL),i.suffix=o,hD.setup(i)},overrideDefaults:function(e){var t,n;(t=e.base_url)&&(this.baseURL=new NE(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new NE(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n),this.defaultSettings=e;var r=e.plugin_base_urls;for(var i in r)Ls.PluginManager.urls[i]=r[i]},init:function(e){var t,n,r=this;n=Vn.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var i=function(e,t){return e.inline&&t.tagName.toLowerCase()in n},o=function(e){var t=e.id;return t||(t=(t=e.name)&&!vD.get(t)?e.name:vD.uniqueId(),e.setAttribute("id",t)),t},a=function(t){var n=e[t];if(n)return n.apply(r,Array.prototype.slice.call(arguments,2))},s=function(e,t){return t.constructor===RegExp?t.test(e.className):vD.hasClass(e,t)},l=function(e){var t,n=[];if(it.ie&&it.ie<11)return _b.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(e.types)return bD(e.types,function(e){n=n.concat(vD.select(e.selector))}),n;if(e.selector)return vD.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":(t=e.elements||"").length>0&&bD(yD(t),function(e){var t;(t=vD.get(e))?n.push(t):bD(document.forms,function(t){bD(t.elements,function(t){t.name===e&&(e="mce_editor_"+CD++,vD.setAttrib(t,"id",e),n.push(t))})})});break;case"textareas":case"specific_textareas":bD(vD.select("textarea"),function(t){e.editor_deselector&&s(t,e.editor_deselector)||e.editor_selector&&!s(t,e.editor_selector)||n.push(t)})}return n},u=function(e){t=e},c=function(){var t,n=0,s=[],d=function(e,i,o){var a=new KE(e,i,r);s.push(a),a.on("init",function(){++n===t.length&&u(s)}),a.targetElm=a.targetElm||o,a.render()};vD.unbind(window,"ready",c),a("onpageload"),t=cr.unique(l(e)),e.types?bD(e.types,function(n){Vn.each(t,function(t){return!vD.is(t,n.selector)||(d(o(t),wD({},e,n),t),!1)})}):(Vn.each(t,function(e){_D(r.get(e.id))}),0===(t=Vn.grep(t,function(e){return!r.get(e.id)})).length?u([]):bD(t,function(t){i(e,t)?_b.initError("Could not initialize inline editor on invalid inline target element",t):d(o(t),e,t)}))};return r.settings=e,vD.bind(window,"ready",c),new at(function(e){t?e(t):u=function(t){e(t)}})},get:function(e){return 0===arguments.length?kD.slice(0):Oi.isString(e)?Ve.find(kD,function(t){return t.id===e}).getOr(null):Oi.isNumber(e)&&kD[e]?kD[e]:null},add:function(e){var t=this;return xD[e.id]===e?e:(null===t.get(e.id)&&(TD(e.id)&&(xD[e.id]=e),xD.push(e),kD.push(e)),DD(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),QE||(QE=function(){t.fire("BeforeUnload")},vD.bind(window,"beforeunload",QE)),e)},createEditor:function(e,t){return this.add(new KE(e,t,this))},remove:function(e){var t,n,r=this;if(e)return Oi.isString(e)?(e=e.selector||e,void bD(vD.select(e),function(e){(n=r.get(e.id))&&r.remove(n)})):(n=e,Oi.isNull(r.get(n.id))?null:(ND(n)&&r.fire("RemoveEditor",{editor:n}),0===kD.length&&vD.unbind(window,"beforeunload",QE),n.remove(),DD(kD.length>0),n));for(t=kD.length-1;t>=0;t--)r.remove(kD[t])},execCommand:function(e,t,n){var r=this,i=r.get(n);switch(e){case"mceAddEditor":return r.get(n)||new KE(n,r.settings,r).render(),!0;case"mceRemoveEditor":return i&&i.remove(),!0;case"mceToggleEditor":return i?(i.isHidden()?i.show():i.hide(),!0):(r.execCommand("mceAddEditor",0,n),!0)}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:function(){bD(kD,function(e){e.save()})},addI18n:function(e,t){gD.add(e,t)},translate:function(e){return gD.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},Hy),JE.setup();var RD=JE;!function(e){e.compareRanges=Dv.isEq,e.getCaretRangeFromPoint=wx.fromPoint,e.getSelectedNode=yl,e.getNode=bl}(J||(J={}));var AD,LD,MD=J,OD=Math.min,PD=Math.max,ID=Math.round,HD=function(e,t,n){var r,i,o,a,s,l;return r=t.x,i=t.y,o=e.w,a=e.h,s=t.w,l=t.h,"b"===(n=(n||"").split(""))[0]&&(i+=l),"r"===n[1]&&(r+=s),"c"===n[0]&&(i+=ID(l/2)),"c"===n[1]&&(r+=ID(s/2)),"b"===n[3]&&(i-=a),"r"===n[4]&&(r-=o),"c"===n[3]&&(i-=ID(a/2)),"c"===n[4]&&(r-=ID(o/2)),zD(r,i,o,a)},BD=function(e,t,n){return zD(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},FD=function(e,t){var n,r,i,o;return n=PD(e.x,t.x),r=PD(e.y,t.y),i=OD(e.x+e.w,t.x+t.w),o=OD(e.y+e.h,t.y+t.h),i-n<0||o-r<0?null:zD(n,r,i-n,o-r)},WD=function(e,t,n){var r,i,o,a,s,l,u,c,d,f;return s=e.x,l=e.y,u=e.x+e.w,c=e.y+e.h,d=t.x+t.w,f=t.y+t.h,r=PD(0,t.x-s),i=PD(0,t.y-l),o=PD(0,u-d),a=PD(0,c-f),s+=r,l+=i,n&&(u+=r,c+=i,s-=o,l-=a),u-=o,c-=a,zD(s,l,u-s,c-l)},zD=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},jD={inflate:BD,relativePosition:HD,findBestRelativePosition:function(e,t,n,r){var i,o;for(o=0;o<r.length;o++)if((i=HD(e,t,r[o])).x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o];return null},intersect:FD,clamp:WD,create:zD,fromClientRect:function(e){return zD(e.left,e.top,e.width,e.height)}},qD={},VD={add:function(e,t){qD[e.toLowerCase()]=t},has:function(e){return!!qD[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=qD.hasOwnProperty(t)?qD[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"==typeof e?(t=t||{}).type=e:e=(t=e).type,e=e.toLowerCase(),!(n=qD[e]))throw new Error("Could not find control by type: "+e);return n=new n(t),n.type=e,n}},UD=Vn.each,$D=Vn.extend,YD=function(){};YD.extend=AD=function(e){var t,n,r,i=this,o=i.prototype,a=function(){var e,t,n,r=this;if(!LD&&(r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(r,arguments)},s=function(){return this},l=function(e,t){return function(){var n,r=this,i=r._super;return r._super=o[e],n=t.apply(r,arguments),r._super=i,n}};LD=!0,t=new i,LD=!1,e.Mixins&&(UD(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),o.Mixins&&(e.Mixins=o.Mixins.concat(e.Mixins))),e.Methods&&UD(e.Methods.split(","),function(t){e[t]=s}),e.Properties&&UD(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this;return e!==undefined?(t[n]=e,t):t[n]}}),e.Statics&&UD(e.Statics,function(e,t){a[t]=e}),e.Defaults&&o.Defaults&&(e.Defaults=$D({},o.Defaults,e.Defaults));for(n in e)"function"==typeof(r=e[n])&&o[n]?t[n]=l(n,r):t[n]=r;return a.prototype=t,a.constructor=a,a.extend=AD,a};var GD=Math.min,XD=Math.max,KD=Math.round,ZD=function(e){var t={},n=0,r=0,i=0,o=function(e,t,n){var r,i,o,a,s,l;return r=0,i=0,o=0,e/=255,t/=255,n/=255,s=GD(e,GD(t,n)),l=XD(e,XD(t,n)),s===l?(o=s,{h:0,s:0,v:100*o}):(a=e===s?t-n:n===s?e-t:n-e,r=e===s?3:n===s?1:5,r=60*(r-a/(l-s)),i=(l-s)/l,o=l,{h:KD(r),s:KD(100*i),v:KD(100*o)})},a=function(e,t,o){var a,s,l,u;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,o=parseInt(o,10)/100,t=XD(0,GD(t,1)),o=XD(0,GD(o,1)),0!==t){switch(a=e/60,s=o*t,l=s*(1-Math.abs(a%2-1)),u=o-s,Math.floor(a)){case 0:n=s,r=l,i=0;break;case 1:n=l,r=s,i=0;break;case 2:n=0,r=s,i=l;break;case 3:n=0,r=l,i=s;break;case 4:n=l,r=0,i=s;break;case 5:n=s,r=0,i=l;break;default:n=r=i=0}n=KD(255*(n+u)),r=KD(255*(r+u)),i=KD(255*(i+u))}else n=r=i=KD(255*o)},s=function(){var e=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+e(n)+e(r)+e(i)},l=function(){return{r:n,g:r,b:i}},u=function(){return o(n,r,i)},c=function(e){var o;return"object"==typeof e?"r"in e?(n=e.r,r=e.g,i=e.b):"v"in e&&a(e.h,e.s,e.v):(o=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(o[1],10),r=parseInt(o[2],10),i=parseInt(o[3],10)):(o=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(o[1],16),r=parseInt(o[2],16),i=parseInt(o[3],16)):(o=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(o[1]+o[1],16),r=parseInt(o[2]+o[2],16),i=parseInt(o[3]+o[3],16)),n=n<0?0:n>255?255:n,r=r<0?0:r>255?255:r,i=i<0?0:i>255?255:i,t};return e&&c(e),t.toRgb=l,t.toHsv=u,t.toHex=s,t.parse=c,t},QD=function(e,t){var n,r,i,o;if(t=t||'"',null===e)return"null";if("string"==(i=typeof e))return r="\bb\tt\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,i){return'"'===t&&"'"===e?e:(n=r.indexOf(i))+1?"\\"+r.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+t;if("object"===i){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,r="[";n<e.length;n++)r+=(n>0?",":"")+QD(e[n],t);return r+"]"}r="{";for(o in e)e.hasOwnProperty(o)&&(r+="function"!=typeof e[o]?(r.length>1?","+t:t)+o+t+":"+QD(e[o],t):"");return r+"}"}return""+e},JD={serialize:QD,parse:function(e){try{return JSON.parse(e)}catch(t){}}},eN={callbacks:{},count:0,send:function(e){var t=this,n=Ts.DOM,r=e.count!==undefined?e.count:t.count,i="tinymce_jsonp_"+r;t.callbacks[r]=function(o){n.remove(i),delete t.callbacks[r],e.callback(o)},n.add(n.doc.body,"script",{id:i,src:e.url,type:"text/javascript"}),t.count++}},tN={send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||n++>1e4?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",tN.fire("beforeInitialize",{settings:e}),t=new O){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&Vn.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=tN.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();setTimeout(r,10)}}};Vn.extend(tN,Hy);var nN=Vn.extend,rN=function(e){this.settings=nN({},e),this.count=0};rN.sendRPC=function(e){return(new rN).send(e)},rN.prototype={send:function(e){var t=e.error,n=e.success;(e=nN(this.settings,e)).success=function(r,i){void 0===(r=JD.parse(r))&&(r={error:"JSON Parse error."}),r.error?t.call(e.error_scope||e.scope,r.error,i):n.call(e.success_scope||e.scope,r.result)},e.error=function(n,r){t&&t.call(e.error_scope||e.scope,n,r)},e.data=JD.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),e.content_type="application/json",tN.send(e)}};var iN=window.localStorage,oN=RD,aN={geom:{Rect:jD},util:{Promise:at,Delay:dt,Tools:Vn,VK:Xw,URI:NE,Class:YD,EventDispatcher:My,Observable:Hy,I18n:gD,XHR:tN,JSON:JD,JSONRequest:rN,JSONP:eN,LocalStorage:iN,Color:ZD},dom:{EventUtils:xt,Sizzle:Dn,DomQuery:cr,TreeWalker:w,DOMUtils:Ts,ScriptLoader:Rs,RangeUtils:MD,Serializer:K,ControlSelection:fx,BookmarkManager:lx,Selection:vk,Event:xt.Event},html:{Styles:S,Entities:is,Node:FS,Schema:C,SaxParser:oC,DomParser:G,Writer:T,Serializer:E},ui:{Factory:VD},Env:it,AddOnManager:Ls,Formatter:Y,UndoManager:U,EditorCommands:N,WindowManager:M,NotificationManager:A,EditorObservable:jy,Shortcuts:_,Editor:KE,FocusManager:eD,EditorManager:RD,DOM:Ts.DOM,ScriptLoader:Rs.ScriptLoader,PluginManager:Ls.PluginManager,ThemeManager:Ls.ThemeManager,trim:Vn.trim,isArray:Vn.isArray,is:Vn.is,toArray:Vn.toArray,makeMap:Vn.makeMap,each:Vn.each,map:Vn.map,grep:Vn.grep,inArray:Vn.inArray,extend:Vn.extend,create:Vn.create,walk:Vn.walk,createNS:Vn.createNS,resolve:Vn.resolve,explode:Vn.explode,_addCacheSuffix:Vn._addCacheSuffix,isOpera:it.opera,isWebKit:it.webkit,isIE:it.ie,isGecko:it.gecko,isMac:it.mac},sN=oN=Vn.extend(oN,aN),lN=function(e){if("object"==typeof module)try{module.exports=e}catch(t){}};(function(e){window.tinymce=e,window.tinyMCE=e})(sN),lN(sN)}(),function(){var e,t,n,r,i,o=[];i="undefined"!=typeof global?global:window;var a=function(){return i.tinymce};(r=i.jQuery).fn.tinymce=function(e){var l,u,c,d=this,f="";if(!d.length)return d;if(!e)return a()?a().get(d[0].id):null;d.css("visibility","hidden");var h=function(){var t=[],i=0;n||(s(),n=!0),d.each(function(n,r){var o,s=r.id,l=e.oninit;s||(r.id=s=a().DOM.uniqueId()),a().get(s)||(o=a().createEditor(s,e),t.push(o),o.on("init",function(){var e,n=l;d.css("visibility",""),l&&++i==t.length&&("string"==typeof n&&(e=-1===n.indexOf(".")?null:a().resolve(n.replace(/\.\w+$/,"")),n=a().resolve(n)),n.apply(e||a(),t))}))}),r.each(t,function(e,t){t.render()})};if(i.tinymce||t||!(l=e.script_url))1===t?o.push(h):h();else{t=1,u=l.substring(0,l.lastIndexOf("/")),-1!=l.indexOf(".min")&&(f=".min"),i.tinymce=i.tinyMCEPreInit||{base:u,suffix:f},-1!=l.indexOf("gzip")&&(c=e.language||"en",l=l+(/\?/.test(l)?"&":"?")+"js=true&core=true&suffix="+escape(f)+"&themes="+escape(e.theme||"modern")+"&plugins="+escape(e.plugins||"")+"&languages="+(c||""),i.tinyMCE_GZ||(i.tinyMCE_GZ={start:function(){var t=function(e){a().ScriptLoader.markDone(a().baseURI.toAbsolute(e))};t("langs/"+c+".js"),t("themes/"+e.theme+"/theme"+f+".js"),t("themes/"+e.theme+"/langs/"+c+".js"),r.each(e.plugins.split(","),function(e,n){n&&(t("plugins/"+n+"/plugin"+f+".js"),t("plugins/"+n+"/langs/"+c+".js"))})},end:function(){}}));var p=document.createElement("script");p.type="text/javascript",p.onload=p.onreadystatechange=function(n){n=n||window.event,2===t||"load"!=n.type&&!/complete|loaded/.test(p.readyState)||(a().dom.Event.domLoaded=1,t=2,e.script_loaded&&e.script_loaded(),h(),r.each(o,function(e,t){t()}))},p.src=l,document.body.appendChild(p)}return d},r.extend(r.expr[":"],{tinymce:function(e){var t;return!!(e.id&&"tinymce"in i&&(t=a().get(e.id))&&t.editorManager===a())}});var s=function(){var t=function(e){"remove"===e&&this.each(function(e,t){var n=o(t);n&&n.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(e,t){var n=a().get(t.id.replace(/_parent$/,""));n&&n.remove()})},n=function(e){var n,r=this;if(null!=e)t.call(r),r.each(function(t,n){var r;(r=a().get(n.id))&&r.setContent(e)});else if(r.length>0&&(n=a().get(r[0].id)))return n.getContent()},o=function(e){var t=null;return e&&e.id&&i.tinymce&&(t=a().get(e.id)),t},s=function(e){return!!(e&&e.length&&i.tinymce&&e.is(":tinymce"))},l={};r.each(["text","html","val"],function(t,i){var a=l[i]=r.fn[i],u="text"===i;r.fn[i]=function(t){var i=this;if(!s(i))return a.apply(i,arguments);if(t!==e)return n.call(i.filter(":tinymce"),t),a.apply(i.not(":tinymce"),arguments),i;var l="",c=arguments;return(u?i:i.eq(0)).each(function(e,t){var n=o(t);l+=n?u?n.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):n.getContent({save:!0}):a.apply(r(t),c)}),l}}),r.each(["append","prepend"],function(t,n){var i=l[n]=r.fn[n],a="prepend"===n;r.fn[n]=function(t){var n=this;return s(n)?t!==e?("string"==typeof t&&n.filter(":tinymce").each(function(e,n){var r=o(n);r&&r.setContent(a?t+r.getContent():r.getContent()+t)}),i.apply(n.not(":tinymce"),arguments),n):void 0:i.apply(n,arguments)}}),r.each(["remove","replaceWith","replaceAll","empty"],function(e,n){var i=l[n]=r.fn[n];r.fn[n]=function(){return t.call(this,n),i.apply(this,arguments)}}),l.attr=r.fn.attr,r.fn.attr=function(t,i){var a=this,u=arguments;if(!t||"value"!==t||!s(a))return l.attr.apply(a,u);if(i!==e)return n.call(a.filter(":tinymce"),i),l.attr.apply(a.not(":tinymce"),u),a;var c=a[0],d=o(c);return d?d.getContent({save:!0}):l.attr.apply(r(c),u)}}}();var TinyMCEActivator={editor:null,activated:!1,selector:"textarea.tinymce",height:300,activate:function(){$(this.selector).length>0&&(tinyMCE.remove(),this.editor=tinyMCE.init({selector:this.selector,toolbar:["styleselect | bold italic | undo redo, image | link | code"],plugins:"image,link,code,preview,table,fullpage",menubar:"edit insert format table tools",valid_elements:"+*[*]",extended_valid_elements:"+*[*]",valid_children:"+*[*]",element_format:"html",cleanup:!1,auto_focus:"comment_content",init_instance_callback:function(){setTimeout(function(){tinyMCE.get()[0].focus()},300)}}),this.activated=!0)}};!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return mr.apply(null,arguments)}function t(e){mr=e}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){var t;for(t in e)return!1;return!0}function o(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function a(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function s(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function c(e,t,n,r){return vt(e,t,n,r,!0).utc()}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function f(e){return null==e._pf&&(e._pf=d()),e._pf}function h(e){if(null==e._isValid){var t=f(e),n=gr.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&t.bigHour===undefined),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function p(e){var t=c(NaN);return null!=e?u(f(t),e):f(t).userInvalidated=!0,t}function m(e){return void 0===e}function g(e,t){var n,r,i;if(m(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),m(t._i)||(e._i=t._i),m(t._f)||(e._f=t._f),m(t._l)||(e._l=t._l),m(t._strict)||(e._strict=t._strict),m(t._tzm)||(e._tzm=t._tzm),m(t._isUTC)||(e._isUTC=t._isUTC),m(t._offset)||(e._offset=t._offset),m(t._pf)||(e._pf=f(t)),m(t._locale)||(e._locale=t._locale),vr.length>0)for(n in vr)m(i=t[r=vr[n]])||(e[r]=i);return e}function v(t){g(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===yr&&(yr=!0,e.updateOffset(this),yr=!1)}function y(e){return e instanceof v||null!=e&&null!=e._isAMomentObject}function b(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function w(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=b(t)),n}function C(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&w(e[r])!==w(t[r]))&&a++;return a+o}function S(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function x(t,n){var r=!0;return u(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),r){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){i+="\n["+a+"] ";for(var s in arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}S(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function k(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),br[t]||(S(n),br[t]=!0)}function T(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function E(e){var t,n;for(n in e)T(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function D(e,t){var n,i=u({},e);for(n in t)l(t,n)&&(r(e[n])&&r(t[n])?(i[n]={},u(i[n],e[n]),u(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)l(e,n)&&!l(t,n)&&r(e[n])&&(i[n]=u({},i[n]));return i}function N(e){null!=e&&this.set(e)}function _(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return T(r)?r.call(t,n):r}function R(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function A(){return this._invalidDate}function L(e){return this._ordinal.replace("%d",e)}function M(e,t,n,r){var i=this._relativeTime[n];return T(i)?i(e,t,n,r):i.replace(/%d/i,e)}function O(e,t){var n=this._relativeTime[e>0?"future":"past"];return T(n)?n(t):n.replace(/%s/i,t)}function P(e,t){var n=e.toLowerCase();Dr[n]=Dr[n+"s"]=Dr[t]=e}function I(e){return"string"==typeof e?Dr[e]||Dr[e.toLowerCase()]:undefined}function H(e){var t,n,r={};for(n in e)l(e,n)&&(t=I(n))&&(r[t]=e[n]);return r}function B(e,t){Nr[e]=t}function F(e){var t=[];for(var n in e)t.push({unit:n,priority:Nr[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function W(t,n){return function(r){return null!=r?(j(this,t,r),e.updateOffset(this,n),this):z(this,t)}}function z(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function j(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function q(e){return e=I(e),T(this[e])?this[e]():this}function V(e,t){if("object"==typeof e)for(var n=F(e=H(e)),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit]);else if(e=I(e),T(this[e]))return this[e](t);return this}function U(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function $(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(Lr[e]=i),t&&(Lr[t[0]]=function(){return U(i.apply(this,arguments),t[1],t[2])}),n&&(Lr[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function Y(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function G(e){var t,n,r=e.match(_r);for(t=0,n=r.length;t<n;t++)Lr[r[t]]?r[t]=Lr[r[t]]:r[t]=Y(r[t]);return function(t){var i,o="";for(i=0;i<n;i++)o+=r[i]instanceof Function?r[i].call(t,e):r[i];return o}}function X(e,t){return e.isValid()?(t=K(t,e.localeData()),Ar[t]=Ar[t]||G(t),Ar[t](e)):e.localeData().invalidDate()}function K(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Rr.lastIndex=0;r>=0&&Rr.test(e);)e=e.replace(Rr,n),Rr.lastIndex=0,r-=1;return e}function Z(e,t,n){Kr[e]=T(t)?t:function(e){return e&&n?n:t}}function Q(e,t){return l(Kr,e)?Kr[e](t._strict,t._locale):new RegExp(J(e))}function J(e){return ee(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function ee(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function te(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),o(t)&&(r=function(e,n){n[t]=w(e)}),n=0;n<e.length;n++)Zr[e[n]]=r}function ne(e,t){te(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function re(e,t,n){null!=t&&l(Zr,e)&&Zr[e](t,n._a,n,e)}function ie(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function oe(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||li).test(t)?"format":"standalone"][e.month()]:this._months}function ae(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[li.test(t)?"format":"standalone"][e.month()]:this._monthsShort}function se(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=c([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=si.call(this._shortMonthsParse,a))?i:null:-1!==(i=si.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=si.call(this._shortMonthsParse,a))?i:-1!==(i=si.call(this._longMonthsParse,a))?i:null:-1!==(i=si.call(this._longMonthsParse,a))?i:-1!==(i=si.call(this._shortMonthsParse,a))?i:null}function le(e,t,n){var r,i,o;if(this._monthsParseExact)return se.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=c([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ue(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=w(t);else if(t=e.localeData().monthsParse(t),!o(t))return e;return n=Math.min(e.date(),ie(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ce(t){return null!=t?(ue(this,t),e.updateOffset(this,!0),this):z(this,"Month")}function de(){return ie(this.year(),this.month())}function fe(e){return this._monthsParseExact?(l(this,"_monthsRegex")||pe.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=di),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function he(e){return this._monthsParseExact?(l(this,"_monthsRegex")||pe.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=fi),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function pe(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=c([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=ee(r[t]),i[t]=ee(i[t]);for(t=0;t<24;t++)o[t]=ee(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function me(e){return ge(e)?366:365}function ge(e){return e%4==0&&e%100!=0||e%400==0}function ve(){return ge(this.year())}function ye(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function be(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function we(e,t,n){var r=7+t-n;return-((7+be(e,0,r).getUTCDay()-t)%7)+r-1}function Ce(e,t,n,r,i){var o,a,s=1+7*(t-1)+(7+n-r)%7+we(e,r,i);return s<=0?a=me(o=e-1)+s:s>me(e)?(o=e+1,a=s-me(e)):(o=e,a=s),{year:o,dayOfYear:a}}function Se(e,t,n){var r,i,o=we(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?r=a+xe(i=e.year()-1,t,n):a>xe(e.year(),t,n)?(r=a-xe(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function xe(e,t,n){var r=we(e,t,n),i=we(e+1,t,n);return(me(e)-r+i)/7}function ke(e){return Se(e,this._week.dow,this._week.doy).week}function Te(){return this._week.dow}function Ee(){return this._week.doy}function De(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Ne(e){var t=Se(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function _e(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Re(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Ae(e,t){return e?n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:this._weekdays}function Le(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Me(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Oe(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=c([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=si.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=si.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=si.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=si.call(this._weekdaysParse,a))?i:-1!==(i=si.call(this._shortWeekdaysParse,a))?i:-1!==(i=si.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=si.call(this._shortWeekdaysParse,a))?i:-1!==(i=si.call(this._weekdaysParse,a))?i:-1!==(i=si.call(this._minWeekdaysParse,a))?i:null:-1!==(i=si.call(this._minWeekdaysParse,a))?i:-1!==(i=si.call(this._weekdaysParse,a))?i:-1!==(i=si.call(this._shortWeekdaysParse,a))?i:null}function Pe(e,t,n){var r,i,o;if(this._weekdaysParseExact)return Oe.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=c([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Ie(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=_e(e,this.localeData()),this.add(e-t,"d")):t}function He(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Be(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Re(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Fe(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||je.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=yi),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function We(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||je.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=bi),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function ze(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||je.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=wi),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function je(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],l=[],u=[];for(t=0;t<7;t++)n=c([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),l.push(o),u.push(r),u.push(i),u.push(o);for(a.sort(e),s.sort(e),l.sort(e),u.sort(e),t=0;t<7;t++)s[t]=ee(s[t]),l[t]=ee(l[t]),u[t]=ee(u[t]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function qe(){return this.hours()%12||12}function Ve(){return this.hours()||24}function Ue(e,t){$(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function $e(e,t){return t._meridiemParse}function Ye(e){return"p"===(e+"").toLowerCase().charAt(0)}function Ge(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Xe(e){return e?e.toLowerCase().replace("_","-"):e}function Ke(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=Xe(e[o]).split("-")).length,n=(n=Xe(e[o+1]))?n.split("-"):null;t>0;){if(r=Ze(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&C(i,n,!0)>=t-1)break;t--}o++}return null}function Ze(e){var t=null;if(!Ti[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Ci._abbr,require("./locale/"+e),Qe(t)}catch(n){}return Ti[e]}function Qe(e,t){var n;return e&&(n=m(t)?tt(e):Je(e,t))&&(Ci=n),Ci._abbr}function Je(e,t){if(null!==t){var n=ki;if(t.abbr=e,null!=Ti[e])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Ti[e]._config;else if(null!=t.parentLocale){if(null==Ti[t.parentLocale])return Ei[t.parentLocale]||(Ei[t.parentLocale]=[]),Ei[t.parentLocale].push({name:e,config:t}),null;n=Ti[t.parentLocale]._config}return Ti[e]=new N(D(n,t)),Ei[e]&&Ei[e].forEach(function(e){Je(e.name,e.config)}),Qe(e),Ti[e]}return delete Ti[e],null}function et(e,t){if(null!=t){var n,r=ki;null!=Ti[e]&&(r=Ti[e]._config),(n=new N(t=D(r,t))).parentLocale=Ti[e],Ti[e]=n,Qe(e)}else null!=Ti[e]&&(null!=Ti[e].parentLocale?Ti[e]=Ti[e].parentLocale:null!=Ti[e]&&delete Ti[e]);return Ti[e]}function tt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ci;if(!n(e)){if(t=Ze(e))return t;e=[e]}return Ke(e)}function nt(){return wr(Ti)}function rt(e){var t,n=e._a;return n&&-2===f(e).overflow&&(t=n[Jr]<0||n[Jr]>11?Jr:n[ei]<1||n[ei]>ie(n[Qr],n[Jr])?ei:n[ti]<0||n[ti]>24||24===n[ti]&&(0!==n[ni]||0!==n[ri]||0!==n[ii])?ti:n[ni]<0||n[ni]>59?ni:n[ri]<0||n[ri]>59?ri:n[ii]<0||n[ii]>999?ii:-1,f(e)._overflowDayOfYear&&(t<Qr||t>ei)&&(t=ei),f(e)._overflowWeeks&&-1===t&&(t=oi),f(e)._overflowWeekday&&-1===t&&(t=ai),f(e).overflow=t),e}function it(e){var t,n,r,i,o,a,s=e._i,l=Di.exec(s)||Ni.exec(s);if(l){for(f(e).iso=!0,t=0,n=Ri.length;t<n;t++)if(Ri[t][1].exec(l[1])){i=Ri[t][0],r=!1!==Ri[t][2];break}if(null==i)return void(e._isValid=!1);if(l[3]){for(t=0,n=Ai.length;t<n;t++)if(Ai[t][1].exec(l[3])){o=(l[2]||" ")+Ai[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(l[4]){if(!_i.exec(l[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),ct(e)}else e._isValid=!1}function ot(t){var n=Li.exec(t._i);null===n?(it(t),!1===t._isValid&&(delete t._isValid,e.createFromInputFallback(t))):t._d=new Date(+n[1])}function at(e,t,n){return null!=e?e:null!=t?t:n}function st(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function lt(e){var t,n,r,i,o=[];if(!e._d){for(r=st(e),e._w&&null==e._a[ei]&&null==e._a[Jr]&&ut(e),e._dayOfYear&&(i=at(e._a[Qr],r[Qr]),e._dayOfYear>me(i)&&(f(e)._overflowDayOfYear=!0),n=be(i,0,e._dayOfYear),e._a[Jr]=n.getUTCMonth(),e._a[ei]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ti]&&0===e._a[ni]&&0===e._a[ri]&&0===e._a[ii]&&(e._nextDay=!0,e._a[ti]=0),e._d=(e._useUTC?be:ye).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ti]=24)}}function ut(e){var t,n,r,i,o,a,s,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)o=1,a=4,n=at(t.GG,e._a[Qr],Se(yt(),1,4).year),r=at(t.W,1),((i=at(t.E,1))<1||i>7)&&(l=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var u=Se(yt(),o,a);n=at(t.gg,e._a[Qr],u.year),r=at(t.w,u.week),null!=t.d?((i=t.d)<0||i>6)&&(l=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(l=!0)):i=o}r<1||r>xe(n,o,a)?f(e)._overflowWeeks=!0:null!=l?f(e)._overflowWeekday=!0:(s=Ce(n,r,i,o,a),e._a[Qr]=s.year,e._dayOfYear=s.dayOfYear)}function ct(t){if(t._f!==e.ISO_8601){t._a=[],f(t).empty=!0;var n,r,i,o,a,s=""+t._i,l=s.length,u=0;for(i=K(t._f,t._locale).match(_r)||[],n=0;n<i.length;n++)o=i[n],(r=(s.match(Q(o,t))||[])[0])&&((a=s.substr(0,s.indexOf(r))).length>0&&f(t).unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),u+=r.length),Lr[o]?(r?f(t).empty=!1:f(t).unusedTokens.push(o),re(o,r,t)):t._strict&&!r&&f(t).unusedTokens.push(o);f(t).charsLeftOver=l-u,s.length>0&&f(t).unusedInput.push(s),t._a[ti]<=12&&!0===f(t).bigHour&&t._a[ti]>0&&(f(t).bigHour=undefined),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[ti]=dt(t._locale,t._a[ti],t._meridiem),lt(t),rt(t)}else it(t)}function dt(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function ft(e){var t,n,r,i,o;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=g({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],ct(t),h(t)&&(o+=f(t).charsLeftOver,o+=10*f(t).unusedTokens.length,f(t).score=o,(null==r||o<r)&&(r=o,n=t));u(e,n||t)}function ht(e){if(!e._d){var t=H(e._i);e._a=s([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),lt(e)}}function pt(e){var t=new v(rt(mt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=undefined),t}function mt(e){var t=e._i,r=e._f;return e._locale=e._locale||tt(e._l),null===t||r===undefined&&""===t?p({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),y(t)?new v(rt(t)):(a(t)?e._d=t:n(r)?ft(e):r?ct(e):gt(e),h(e)||(e._d=null),e))}function gt(t){var r=t._i;r===undefined?t._d=new Date(e.now()):a(r)?t._d=new Date(r.valueOf()):"string"==typeof r?ot(t):n(r)?(t._a=s(r.slice(0),function(e){return parseInt(e,10)}),lt(t)):"object"==typeof r?ht(t):o(r)?t._d=new Date(r):e.createFromInputFallback(t)}function vt(e,t,o,a,s){var l={};return!0!==o&&!1!==o||(a=o,o=undefined),(r(e)&&i(e)||n(e)&&0===e.length)&&(e=undefined),l._isAMomentObject=!0,l._useUTC=l._isUTC=s,l._l=o,l._i=e,l._f=t,l._strict=a,pt(l)}function yt(e,t,n,r){return vt(e,t,n,r,!1)}function bt(e,t){var r,i;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return yt();for(r=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](r)||(r=t[i]);return r}function wt(){return bt("isBefore",[].slice.call(arguments,0))}function Ct(){return bt("isAfter",[].slice.call(arguments,0))}function St(e){var t=H(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=tt(),this._bubble()}function xt(e){return e instanceof St}function kt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Tt(e,t){$(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+U(~~(e/60),2)+t+U(~~e%60,2)})}function Et(e,t){var n=(t||"").match(e);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(Ii)||["-",0,0],i=60*r[1]+w(r[2]);return 0===i?0:"+"===r[0]?i:-i}function Dt(t,n){var r,i;return n._isUTC?(r=n.clone(),i=(y(t)||a(t)?t.valueOf():yt(t).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),e.updateOffset(r,!1),r):yt(t).local()}function Nt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function _t(t,n){var r,i=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Et(Yr,t)))return this}else Math.abs(t)<16&&(t*=60);return!this._isUTC&&n&&(r=Nt(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==t&&(!n||this._changeInProgress?Ut(this,Wt(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:Nt(this)}function Rt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function At(e){return this.utcOffset(0,e)}function Lt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Nt(this),"m")),this}function Mt(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var e=Et($r,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Ot(e){return!!this.isValid()&&(e=e?yt(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function Pt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function It(){if(!m(this._isDSTShifted))return this._isDSTShifted;var e={};if(g(e,this),(e=mt(e))._a){var t=e._isUTC?c(e._a):yt(e._a);this._isDSTShifted=this.isValid()&&C(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ht(){return!!this.isValid()&&!this._isUTC}function Bt(){return!!this.isValid()&&this._isUTC}function Ft(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Wt(e,t){var n,r,i,a=e,s=null;return xt(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:o(e)?(a={},t?a[t]=e:a.milliseconds=e):(s=Hi.exec(e))?(n="-"===s[1]?-1:1,a={y:0,d:w(s[ei])*n,h:w(s[ti])*n,m:w(s[ni])*n,s:w(s[ri])*n,ms:w(kt(1e3*s[ii]))*n}):(s=Bi.exec(e))?(n="-"===s[1]?-1:1,a={y:zt(s[2],n),M:zt(s[3],n),w:zt(s[4],n),d:zt(s[5],n),h:zt(s[6],n),m:zt(s[7],n),s:zt(s[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(i=qt(yt(a.from),yt(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),r=new St(a),xt(e)&&l(e,"_locale")&&(r._locale=e._locale),r}function zt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function jt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function qt(e,t){var n;return e.isValid()&&t.isValid()?(t=Dt(t,e),e.isBefore(t)?n=jt(e,t):((n=jt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Vt(e,t){return function(n,r){var i,o;return null===r||isNaN(+r)||(k(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=Wt(n,r),Ut(this,i,e),this}}function Ut(t,n,r,i){var o=n._milliseconds,a=kt(n._days),s=kt(n._months);t.isValid()&&(i=null==i||i,o&&t._d.setTime(t._d.valueOf()+o*r),a&&j(t,"Date",z(t,"Date")+a*r),s&&ue(t,z(t,"Month")+s*r),i&&e.updateOffset(t,a||s))}function $t(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Yt(t,n){var r=t||yt(),i=Dt(r,this).startOf("day"),o=e.calendarFormat(this,i)||"sameElse",a=n&&(T(n[o])?n[o].call(this,r):n[o]);return this.format(a||this.localeData().calendar(o,this,yt(r)))}function Gt(){return new v(this)}function Xt(e,t){var n=y(e)?e:yt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=I(m(t)?"millisecond":t))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Kt(e,t){var n=y(e)?e:yt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=I(m(t)?"millisecond":t))?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Zt(e,t,n,r){return("("===(r=r||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===r[1]?this.isBefore(t,n):!this.isAfter(t,n))}function Qt(e,t){var n,r=y(e)?e:yt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=I(t||"millisecond"))?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Jt(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function en(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function tn(e,t,n){var r,i,o,a;return this.isValid()&&(r=Dt(e,this)).isValid()?(i=6e4*(r.utcOffset()-this.utcOffset()),"year"===(t=I(t))||"month"===t||"quarter"===t?(a=nn(this,r),"quarter"===t?a/=3:"year"===t&&(a/=12)):(o=this-r,a="second"===t?o/1e3:"minute"===t?o/6e4:"hour"===t?o/36e5:"day"===t?(o-i)/864e5:"week"===t?(o-i)/6048e5:o),n?a:b(a)):NaN}function nn(e,t){var n,r=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(r,"months");return n=t-i<0?(t-i)/(i-e.clone().add(r-1,"months")):(t-i)/(e.clone().add(r+1,"months")-i),-(r+n)||0}function rn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function on(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?T(Date.prototype.toISOString)?this.toDate().toISOString():X(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):X(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function an(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",o=t+'[")]';return this.format(n+r+i+o)}function sn(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=X(this,t);return this.localeData().postformat(n)}function ln(e,t){return this.isValid()&&(y(e)&&e.isValid()||yt(e).isValid())?Wt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function un(e){return this.from(yt(),e)}function cn(e,t){return this.isValid()&&(y(e)&&e.isValid()||yt(e).isValid())?Wt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function dn(e){return this.to(yt(),e)}function fn(e){var t;return e===undefined?this._locale._abbr:(null!=(t=tt(e))&&(this._locale=t),this)}function hn(){return this._locale}function pn(e){switch(e=I(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function mn(e){return(e=I(e))===undefined||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function gn(){return this._d.valueOf()-6e4*(this._offset||0)}function vn(){return Math.floor(this.valueOf()/1e3)}function yn(){return new Date(this.valueOf())}function bn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function wn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Cn(){return this.isValid()?this.toISOString():null}function Sn(){return h(this)}function xn(){return u({},f(this))}function kn(){return f(this).overflow}function Tn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function En(e,t){$(0,[e,e.length],0,t)}function Dn(e){return An.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Nn(e){return An.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function _n(){return xe(this.year(),1,4)}function Rn(){var e=this.localeData()._week;return xe(this.year(),e.dow,e.doy)}function An(e,t,n,r,i){var o;return null==e?Se(this,r,i).year:(o=xe(e,r,i),t>o&&(t=o),Ln.call(this,e,t,n,r,i))}function Ln(e,t,n,r,i){var o=Ce(e,t,n,r,i),a=be(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Mn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function On(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Pn(e,t){t[ii]=w(1e3*("0."+e))}function In(){return this._isUTC?"UTC":""}function Hn(){return this._isUTC?"Coordinated Universal Time":""}function Bn(e){return yt(1e3*e)}function Fn(){return yt.apply(null,arguments).parseZone()}function Wn(e){return e}function zn(e,t,n,r){var i=tt(),o=c().set(r,t);return i[n](o,e)}function jn(e,t,n){if(o(e)&&(t=e,e=undefined),e=e||"",null!=t)return zn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=zn(e,r,n,"month");return i}function qn(e,t,n,r){"boolean"==typeof e?(o(t)&&(n=t,t=undefined),t=t||""):(n=t=e,e=!1,o(t)&&(n=t,t=undefined),t=t||"");var i=tt(),a=e?i._week.dow:0;if(null!=n)return zn(t,(n+a)%7,r,"day");var s,l=[];for(s=0;s<7;s++)l[s]=zn(t,(s+a)%7,r,"day");return l}function Vn(e,t){return jn(e,t,"months")}function Un(e,t){return jn(e,t,"monthsShort")}function $n(e,t,n){return qn(e,t,n,"weekdays")}function Yn(e,t,n){return qn(e,t,n,"weekdaysShort")}function Gn(e,t,n){return qn(e,t,n,"weekdaysMin")}function Xn(){var e=this._data;return this._milliseconds=Xi(this._milliseconds),this._days=Xi(this._days),this._months=Xi(this._months),e.milliseconds=Xi(e.milliseconds),e.seconds=Xi(e.seconds),e.minutes=Xi(e.minutes),e.hours=Xi(e.hours),e.months=Xi(e.months),e.years=Xi(e.years),this}function Kn(e,t,n,r){var i=Wt(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Zn(e,t){return Kn(this,e,t,1)}function Qn(e,t){return Kn(this,e,t,-1)}function Jn(e){return e<0?Math.floor(e):Math.ceil(e)}function er(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Jn(nr(s)+a),a=0,s=0),l.milliseconds=o%1e3,e=b(o/1e3),l.seconds=e%60,t=b(e/60),l.minutes=t%60,n=b(t/60),l.hours=n%24,a+=b(n/24),i=b(tr(a)),s+=i,a-=Jn(nr(i)),r=b(s/12),s%=12,l.days=a,l.months=s,l.years=r,this}function tr(e){return 4800*e/146097}function nr(e){return 146097*e/4800}function rr(e){var t,n,r=this._milliseconds;if("month"===(e=I(e))||"year"===e)return t=this._days+r/864e5,n=this._months+tr(t),"month"===e?n:n/12;switch(t=this._days+Math.round(nr(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function ir(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12)}function or(e){return function(){return this.as(e)}}function ar(e){return e=I(e),this[e+"s"]()}function sr(e){return function(){return this._data[e]}}function lr(){return b(this.days()/7)}function ur(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function cr(e,t,n){var r=Wt(e).abs(),i=fo(r.as("s")),o=fo(r.as("m")),a=fo(r.as("h")),s=fo(r.as("d")),l=fo(r.as("M")),u=fo(r.as("y")),c=i<ho.s&&["s",i]||o<=1&&["m"]||o<ho.m&&["mm",o]||a<=1&&["h"]||a<ho.h&&["hh",a]||s<=1&&["d"]||s<ho.d&&["dd",s]||l<=1&&["M"]||l<ho.M&&["MM",l]||u<=1&&["y"]||["yy",u];return c[2]=t,c[3]=+e>0,c[4]=n,ur.apply(null,c)}function dr(e){return e===undefined?fo:"function"==typeof e&&(fo=e,!0)}function fr(e,t){return ho[e]!==undefined&&(t===undefined?ho[e]:(ho[e]=t,!0))}function hr(e){var t=this.localeData(),n=cr(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function pr(){var e,t,n=po(this._milliseconds)/1e3,r=po(this._days),i=po(this._months);t=b((e=b(n/60))/60),n%=60,e%=60;var o=b(i/12),a=i%=12,s=r,l=t,u=e,c=n,d=this.asSeconds();return d?(d<0?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(s?s+"D":"")+(l||u||c?"T":"")+(l?l+"H":"")+(u?u+"M":"")+(c?c+"S":""):"P0D"}var mr,gr=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1},vr=e.momentProperties=[],yr=!1,br={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var wr=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n},Cr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Sr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},xr="Invalid date",kr="%d",Tr=/\d{1,2}/,Er={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Dr={},Nr={},_r=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Rr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ar={},Lr={},Mr=/\d/,Or=/\d\d/,Pr=/\d{3}/,Ir=/\d{4}/,Hr=/[+-]?\d{6}/,Br=/\d\d?/,Fr=/\d\d\d\d?/,Wr=/\d\d\d\d\d\d?/,zr=/\d{1,3}/,jr=/\d{1,4}/,qr=/[+-]?\d{1,6}/,Vr=/\d+/,Ur=/[+-]?\d+/,$r=/Z|[+-]\d\d:?\d\d/gi,Yr=/Z|[+-]\d\d(?::?\d\d)?/gi,Gr=/[+-]?\d+(\.\d{1,3})?/,Xr=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Kr={},Zr={},Qr=0,Jr=1,ei=2,ti=3,ni=4,ri=5,ii=6,oi=7,ai=8,si=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};$("M",["MM",2],"Mo",function(){return this.month()+1}),$("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),$("MMMM",0,0,function(e){return this.localeData().months(this,e)}),P("month","M"),B("month",8),Z("M",Br),Z("MM",Br,Or),Z("MMM",function(e,t){return t.monthsShortRegex(e)}),Z("MMMM",function(e,t){return t.monthsRegex(e)}),te(["M","MM"],function(e,t){t[Jr]=w(e)-1}),te(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[Jr]=i:f(n).invalidMonth=e});var li=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ui="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ci="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),di=Xr,fi=Xr;$("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),$(0,["YY",2],0,function(){return this.year()%100}),$(0,["YYYY",4],0,"year"),$(0,["YYYYY",5],0,"year"),$(0,["YYYYYY",6,!0],0,"year"),P("year","y"),B("year",1),Z("Y",Ur),Z("YY",Br,Or),Z("YYYY",jr,Ir),Z("YYYYY",qr,Hr),Z("YYYYYY",qr,Hr),te(["YYYYY","YYYYYY"],Qr),te("YYYY",function(t,n){n[Qr]=2===t.length?e.parseTwoDigitYear(t):w(t)}),te("YY",function(t,n){n[Qr]=e.parseTwoDigitYear(t)}),te("Y",function(e,t){t[Qr]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return w(e)+(w(e)>68?1900:2e3)};var hi=W("FullYear",!0);$("w",["ww",2],"wo","week"),$("W",["WW",2],"Wo","isoWeek"),P("week","w"),P("isoWeek","W"),B("week",5),B("isoWeek",5),Z("w",Br),Z("ww",Br,Or),Z("W",Br),Z("WW",Br,Or),ne(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=w(e)});var pi={dow:0,doy:6};$("d",0,"do","day"),$("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),$("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),$("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),$("e",0,0,"weekday"),$("E",0,0,"isoWeekday"),P("day","d"),P("weekday","e"),P("isoWeekday","E"),B("day",11),B("weekday",11),B("isoWeekday",11),Z("d",Br),Z("e",Br),Z("E",Br),Z("dd",function(e,t){return t.weekdaysMinRegex(e)}),Z("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Z("dddd",function(e,t){return t.weekdaysRegex(e)}),ne(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:f(n).invalidWeekday=e}),ne(["d","e","E"],function(e,t,n,r){t[r]=w(e)});var mi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),gi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),vi="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),yi=Xr,bi=Xr,wi=Xr;$("H",["HH",2],0,"hour"),$("h",["hh",2],0,qe),$("k",["kk",2],0,Ve),$("hmm",0,0,function(){return""+qe.apply(this)+U(this.minutes(),2)}),$("hmmss",0,0,function(){return""+qe.apply(this)+U(this.minutes(),2)+U(this.seconds(),2)}),$("Hmm",0,0,function(){return""+this.hours()+U(this.minutes(),2)}),$("Hmmss",0,0,function(){return""+this.hours()+U(this.minutes(),2)+U(this.seconds(),2)}),Ue("a",!0),Ue("A",!1),P("hour","h"),B("hour",13),Z("a",$e),Z("A",$e),Z("H",Br),Z("h",Br),Z("HH",Br,Or),Z("hh",Br,Or),Z("hmm",Fr),Z("hmmss",Wr),Z("Hmm",Fr),Z("Hmmss",Wr),te(["H","HH"],ti),te(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),te(["h","hh"],function(e,t,n){t[ti]=w(e),f(n).bigHour=!0}),te("hmm",function(e,t,n){var r=e.length-2;t[ti]=w(e.substr(0,r)),t[ni]=w(e.substr(r)),f(n).bigHour=!0}),te("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[ti]=w(e.substr(0,r)),t[ni]=w(e.substr(r,2)),t[ri]=w(e.substr(i)),f(n).bigHour=!0}),te("Hmm",function(e,t){var n=e.length-2;t[ti]=w(e.substr(0,n)),t[ni]=w(e.substr(n))}),te("Hmmss",function(e,t){var n=e.length-4,r=e.length-2;t[ti]=w(e.substr(0,n)),t[ni]=w(e.substr(n,2)),t[ri]=w(e.substr(r))});var Ci,Si=/[ap]\.?m?\.?/i,xi=W("Hours",!0),ki={calendar:Cr,longDateFormat:Sr,invalidDate:xr,ordinal:kr,ordinalParse:Tr,relativeTime:Er,months:ui,monthsShort:ci,week:pi,weekdays:mi,weekdaysMin:vi,weekdaysShort:gi,meridiemParse:Si},Ti={},Ei={},Di=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ni=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_i=/Z|[+-]\d\d(?::?\d\d)?/,Ri=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ai=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Li=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=x("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){};var Mi=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=yt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:p()}),Oi=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=yt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:p()}),Pi=function(){return Date.now?Date.now():+new Date};Tt("Z",":"),Tt("ZZ",""),Z("Z",Yr),Z("ZZ",Yr),te(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Et(Yr,e)});var Ii=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Hi=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Bi=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Wt.fn=St.prototype;var Fi=Vt(1,"add"),Wi=Vt(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var zi=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===undefined?this.localeData():this.locale(e)});$(0,["gg",2],0,function(){return this.weekYear()%100}),$(0,["GG",2],0,function(){return this.isoWeekYear()%100}),En("gggg","weekYear"),En("ggggg","weekYear"),En("GGGG","isoWeekYear"),En("GGGGG","isoWeekYear"),P("weekYear","gg"),P("isoWeekYear","GG"),B("weekYear",1),B("isoWeekYear",1),Z("G",Ur),Z("g",Ur),Z("GG",Br,Or),Z("gg",Br,Or),Z("GGGG",jr,Ir),Z("gggg",jr,Ir),Z("GGGGG",qr,Hr),Z("ggggg",qr,Hr),ne(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=w(e)}),ne(["gg","GG"],function(t,n,r,i){n[i]=e.parseTwoDigitYear(t)}),$("Q",0,"Qo","quarter"),P("quarter","Q"),B("quarter",7),Z("Q",Mr),te("Q",function(e,t){t[Jr]=3*(w(e)-1)}),$("D",["DD",2],"Do","date"),P("date","D"),B("date",9),Z("D",Br),Z("DD",Br,Or),Z("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),te(["D","DD"],ei),te("Do",function(e,t){t[ei]=w(e.match(Br)[0],10)});var ji=W("Date",!0);$("DDD",["DDDD",3],"DDDo","dayOfYear"),P("dayOfYear","DDD"),B("dayOfYear",4),Z("DDD",zr),Z("DDDD",Pr),te(["DDD","DDDD"],function(e,t,n){n._dayOfYear=w(e)}),$("m",["mm",2],0,"minute"),P("minute","m"),B("minute",14),Z("m",Br),Z("mm",Br,Or),te(["m","mm"],ni);var qi=W("Minutes",!1);$("s",["ss",2],0,"second"),P("second","s"),B("second",15),Z("s",Br),Z("ss",Br,Or),te(["s","ss"],ri);var Vi=W("Seconds",!1);$("S",0,0,function(){return~~(this.millisecond()/100)}),$(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),$(0,["SSS",3],0,"millisecond"),$(0,["SSSS",4],0,function(){return 10*this.millisecond()}),$(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),$(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),$(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),$(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),$(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),P("millisecond","ms"),B("millisecond",16),Z("S",zr,Mr),Z("SS",zr,Or),Z("SSS",zr,Pr);var Ui;for(Ui="SSSS";Ui.length<=9;Ui+="S")Z(Ui,Vr);for(Ui="S";Ui.length<=9;Ui+="S")te(Ui,Pn);var $i=W("Milliseconds",!1);$("z",0,0,"zoneAbbr"),$("zz",0,0,"zoneName");var Yi=v.prototype;Yi.add=Fi,Yi.calendar=Yt,Yi.clone=Gt,Yi.diff=tn,Yi.endOf=mn,Yi.format=sn,Yi.from=ln,Yi.fromNow=un,Yi.to=cn,Yi.toNow=dn,Yi.get=q,Yi.invalidAt=kn,Yi.isAfter=Xt,Yi.isBefore=Kt,Yi.isBetween=Zt,Yi.isSame=Qt,Yi.isSameOrAfter=Jt,Yi.isSameOrBefore=en,Yi.isValid=Sn,Yi.lang=zi,Yi.locale=fn,Yi.localeData=hn,Yi.max=Oi,Yi.min=Mi,Yi.parsingFlags=xn,Yi.set=V,Yi.startOf=pn,Yi.subtract=Wi,Yi.toArray=bn,Yi.toObject=wn,Yi.toDate=yn,Yi.toISOString=on,Yi.inspect=an,Yi.toJSON=Cn,Yi.toString=rn,Yi.unix=vn,Yi.valueOf=gn,Yi.creationData=Tn,Yi.year=hi,Yi.isLeapYear=ve,Yi.weekYear=Dn,Yi.isoWeekYear=Nn,Yi.quarter=Yi.quarters=Mn,Yi.month=ce,Yi.daysInMonth=de,Yi.week=Yi.weeks=De,Yi.isoWeek=Yi.isoWeeks=Ne,Yi.weeksInYear=Rn,Yi.isoWeeksInYear=_n,Yi.date=ji,Yi.day=Yi.days=Ie,Yi.weekday=He,Yi.isoWeekday=Be,Yi.dayOfYear=On,Yi.hour=Yi.hours=xi,Yi.minute=Yi.minutes=qi,Yi.second=Yi.seconds=Vi,Yi.millisecond=Yi.milliseconds=$i,Yi.utcOffset=_t,Yi.utc=At,Yi.local=Lt,Yi.parseZone=Mt,Yi.hasAlignedHourOffset=Ot,Yi.isDST=Pt,Yi.isLocal=Ht,Yi.isUtcOffset=Bt,Yi.isUtc=Ft,Yi.isUTC=Ft,Yi.zoneAbbr=In,Yi.zoneName=Hn,Yi.dates=x("dates accessor is deprecated. Use date instead.",ji),Yi.months=x("months accessor is deprecated. Use month instead",ce),Yi.years=x("years accessor is deprecated. Use year instead",hi),Yi.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Rt),Yi.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",It);var Gi=N.prototype;Gi.calendar=_,Gi.longDateFormat=R,Gi.invalidDate=A,Gi.ordinal=L,Gi.preparse=Wn,Gi.postformat=Wn,Gi.relativeTime=M,Gi.pastFuture=O,Gi.set=E,Gi.months=oe,Gi.monthsShort=ae,Gi.monthsParse=le,Gi.monthsRegex=he,Gi.monthsShortRegex=fe,Gi.week=ke,Gi.firstDayOfYear=Ee,Gi.firstDayOfWeek=Te,Gi.weekdays=Ae,Gi.weekdaysMin=Me,Gi.weekdaysShort=Le,Gi.weekdaysParse=Pe,Gi.weekdaysRegex=Fe,Gi.weekdaysShortRegex=We,Gi.weekdaysMinRegex=ze,Gi.isPM=Ye,Gi.meridiem=Ge,Qe("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===w(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),e.lang=x("moment.lang is deprecated. Use moment.locale instead.",Qe),e.langData=x("moment.langData is deprecated. Use moment.localeData instead.",tt);var Xi=Math.abs,Ki=or("ms"),Zi=or("s"),Qi=or("m"),Ji=or("h"),eo=or("d"),to=or("w"),no=or("M"),ro=or("y"),io=sr("milliseconds"),oo=sr("seconds"),ao=sr("minutes"),so=sr("hours"),lo=sr("days"),uo=sr("months"),co=sr("years"),fo=Math.round,ho={s:45,m:45,h:22,d:26,M:11},po=Math.abs,mo=St.prototype;return mo.abs=Xn,mo.add=Zn,mo.subtract=Qn,mo.as=rr,mo.asMilliseconds=Ki,mo.asSeconds=Zi,mo.asMinutes=Qi,mo.asHours=Ji,mo.asDays=eo,mo.asWeeks=to,mo.asMonths=no,mo.asYears=ro,mo.valueOf=ir,mo._bubble=er,mo.get=ar,mo.milliseconds=io,mo.seconds=oo,mo.minutes=ao,mo.hours=so,mo.days=lo,mo.weeks=lr,mo.months=uo,mo.years=co,mo.humanize=hr,mo.toISOString=pr,mo.toString=pr,mo.toJSON=pr,mo.locale=fn,mo.localeData=hn,mo.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",pr),mo.lang=zi,$("X",0,0,"unix"),$("x",0,0,"valueOf"),Z("x",Ur),Z("X",Gr),te("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),te("x",function(e,t,n){n._d=new Date(w(e))}),e.version="2.17.1",t(yt),e.fn=Yi,e.min=wt,e.max=Ct,e.now=Pi,e.utc=c,e.unix=Bn,e.months=Vn,e.isDate=a,e.locale=Qe,e.invalid=p,e.duration=Wt,e.isMoment=y,e.weekdays=$n,e.parseZone=Fn,e.localeData=tt,e.isDuration=xt,e.monthsShort=Un,e.weekdaysMin=Gn,e.defineLocale=Je,e.updateLocale=et,e.locales=nt,e.weekdaysShort=Yn,e.normalizeUnits=I,e.relativeTimeRounding=dr,e.relativeTimeThreshold=fr,e.calendarFormat=$t,e.prototype=Yi,e}),function(e){"function"==typeof define&&define.amd?define(["jquery","moment"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("moment")):e(jQuery,moment)}(function(e,t){function n(e){return re(e,Ke)}function r(e,t){t.left&&e.css({"border-left-width":1,"margin-left":t.left-1}),t.right&&e.css({"border-right-width":1,"margin-right":t.right-1})}function i(e){e.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function o(){e("body").addClass("fc-not-allowed")}function a(){e("body").removeClass("fc-not-allowed")}function s(t,n,r){var i=Math.floor(n/t.length),o=Math.floor(n-i*(t.length-1)),a=[],s=[],u=[],c=0;l(t),t.each(function(n,r){var l=n===t.length-1?o:i,d=e(r).outerHeight(!0);d<l?(a.push(r),s.push(d),u.push(e(r).height())):c+=d}),r&&(n-=c,i=Math.floor(n/a.length),o=Math.floor(n-i*(a.length-1))),e(a).each(function(t,n){var r=t===a.length-1?o:i,l=s[t],c=r-(l-u[t]);l<r&&e(n).height(c)})}function l(e){e.height("")}function u(t){var n=0;return t.find("> *").each(function(t,r){var i=e(r).outerWidth();i>n&&(n=i)}),n++,t.width(n),n}function c(e,t){var n,r=e.add(t);return r.css({position:"relative",left:-1}),n=e.outerHeight()-t.outerHeight(),r.css({position:"",left:""}),n}function d(t){var n=t.css("position"),r=t.parents().filter(function(){var t=e(this);return/(auto|scroll)/.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&r.length?r:e(t[0].ownerDocument||document)}function f(e,t){var n=e.offset(),r=n.left-(t?t.left:0),i=n.top-(t?t.top:0);return{left:r,right:r+e.outerWidth(),top:i,bottom:i+e.outerHeight()}}function h(e,t){var n=e.offset(),r=m(e),i=n.left+b(e,"border-left-width")+r.left-(t?t.left:0),o=n.top+b(e,"border-top-width")+r.top-(t?t.top:0);return{left:i,right:i+e[0].clientWidth,top:o,bottom:o+e[0].clientHeight}}function p(e,t){var n=e.offset(),r=n.left+b(e,"border-left-width")+b(e,"padding-left")-(t?t.left:0),i=n.top+b(e,"border-top-width")+b(e,"padding-top")-(t?t.top:0);return{left:r,right:r+e.width(),top:i,bottom:i+e.height()}}function m(e){var t,n=e[0].offsetWidth-e[0].clientWidth,r=e[0].offsetHeight-e[0].clientHeight;return n=g(n),r=g(r),t={left:0,right:0,top:0,bottom:r},v()&&"rtl"==e.css("direction")?t.left=n:t.right=n,t}function g(e){return e=Math.max(0,e),e=Math.round(e)}function v(){return null===Ze&&(Ze=y()),Ze}function y(){var t=e("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),n=t.children().offset().left>t.offset().left;return t.remove(),n}function b(e,t){return parseFloat(e.css(t))||0}function w(e){return 1==e.which&&!e.ctrlKey}function C(e){var t=e.originalEvent.touches;return t&&t.length?t[0].pageX:e.pageX}function S(e){var t=e.originalEvent.touches;return t&&t.length?t[0].pageY:e.pageY}function x(e){return/^touch/.test(e.type)}function k(e){e.addClass("fc-unselectable").on("selectstart",E)}function T(e){e.removeClass("fc-unselectable").off("selectstart",E)}function E(e){e.preventDefault()}function D(e,t){var n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left<n.right&&n.top<n.bottom&&n}function N(e,t){return{left:Math.min(Math.max(e.left,t.left),t.right),top:Math.min(Math.max(e.top,t.top),t.bottom)}}function _(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}function R(e,t){return{left:e.left-t.left,top:e.top-t.top}}function A(t){var n,r,i=[],o=[];for("string"==typeof t?o=t.split(/\s*,\s*/):"function"==typeof t?o=[t]:e.isArray(t)&&(o=t),n=0;n<o.length;n++)"string"==typeof(r=o[n])?i.push("-"==r.charAt(0)?{field:r.substring(1),order:-1}:{field:r,order:1}):"function"==typeof r&&i.push({func:r});return i}function L(e,t,n){var r,i;for(r=0;r<n.length;r++)if(i=M(e,t,n[r]))return i;return 0}function M(e,t,n){return n.func?n.func(e,t):O(e[n.field],t[n.field])*(n.order||1)}function O(t,n){return t||n?null==n?-1:null==t?1:"string"===e.type(t)||"string"===e.type(n)?String(t).localeCompare(String(n)):t-n:0}function P(e,t){var n,r,i,o,a=e.start,s=e.end,l=t.start,u=t.end;if(s>l&&a<u)return a>=l?(n=a.clone(),i=!0):(n=l.clone(),i=!1),s<=u?(r=s.clone(),o=!0):(r=u.clone(),o=!1),{start:n,end:r,isStart:i,isEnd:o}}function I(e,n){return t.duration({days:e.clone().stripTime().diff(n.clone().stripTime(),"days"),ms:e.time()-n.time()})}function H(e,n){return t.duration({days:e.clone().stripTime().diff(n.clone().stripTime(),"days")})}function B(e,n,r){return t.duration(Math.round(e.diff(n,r,!0)),r)}function F(e,t){var n,r,i;for(n=0;n<Je.length&&(r=Je[n],!((i=z(r,e,t))>=1&&ge(i)));n++);return r}function W(e,t){var n=F(e);return"week"===n&&"object"==typeof t&&t.days&&(n="day"),n}function z(e,n,r){return null!=r?r.diff(n,e,!0):t.isDuration(n)?n.as(e):n.end.diff(n.start,e,!0)}function j(e,t,n){var r;return ee(n)?(t-e)/n:(r=n.asMonths(),Math.abs(r)>=1&&ge(r)?t.diff(e,"months",!0)/r:t.diff(e,"days",!0)/n.asDays())}function q(e,t){var n,r;return ee(e)||ee(t)?e/t:(n=e.asMonths(),r=t.asMonths(),Math.abs(n)>=1&&ge(n)&&Math.abs(r)>=1&&ge(r)?n/r:e.asDays()/t.asDays())}function V(e,n){var r;return ee(e)?t.duration(e*n):(r=e.asMonths(),Math.abs(r)>=1&&ge(r)?t.duration({months:r*n}):t.duration({days:e.asDays()*n}))}function U(e){return{start:e.start.clone(),end:e.end.clone()}}function $(e,t){return e=U(e),t.start&&(e.start=Y(e.start,t)),t.end&&(e.end=Q(e.end,t.end)),e}function Y(e,t){return e=e.clone(),t.start&&(e=J(e,t.start)),t.end&&e>=t.end&&(e=t.end.clone().subtract(1)),e}function G(e,t){return(!t.start||e>=t.start)&&(!t.end||e<t.end)}function X(e,t){return(!t.start||e.end>=t.start)&&(!t.end||e.start<t.end)}function K(e,t){return(!t.start||e.start>=t.start)&&(!t.end||e.end<=t.end)}function Z(e,t){return(e.start&&t.start&&e.start.isSame(t.start)||!e.start&&!t.start)&&(e.end&&t.end&&e.end.isSame(t.end)||!e.end&&!t.end)}function Q(e,t){return(e.isBefore(t)?e:t).clone()}function J(e,t){return(e.isAfter(t)?e:t).clone()}function ee(e){return Boolean(e.hours()||e.minutes()||e.seconds()||e.milliseconds())}function te(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function ne(e){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(e)}function re(e,t){var n,r,i,o,a,s,l={};if(t)for(n=0;n<t.length;n++){for(r=t[n],i=[],o=e.length-1;o>=0;o--)if("object"==typeof(a=e[o][r]))i.unshift(a);else if(a!==undefined){l[r]=a;break}i.length&&(l[r]=re(i))}for(n=e.length-1;n>=0;n--){s=e[n];for(r in s)r in l||(l[r]=s[r])}return l}function ie(e){var t=function(){};return t.prototype=e,new t}function oe(e,t){for(var n in e)ae(e,n)&&(t[n]=e[n])}function ae(e,t){return et.call(e,t)}function se(t){return/undefined|null|boolean|number|string/.test(e.type(t))}function le(t,n,r){if(e.isFunction(t)&&(t=[t]),t){var i,o;for(i=0;i<t.length;i++)o=t[i].apply(n,r)||o;return o}}function ue(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e]}function ce(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function de(e){return e.replace(/&.*?;/g,"")}function fe(t){var n=[];return e.each(t,function(e,t){null!=t&&n.push(e+":"+t)}),n.join(";")}function he(t){var n=[];return e.each(t,function(e,t){null!=t&&n.push(e+'="'+ce(t)+'"')}),n.join(" ")}function pe(e){return e.charAt(0).toUpperCase()+e.slice(1)}function me(e,t){return e-t}function ge(e){return e%1==0}function ve(e,t){var n=e[t];return function(){return n.apply(e,arguments)}}function ye(e,t,n){var r,i,o,a,s,l=function(){var u=+new Date-a;u<t?r=setTimeout(l,t-u):(r=null,n||(s=e.apply(o,i),o=i=null))};return function(){o=this,i=arguments,a=+new Date;var u=n&&!r;return r||(r=setTimeout(l,t)),u&&(s=e.apply(o,i),o=i=null),s}}function be(n,r,i){var o,a,s,l,u=n[0],c=1==n.length&&"string"==typeof u;return t.isMoment(u)||te(u)||u===undefined?l=t.apply(null,n):(o=!1,a=!1,c?tt.test(u)?(n=[u+="-01"],o=!0,a=!0):(s=nt.exec(u))&&(o=!s[5],a=!0):e.isArray(u)&&(a=!0),l=r||o?t.utc.apply(t,n):t.apply(null,n),o?(l._ambigTime=!0,l._ambigZone=!0):i&&(a?l._ambigZone=!0:c&&l.utcOffset(u))),l._fullCalendar=!0,l}function we(e){return"en"!==e.locale()?e.clone().locale("en"):e}function Ce(){}function Se(e,t){var n;return ae(t,"constructor")&&(n=t.constructor),"function"!=typeof n&&(n=t.constructor=function(){e.apply(this,arguments)}),n.prototype=ie(e.prototype),oe(t,n.prototype),oe(e,n),n}function xe(e,t){oe(t,e.prototype)}function ke(e,t){e.then=function(n){return"function"==typeof n&&n(t),e}}function Te(e){e.then=function(t,n){return"function"==typeof n&&n(),e}}function Ee(e,t){return!e&&!t||!(!e||!t)&&(e.component===t.component&&De(e,t)&&De(t,e))}function De(e,t){for(var n in e)if(!/^(component|left|right|top|bottom)$/.test(n)&&e[n]!==t[n])return!1;return!0}function Ne(e){return{start:e.start.clone(),end:e.end?e.end.clone():null,allDay:e.allDay}}function _e(e){var t=Ae(e);return"background"===t||"inverse-background"===t}function Re(e){return"inverse-background"===Ae(e)}function Ae(e){return ue((e.source||{}).rendering,e.rendering)}function Le(e){var t,n,r={};for(t=0;t<e.length;t++)(r[(n=e[t])._id]||(r[n._id]=[])).push(n);return r}function Me(e,t){return e.start-t.start}function Oe(n){var r,i,o,a,s=Ge.dataAttrPrefix;return s&&(s+="-"),(r=n.data(s+"event")||null)&&(null==(i=(r="object"==typeof r?e.extend({},r):{}).start)&&(i=r.time),o=r.duration,a=r.stick,delete r.start,delete r.time,delete r.duration,delete r.stick),null==i&&(i=n.data(s+"start")),null==i&&(i=n.data(s+"time")),null==o&&(o=n.data(s+"duration")),null==a&&(a=n.data(s+"stick")),i=null!=i?t.duration(i):null,o=null!=o?t.duration(o):null,a=Boolean(a),{eventProps:r,startTime:i,duration:o,stick:a}}function Pe(e,t){var n,r;for(n=0;n<t.length;n++)if((r=t[n]).leftCol<=e.rightCol&&r.rightCol>=e.leftCol)return!0;return!1}function Ie(e,t){return e.leftCol-t.leftCol}function He(e){var t,n,r,i=[];for(t=0;t<e.length;t++){for(n=e[t],r=0;r<i.length&&We(n,i[r]).length;r++);n.level=r,(i[r]||(i[r]=[])).push(n)}return i}function Be(e){var t,n,r,i,o;for(t=0;t<e.length;t++)for(n=e[t],r=0;r<n.length;r++)for((i=n[r]).forwardSegs=[],o=t+1;o<e.length;o++)We(i,e[o],i.forwardSegs)}function Fe(e){var t,n,r=e.forwardSegs,i=0;if(e.forwardPressure===undefined){for(t=0;t<r.length;t++)Fe(n=r[t]),i=Math.max(i,1+n.forwardPressure);e.forwardPressure=i}}function We(e,t,n){n=n||[];for(var r=0;r<t.length;r++)ze(e,t[r])&&n.push(t[r]);return n}function ze(e,t){return e.bottom>t.top&&e.top<t.bottom}function je(e){this.items=e||[]}function qe(t,n){function r(e){n=e}function i(){var r=n.layout;m=t.opt("theme")?"ui":"fc",r?(p?p.empty():p=this.el=e("<div class='fc-toolbar "+n.extraClasses+"'/>"),p.append(a("left")).append(a("right")).append(a("center")).append('<div class="fc-clear"/>')):o()}function o(){p&&(p.remove(),p=h.el=null)}function a(r){var i=e('<div class="fc-'+r+'"/>'),o=n.layout[r],a=t.opt("customButtons")||{},s=t.opt("buttonText")||{};return o&&e.each(o.split(" "),function(){var n,r=e(),o=!0;e.each(this.split(","),function(n,i){var l,u,c,d,f,h,p,v,y;"title"==i?(r=r.add(e("<h2>&nbsp;</h2>")),o=!1):((l=a[i])?(c=function(e){l.click&&l.click.call(y[0],e)},d="",f=l.text):(u=t.getViewSpec(i))?(c=function(){t.changeView(i)},g.push(i),d=u.buttonTextOverride,f=u.buttonTextDefault):t[i]&&(c=function(){t[i]()},d=(t.overrides.buttonText||{})[i],f=s[i]),c&&(h=l?l.themeIcon:t.opt("themeButtonIcons")[i],p=l?l.icon:t.opt("buttonIcons")[i],v=d?ce(d):h&&t.opt("theme")?"<span class='ui-icon ui-icon-"+h+"'></span>":p&&!t.opt("theme")?"<span class='fc-icon fc-icon-"+p+"'></span>":ce(f),y=e('<button type="button" class="'+["fc-"+i+"-button",m+"-button",m+"-state-default"].join(" ")+'">'+v+"</button>").click(function(e){y.hasClass(m+"-state-disabled")||(c(e),(y.hasClass(m+"-state-active")||y.hasClass(m+"-state-disabled"))&&y.removeClass(m+"-state-hover"))}).mousedown(function(){y.not("."+m+"-state-active").not("."+m+"-state-disabled").addClass(m+"-state-down")}).mouseup(function(){y.removeClass(m+"-state-down")}).hover(function(){y.not("."+m+"-state-active").not("."+m+"-state-disabled").addClass(m+"-state-hover")},function(){y.removeClass(m+"-state-hover").removeClass(m+"-state-down")}),r=r.add(y)))}),o&&r.first().addClass(m+"-corner-left").end().last().addClass(m+"-corner-right").end(),r.length>1?(n=e("<div/>"),o&&n.addClass("fc-button-group"),n.append(r),i.append(n)):i.append(r)}),i}function s(e){p&&p.find("h2").text(e)}function l(e){p&&p.find(".fc-"+e+"-button").addClass(m+"-state-active")}function u(e){p&&p.find(".fc-"+e+"-button").removeClass(m+"-state-active")}function c(e){p&&p.find(".fc-"+e+"-button").prop("disabled",!0).addClass(m+"-state-disabled")}function d(e){p&&p.find(".fc-"+e+"-button").prop("disabled",!1).removeClass(m+"-state-disabled")}function f(){return g}var h=this;h.setToolbarOptions=r,h.render=i,h.removeElement=o,h.updateTitle=s,h.activateButton=l,h.deactivateButton=u,h.disableButton=c,h.enableButton=d,h.getViewsWithButtons=f,h.el=null;var p,m,g=[]}function Ve(t){e.each(At,function(e,n){null==t[e]&&(t[e]=n(t))})}function Ue(e){return t.localeData(e)||t.localeData("en")}function $e(){function n(e,t){return!U.opt("lazyFetching")||o(e,t)?a(e,t):ct.resolve(G)}function r(){G=i(Q),U.trigger("eventsReset",G)}function i(e){var t,n,r=[];for(t=0;t<e.length;t++)(n=e[t]).start.clone().stripZone()<Y&&U.getEventEnd(n).stripZone()>$&&r.push(n);return r}function o(e,t){return!$||e<$||t>Y}function a(e,t){return $=e,Y=t,s()}function s(){return u(K,"reset")}function l(e){return u(C(e))}function u(e,t){var n,r;for("reset"===t?Q=[]:"add"!==t&&(Q=T(Q,e)),n=0;n<e.length;n++)"pending"!==(r=e[n])._status&&Z++,r._fetchId=(r._fetchId||0)+1,r._status="pending";for(n=0;n<e.length;n++)c(r=e[n],r._fetchId);return Z?ct.construct(function(e){U.one("eventsReceived",e)}):ct.resolve(G)}function c(t,n){h(t,function(r){var i,o,a,s=e.isArray(t.events);if(n===t._fetchId&&"rejected"!==t._status){if(t._status="resolved",r)for(i=0;i<r.length;i++)o=r[i],(a=s?o:P(o,t))&&Q.push.apply(Q,j(a));f()}})}function d(e){var t="pending"===e._status;e._status="rejected",t&&f()}function f(){--Z||(r(Q),U.trigger("eventsReceived",G))}function h(t,n){var r,i,o=Ge.sourceFetchers;for(r=0;r<o.length;r++){if(!0===(i=o[r].call(U,t,$.clone(),Y.clone(),U.opt("timezone"),n)))return;if("object"==typeof i)return void h(i,n)}var a=t.events;if(a)e.isFunction(a)?(U.pushLoading(),a.call(U,$.clone(),Y.clone(),U.opt("timezone"),function(e){n(e),U.popLoading()})):e.isArray(a)?n(a):n();else{if(t.url){var s,l=t.success,u=t.error,c=t.complete;s=e.isFunction(t.data)?t.data():t.data;var d=e.extend({},s||{}),f=ue(t.startParam,U.opt("startParam")),p=ue(t.endParam,U.opt("endParam")),m=ue(t.timezoneParam,U.opt("timezoneParam"));f&&(d[f]=$.format()),p&&(d[p]=Y.format()),U.opt("timezone")&&"local"!=U.opt("timezone")&&(d[m]=U.opt("timezone")),U.pushLoading(),e.ajax(e.extend({},Lt,t,{data:d,success:function(t){t=t||[];var r=le(l,this,arguments);e.isArray(r)&&(t=r),n(t)},error:function(){le(u,this,arguments),n()},complete:function(){le(c,this,arguments),U.popLoading()}}))}else n()}}function p(e){var t=m(e);t&&(K.push(t),u([t],"add"))}function m(t){var n,r,i=Ge.sourceNormalizers;if(e.isFunction(t)||e.isArray(t)?n={events:t}:"string"==typeof t?n={url:t}:"object"==typeof t&&(n=e.extend({},t)),n){for(n.className?"string"==typeof n.className&&(n.className=n.className.split(/\s+/)):n.className=[],e.isArray(n.events)&&(n.origArray=n.events,n.events=e.map(n.events,function(e){return P(e,n)})),r=0;r<i.length;r++)i[r].call(U,n);return n}}function g(e){y(S(e))}function v(e){null==e?y(K,!0):y(C(e))}function y(t,n){var i;for(i=0;i<t.length;i++)d(t[i]);n?(K=[],Q=[]):(K=e.grep(K,function(e){for(i=0;i<t.length;i++)if(e===t[i])return!1;return!0}),Q=T(Q,t)),r()}function b(){return K.slice(1)}function w(t){return e.grep(K,function(e){return e.id&&e.id===t})[0]}function C(t){t?e.isArray(t)||(t=[t]):t=[];var n,r=[];for(n=0;n<t.length;n++)r.push.apply(r,S(t[n]));return r}function S(t){var n,r;for(n=0;n<K.length;n++)if((r=K[n])===t)return[r];return(r=w(t))?[r]:e.grep(K,function(e){return x(t,e)})}function x(e,t){return e&&t&&k(e)==k(t)}function k(e){return("object"==typeof e?e.origArray||e.googleCalendarId||e.url||e.events:null)||e}function T(t,n){return e.grep(t,function(e){for(var t=0;t<n.length;t++)if(e.source===n[t])return!1;return!0})}function E(e){D([e])}function D(e){var t,n;for(t=0;t<e.length;t++)(n=e[t]).start=U.moment(n.start),n.end?n.end=U.moment(n.end):n.end=null,q(n,N(n));r()}function N(t){var n={};return e.each(t,function(e,t){_(e)&&t!==undefined&&se(t)&&(n[e]=t)}),n}function _(e){return!/^_|^(id|allDay|start|end)$/.test(e)}function R(e,t){return A([e],t)}function A(e,t){var n,i,o,a,s,l=[];for(o=0;o<e.length;o++)if(i=P(e[o])){for(n=j(i),a=0;a<n.length;a++)(s=n[a]).source||(t&&(X.events.push(s),s.source=X),Q.push(s));l=l.concat(n)}return l.length&&r(),l}function L(t){var n,i;for(null==t?t=function(){return!0}:e.isFunction(t)||(n=t+"",t=function(e){return e._id==n}),Q=e.grep(Q,t,!0),i=0;i<K.length;i++)e.isArray(K[i].events)&&(K[i].events=e.grep(K[i].events,t,!0));r()}function M(t){return e.isFunction(t)?e.grep(Q,t):null!=t?(t+="",e.grep(Q,function(e){return e._id==t})):Q}function O(e){e.start=U.moment(e.start),e.end&&(e.end=U.moment(e.end)),Ye(e)}function P(n,r){var i,o,a,s=U.opt("eventDataTransform"),l={};if(s&&(n=s(n)),r&&r.eventDataTransform&&(n=r.eventDataTransform(n)),e.extend(l,n),r&&(l.source=r),l._id=n._id||(n.id===undefined?"_fc"+Mt++:n.id+""),n.className?"string"==typeof n.className?l.className=n.className.split(/\s+/):l.className=n.className:l.className=[],i=n.start||n.date,o=n.end,ne(i)&&(i=t.duration(i)),ne(o)&&(o=t.duration(o)),n.dow||t.isDuration(i)||t.isDuration(o))l.start=i?t.duration(i):null,l.end=o?t.duration(o):null,l._recurring=!0;else{if(i&&!(i=U.moment(i)).isValid())return!1;o&&((o=U.moment(o)).isValid()||(o=null)),(a=n.allDay)===undefined&&(a=ue(r?r.allDayDefault:undefined,U.opt("allDayDefault"))),F(i,o,a,l)}return U.normalizeEvent(l),l}function F(e,t,n,r){r.start=e,r.end=t,r.allDay=n,W(r),Ye(r)}function W(e){z(e),e.end&&!e.end.isAfter(e.start)&&(e.end=null),e.end||(U.opt("forceEventDuration")?e.end=U.getDefaultEventEnd(e.allDay,e.start):e.end=null)}function z(e){null==e.allDay&&(e.allDay=!(e.start.hasTime()||e.end&&e.end.hasTime())),e.allDay?(e.start.stripTime(),e.end&&e.end.stripTime()):(e.start.hasTime()||(e.start=U.applyTimezone(e.start.time(0))),e.end&&!e.end.hasTime()&&(e.end=U.applyTimezone(e.end.time(0))))}function j(t,n,r){var i,o,a,s,l,u,c,d,f,h=[];if(n=n||$,r=r||Y,t)if(t._recurring){if(o=t.dow)for(i={},a=0;a<o.length;a++)i[o[a]]=!0;for(s=n.clone().stripTime();s.isBefore(r);)i&&!i[s.day()]||(l=t.start,u=t.end,c=s.clone(),d=null,l&&(c=c.time(l)),u&&(d=s.clone().time(u)),f=e.extend({},t),F(c,d,!l&&!u,f),h.push(f)),s.add(1,"days")}else h.push(t);return h}function q(t,n,r){function i(e,t){return r?B(e,t,r):n.allDay?H(e,t):I(e,t)}var o,a,s,l,u,c={};return(n=n||{}).start||(n.start=t.start.clone()),n.end===undefined&&(n.end=t.end?t.end.clone():null),null==n.allDay&&(n.allDay=t.allDay),W(n),o={start:t._start.clone(),end:t._end?t._end.clone():U.getDefaultEventEnd(t._allDay,t._start),allDay:n.allDay},W(o),a=null!==t._end&&null===n.end,s=i(n.start,o.start),l=n.end?i(n.end,o.end).subtract(s):null,e.each(n,function(e,t){_(e)&&t!==undefined&&(c[e]=t)}),u=V(M(t._id),a,n.allDay,s,l,c),{dateDelta:s,durationDelta:l,undo:u}}function V(t,n,r,i,o,a){var s=U.getIsAmbigTimezone(),l=[];return i&&!i.valueOf()&&(i=null),o&&!o.valueOf()&&(o=null),e.each(t,function(t,u){var c,d;c={start:u.start.clone(),end:u.end?u.end.clone():null,allDay:u.allDay},e.each(a,function(e){c[e]=u[e]}),W(d={start:u._start,end:u._end,allDay:r}),n?d.end=null:o&&!d.end&&(d.end=U.getDefaultEventEnd(d.allDay,d.start)),i&&(d.start.add(i),d.end&&d.end.add(i)),o&&d.end.add(o),s&&!d.allDay&&(i||o)&&(d.start.stripZone(),d.end&&d.end.stripZone()),e.extend(u,a,d),Ye(u),l.push(function(){e.extend(u,c),Ye(u)})}),function(){for(var e=0;e<l.length;e++)l[e]()}}var U=this;U.requestEvents=n,U.reportEventChange=r,U.isFetchNeeded=o,U.fetchEvents=a,U.fetchEventSources=u,U.refetchEvents=s,U.refetchEventSources=l,U.getEventSources=b,U.getEventSourceById=w,U.addEventSource=p,U.removeEventSource=g,U.removeEventSources=v,U.updateEvent=E,U.updateEvents=D,U.renderEvent=R,U.renderEvents=A,U.removeEvents=L,U.clientEvents=M,U.mutateEvent=q,U.normalizeEventDates=W,U.normalizeEventTimes=z;var $,Y,G,X={events:[]},K=[X],Z=0,Q=[];e.each((U.opt("events")?[U.opt("events")]:[]).concat(U.opt("eventSources")||[]),function(e,t){var n=m(t);n&&K.push(n)}),U.getEventCache=function(){return Q},U.rezoneArrayEventSources=function(){var t,n,r;for(t=0;t<K.length;t++)if(n=K[t].events,e.isArray(n))for(r=0;r<n.length;r++)O(n[r])},U.buildEventFromInput=P,U.expandEvent=j}function Ye(e){e._allDay=e.allDay,e._start=e.start.clone(),e._end=e.end?e.end.clone():null}var Ge=e.fullCalendar={version:"3.4.0",internalApiVersion:9},Xe=Ge.views={};e.fn.fullCalendar=function(t){var n=Array.prototype.slice.call(arguments,1),r=this;return this.each(function(i,o){var a,s=e(o),l=s.data("fullCalendar");"string"==typeof t?l&&e.isFunction(l[t])&&(a=l[t].apply(l,n),i||(r=a),"destroy"===t&&s.removeData("fullCalendar")):l||(l=new Dt(s,t),s.data("fullCalendar",l),l.render())}),r};var Ke=["header","footer","buttonText","buttonIcons","themeButtonIcons"];Ge.intersectRanges=P,Ge.applyAll=le,Ge.debounce=ye,Ge.isInt=ge,Ge.htmlEscape=ce,Ge.cssToStr=fe,Ge.proxy=ve,Ge.capitaliseFirstLetter=pe,Ge.getOuterRect=f,Ge.getClientRect=h,Ge.getContentRect=p,Ge.getScrollbarWidths=m;var Ze=null;Ge.preventDefault=E,Ge.intersectRects=D,Ge.parseFieldSpecs=A,Ge.compareByFieldSpecs=L,Ge.compareByFieldSpec=M,Ge.flexibleCompare=O,Ge.computeGreatestUnit=F,Ge.divideRangeByDuration=j,Ge.divideDurationByDuration=q,Ge.multiplyDuration=V,Ge.durationHasTime=ee;var Qe=["sun","mon","tue","wed","thu","fri","sat"],Je=["year","month","week","day","hour","minute","second","millisecond"];Ge.log=function(){var e=window.console;if(e&&e.log)return e.log.apply(e,arguments)},Ge.warn=function(){var e=window.console;return e&&e.warn?e.warn.apply(e,arguments):Ge.log.apply(Ge,arguments)};var et={}.hasOwnProperty;Ge.createObject=ie;var tt=/^\s*\d{4}-\d\d$/,nt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,rt=t.fn,it=e.extend({},rt),ot=t.momentProperties;ot.push("_fullCalendar"),ot.push("_ambigTime"),ot.push("_ambigZone"),Ge.moment=function(){return be(arguments)},Ge.moment.utc=function(){var e=be(arguments,!0);return e.hasTime()&&e.utc(),e},Ge.moment.parseZone=function(){return be(arguments,!0,!0)},rt.week=rt.weeks=function(e){var t=this._locale._fullCalendar_weekCalc;return null==e&&"function"==typeof t?t(this):"ISO"===t?it.isoWeek.apply(this,arguments):it.week.apply(this,arguments)},rt.time=function(e){if(!this._fullCalendar)return it.time.apply(this,arguments);if(null==e)return t.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,t.isDuration(e)||t.isMoment(e)||(e=t.duration(e));var n=0;return t.isDuration(e)&&(n=24*Math.floor(e.asDays())),this.hours(n+e.hours()).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds())},rt.stripTime=function(){return this._ambigTime||(this.utc(!0),this.set({hours:0,minutes:0,seconds:0,ms:0}),this._ambigTime=!0,this._ambigZone=!0),this},rt.hasTime=function(){return!this._ambigTime},rt.stripZone=function(){var e;return this._ambigZone||(e=this._ambigTime,this.utc(!0),this._ambigTime=e||!1,this._ambigZone=!0),this},rt.hasZone=function(){return!this._ambigZone},rt.local=function(e){return it.local.call(this,this._ambigZone||e),this._ambigTime=!1,this._ambigZone=!1,this},rt.utc=function(e){return it.utc.call(this,e),this._ambigTime=!1,this._ambigZone=!1,this},rt.utcOffset=function(e){return null!=e&&(this._ambigTime=!1,this._ambigZone=!1),it.utcOffset.apply(this,arguments)},rt.format=function(){return this._fullCalendar&&arguments[0]?at(this,arguments[0]):this._ambigTime?lt(we(this),"YYYY-MM-DD"):this._ambigZone?lt(we(this),"YYYY-MM-DD[T]HH:mm:ss"):this._fullCalendar?lt(we(this)):it.format.apply(this,arguments)},rt.toISOString=function(){return this._ambigTime?lt(we(this),"YYYY-MM-DD"):this._ambigZone?lt(we(this),"YYYY-MM-DD[T]HH:mm:ss"):this._fullCalendar?it.toISOString.apply(we(this),arguments):it.toISOString.apply(this,arguments)},function(){function e(e,t){return c(i(t).fakeFormatString,e)}function t(e,t){return it.format.call(e,t)}function n(e,t,n,o,a){var s;return e=Ge.moment.parseZone(e),t=Ge.moment.parseZone(t),s=e.localeData(),n=s.longDateFormat(n)||n,r(i(n),e,t,o||" - ",a)}function r(e,t,n,r,i){var o,a,s,l=e.sameUnits,u=t.clone().stripZone(),c=n.clone().stripZone(),h=d(e.fakeFormatString,t),p=d(e.fakeFormatString,n),m="",g="",v="",y="",b="";for(o=0;o<l.length&&(!l[o]||u.isSame(c,l[o]));o++)m+=h[o];for(a=l.length-1;a>o&&(!l[a]||u.isSame(c,l[a]))&&(a-1!==o||"."!==h[a]);a--)g=h[a]+g;for(s=o;s<=a;s++)v+=h[s],y+=p[s];return(v||y)&&(b=i?y+r+v:v+r+y),f(m+b+g)}function i(e){return w[e]||(w[e]=o(e))}function o(e){var t=a(e);return{fakeFormatString:l(t),sameUnits:u(t)}}function a(e){for(var t,n=[],r=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;t=r.exec(e);)t[1]?n.push.apply(n,s(t[1])):t[2]?n.push({maybe:a(t[2])}):t[3]?n.push({token:t[3]}):t[5]&&n.push.apply(n,s(t[5]));return n}function s(e){return". "===e?["."," "]:[e]}function l(e){var t,n,r=[];for(t=0;t<e.length;t++)"string"==typeof(n=e[t])?r.push("["+n+"]"):n.token?n.token in y?r.push(m+"["+n.token+"]"):r.push(n.token):n.maybe&&r.push(g+l(n.maybe)+g);return r.join(p)}function u(e){var t,n,r,i=[];for(t=0;t<e.length;t++)(n=e[t]).token?(r=b[n.token.charAt(0)],i.push(r?r.unit:"second")):n.maybe?i.push.apply(i,u(n.maybe)):i.push(null);return i}function c(e,t){return f(d(e,t).join(""))}function d(e,n){var r,i,o=[],a=t(n,e).split(p);for(r=0;r<a.length;r++)(i=a[r]).charAt(0)===m?o.push(y[i.substring(1)](n)):o.push(i);return o}function f(e){return e.replace(v,function(e,t){return t.match(/[1-9]/)?t:""})}function h(e){var t,n,r,i,o=a(e);for(t=0;t<o.length;t++)(n=o[t]).token&&(r=b[n.token.charAt(0)])&&(!i||r.value>i.value)&&(i=r);return i?i.unit:null}Ge.formatDate=e,Ge.formatRange=n,Ge.oldMomentFormat=t,Ge.queryMostGranularFormatUnit=h;var p="\x0B",m="\x1f",g="\x1e",v=new RegExp(g+"([^"+g+"]*)"+g,"g"),y={t:function(e){return t(e,"a").charAt(0)},T:function(e){return t(e,"A").charAt(0)}},b={Y:{value:1,unit:"year"},M:{value:2,unit:"month"},W:{value:3,unit:"week"},w:{value:3,unit:"week"},D:{value:4,unit:"day"},d:{value:4,unit:"day"}},w={}}();var at=Ge.formatDate,st=Ge.formatRange,lt=Ge.oldMomentFormat;Ge.Class=Ce,Ce.extend=function(){var e,t,n=arguments.length;for(e=0;e<n;e++)t=arguments[e],e<n-1&&xe(this,t);return Se(this,t||{})},Ce.mixin=function(e){xe(this,e)};var ut=Ce.extend(ht,pt,{_props:null,_watchers:null,_globalWatchArgs:null,constructor:function(){this._watchers={},this._props={},this.applyGlobalWatchers()},applyGlobalWatchers:function(){var e,t=this._globalWatchArgs||[];for(e=0;e<t.length;e++)this.watch.apply(this,t[e])},has:function(e){return e in this._props},get:function(e){return e===undefined?this._props:this._props[e]},set:function(e,t){var n;"string"==typeof e?(n={})[e]=t===undefined?null:t:n=e,this.setProps(n)},reset:function(e){var t,n=this._props,r={};for(t in n)r[t]=undefined;for(t in e)r[t]=e[t];this.setProps(r)},unset:function(e){var t,n,r={};for(t="string"==typeof e?[e]:e,n=0;n<t.length;n++)r[t[n]]=undefined;this.setProps(r)},setProps:function(e){var t,n,r={},i=0;for(t in e)"object"!=typeof(n=e[t])&&n===this._props[t]||(r[t]=n,i++);if(i){this.trigger("before:batchChange",r);for(t in r)n=r[t],this.trigger("before:change",t,n),this.trigger("before:change:"+t,n);for(t in r)(n=r[t])===undefined?delete this._props[t]:this._props[t]=n,this.trigger("change:"+t,n),this.trigger("change",t,n);this.trigger("batchChange",r)}},watch:function(e,t,n,r){var i=this;this.unwatch(e),this._watchers[e]=this._watchDeps(t,function(t){var r=n.call(i,t);r&&r.then?(i.unset(e),r.then(function(t){i.set(e,t)})):i.set(e,r)},function(){i.unset(e),r&&r.call(i)})},unwatch:function(e){var t=this._watchers[e];t&&(delete this._watchers[e],t.teardown())},_watchDeps:function(e,t,n){function r(){1===++s&&u===l&&(f=!0,n(),f=!1)}function i(e,n,r){n===undefined?(r||c[e]===undefined||u--,delete c[e]):(r||c[e]!==undefined||u++,c[e]=n),--s||u===l&&(f||t(c))}function o(e,t){a.on(e,t),d.push([e,t])}var a=this,s=0,l=e.length,u=0,c={},d=[],f=!1;return e.forEach(function(e){var t=!1;"?"===e.charAt(0)&&(e=e.substring(1),t=!0),o("before:change:"+e,function(n){r(e,n,t)}),o("change:"+e,function(n){i(e,n,t)})}),e.forEach(function(e){var t=!1;"?"===e.charAt(0)&&(e=e.substring(1),t=!0),a.has(e)?(c[e]=a.get(e),u++):t&&u++}),u===l&&t(c),{teardown:function(){for(var e=0;e<d.length;e++)a.off(d[e][0],d[e][1]);d=null,u===l&&n()},flash:function(){u===l&&(n(),t(c))}}},flash:function(e){var t=this._watchers[e];t&&t.flash()}});ut.watch=function(){var e=this.prototype;e._globalWatchArgs||(e._globalWatchArgs=[]),e._globalWatchArgs.push(arguments)},Ge.Model=ut;var ct={construct:function(t){var n=e.Deferred(),r=n.promise();return"function"==typeof t&&t(function(e){n.resolve(e),ke(r,e)},function(){n.reject(),Te(r)}),r},resolve:function(t){var n=e.Deferred().resolve(t).promise();return ke(n,t),n},reject:function(){var t=e.Deferred().reject().promise();return Te(t),t}};Ge.Promise=ct;var dt=Ce.extend(ht,{q:null,isPaused:!1,isRunning:!1,constructor:function(){this.q=[]},queue:function(){this.q.push.apply(this.q,arguments),this.tryStart()},pause:function(){this.isPaused=!0},resume:function(){this.isPaused=!1,this.tryStart()},tryStart:function(){!this.isRunning&&this.canRunNext()&&(this.isRunning=!0,this.trigger("start"),this.runNext())},canRunNext:function(){return!this.isPaused&&this.q.length},runNext:function(){this.runTask(this.q.shift())},runTask:function(e){this.runTaskFunc(e)},runTaskFunc:function(e){function t(){n.canRunNext()?n.runNext():(n.isRunning=!1,n.trigger("stop"))}var n=this,r=e();r&&r.then?r.then(t):t()}});Ge.TaskQueue=dt;var ft=dt.extend({waitsByNamespace:null,waitNamespace:null,waitId:null,constructor:function(e){dt.call(this),this.waitsByNamespace=e||{}},queue:function(e,t,n){var r,i={func:e,namespace:t,type:n};t&&(r=this.waitsByNamespace[t]),this.waitNamespace&&(t===this.waitNamespace&&null!=r?this.delayWait(r):(this.clearWait(),this.tryStart())),this.compoundTask(i)&&(this.waitNamespace||null==r?this.tryStart():this.startWait(t,r))},startWait:function(e,t){this.waitNamespace=e,this.spawnWait(t)},delayWait:function(e){clearTimeout(this.waitId),this.spawnWait(e)},spawnWait:function(e){var t=this;this.waitId=setTimeout(function(){t.waitNamespace=null,t.tryStart()},e)},clearWait:function(){this.waitNamespace&&(clearTimeout(this.waitId),this.waitId=null,this.waitNamespace=null)},canRunNext:function(){if(!dt.prototype.canRunNext.apply(this,arguments))return!1;if(this.waitNamespace){for(var e=this.q,t=0;t<e.length;t++)if(e[t].namespace!==this.waitNamespace)return!0;return!1}return!0},runTask:function(e){this.runTaskFunc(e.func)},compoundTask:function(e){var t,n,r=this.q,i=!0;if(e.namespace&&("destroy"===e.type||"init"===e.type)){for(t=r.length-1;t>=0;t--)(n=r[t]).namespace!==e.namespace||"add"!==n.type&&"remove"!==n.type||r.splice(t,1);"destroy"===e.type?r.length&&(n=r[r.length-1]).namespace===e.namespace&&("init"===n.type?(i=!1,r.pop()):"destroy"===n.type&&(i=!1)):"init"===e.type&&r.length&&(n=r[r.length-1]).namespace===e.namespace&&"init"===n.type&&r.pop()}return i&&r.push(e),i}});Ge.RenderQueue=ft;var ht=Ge.EmitterMixin={on:function(t,n){return e(this).on(t,this._prepareIntercept(n)),this},one:function(t,n){return e(this).one(t,this._prepareIntercept(n)),this},_prepareIntercept:function(t){var n=function(e,n){return t.apply(n.context||this,n.args||[])};return t.guid||(t.guid=e.guid++),n.guid=t.guid,n},off:function(t,n){return e(this).off(t,n),this},trigger:function(t){var n=Array.prototype.slice.call(arguments,1);return e(this).triggerHandler(t,{args:n}),this},triggerWith:function(t,n,r){return e(this).triggerHandler(t,{context:n,args:r}),this}},pt=Ge.ListenerMixin=function(){var t=0;return{listenerId:null,listenTo:function(t,n,r){if("object"==typeof n)for(var i in n)n.hasOwnProperty(i)&&this.listenTo(t,i,n[i]);else"string"==typeof n&&t.on(n+"."+this.getListenerNamespace(),e.proxy(r,this))},stopListeningTo:function(e,t){e.off((t||"")+"."+this.getListenerNamespace())},getListenerNamespace:function(){return null==this.listenerId&&(this.listenerId=t++),"_listener"+this.listenerId}}}(),mt=Ce.extend(pt,{isHidden:!0,options:null,el:null,margin:10,constructor:function(e){this.options=e||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var t=this,n=this.options;this.el=e('<div class="fc-popover"/>').addClass(n.className||"").css({top:0,left:0}).append(n.content).appendTo(n.parentEl),this.el.on("click",".fc-close",function(){t.hide()}),n.autoHide&&this.listenTo(e(document),"mousedown",this.documentMousedown)},documentMousedown:function(t){this.el&&!e(t.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),this.stopListeningTo(e(document),"mousedown")},position:function(){var t,n,r,i,o,a=this.options,s=this.el.offsetParent().offset(),l=this.el.outerWidth(),u=this.el.outerHeight(),c=e(window),f=d(this.el);i=a.top||0,o=a.left!==undefined?a.left:a.right!==undefined?a.right-l:0,f.is(window)||f.is(document)?(f=c,t=0,n=0):(t=(r=f.offset()).top,n=r.left),t+=c.scrollTop(),n+=c.scrollLeft(),!1!==a.viewportConstrain&&(i=Math.min(i,t+f.outerHeight()-u-this.margin),i=Math.max(i,t+this.margin),o=Math.min(o,n+f.outerWidth()-l-this.margin),o=Math.max(o,n+this.margin)),this.el.css({top:i-s.top,left:o-s.left})},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}}),gt=Ge.CoordCache=Ce.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:!1,isVertical:!1,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(t){this.els=e(t.els),this.isHorizontal=t.isHorizontal,this.isVertical=t.isVertical,this.forcedOffsetParentEl=t.offsetParent?e(t.offsetParent):null},build:function(){var e=this.forcedOffsetParentEl;!e&&this.els.length>0&&(e=this.els.eq(0).offsetParent()),this.origin=e?e.offset():null,this.boundingRect=this.queryBoundingRect(),this.isHorizontal&&this.buildElHorizontals(),this.isVertical&&this.buildElVerticals()},clear:function(){this.origin=null,this.boundingRect=null,this.lefts=null,this.rights=null,this.tops=null,this.bottoms=null},ensureBuilt:function(){this.origin||this.build()},buildElHorizontals:function(){var t=[],n=[];this.els.each(function(r,i){var o=e(i),a=o.offset().left,s=o.outerWidth();t.push(a),n.push(a+s)}),this.lefts=t,this.rights=n},buildElVerticals:function(){var t=[],n=[];this.els.each(function(r,i){var o=e(i),a=o.offset().top,s=o.outerHeight();t.push(a),n.push(a+s)}),this.tops=t,this.bottoms=n},getHorizontalIndex:function(e){this.ensureBuilt();var t,n=this.lefts,r=this.rights,i=n.length;for(t=0;t<i;t++)if(e>=n[t]&&e<r[t])return t},getVerticalIndex:function(e){this.ensureBuilt();var t,n=this.tops,r=this.bottoms,i=n.length;for(t=0;t<i;t++)if(e>=n[t]&&e<r[t])return t},getLeftOffset:function(e){return this.ensureBuilt(),this.lefts[e]},getLeftPosition:function(e){return this.ensureBuilt(),this.lefts[e]-this.origin.left},getRightOffset:function(e){return this.ensureBuilt(),this.rights[e]},getRightPosition:function(e){return this.ensureBuilt(),this.rights[e]-this.origin.left},getWidth:function(e){return this.ensureBuilt(),this.rights[e]-this.lefts[e]},getTopOffset:function(e){return this.ensureBuilt(),this.tops[e]},getTopPosition:function(e){return this.ensureBuilt(),this.tops[e]-this.origin.top},getBottomOffset:function(e){return this.ensureBuilt(),this.bottoms[e]},getBottomPosition:function(e){return this.ensureBuilt(),this.bottoms[e]-this.origin.top},getHeight:function(e){return this.ensureBuilt(),this.bottoms[e]-this.tops[e]},queryBoundingRect:function(){var e;return this.els.length>0&&!(e=d(this.els.eq(0))).is(document)?h(e):null},isPointInBounds:function(e,t){return this.isLeftInBounds(e)&&this.isTopInBounds(t)},isLeftInBounds:function(e){return!this.boundingRect||e>=this.boundingRect.left&&e<this.boundingRect.right},isTopInBounds:function(e){return!this.boundingRect||e>=this.boundingRect.top&&e<this.boundingRect.bottom}}),vt=Ge.DragListener=Ce.extend(pt,{options:null,subjectEl:null,originX:null,originY:null,scrollEl:null,isInteracting:!1,isDistanceSurpassed:!1,isDelayEnded:!1,isDragging:!1,isTouch:!1,isGeneric:!1,delay:null,delayTimeoutId:null,minDistance:null,shouldCancelTouchScroll:!0,scrollAlwaysKills:!1,constructor:function(e){this.options=e||{}},startInteraction:function(t,n){if("mousedown"===t.type){if(bt.get().shouldIgnoreMouse())return;if(!w(t))return;t.preventDefault()}this.isInteracting||(n=n||{},this.delay=ue(n.delay,this.options.delay,0),this.minDistance=ue(n.distance,this.options.distance,0),this.subjectEl=this.options.subjectEl,k(e("body")),this.isInteracting=!0,this.isTouch=x(t),this.isGeneric="dragstart"===t.type,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.originX=C(t),this.originY=S(t),this.scrollEl=d(e(t.target)),this.bindHandlers(),this.initAutoScroll(),this.handleInteractionStart(t),this.startDelay(t),this.minDistance||this.handleDistanceSurpassed(t))},handleInteractionStart:function(e){this.trigger("interactionStart",e)},endInteraction:function(t,n){this.isInteracting&&(this.endDrag(t),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null),this.destroyAutoScroll(),this.unbindHandlers(),this.isInteracting=!1,this.handleInteractionEnd(t,n),T(e("body")))},handleInteractionEnd:function(e,t){this.trigger("interactionEnd",e,t||!1)},bindHandlers:function(){var t=bt.get();this.isGeneric?this.listenTo(e(document),{drag:this.handleMove,dragstop:this.endInteraction}):this.isTouch?this.listenTo(t,{touchmove:this.handleTouchMove,touchend:this.endInteraction,scroll:this.handleTouchScroll}):this.listenTo(t,{mousemove:this.handleMouseMove,mouseup:this.endInteraction}),this.listenTo(t,{selectstart:E,contextmenu:E})},unbindHandlers:function(){this.stopListeningTo(bt.get()),this.stopListeningTo(e(document))},startDrag:function(e,t){this.startInteraction(e,t),this.isDragging||(this.isDragging=!0,this.handleDragStart(e))},handleDragStart:function(e){this.trigger("dragStart",e)},handleMove:function(e){var t=C(e)-this.originX,n=S(e)-this.originY,r=this.minDistance;this.isDistanceSurpassed||t*t+n*n>=r*r&&this.handleDistanceSurpassed(e),this.isDragging&&this.handleDrag(t,n,e)},handleDrag:function(e,t,n){this.trigger("drag",e,t,n),this.updateAutoScroll(n)},endDrag:function(e){this.isDragging&&(this.isDragging=!1,this.handleDragEnd(e))},handleDragEnd:function(e){this.trigger("dragEnd",e)},startDelay:function(e){var t=this;this.delay?this.delayTimeoutId=setTimeout(function(){t.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)},handleDelayEnd:function(e){this.isDelayEnded=!0,this.isDistanceSurpassed&&this.startDrag(e)},handleDistanceSurpassed:function(e){this.isDistanceSurpassed=!0,this.isDelayEnded&&this.startDrag(e)},handleTouchMove:function(e){this.isDragging&&this.shouldCancelTouchScroll&&e.preventDefault(),this.handleMove(e)},handleMouseMove:function(e){this.handleMove(e)},handleTouchScroll:function(e){this.isDragging&&!this.scrollAlwaysKills||this.endInteraction(e,!0)},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1)),this["_"+e]&&this["_"+e].apply(this,Array.prototype.slice.call(arguments,1))}});vt.mixin({isAutoScroll:!1,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,initAutoScroll:function(){var e=this.scrollEl;this.isAutoScroll=this.options.scroll&&e&&!e.is(window)&&!e.is(document),this.isAutoScroll&&this.listenTo(e,"scroll",ye(this.handleDebouncedScroll,100))},destroyAutoScroll:function(){this.endAutoScroll(),this.isAutoScroll&&this.stopListeningTo(this.scrollEl,"scroll")},computeScrollBounds:function(){this.isAutoScroll&&(this.scrollBounds=f(this.scrollEl))},updateAutoScroll:function(e){var t,n,r,i,o=this.scrollSensitivity,a=this.scrollBounds,s=0,l=0;a&&(t=(o-(S(e)-a.top))/o,n=(o-(a.bottom-S(e)))/o,r=(o-(C(e)-a.left))/o,i=(o-(a.right-C(e)))/o,t>=0&&t<=1?s=t*this.scrollSpeed*-1:n>=0&&n<=1&&(s=n*this.scrollSpeed),r>=0&&r<=1?l=r*this.scrollSpeed*-1:i>=0&&i<=1&&(l=i*this.scrollSpeed)),this.setScrollVel(s,l)},setScrollVel:function(e,t){this.scrollTopVel=e,this.scrollLeftVel=t,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(ve(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var e=this.scrollEl;this.scrollTopVel<0?e.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&e.scrollTop()+e[0].clientHeight>=e[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?e.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&e.scrollLeft()+e[0].clientWidth>=e[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var e=this.scrollEl,t=this.scrollIntervalMs/1e3;this.scrollTopVel&&e.scrollTop(e.scrollTop()+this.scrollTopVel*t),this.scrollLeftVel&&e.scrollLeft(e.scrollLeft()+this.scrollLeftVel*t),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.endAutoScroll()},endAutoScroll:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.handleScrollEnd())},handleDebouncedScroll:function(){this.scrollIntervalId||this.handleScrollEnd()},handleScrollEnd:function(){}});var yt=vt.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(e,t){vt.call(this,t),this.component=e},handleInteractionStart:function(e){var t,n,r,i=this.subjectEl;this.component.hitsNeeded(),this.computeScrollBounds(),e?(r=n={left:C(e),top:S(e)},i&&(r=N(r,t=f(i))),this.origHit=this.queryHit(r.left,r.top),i&&this.options.subjectCenter&&(this.origHit&&(t=D(this.origHit,t)||t),r=_(t)),this.coordAdjust=R(r,n)):(this.origHit=null,this.coordAdjust=null),vt.prototype.handleInteractionStart.apply(this,arguments)},handleDragStart:function(e){var t;vt.prototype.handleDragStart.apply(this,arguments),(t=this.queryHit(C(e),S(e)))&&this.handleHitOver(t)},handleDrag:function(e,t,n){var r;vt.prototype.handleDrag.apply(this,arguments),Ee(r=this.queryHit(C(n),S(n)),this.hit)||(this.hit&&this.handleHitOut(),r&&this.handleHitOver(r))},handleDragEnd:function(){this.handleHitDone(),vt.prototype.handleDragEnd.apply(this,arguments)},handleHitOver:function(e){var t=Ee(e,this.origHit);this.hit=e,this.trigger("hitOver",this.hit,t,this.origHit)},handleHitOut:function(){this.hit&&(this.trigger("hitOut",this.hit),this.handleHitDone(),this.hit=null)},handleHitDone:function(){this.hit&&this.trigger("hitDone",this.hit)},handleInteractionEnd:function(){vt.prototype.handleInteractionEnd.apply(this,arguments),this.origHit=null,this.hit=null,this.component.hitsNotNeeded()},handleScrollEnd:function(){vt.prototype.handleScrollEnd.apply(this,arguments),this.isDragging&&(this.component.releaseHits(),this.component.prepareHits())},queryHit:function(e,t){return this.coordAdjust&&(e+=this.coordAdjust.left,t+=this.coordAdjust.top),this.component.queryHit(e,t)}});Ge.touchMouseIgnoreWait=500;var bt=Ce.extend(pt,ht,{isTouching:!1,mouseIgnoreDepth:0,handleScrollProxy:null,bind:function(){var t=this;this.listenTo(e(document),{touchstart:this.handleTouchStart,touchcancel:this.handleTouchCancel,touchend:this.handleTouchEnd,mousedown:this.handleMouseDown,mousemove:this.handleMouseMove,mouseup:this.handleMouseUp,click:this.handleClick,selectstart:this.handleSelectStart,contextmenu:this.handleContextMenu}),window.addEventListener("touchmove",this.handleTouchMoveProxy=function(n){t.handleTouchMove(e.Event(n))},{passive:!1}),window.addEventListener("scroll",this.handleScrollProxy=function(n){t.handleScroll(e.Event(n))},!0)},unbind:function(){this.stopListeningTo(e(document)),window.removeEventListener("touchmove",this.handleTouchMoveProxy),window.removeEventListener("scroll",this.handleScrollProxy,!0)},handleTouchStart:function(e){this.stopTouch(e,!0),this.isTouching=!0,this.trigger("touchstart",e)},handleTouchMove:function(e){this.isTouching&&this.trigger("touchmove",e)},handleTouchCancel:function(e){this.isTouching&&(this.trigger("touchcancel",e),this.stopTouch(e))},handleTouchEnd:function(e){this.stopTouch(e)},handleMouseDown:function(e){this.shouldIgnoreMouse()||this.trigger("mousedown",e)},handleMouseMove:function(e){this.shouldIgnoreMouse()||this.trigger("mousemove",e)},handleMouseUp:function(e){this.shouldIgnoreMouse()||this.trigger("mouseup",e)},handleClick:function(e){this.shouldIgnoreMouse()||this.trigger("click",e)},handleSelectStart:function(e){this.trigger("selectstart",e)},handleContextMenu:function(e){this.trigger("contextmenu",e)},handleScroll:function(e){this.trigger("scroll",e)},stopTouch:function(e,t){this.isTouching&&(this.isTouching=!1,this.trigger("touchend",e),t||this.startTouchMouseIgnore())},startTouchMouseIgnore:function(){var e=this,t=Ge.touchMouseIgnoreWait;t&&(this.mouseIgnoreDepth++,setTimeout(function(){e.mouseIgnoreDepth--},t))},shouldIgnoreMouse:function(){return this.isTouching||Boolean(this.mouseIgnoreDepth)}});!function(){var e=null,t=0;bt.get=function(){return e||(e=new bt).bind(),e},bt.needed=function(){bt.get(),t++},bt.unneeded=function(){--t||(e.unbind(),e=null)}}();var wt=Ce.extend(pt,{options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,y0:null,x0:null,topDelta:null,leftDelta:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(t,n){this.options=n=n||{},this.sourceEl=t,this.parentEl=n.parentEl?e(n.parentEl):t.parent()},start:function(t){this.isFollowing||(this.isFollowing=!0,this.y0=S(t),this.x0=C(t),this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),x(t)?this.listenTo(e(document),"touchmove",this.handleMove):this.listenTo(e(document),"mousemove",this.handleMove))},stop:function(t,n){function r(){i.isAnimating=!1,i.removeElement(),i.top0=i.left0=null,n&&n()}var i=this,o=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,this.stopListeningTo(e(document)),t&&o&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:o,complete:r})):r())},getEl:function(){var e=this.el;return e||((e=this.el=this.sourceEl.clone().addClass(this.options.additionalClass||"").css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex})).addClass("fc-unselectable"),e.appendTo(this.parentEl)),e},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var e,t;this.getEl(),null===this.top0&&(e=this.sourceEl.offset(),t=this.el.offsetParent().offset(),this.top0=e.top-t.top,this.left0=e.left-t.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},handleMove:function(e){this.topDelta=S(e)-this.y0,this.leftDelta=C(e)-this.x0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),Ct=Ge.Grid=Ce.extend(pt,{hasDayInteractions:!0,view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,dayClickListener:null,daySelectListener:null,segDragListener:null,segResizeListener:null,externalDragListener:null,constructor:function(e){this.view=e,this.isRTL=e.opt("isRTL"),this.elsByFill={},this.dayClickListener=this.buildDayClickListener(),this.daySelectListener=this.buildDaySelectListener()},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(e){this.start=e.start.clone(),this.end=e.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var e,t,n=this.view;this.eventTimeFormat=n.opt("eventTimeFormat")||n.opt("timeFormat")||this.computeEventTimeFormat(),null==(e=n.opt("displayEventTime"))&&(e=this.computeDisplayEventTime()),null==(t=n.opt("displayEventEnd"))&&(t=this.computeDisplayEventEnd()),this.displayEventTime=e,this.displayEventEnd=t},spanToSegs:function(){},diffDates:function(e,t){return this.largeUnit?B(e,t,this.largeUnit):I(e,t)},hitsNeededDepth:0,hitsNeeded:function(){this.hitsNeededDepth++||this.prepareHits()},hitsNotNeeded:function(){this.hitsNeededDepth&&!--this.hitsNeededDepth&&this.releaseHits()},prepareHits:function(){},releaseHits:function(){},queryHit:function(){},getSafeHitSpan:function(e){var t=this.getHitSpan(e);return K(t,this.view.activeRange)?t:null},getHitSpan:function(){},getHitEl:function(){},setElement:function(e){this.el=e,this.hasDayInteractions&&(k(e),this.bindDayHandler("touchstart",this.dayTouchStart),this.bindDayHandler("mousedown",this.dayMousedown)),this.bindSegHandlers(),this.bindGlobalHandlers()},bindDayHandler:function(t,n){var r=this;this.el.on(t,function(t){if(!e(t.target).is(r.segSelector+","+r.segSelector+" *,.fc-more,a[data-goto]"))return n.call(r,t)})},removeElement:function(){this.unbindGlobalHandlers(),this.clearDragListeners(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){this.listenTo(e(document),{dragstart:this.externalDragStart,sortstart:this.externalDragStart})},unbindGlobalHandlers:function(){this.stopListeningTo(e(document))},dayMousedown:function(e){var t=this.view;bt.get().shouldIgnoreMouse()||(this.dayClickListener.startInteraction(e),t.opt("selectable")&&this.daySelectListener.startInteraction(e,{distance:t.opt("selectMinDistance")}))},dayTouchStart:function(e){var t,n=this.view;n.isSelected||n.selectedEvent||(null==(t=n.opt("selectLongPressDelay"))&&(t=n.opt("longPressDelay")),this.dayClickListener.startInteraction(e),n.opt("selectable")&&this.daySelectListener.startInteraction(e,{delay:t}))},buildDayClickListener:function(){var e,t=this,n=this.view,r=new yt(this,{scroll:n.opt("dragScroll"),interactionStart:function(){e=r.origHit},hitOver:function(t,n){n||(e=null)},hitOut:function(){e=null},interactionEnd:function(r,i){var o;!i&&e&&(o=t.getSafeHitSpan(e))&&n.triggerDayClick(o,t.getHitEl(e),r)}});return r.shouldCancelTouchScroll=!1,r.scrollAlwaysKills=!0,r},buildDaySelectListener:function(){var e,t=this,n=this.view;return new yt(this,{scroll:n.opt("dragScroll"),interactionStart:function(){e=null},dragStart:function(){n.unselect()},hitOver:function(n,r,i){var a,s;i&&(a=t.getSafeHitSpan(i),s=t.getSafeHitSpan(n),(e=a&&s?t.computeSelection(a,s):null)?t.renderSelection(e):!1===e&&o())},hitOut:function(){e=null,t.unrenderSelection()},hitDone:function(){a()},interactionEnd:function(t,r){!r&&e&&n.reportSelection(e,t)}})},clearDragListeners:function(){this.dayClickListener.endInteraction(),this.daySelectListener.endInteraction(),this.segDragListener&&this.segDragListener.endInteraction(),this.segResizeListener&&this.segResizeListener.endInteraction(),this.externalDragListener&&this.externalDragListener.endInteraction()},renderEventLocationHelper:function(e,t){var n=this.fabricateHelperEvent(e,t);return this.renderHelper(n,t)},fabricateHelperEvent:function(e,t){var n=t?ie(t.event):{};return n.start=e.start.clone(),n.end=e.end?e.end.clone():null,n.allDay=null,this.view.calendar.normalizeEventDates(n),n.className=(n.className||[]).concat("fc-helper"),t||(n.editable=!1),n},renderHelper:function(){},unrenderHelper:function(){},renderSelection:function(e){this.renderHighlight(e)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(e,t){var n=this.computeSelectionSpan(e,t);return!(n&&!this.view.calendar.isSelectionSpanAllowed(n))&&n},computeSelectionSpan:function(e,t){var n=[e.start,e.end,t.start,t.end];return n.sort(me),{start:n[0].clone(),end:n[3].clone()}},renderHighlight:function(e){this.renderFill("highlight",this.spanToSegs(e))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(){},unrenderNowIndicator:function(){},renderFill:function(){},unrenderFill:function(e){var t=this.elsByFill[e];t&&(t.remove(),delete this.elsByFill[e])},renderFillSegEls:function(t,n){var r,i=this,o=this[t+"SegEl"],a="",s=[];if(n.length){for(r=0;r<n.length;r++)a+=this.fillSegHtml(t,n[r]);e(a).each(function(t,r){var a=n[t],l=e(r);o&&(l=o.call(i,a,l)),l&&(l=e(l)).is(i.fillSegTag)&&(a.el=l,s.push(a))})}return s},fillSegTag:"div",fillSegHtml:function(e,t){var n=this[e+"SegClasses"],r=this[e+"SegCss"],i=n?n.call(this,t):[],o=fe(r?r.call(this,t):{});return"<"+this.fillSegTag+(i.length?' class="'+i.join(" ")+'"':"")+(o?' style="'+o+'"':"")+" />"},getDayClasses:function(e,t){var n,r=this.view,i=[];return G(e,r.activeRange)?(i.push("fc-"+Qe[e.day()]),1==r.currentRangeAs("months")&&e.month()!=r.currentRange.start.month()&&i.push("fc-other-month"),n=r.calendar.getNow(),e.isSame(n,"day")?(i.push("fc-today"),!0!==t&&i.push(r.highlightStateClass)):e<n?i.push("fc-past"):i.push("fc-future")):i.push("fc-disabled-day"),i}});Ct.mixin({segSelector:".fc-event-container > *",mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(e){var t,n=[],r=[];for(t=0;t<e.length;t++)(_e(e[t])?n:r).push(e[t]);this.segs=[].concat(this.renderBgEvents(n),this.renderFgEvents(r))},renderBgEvents:function(e){var t=this.eventsToSegs(e);return this.renderBgSegs(t)||t},renderFgEvents:function(e){var t=this.eventsToSegs(e);return this.renderFgSegs(t)||t},unrenderEvents:function(){this.handleSegMouseout(),this.clearDragListeners(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(){},unrenderFgSegs:function(){},renderFgSegEls:function(t,n){var r,i=this.view,o="",a=[];if(t.length){for(r=0;r<t.length;r++)o+=this.fgSegHtml(t[r],n);e(o).each(function(n,r){var o=t[n],s=i.resolveEventEl(o.event,e(r));s&&(s.data("fc-seg",o),o.el=s,a.push(o))})}return a},fgSegHtml:function(){},renderBgSegs:function(e){return this.renderFill("bgEvent",e)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(e,t){return this.view.resolveEventEl(e.event,t)},bgEventSegClasses:function(e){var t=e.event,n=t.source||{};return["fc-bgevent"].concat(t.className,n.className||[])},bgEventSegCss:function(e){return{"background-color":this.getSegSkinCss(e)["background-color"]}},businessHoursSegClasses:function(){return["fc-nonbusiness","fc-bgevent"]},buildBusinessHourSegs:function(e,t){return this.eventsToSegs(this.buildBusinessHourEvents(e,t))},buildBusinessHourEvents:function(t,n){var r,i=this.view.calendar;return null==n&&(n=i.opt("businessHours")),!(r=i.computeBusinessHourEvents(t,n)).length&&n&&(r=[e.extend({},Ot,{start:this.view.activeRange.end,end:this.view.activeRange.end,dow:null})]),r},bindSegHandlers:function(){this.bindSegHandlersToEl(this.el)},bindSegHandlersToEl:function(e){this.bindSegHandlerToEl(e,"touchstart",this.handleSegTouchStart),this.bindSegHandlerToEl(e,"mouseenter",this.handleSegMouseover),this.bindSegHandlerToEl(e,"mouseleave",this.handleSegMouseout),this.bindSegHandlerToEl(e,"mousedown",this.handleSegMousedown),this.bindSegHandlerToEl(e,"click",this.handleSegClick)},bindSegHandlerToEl:function(t,n,r){var i=this;t.on(n,this.segSelector,function(t){var n=e(this).data("fc-seg");if(n&&!i.isDraggingSeg&&!i.isResizingSeg)return r.call(i,n,t)})},handleSegClick:function(e,t){!1===this.view.publiclyTrigger("eventClick",e.el[0],e.event,t)&&t.preventDefault()},handleSegMouseover:function(e,t){bt.get().shouldIgnoreMouse()||this.mousedOverSeg||(this.mousedOverSeg=e,this.view.isEventResizable(e.event)&&e.el.addClass("fc-allow-mouse-resize"),this.view.publiclyTrigger("eventMouseover",e.el[0],e.event,t))},handleSegMouseout:function(e,t){t=t||{},this.mousedOverSeg&&(e=e||this.mousedOverSeg,this.mousedOverSeg=null,this.view.isEventResizable(e.event)&&e.el.removeClass("fc-allow-mouse-resize"),this.view.publiclyTrigger("eventMouseout",e.el[0],e.event,t))},handleSegMousedown:function(e,t){!this.startSegResize(e,t,{distance:5})&&this.view.isEventDraggable(e.event)&&this.buildSegDragListener(e).startInteraction(t,{distance:5})},handleSegTouchStart:function(e,t){var n,r=this.view,i=e.event,o=r.isEventSelected(i),a=r.isEventDraggable(i),s=r.isEventResizable(i),l=!1;o&&s&&(l=this.startSegResize(e,t)),l||!a&&!s||(null==(n=r.opt("eventLongPressDelay"))&&(n=r.opt("longPressDelay")),(a?this.buildSegDragListener(e):this.buildSegSelectListener(e)).startInteraction(t,{delay:o?0:n}))},startSegResize:function(t,n,r){return!!e(n.target).is(".fc-resizer")&&(this.buildSegResizeListener(t,e(n.target).is(".fc-start-resizer")).startInteraction(n,r),!0)},buildSegDragListener:function(e){var t,n,r,i=this,s=this.view,l=e.el,u=e.event;if(this.segDragListener)return this.segDragListener;var c=this.segDragListener=new yt(s,{scroll:s.opt("dragScroll"),subjectEl:l,subjectCenter:!0,interactionStart:function(r){e.component=i,t=!1,(n=new wt(e.el,{additionalClass:"fc-dragging",parentEl:s.el,opacity:c.isTouch?null:s.opt("dragOpacity"),revertDuration:s.opt("dragRevertDuration"),zIndex:2})).hide(),n.start(r)},dragStart:function(n){c.isTouch&&!s.isEventSelected(u)&&s.selectEvent(u),t=!0,i.handleSegMouseout(e,n),i.segDragStart(e,n),s.hideEvent(u)},hitOver:function(t,a,l){var d,f,h;e.hit&&(l=e.hit),d=l.component.getSafeHitSpan(l),f=t.component.getSafeHitSpan(t),!(!d||!f)&&((r=i.computeEventDrop(d,f,u))&&i.isEventLocationAllowed(r,u))||(r=null,o()),r&&(h=s.renderDrag(r,e))?(h.addClass("fc-dragging"),c.isTouch||i.applyDragOpacity(h),n.hide()):n.show(),a&&(r=null)},hitOut:function(){s.unrenderDrag(),n.show(),r=null},hitDone:function(){a()},interactionEnd:function(o){delete e.component,n.stop(!r,function(){t&&(s.unrenderDrag(),i.segDragStop(e,o)),r?s.reportSegDrop(e,r,i.largeUnit,l,o):s.showEvent(u)}),i.segDragListener=null}});return c},buildSegSelectListener:function(e){var t=this,n=this.view,r=e.event;if(this.segDragListener)return this.segDragListener;var i=this.segDragListener=new vt({dragStart:function(){i.isTouch&&!n.isEventSelected(r)&&n.selectEvent(r)},interactionEnd:function(){t.segDragListener=null}});return i},segDragStart:function(e,t){this.isDraggingSeg=!0,this.view.publiclyTrigger("eventDragStart",e.el[0],e.event,t,{})},segDragStop:function(e,t){this.isDraggingSeg=!1,this.view.publiclyTrigger("eventDragStop",e.el[0],e.event,t,{})},computeEventDrop:function(e,t,n){var r,i,o=this.view.calendar,a=e.start,s=t.start;return a.hasTime()===s.hasTime()?(r=this.diffDates(s,a),n.allDay&&ee(r)?(i={start:n.start.clone(),end:o.getEventEnd(n),allDay:!1},o.normalizeEventTimes(i)):i=Ne(n),i.start.add(r),i.end&&i.end.add(r)):i={start:s.clone(),end:null,allDay:!s.hasTime()},i},applyDragOpacity:function(e){var t=this.view.opt("dragOpacity");null!=t&&e.css("opacity",t)},externalDragStart:function(t,n){var r,i,o=this.view;o.opt("droppable")&&(r=e((n?n.item:null)||t.target),i=o.opt("dropAccept"),(e.isFunction(i)?i.call(r[0],r):r.is(i))&&(this.isDraggingExternal||this.listenToExternalDrag(r,t,n)))},listenToExternalDrag:function(e,t,n){var r,i=this,s=this.view,l=Oe(e);(i.externalDragListener=new yt(this,{interactionStart:function(){i.isDraggingExternal=!0},hitOver:function(e){var t=e.component.getSafeHitSpan(e);!!t&&((r=i.computeExternalDrop(t,l))&&i.isExternalLocationAllowed(r,l.eventProps))||(r=null,o()),r&&i.renderDrag(r)},hitOut:function(){r=null},hitDone:function(){a(),i.unrenderDrag()},interactionEnd:function(t){r&&s.reportExternalDrop(l,r,e,t,n),i.isDraggingExternal=!1,i.externalDragListener=null}})).startDrag(t)},computeExternalDrop:function(e,t){var n={start:this.view.calendar.applyTimezone(e.start),end:null};return t.startTime&&!n.start.hasTime()&&n.start.time(t.startTime),t.duration&&(n.end=n.start.clone().add(t.duration)),n},renderDrag:function(){},unrenderDrag:function(){},buildSegResizeListener:function(e,t){var n,r,i=this,s=this.view,l=s.calendar,u=e.el,c=e.event,d=l.getEventEnd(c);return this.segResizeListener=new yt(this,{scroll:s.opt("dragScroll"),subjectEl:u,interactionStart:function(){n=!1},dragStart:function(t){n=!0,i.handleSegMouseout(e,t),i.segResizeStart(e,t)},hitOver:function(n,a,l){var u=i.getSafeHitSpan(l),f=i.getSafeHitSpan(n);!(!u||!f)&&((r=t?i.computeEventStartResize(u,f,c):i.computeEventEndResize(u,f,c))&&i.isEventLocationAllowed(r,c))?r.start.isSame(c.start.clone().stripZone())&&r.end.isSame(d.clone().stripZone())&&(r=null):(r=null,o()),r&&(s.hideEvent(c),i.renderEventResize(r,e))},hitOut:function(){r=null,s.showEvent(c)},hitDone:function(){i.unrenderEventResize(),a()},interactionEnd:function(t){n&&i.segResizeStop(e,t),r?s.reportSegResize(e,r,i.largeUnit,u,t):s.showEvent(c),i.segResizeListener=null}})},segResizeStart:function(e,t){this.isResizingSeg=!0,this.view.publiclyTrigger("eventResizeStart",e.el[0],e.event,t,{})},segResizeStop:function(e,t){this.isResizingSeg=!1,this.view.publiclyTrigger("eventResizeStop",e.el[0],e.event,t,{})},computeEventStartResize:function(e,t,n){return this.computeEventResize("start",e,t,n)},computeEventEndResize:function(e,t,n){return this.computeEventResize("end",e,t,n)},computeEventResize:function(e,t,n,r){var i,o,a=this.view.calendar,s=this.diffDates(n[e],t[e]);return(i={start:r.start.clone(),end:a.getEventEnd(r),allDay:r.allDay}).allDay&&ee(s)&&(i.allDay=!1,a.normalizeEventTimes(i)),i[e].add(s),i.start.isBefore(i.end)||(o=this.minResizeDuration||(r.allDay?a.defaultAllDayEventDuration:a.defaultTimedEventDuration),"start"==e?i.start=i.end.clone().subtract(o):i.end=i.start.clone().add(o)),i},renderEventResize:function(){},unrenderEventResize:function(){},getEventTimeText:function(e,t,n){return null==t&&(t=this.eventTimeFormat),null==n&&(n=this.displayEventEnd),this.displayEventTime&&e.start.hasTime()?n&&e.end?this.view.formatRange(e,t):e.start.format(t):""},getSegClasses:function(e,t,n){var r=this.view,i=["fc-event",e.isStart?"fc-start":"fc-not-start",e.isEnd?"fc-end":"fc-not-end"].concat(this.getSegCustomClasses(e));return t&&i.push("fc-draggable"),n&&i.push("fc-resizable"),r.isEventSelected(e.event)&&i.push("fc-selected"),i},getSegCustomClasses:function(e){var t=e.event;return[].concat(t.className,t.source?t.source.className:[])},getSegSkinCss:function(e){return{"background-color":this.getSegBackgroundColor(e),"border-color":this.getSegBorderColor(e),color:this.getSegTextColor(e)}},getSegBackgroundColor:function(e){return e.event.backgroundColor||e.event.color||this.getSegDefaultBackgroundColor(e)},getSegDefaultBackgroundColor:function(e){var t=e.event.source||{};return t.backgroundColor||t.color||this.view.opt("eventBackgroundColor")||this.view.opt("eventColor")},getSegBorderColor:function(e){return e.event.borderColor||e.event.color||this.getSegDefaultBorderColor(e)},getSegDefaultBorderColor:function(e){var t=e.event.source||{};return t.borderColor||t.color||this.view.opt("eventBorderColor")||this.view.opt("eventColor")},getSegTextColor:function(e){return e.event.textColor||this.getSegDefaultTextColor(e)},getSegDefaultTextColor:function(e){return(e.event.source||{}).textColor||this.view.opt("eventTextColor")},isEventLocationAllowed:function(e,t){if(this.isEventLocationInRange(e)){var n,r=this.view.calendar,i=this.eventToSpans(e);if(i.length){for(n=0;n<i.length;n++)if(!r.isEventSpanAllowed(i[n],t))return!1;return!0}}return!1},isExternalLocationAllowed:function(e,t){if(this.isEventLocationInRange(e)){var n,r=this.view.calendar,i=this.eventToSpans(e);if(i.length){for(n=0;n<i.length;n++)if(!r.isExternalSpanAllowed(i[n],e,t))return!1;return!0}}return!1},isEventLocationInRange:function(e){return K(this.eventToRawRange(e),this.view.validRange)},eventToSegs:function(e){return this.eventsToSegs([e])},eventToSpans:function(e){var t=this.eventToRange(e);return t?this.eventRangeToSpans(t,e):[]},eventsToSegs:function(t,n){var r=this,i=Le(t),o=[];return e.each(i,function(e,t){var i,a,s=[],l=[];for(a=0;a<t.length;a++)(i=r.eventToRange(t[a]))&&(l.push(i),s.push(t[a]));if(Re(t[0]))for(l=r.invertRanges(l),a=0;a<l.length;a++)o.push.apply(o,r.eventRangeToSegs(l[a],t[0],n));else for(a=0;a<l.length;a++)o.push.apply(o,r.eventRangeToSegs(l[a],s[a],n))}),o},eventToRange:function(e){return this.refineRawEventRange(this.eventToRawRange(e))},refineRawEventRange:function(e){var t=this.view,n=t.calendar,r=P(e,t.activeRange);if(r)return n.localizeMoment(r.start),n.localizeMoment(r.end),r},eventToRawRange:function(e){var t=this.view.calendar;return{start:e.start.clone().stripZone(),end:(e.end?e.end.clone():t.getDefaultEventEnd(null!=e.allDay?e.allDay:!e.start.hasTime(),e.start)).stripZone()}},eventRangeToSegs:function(e,t,n){var r,i=this.eventRangeToSpans(e,t),o=[];for(r=0;r<i.length;r++)o.push.apply(o,this.eventSpanToSegs(i[r],t,n));return o},eventRangeToSpans:function(t){return[e.extend({},t)]},eventSpanToSegs:function(e,t,n){var r,i,o=n?n(e):this.spanToSegs(e);for(r=0;r<o.length;r++)i=o[r],e.isStart||(i.isStart=!1),e.isEnd||(i.isEnd=!1),i.event=t,i.eventStartMS=+e.start,i.eventDurationMS=e.end-e.start;return o},invertRanges:function(e){var t,n,r=this.view,i=r.activeRange.start.clone(),o=r.activeRange.end.clone(),a=[],s=i;for(e.sort(Me),t=0;t<e.length;t++)(n=e[t]).start>s&&a.push({start:s,end:n.start}),n.end>s&&(s=n.end);return s<o&&a.push({start:s,end:o}),a},sortEventSegs:function(e){e.sort(ve(this,"compareEventSegs"))},compareEventSegs:function(e,t){return e.eventStartMS-t.eventStartMS||t.eventDurationMS-e.eventDurationMS||t.event.allDay-e.event.allDay||L(e.event,t.event,this.view.eventOrderSpecs)}}),Ge.pluckEventDateProps=Ne,Ge.isBgEvent=_e,Ge.dataAttrPrefix="";var St=Ge.DayTableMixin={breakOnWeeks:!1,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){for(var e,t,n,r=this.view,i=this.start.clone(),o=-1,a=[],s=[];i.isBefore(this.end);)r.isHiddenDay(i)?a.push(o+.5):(o++,a.push(o),s.push(i.clone())),i.add(1,"days");if(this.breakOnWeeks){for(t=s[0].day(),e=1;e<s.length&&s[e].day()!=t;e++);n=Math.ceil(s.length/e)}else n=1,e=s.length;this.dayDates=s,this.dayIndices=a,this.daysPerRow=e,this.rowCnt=n,this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt(),this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(e,t){return this.dayDates[this.getCellDayIndex(e,t)].clone()},getCellRange:function(e,t){var n=this.getCellDate(e,t);return{start:n,end:n.clone().add(1,"days")}},getCellDayIndex:function(e,t){return e*this.daysPerRow+this.getColDayIndex(t)},getColDayIndex:function(e){return this.isRTL?this.colCnt-1-e:e},getDateDayIndex:function(e){var t=this.dayIndices,n=e.diff(this.start,"days");return n<0?t[0]-1:n>=t.length?t[t.length-1]+1:t[n]},computeColHeadFormat:function(){return this.rowCnt>1||this.colCnt>10?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},sliceRangeByRow:function(e){var t,n,r,i,o,a=this.daysPerRow,s=this.view.computeDayRange(e),l=this.getDateDayIndex(s.start),u=this.getDateDayIndex(s.end.clone().subtract(1,"days")),c=[];for(t=0;t<this.rowCnt;t++)r=(n=t*a)+a-1,i=Math.max(l,n),o=Math.min(u,r),(i=Math.ceil(i))<=(o=Math.floor(o))&&c.push({row:t,firstRowDayIndex:i-n,lastRowDayIndex:o-n,isStart:i===l,isEnd:o===u});return c},sliceRangeByDay:function(e){var t,n,r,i,o,a,s=this.daysPerRow,l=this.view.computeDayRange(e),u=this.getDateDayIndex(l.start),c=this.getDateDayIndex(l.end.clone().subtract(1,"days")),d=[];for(t=0;t<this.rowCnt;t++)for(r=(n=t*s)+s-1,i=n;i<=r;i++)o=Math.max(u,i),a=Math.min(c,i),(o=Math.ceil(o))<=(a=Math.floor(a))&&d.push({row:t,firstRowDayIndex:o-n,lastRowDayIndex:a-n,isStart:o===u,isEnd:a===c});return d},renderHeadHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.renderHeadTrHtml()+"</thead></table></div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var e,t,n=[];for(e=0;e<this.colCnt;e++)t=this.getCellDate(0,e),n.push(this.renderHeadDateCellHtml(t));return n.join("")},renderHeadDateCellHtml:function(e,t,n){var r=this.view,i=G(e,r.activeRange),o=["fc-day-header",r.widgetHeaderClass],a=ce(e.format(this.colHeadFormat));return 1===this.rowCnt?o=o.concat(this.getDayClasses(e,!0)):o.push("fc-"+Qe[e.day()]),'<th class="'+o.join(" ")+'"'+(1===(i&&this.rowCnt)?' data-date="'+e.format("YYYY-MM-DD")+'"':"")+(t>1?' colspan="'+t+'"':"")+(n?" "+n:"")+">"+(i?r.buildGotoAnchorHtml({date:e,forceOff:this.rowCnt>1||1===this.colCnt},a):a)+"</th>"},renderBgTrHtml:function(e){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(e))+this.renderBgCellsHtml(e)+(this.isRTL?this.renderBgIntroHtml(e):"")+"</tr>"},renderBgIntroHtml:function(){return this.renderIntroHtml()},renderBgCellsHtml:function(e){var t,n,r=[];for(t=0;t<this.colCnt;t++)n=this.getCellDate(e,t),r.push(this.renderBgCellHtml(n));return r.join("")},renderBgCellHtml:function(e,t){var n=this.view,r=G(e,n.activeRange),i=this.getDayClasses(e);return i.unshift("fc-day",n.widgetContentClass),'<td class="'+i.join(" ")+'"'+(r?' data-date="'+e.format("YYYY-MM-DD")+'"':"")+(t?" "+t:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(e){var t=this.renderIntroHtml();t&&(this.isRTL?e.append(t):e.prepend(t))}},xt=Ge.DayGrid=Ct.extend(St,{numbersVisible:!1,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(e){var t,n,r=this.view,i=this.rowCnt,o=this.colCnt,a="";for(t=0;t<i;t++)a+=this.renderDayRowHtml(t,e);for(this.el.html(a),this.rowEls=this.el.find(".fc-row"),this.cellEls=this.el.find(".fc-day, .fc-disabled-day"),this.rowCoordCache=new gt({els:this.rowEls,isVertical:!0}),this.colCoordCache=new gt({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0}),t=0;t<i;t++)for(n=0;n<o;n++)r.publiclyTrigger("dayRender",null,this.getCellDate(t,n),this.getCellEl(t,n))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var e=this.buildBusinessHourSegs(!0);this.renderFill("businessHours",e,"bgevent")},unrenderBusinessHours:function(){this.unrenderFill("businessHours")},renderDayRowHtml:function(e,t){var n=["fc-row","fc-week",this.view.widgetContentClass];return t&&n.push("fc-rigid"),'<div class="'+n.join(" ")+'"><div class="fc-bg"><table>'+this.renderBgTrHtml(e)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(e)+"</thead>":"")+"</table></div></div>"},renderNumberTrHtml:function(e){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(e))+this.renderNumberCellsHtml(e)+(this.isRTL?this.renderNumberIntroHtml(e):"")+"</tr>"},renderNumberIntroHtml:function(){return this.renderIntroHtml()},renderNumberCellsHtml:function(e){var t,n,r=[];for(t=0;t<this.colCnt;t++)n=this.getCellDate(e,t),r.push(this.renderNumberCellHtml(n));return r.join("")},renderNumberCellHtml:function(e){var t,n,r=this.view,i="",o=G(e,r.activeRange),a=r.dayNumbersVisible&&o;return a||r.cellWeekNumbersVisible?((t=this.getDayClasses(e)).unshift("fc-day-top"),r.cellWeekNumbersVisible&&(n="ISO"===e._locale._fullCalendar_weekCalc?1:e._locale.firstDayOfWeek()),i+='<td class="'+t.join(" ")+'"'+(o?' data-date="'+e.format()+'"':"")+">",r.cellWeekNumbersVisible&&e.day()==n&&(i+=r.buildGotoAnchorHtml({date:e,type:"week"},{"class":"fc-week-number"},e.format("w"))),a&&(i+=r.buildGotoAnchorHtml(e,{"class":"fc-day-number"},e.date())),i+="</td>"):"<td/>"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(e){var t,n,r=this.sliceRangeByRow(e);for(t=0;t<r.length;t++)n=r[t],this.isRTL?(n.leftCol=this.daysPerRow-1-n.lastRowDayIndex,n.rightCol=this.daysPerRow-1-n.firstRowDayIndex):(n.leftCol=n.firstRowDayIndex,n.rightCol=n.lastRowDayIndex);return r},prepareHits:function(){this.colCoordCache.build(),this.rowCoordCache.build(),this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear(),this.rowCoordCache.clear()},queryHit:function(e,t){if(this.colCoordCache.isLeftInBounds(e)&&this.rowCoordCache.isTopInBounds(t)){var n=this.colCoordCache.getHorizontalIndex(e),r=this.rowCoordCache.getVerticalIndex(t);if(null!=r&&null!=n)return this.getCellHit(r,n)}},getHitSpan:function(e){return this.getCellRange(e.row,e.col)},getHitEl:function(e){return this.getCellEl(e.row,e.col)},getCellHit:function(e,t){return{row:e,col:t,component:this,left:this.colCoordCache.getLeftOffset(t),right:this.colCoordCache.getRightOffset(t),top:this.rowCoordCache.getTopOffset(e),bottom:this.rowCoordCache.getBottomOffset(e)}},getCellEl:function(e,t){return this.cellEls.eq(e*this.colCnt+t)},renderDrag:function(e,t){var n,r=this.eventToSpans(e);for(n=0;n<r.length;n++)this.renderHighlight(r[n]);if(t&&t.component!==this)return this.renderEventLocationHelper(e,t)},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(e,t){var n,r=this.eventToSpans(e);for(n=0;n<r.length;n++)this.renderHighlight(r[n]);return this.renderEventLocationHelper(e,t)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(t,n){var r,i=[],o=this.eventToSegs(t);return o=this.renderFgSegEls(o),r=this.renderSegRows(o),this.rowEls.each(function(t,o){var a,s=e(o),l=e('<div class="fc-helper-skeleton"><table/></div>');a=n&&n.row===t?n.el.position().top:s.find(".fc-content-skeleton tbody").position().top,l.css("top",a).find("table").append(r[t].tbodyEl),s.append(l),i.push(l[0])}),this.helperEls=e(i)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(t,n,r){var i,o,a,s=[];for(n=this.renderFillSegEls(t,n),i=0;i<n.length;i++)o=n[i],a=this.renderFillRow(t,o,r),this.rowEls.eq(o.row).append(a),s.push(a[0]);return this.elsByFill[t]=e(s),n},renderFillRow:function(t,n,r){var i,o,a=this.colCnt,s=n.leftCol,l=n.rightCol+1;return r=r||t.toLowerCase(),i=e('<div class="fc-'+r+'-skeleton"><table><tr/></table></div>'),o=i.find("tr"),s>0&&o.append('<td colspan="'+s+'"/>'),o.append(n.el.attr("colspan",l-s)),l<a&&o.append('<td colspan="'+(a-l)+'"/>'),this.bookendCells(o),i}});xt.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),Ct.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return Ct.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(t){var n=e.grep(t,function(e){return e.event.allDay});return Ct.prototype.renderBgSegs.call(this,n)},renderFgSegs:function(t){var n;return t=this.renderFgSegEls(t),n=this.rowStructs=this.renderSegRows(t),this.rowEls.each(function(t,r){e(r).find(".fc-content-skeleton > table").append(n[t].tbodyEl)}),t},unrenderFgSegs:function(){for(var e,t=this.rowStructs||[];e=t.pop();)e.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(e){var t,n,r=[];for(t=this.groupSegRows(e),n=0;n<t.length;n++)r.push(this.renderSegRow(n,t[n]));return r},fgSegHtml:function(e,t){var n,r,i=this.view,o=e.event,a=i.isEventDraggable(o),s=!t&&o.allDay&&e.isStart&&i.isEventResizableFromStart(o),l=!t&&o.allDay&&e.isEnd&&i.isEventResizableFromEnd(o),u=this.getSegClasses(e,a,s||l),c=fe(this.getSegSkinCss(e)),d="";return u.unshift("fc-day-grid-event","fc-h-event"),e.isStart&&(n=this.getEventTimeText(o))&&(d='<span class="fc-time">'+ce(n)+"</span>"),r='<span class="fc-title">'+(ce(o.title||"")||"&nbsp;")+"</span>",'<a class="'+u.join(" ")+'"'+(o.url?' href="'+ce(o.url)+'"':"")+(c?' style="'+c+'"':"")+'><div class="fc-content">'+(this.isRTL?r+" "+d:d+" "+r)+"</div>"+(s?'<div class="fc-resizer fc-start-resizer" />':"")+(l?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(t,n){function r(t){for(;a<t;)(c=(v[i-1]||[])[a])?c.attr("rowspan",parseInt(c.attr("rowspan")||1,10)+1):(c=e("<td/>"),s.append(c)),g[i][a]=c,v[i][a]=c,a++}var i,o,a,s,l,u,c,d=this.colCnt,f=this.buildSegLevels(n),h=Math.max(1,f.length),p=e("<tbody/>"),m=[],g=[],v=[];for(i=0;i<h;i++){if(o=f[i],a=0,s=e("<tr/>"),m.push([]),g.push([]),v.push([]),o)for(l=0;l<o.length;l++){for(r((u=o[l]).leftCol),c=e('<td class="fc-event-container"/>').append(u.el),u.leftCol!=u.rightCol?c.attr("colspan",u.rightCol-u.leftCol+1):v[i][a]=c;a<=u.rightCol;)g[i][a]=c,m[i][a]=u,a++;s.append(c)}r(d),this.bookendCells(s),p.append(s)}return{row:t,tbodyEl:p,cellMatrix:g,segMatrix:m,segLevels:f,segs:n}},buildSegLevels:function(e){var t,n,r,i=[];for(this.sortEventSegs(e),t=0;t<e.length;t++){for(n=e[t],r=0;r<i.length&&Pe(n,i[r]);r++);n.level=r,(i[r]||(i[r]=[])).push(n)}for(r=0;r<i.length;r++)i[r].sort(Ie);return i},groupSegRows:function(e){var t,n=[];for(t=0;t<this.rowCnt;t++)n.push([]);for(t=0;t<e.length;t++)n[e[t].row].push(e[t]);return n}}),xt.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(e){var t,n,r=this.rowStructs||[];for(t=0;t<r.length;t++)this.unlimitRow(t),!1!==(n=!!e&&("number"==typeof e?e:this.computeRowLevelLimit(t)))&&this.limitRow(t,n)},computeRowLevelLimit:function(t){function n(t,n){o=Math.max(o,e(n).outerHeight())}var r,i,o,a=this.rowEls.eq(t).height(),s=this.rowStructs[t].tbodyEl.children();for(r=0;r<s.length;r++)if(i=s.eq(r).removeClass("fc-limited"),o=0,i.find("> td > :first-child").each(n),i.position().top+o>a)return r;return!1},limitRow:function(t,n){function r(r){for(;S<r;)(u=b.getCellSegs(t,S,n)).length&&(f=o[n-1][S],y=b.renderMoreLink(t,S,u),v=e("<div/>").append(y),f.append(v),C.push(v[0])),S++}var i,o,a,s,l,u,c,d,f,h,p,m,g,v,y,b=this,w=this.rowStructs[t],C=[],S=0;if(n&&n<w.segLevels.length){for(i=w.segLevels[n-1],o=w.cellMatrix,a=w.tbodyEl.children().slice(n).addClass("fc-limited").get(),s=0;s<i.length;s++){for(r((l=i[s]).leftCol),d=[],c=0;S<=l.rightCol;)u=this.getCellSegs(t,S,n),d.push(u),c+=u.length,S++;if(c){for(h=(f=o[n-1][l.leftCol]).attr("rowspan")||1,p=[],m=0;m<d.length;m++)g=e('<td class="fc-more-cell"/>').attr("rowspan",h),u=d[m],y=this.renderMoreLink(t,l.leftCol+m,[l].concat(u)),v=e("<div/>").append(y),g.append(v),p.push(g[0]),C.push(g[0]);f.addClass("fc-limited").after(e(p)),a.push(f[0])}}r(this.colCnt),w.moreEls=e(C),w.limitedEls=e(a)}},unlimitRow:function(e){var t=this.rowStructs[e];t.moreEls&&(t.moreEls.remove(),t.moreEls=null),t.limitedEls&&(t.limitedEls.removeClass("fc-limited"),t.limitedEls=null)},renderMoreLink:function(t,n,r){var i=this,o=this.view;return e('<a class="fc-more"/>').text(this.getMoreLinkText(r.length)).on("click",function(a){var s=o.opt("eventLimitClick"),l=i.getCellDate(t,n),u=e(this),c=i.getCellEl(t,n),d=i.getCellSegs(t,n),f=i.resliceDaySegs(d,l),h=i.resliceDaySegs(r,l);"function"==typeof s&&(s=o.publiclyTrigger("eventLimitClick",null,{date:l,dayEl:c,moreEl:u,segs:f,hiddenSegs:h},a)),"popover"===s?i.showSegPopover(t,n,u,f):"string"==typeof s&&o.calendar.zoomTo(l,s)})},showSegPopover:function(e,t,n,r){var i,o,a=this,s=this.view,l=n.parent();i=1==this.rowCnt?s.el:this.rowEls.eq(e),o={className:"fc-more-popover",content:this.renderSegPopoverContent(e,t,r),parentEl:this.view.el,top:i.offset().top,autoHide:!0,viewportConstrain:s.opt("popoverViewportConstrain"),hide:function(){if(a.popoverSegs)for(var e,t=0;t<a.popoverSegs.length;++t)e=a.popoverSegs[t],s.publiclyTrigger("eventDestroy",e.event,e.event,e.el);a.segPopover.removeElement(),a.segPopover=null,a.popoverSegs=null}},this.isRTL?o.right=l.offset().left+l.outerWidth()+1:o.left=l.offset().left-1,this.segPopover=new mt(o),this.segPopover.show(),this.bindSegHandlersToEl(this.segPopover.el)},renderSegPopoverContent:function(t,n,r){var i,o=this.view,a=o.opt("theme"),s=this.getCellDate(t,n).format(o.opt("dayPopoverFormat")),l=e('<div class="fc-header '+o.widgetHeaderClass+'"><span class="fc-close '+(a?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+ce(s)+'</span><div class="fc-clear"/></div><div class="fc-body '+o.widgetContentClass+'"><div class="fc-event-container"></div></div>'),u=l.find(".fc-event-container");for(r=this.renderFgSegEls(r,!0),this.popoverSegs=r,i=0;i<r.length;i++)this.hitsNeeded(),r[i].hit=this.getCellHit(t,n),this.hitsNotNeeded(),u.append(r[i].el);return l},resliceDaySegs:function(t,n){var r=e.map(t,function(e){return e.event}),i=n.clone(),o={start:i,end:i.clone().add(1,"days")};return t=this.eventsToSegs(r,function(e){var t=P(e,o);return t?[t]:[]}),this.sortEventSegs(t),t},getMoreLinkText:function(e){var t=this.view.opt("eventLimitText");return"function"==typeof t?t(e):"+"+e+" "+t},getCellSegs:function(e,t,n){for(var r,i=this.rowStructs[e].segMatrix,o=n||0,a=[];o<i.length;)(r=i[o][t])&&a.push(r),o++;return a}});var kt=Ge.TimeGrid=Ct.extend(St,{slotDuration:null,snapDuration:null,snapsPerSlot:null,labelFormat:null,labelInterval:null,colEls:null,slatContainerEl:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){Ct.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.colEls=this.el.find(".fc-day, .fc-disabled-day"),this.slatContainerEl=this.el.find(".fc-slats"),this.slatEls=this.slatContainerEl.find("tr"),this.colCoordCache=new gt({els:this.colEls,isHorizontal:!0}),this.slatCoordCache=new gt({els:this.slatEls,isVertical:!0}),this.renderContentSkeleton()},renderHtml:function(){return'<div class="fc-bg"><table>'+this.renderBgTrHtml(0)+'</table></div><div class="fc-slats"><table>'+this.renderSlatRowHtml()+"</table></div>"},renderSlatRowHtml:function(){for(var e,n,r,i=this.view,o=this.isRTL,a="",s=t.duration(+this.view.minTime);s<this.view.maxTime;)e=this.start.clone().time(s),n=ge(q(s,this.labelInterval)),r='<td class="fc-axis fc-time '+i.widgetContentClass+'" '+i.axisStyleAttr()+">"+(n?"<span>"+ce(e.format(this.labelFormat))+"</span>":"")+"</td>",a+='<tr data-time="'+e.format("HH:mm:ss")+'"'+(n?"":' class="fc-minor"')+">"+(o?"":r)+'<td class="'+i.widgetContentClass+'"/>'+(o?r:"")+"</tr>",s.add(this.slotDuration);return a},processOptions:function(){var n,r=this.view,i=r.opt("slotDuration"),o=r.opt("snapDuration");i=t.duration(i),o=o?t.duration(o):i,this.slotDuration=i,this.snapDuration=o,this.snapsPerSlot=i/o,this.minResizeDuration=o,n=r.opt("slotLabelFormat"),e.isArray(n)&&(n=n[n.length-1]),this.labelFormat=n||r.opt("smallTimeFormat"),n=r.opt("slotLabelInterval"),this.labelInterval=n?t.duration(n):this.computeLabelInterval(i)},computeLabelInterval:function(e){var n,r,i;for(n=jt.length-1;n>=0;n--)if(r=t.duration(jt[n]),i=q(r,e),ge(i)&&i>1)return r;return t.duration(e)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},prepareHits:function(){this.colCoordCache.build(),this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(e,t){var n=this.snapsPerSlot,r=this.colCoordCache,i=this.slatCoordCache;if(r.isLeftInBounds(e)&&i.isTopInBounds(t)){var o=r.getHorizontalIndex(e),a=i.getVerticalIndex(t);if(null!=o&&null!=a){var s=i.getTopOffset(a),l=i.getHeight(a),u=(t-s)/l,c=Math.floor(u*n),d=s+c/n*l,f=s+(c+1)/n*l;return{col:o,snap:a*n+c,component:this,left:r.getLeftOffset(o),right:r.getRightOffset(o),top:d,bottom:f}}}},getHitSpan:function(e){var t,n=this.getCellDate(0,e.col),r=this.computeSnapTime(e.snap);return n.time(r),t=n.clone().add(this.snapDuration),{start:n,end:t}},getHitEl:function(e){return this.colEls.eq(e.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(e){return t.duration(this.view.minTime+this.snapDuration*e)},spanToSegs:function(e){var t,n=this.sliceRangeByTimes(e);for(t=0;t<n.length;t++)this.isRTL?n[t].col=this.daysPerRow-1-n[t].dayIndex:n[t].col=n[t].dayIndex;return n},sliceRangeByTimes:function(e){var t,n,r,i=[];for(n=0;n<this.daysPerRow;n++)(t=P(e,{start:(r=this.dayDates[n].clone().time(0)).clone().add(this.view.minTime),end:r.clone().add(this.view.maxTime)}))&&(t.dayIndex=n,i.push(t));return i},updateSize:function(e){this.slatCoordCache.build(),e&&this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))},getTotalSlatHeight:function(){return this.slatContainerEl.outerHeight()},computeDateTop:function(e,n){return this.computeTimeTop(t.duration(e-n.clone().stripTime()))},computeTimeTop:function(e){var t,n,r=this.slatEls.length,i=(e-this.view.minTime)/this.slotDuration;return i=Math.max(0,i),i=Math.min(r,i),t=Math.floor(i),t=Math.min(t,r-1),n=i-t,this.slatCoordCache.getTopPosition(t)+this.slatCoordCache.getHeight(t)*n},renderDrag:function(e,t){var n,r;if(t)return this.renderEventLocationHelper(e,t);for(n=this.eventToSpans(e),r=0;r<n.length;r++)this.renderHighlight(n[r])},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(e,t){return this.renderEventLocationHelper(e,t)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(e,t){return this.renderHelperSegs(this.eventToSegs(e),t)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){this.renderBusinessSegs(this.buildBusinessHourSegs())},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(t){var n,r=this.spanToSegs({start:t,end:t}),i=this.computeDateTop(t,t),o=[];for(n=0;n<r.length;n++)o.push(e('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",i).appendTo(this.colContainerEls.eq(r[n].col))[0]);r.length>0&&o.push(e('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",i).appendTo(this.el.find(".fc-content-skeleton"))[0]),this.nowIndicatorEls=e(o)},unrenderNowIndicator:function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},renderSelection:function(e){this.view.opt("selectHelper")?this.renderEventLocationHelper(e):this.renderHighlight(e)},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderHighlight:function(e){this.renderHighlightSegs(this.spanToSegs(e))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});kt.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){var t,n,r="";for(t=0;t<this.colCnt;t++)r+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';n=e('<div class="fc-content-skeleton"><table><tr>'+r+"</tr></table></div>"),this.colContainerEls=n.find(".fc-content-col"),this.helperContainerEls=n.find(".fc-helper-container"),this.fgContainerEls=n.find(".fc-event-container:not(.fc-helper-container)"),this.bgContainerEls=n.find(".fc-bgevent-container"),this.highlightContainerEls=n.find(".fc-highlight-container"),this.businessContainerEls=n.find(".fc-business-container"),this.bookendCells(n.find("tr")),this.el.append(n)},renderFgSegs:function(e){return e=this.renderFgSegsIntoContainers(e,this.fgContainerEls),this.fgSegs=e,e},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(t,n){var r,i,o,a=[];for(t=this.renderFgSegsIntoContainers(t,this.helperContainerEls),r=0;r<t.length;r++)i=t[r],n&&n.col===i.col&&(o=n.el,i.el.css({left:o.css("left"),right:o.css("right"),"margin-left":o.css("margin-left"),"margin-right":o.css("margin-right")})),a.push(i.el[0]);return this.helperSegs=t,e(a)},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(e){return e=this.renderFillSegEls("bgEvent",e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.bgContainerEls),this.bgSegs=e,e},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(e){e=this.renderFillSegEls("highlight",e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.highlightContainerEls),this.highlightSegs=e},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(e){e=this.renderFillSegEls("businessHours",e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.businessContainerEls),this.businessSegs=e},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(e){var t,n=[];for(t=0;t<this.colCnt;t++)n.push([]);for(t=0;t<e.length;t++)n[e[t].col].push(e[t]);return n},attachSegsByCol:function(e,t){var n,r,i;for(n=0;n<this.colCnt;n++)for(r=e[n],i=0;i<r.length;i++)t.eq(n).append(r[i].el)},unrenderNamedSegs:function(e){var t,n=this[e];if(n){for(t=0;t<n.length;t++)n[t].el.remove();this[e]=null}},renderFgSegsIntoContainers:function(e,t){var n,r;for(e=this.renderFgSegEls(e),n=this.groupSegsByCol(e),r=0;r<this.colCnt;r++)this.updateFgSegCoords(n[r]);return this.attachSegsByCol(n,t),e},fgSegHtml:function(e,t){var n,r,i,o=this.view,a=e.event,s=o.isEventDraggable(a),l=!t&&e.isStart&&o.isEventResizableFromStart(a),u=!t&&e.isEnd&&o.isEventResizableFromEnd(a),c=this.getSegClasses(e,s,l||u),d=fe(this.getSegSkinCss(e));return c.unshift("fc-time-grid-event","fc-v-event"),o.isMultiDayEvent(a)?(e.isStart||e.isEnd)&&(n=this.getEventTimeText(e),r=this.getEventTimeText(e,"LT"),i=this.getEventTimeText(e,null,!1)):(n=this.getEventTimeText(a),r=this.getEventTimeText(a,"LT"),i=this.getEventTimeText(a,null,!1)),'<a class="'+c.join(" ")+'"'+(a.url?' href="'+ce(a.url)+'"':"")+(d?' style="'+d+'"':"")+'><div class="fc-content">'+(n?'<div class="fc-time" data-start="'+ce(i)+'" data-full="'+ce(r)+'"><span>'+ce(n)+"</span></div>":"")+(a.title?'<div class="fc-title">'+ce(a.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(u?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},updateSegVerticals:function(e){this.computeSegVerticals(e),this.assignSegVerticals(e)},computeSegVerticals:function(e){var t,n,r;for(t=0;t<e.length;t++)n=e[t],r=this.dayDates[n.dayIndex],n.top=this.computeDateTop(n.start,r),n.bottom=this.computeDateTop(n.end,r)},assignSegVerticals:function(e){var t,n;for(t=0;t<e.length;t++)(n=e[t]).el.css(this.generateSegVerticalCss(n))},generateSegVerticalCss:function(e){return{top:e.top,bottom:-e.bottom}},updateFgSegCoords:function(e){this.computeSegVerticals(e),this.computeFgSegHorizontals(e),this.assignSegVerticals(e),this.assignFgSegHorizontals(e)},computeFgSegHorizontals:function(e){var t,n,r;if(this.sortEventSegs(e),t=He(e),Be(t),n=t[0]){for(r=0;r<n.length;r++)Fe(n[r]);for(r=0;r<n.length;r++)this.computeFgSegForwardBack(n[r],0,0)}},computeFgSegForwardBack:function(e,t,n){var r,i=e.forwardSegs;if(e.forwardCoord===undefined)for(i.length?(this.sortForwardSegs(i),this.computeFgSegForwardBack(i[0],t+1,n),e.forwardCoord=i[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-n)/(t+1),r=0;r<i.length;r++)this.computeFgSegForwardBack(i[r],0,e.forwardCoord)},sortForwardSegs:function(e){e.sort(ve(this,"compareForwardSegs"))},compareForwardSegs:function(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||this.compareEventSegs(e,t)},assignFgSegHorizontals:function(e){var t,n;for(t=0;t<e.length;t++)(n=e[t]).el.css(this.generateFgSegHorizontalCss(n)),n.bottom-n.top<30&&n.el.addClass("fc-short")},generateFgSegHorizontalCss:function(e){var t,n,r=this.view.opt("slotEventOverlap"),i=e.backwardCoord,o=e.forwardCoord,a=this.generateSegVerticalCss(e);return r&&(o=Math.min(1,i+2*(o-i))),this.isRTL?(t=1-o,n=i):(t=i,n=1-o),a.zIndex=e.level+1,a.left=100*t+"%",a.right=100*n+"%",r&&e.forwardPressure&&(a[this.isRTL?"marginLeft":"marginRight"]=20),a}});var Tt=Ge.View=ut.extend({type:null,name:null,title:null,calendar:null,viewSpec:null,options:null,el:null,renderQueue:null,batchRenderDepth:0,isDatesRendered:!1,isEventsRendered:!1,isBaseRendered:!1,queuedScroll:null,isRTL:!1,isSelected:!1,selectedEvent:null,eventOrderSpecs:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(e,n){ut.prototype.constructor.call(this),this.calendar=e,this.viewSpec=n,this.type=n.type,this.options=n.options,this.name=this.type,this.nextDayThreshold=t.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=A(this.opt("eventOrder")),this.renderQueue=this.buildRenderQueue(),this.initAutoBatchRender(),this.initialize()},buildRenderQueue:function(){var e=this,t=new ft({event:this.opt("eventRenderWait")});return t.on("start",function(){e.freezeHeight(),e.addScroll(e.queryScroll())}),t.on("stop",function(){e.thawHeight(),e.popScroll()}),t},initAutoBatchRender:function(){var e=this;this.on("before:change",function(){e.startBatchRender()}),this.on("change",function(){e.stopBatchRender()})},startBatchRender:function(){this.batchRenderDepth++||this.renderQueue.pause()},stopBatchRender:function(){--this.batchRenderDepth||this.renderQueue.resume()},initialize:function(){},opt:function(e){return this.options[e]},publiclyTrigger:function(e,t){var n=this.calendar;return n.publiclyTrigger.apply(n,[e,t||this].concat(Array.prototype.slice.call(arguments,2),[this]))},updateTitle:function(){this.title=this.computeTitle(),this.calendar.setToolbarsTitle(this.title)},computeTitle:function(){var e;return e=/^(year|month)$/.test(this.currentRangeUnit)?this.currentRange:this.activeRange,this.formatRange({start:this.calendar.applyTimezone(e.start),end:this.calendar.applyTimezone(e.end)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.currentRangeUnit?"YYYY":"month"==this.currentRangeUnit?this.opt("monthYearFormat"):this.currentRangeAs("days")>1?"ll":"LL"},formatRange:function(e,t,n){var r=e.end;return r.hasTime()||(r=r.clone().subtract(1)),st(e.start,r,t,n,this.opt("isRTL"))},getAllDayHtml:function(){return this.opt("allDayHtml")||ce(this.opt("allDayText"))},buildGotoAnchorHtml:function(t,n,r){var i,o,a,s;return e.isPlainObject(t)?(i=t.date,o=t.type,a=t.forceOff):i=t,i=Ge.moment(i),s={date:i.format("YYYY-MM-DD"),type:o||"day"},"string"==typeof n&&(r=n,n=null),n=n?" "+he(n):"",r=r||"",!a&&this.opt("navLinks")?"<a"+n+' data-goto="'+ce(JSON.stringify(s))+'">'+r+"</a>":"<span"+n+">"+r+"</span>"},setElement:function(e){this.el=e,this.bindGlobalHandlers(),this.bindBaseRenderHandlers(),this.renderSkeleton()},removeElement:function(){this.unsetDate(),this.unrenderSkeleton(),this.unbindGlobalHandlers(),this.unbindBaseRenderHandlers(),this.el.remove()},renderSkeleton:function(){},unrenderSkeleton:function(){},setDate:function(e){var t=this.get("dateProfile"),n=this.buildDateProfile(e,null,!0);return t&&Z(t.activeRange,n.activeRange)||this.set("dateProfile",n),n.date},unsetDate:function(){this.unset("dateProfile")},requestDateRender:function(e){var t=this;this.renderQueue.queue(function(){t.executeDateRender(e)},"date","init")},requestDateUnrender:function(){var e=this;this.renderQueue.queue(function(){e.executeDateUnrender()},"date","destroy")},fetchInitialEvents:function(e){return this.calendar.requestEvents(e.activeRange.start,e.activeRange.end)},bindEventChanges:function(){this.listenTo(this.calendar,"eventsReset",this.resetEvents)},unbindEventChanges:function(){this.stopListeningTo(this.calendar,"eventsReset")},setEvents:function(e){this.set("currentEvents",e),this.set("hasEvents",!0)},unsetEvents:function(){this.unset("currentEvents"),this.unset("hasEvents")},resetEvents:function(e){this.startBatchRender(),this.unsetEvents(),this.setEvents(e),this.stopBatchRender()},requestEventsRender:function(e){var t=this;this.renderQueue.queue(function(){t.executeEventsRender(e)},"event","init")},requestEventsUnrender:function(){var e=this;this.renderQueue.queue(function(){e.executeEventsUnrender()},"event","destroy")},executeDateRender:function(e,t){this.setDateProfileForRendering(e),this.updateTitle(),this.calendar.updateToolbarButtons(),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours(),this.startNowIndicator(),t||this.addScroll(this.computeInitialDateScroll()),this.isDatesRendered=!0,this.trigger("datesRendered")},executeDateUnrender:function(){this.unselect(),this.stopNowIndicator(),this.trigger("before:datesUnrendered"),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy(),this.isDatesRendered=!1},renderDates:function(){},unrenderDates:function(){},bindBaseRenderHandlers:function(){var e=this;this.on("datesRendered.baseHandler",function(){e.onBaseRender()}),this.on("before:datesUnrendered.baseHandler",function(){e.onBeforeBaseUnrender()})},unbindBaseRenderHandlers:function(){this.off(".baseHandler")},onBaseRender:function(){this.applyScreenState(),this.publiclyTrigger("viewRender",this,this,this.el)},onBeforeBaseUnrender:function(){this.applyScreenState(),this.publiclyTrigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){this.listenTo(bt.get(),{touchstart:this.processUnselect,mousedown:this.handleDocumentMousedown})},unbindGlobalHandlers:function(){this.stopListeningTo(bt.get())},initThemingProps:function(){var e=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=e+"-widget-header",this.widgetContentClass=e+"-widget-content",this.highlightStateClass=e+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var e,n,r,i=this;this.opt("nowIndicator")&&(e=this.getNowIndicatorUnit())&&(n=ve(this,"updateNowIndicator"),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=+new Date,this.renderNowIndicator(this.initialNowDate),this.isNowIndicatorRendered=!0,r=this.initialNowDate.clone().startOf(e).add(1,e)-this.initialNowDate,this.nowIndicatorTimeoutID=setTimeout(function(){i.nowIndicatorTimeoutID=null,n(),r=+t.duration(1,e),r=Math.max(100,r),i.nowIndicatorIntervalID=setInterval(n,r)},r))},updateNowIndicator:function(){this.isNowIndicatorRendered&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs)))},stopNowIndicator:function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearTimeout(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},getNowIndicatorUnit:function(){},renderNowIndicator:function(){},unrenderNowIndicator:function(){},updateSize:function(e){var t;e&&(t=this.queryScroll()),this.updateHeight(e),this.updateWidth(e),this.updateNowIndicator(),e&&this.applyScroll(t)},updateWidth:function(){},updateHeight:function(){var e=this.calendar;this.setHeight(e.getSuggestedViewHeight(),e.isHeightAuto())},setHeight:function(){},addForcedScroll:function(t){this.addScroll(e.extend(t,{isForced:!0}))},addScroll:function(t){var n=this.queuedScroll||(this.queuedScroll={});n.isForced||e.extend(n,t)},popScroll:function(){this.applyQueuedScroll(),this.queuedScroll=null},applyQueuedScroll:function(){this.queuedScroll&&this.applyScroll(this.queuedScroll)},queryScroll:function(){var t={};return this.isDatesRendered&&e.extend(t,this.queryDateScroll()),t},applyScroll:function(e){this.isDatesRendered&&this.applyDateScroll(e)},computeInitialDateScroll:function(){return{}},queryDateScroll:function(){return{}},applyDateScroll:function(){},freezeHeight:function(){this.calendar.freezeContentHeight()},thawHeight:function(){this.calendar.thawContentHeight()},executeEventsRender:function(e){this.renderEvents(e),this.isEventsRendered=!0,this.onEventsRender()},executeEventsUnrender:function(){this.onBeforeEventsUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.isEventsRendered=!1},onEventsRender:function(){this.applyScreenState(),this.renderedEventSegEach(function(e){this.publiclyTrigger("eventAfterRender",e.event,e.event,e.el)}),this.publiclyTrigger("eventAfterAllRender")},onBeforeEventsUnrender:function(){this.applyScreenState(),this.renderedEventSegEach(function(e){this.publiclyTrigger("eventDestroy",e.event,e.event,e.el)})},applyScreenState:function(){this.thawHeight(),this.freezeHeight(),this.applyQueuedScroll()},renderEvents:function(){},unrenderEvents:function(){},resolveEventEl:function(t,n){var r=this.publiclyTrigger("eventRender",t,t,n);return!1===r?n=null:r&&!0!==r&&(n=e(r)),n},showEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","")},e)},hideEvent:function(e){this.renderedEventSegEach(function(e){e.el.css("visibility","hidden")},e)},renderedEventSegEach:function(e,t){var n,r=this.getEventSegs();for(n=0;n<r.length;n++)t&&r[n].event._id!==t._id||r[n].el&&e.call(this,r[n])},getEventSegs:function(){return[]},isEventDraggable:function(e){return this.isEventStartEditable(e)},isEventStartEditable:function(e){return ue(e.startEditable,(e.source||{}).startEditable,this.opt("eventStartEditable"),this.isEventGenerallyEditable(e))},isEventGenerallyEditable:function(e){return ue(e.editable,(e.source||{}).editable,this.opt("editable"))},reportSegDrop:function(e,t,n,r,i){var o=this.calendar,a=o.mutateSeg(e,t,n),s=function(){a.undo(),o.reportEventChange()};this.triggerEventDrop(e.event,a.dateDelta,s,r,i),o.reportEventChange()},triggerEventDrop:function(e,t,n,r,i){this.publiclyTrigger("eventDrop",r[0],e,t,n,i,{})},reportExternalDrop:function(t,n,r,i,o){var a,s,l=t.eventProps;l&&(a=e.extend({},l,n),s=this.calendar.renderEvent(a,t.stick)[0]),this.triggerExternalDrop(s,n,r,i,o)},triggerExternalDrop:function(e,t,n,r,i){this.publiclyTrigger("drop",n[0],t.start,r,i),e&&this.publiclyTrigger("eventReceive",null,e)},renderDrag:function(){},unrenderDrag:function(){},isEventResizableFromStart:function(e){return this.opt("eventResizableFromStart")&&this.isEventResizable(e)},isEventResizableFromEnd:function(e){return this.isEventResizable(e)},isEventResizable:function(e){var t=e.source||{};return ue(e.durationEditable,t.durationEditable,this.opt("eventDurationEditable"),e.editable,t.editable,this.opt("editable"))},reportSegResize:function(e,t,n,r,i){var o=this.calendar,a=o.mutateSeg(e,t,n),s=function(){a.undo(),o.reportEventChange()};this.triggerEventResize(e.event,a.durationDelta,s,r,i),o.reportEventChange()},triggerEventResize:function(e,t,n,r,i){this.publiclyTrigger("eventResize",r[0],e,t,n,i,{})},select:function(e,t){this.unselect(t),this.renderSelection(e),this.reportSelection(e,t)},renderSelection:function(){},reportSelection:function(e,t){this.isSelected=!0,this.triggerSelect(e,t)},triggerSelect:function(e,t){this.publiclyTrigger("select",null,this.calendar.applyTimezone(e.start),this.calendar.applyTimezone(e.end),t)},unselect:function(e){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.publiclyTrigger("unselect",null,e))},unrenderSelection:function(){},selectEvent:function(e){this.selectedEvent&&this.selectedEvent===e||(this.unselectEvent(),this.renderedEventSegEach(function(e){e.el.addClass("fc-selected")},e),this.selectedEvent=e)},unselectEvent:function(){this.selectedEvent&&(this.renderedEventSegEach(function(e){e.el.removeClass("fc-selected")},this.selectedEvent),this.selectedEvent=null)},isEventSelected:function(e){return this.selectedEvent&&this.selectedEvent._id===e._id},handleDocumentMousedown:function(e){w(e)&&this.processUnselect(e)},processUnselect:function(e){this.processRangeUnselect(e),this.processEventUnselect(e)},processRangeUnselect:function(t){var n;this.isSelected&&this.opt("unselectAuto")&&((n=this.opt("unselectCancel"))&&e(t.target).closest(n).length||this.unselect(t))},processEventUnselect:function(t){this.selectedEvent&&(e(t.target).closest(".fc-selected").length||this.unselectEvent())},triggerDayClick:function(e,t,n){this.publiclyTrigger("dayClick",t,this.calendar.applyTimezone(e.start),n)},computeDayRange:function(e){var t,n=e.start.clone().stripTime(),r=e.end,i=null;return r&&(i=r.clone().stripTime(),(t=+r.time())&&t>=this.nextDayThreshold&&i.add(1,"days")),(!r||i<=n)&&(i=n.clone().add(1,"days")),{start:n,end:i}},isMultiDayEvent:function(e){var t=this.computeDayRange(e);return t.end.diff(t.start,"days")>1}});Tt.watch("displayingDates",["dateProfile"],function(e){this.requestDateRender(e.dateProfile)},function(){this.requestDateUnrender()}),Tt.watch("initialEvents",["dateProfile"],function(e){return this.fetchInitialEvents(e.dateProfile)}),Tt.watch("bindingEvents",["initialEvents"],function(e){this.setEvents(e.initialEvents),this.bindEventChanges()},function(){this.unbindEventChanges(),this.unsetEvents()}),Tt.watch("displayingEvents",["displayingDates","hasEvents"],function(){this.requestEventsRender(this.get("currentEvents"))},function(){this.requestEventsUnrender()}),Tt.mixin({currentRange:null,currentRangeUnit:null,renderRange:null,activeRange:null,validRange:null,dateIncrement:null,minTime:null,maxTime:null,usesMinMaxTime:!1,start:null,end:null,intervalStart:null,intervalEnd:null,setDateProfileForRendering:function(e){this.currentRange=e.currentRange,this.currentRangeUnit=e.currentRangeUnit,this.renderRange=e.renderRange,this.activeRange=e.activeRange,this.validRange=e.validRange,this.dateIncrement=e.dateIncrement,this.minTime=e.minTime,this.maxTime=e.maxTime,this.start=e.activeRange.start,this.end=e.activeRange.end,this.intervalStart=e.currentRange.start,this.intervalEnd=e.currentRange.end},buildPrevDateProfile:function(e){var t=e.clone().startOf(this.currentRangeUnit).subtract(this.dateIncrement);return this.buildDateProfile(t,-1)},buildNextDateProfile:function(e){var t=e.clone().startOf(this.currentRangeUnit).add(this.dateIncrement);return this.buildDateProfile(t,1)},buildDateProfile:function(e,n,r){var i,o,a,s,l=this.buildValidRange(),u=null,c=null;return r&&(e=Y(e,l)),i=this.buildCurrentRangeInfo(e,n),o=this.buildRenderRange(i.range,i.unit),a=U(o),this.opt("showNonCurrentDates")||(a=$(a,i.range)),u=t.duration(this.opt("minTime")),c=t.duration(this.opt("maxTime")),this.adjustActiveRange(a,u,c),a=$(a,l),e=Y(e,a),s=X(i.range,l),{validRange:l,currentRange:i.range,currentRangeUnit:i.unit,activeRange:a,renderRange:o,minTime:u,maxTime:c,isValid:s,date:e,dateIncrement:this.buildDateIncrement(i.duration)}},buildValidRange:function(){return this.getRangeOption("validRange",this.calendar.getNow())||{}},buildCurrentRangeInfo:function(e,t){var n,r=null,i=null,o=null;return this.viewSpec.duration?(r=this.viewSpec.duration,i=this.viewSpec.durationUnit,o=this.buildRangeFromDuration(e,t,r,i)):(n=this.opt("dayCount"))?(i="day",o=this.buildRangeFromDayCount(e,t,n)):(o=this.buildCustomVisibleRange(e))?i=F(o.start,o.end):(i=F(r=this.getFallbackDuration()),o=this.buildRangeFromDuration(e,t,r,i)),this.normalizeCurrentRange(o,i),{duration:r,unit:i,range:o}},getFallbackDuration:function(){return t.duration({days:1})},normalizeCurrentRange:function(e,t){/^(year|month|week|day)$/.test(t)?(e.start.stripTime(),e.end.stripTime()):(e.start.hasTime()||e.start.time(0),e.end.hasTime()||e.end.time(0))},adjustActiveRange:function(e,t,n){var r=!1;this.usesMinMaxTime&&(t<0&&(e.start.time(0).add(t),r=!0),n>864e5&&(e.end.time(n-864e5),r=!0),r&&(e.start.hasTime()||e.start.time(0),e.end.hasTime()||e.end.time(0)))},buildRangeFromDuration:function(e,n,r,i){var o,a,s,l=this.opt("dateAlignment"),u=e.clone();return r.as("days")<=1&&this.isHiddenDay(u)&&(u=this.skipHiddenDays(u,n)).startOf("day"),l||(l=(a=this.opt("dateIncrement"))&&(s=t.duration(a))<r?W(s,a):i),u.startOf(l),o=u.clone().add(r),{start:u,end:o}},buildRangeFromDayCount:function(e,t,n){var r,i=this.opt("dateAlignment"),o=0,a=e.clone();i&&a.startOf(i),a.startOf("day"),r=(a=this.skipHiddenDays(a,t)).clone();do{r.add(1,"day"),this.isHiddenDay(r)||o++}while(o<n);return{start:a,end:r}},buildCustomVisibleRange:function(e){var t=this.getRangeOption("visibleRange",this.calendar.moment(e));return!t||t.start&&t.end?t:null},buildRenderRange:function(e){return this.trimHiddenDays(e)},buildDateIncrement:function(e){var n,r=this.opt("dateIncrement");return r?t.duration(r):(n=this.opt("dateAlignment"))?t.duration(1,n):e||t.duration({days:1})},trimHiddenDays:function(e){return{start:this.skipHiddenDays(e.start),end:this.skipHiddenDays(e.end,-1,!0)}},currentRangeAs:function(e){var t=this.currentRange;return t.end.diff(t.start,e,!0)},getRangeOption:function(e){var t=this.opt(e);if("function"==typeof t&&(t=t.apply(null,Array.prototype.slice.call(arguments,1))),t)return this.calendar.parseRange(t)},initHiddenDays:function(){var t,n=this.opt("hiddenDays")||[],r=[],i=0;for(!1===this.opt("weekends")&&n.push(0,6),t=0;t<7;t++)(r[t]=-1!==e.inArray(t,n))||i++;if(!i)throw"invalid hiddenDays";this.isHiddenDayHash=r},isHiddenDay:function(e){return t.isMoment(e)&&(e=e.day()),this.isHiddenDayHash[e]},skipHiddenDays:function(e,t,n){var r=e.clone();for(t=t||1;this.isHiddenDayHash[(r.day()+(n?t:0)+7)%7];)r.add(t,"days");return r}});var Et=Ge.Scroller=Ce.extend({el:null,scrollEl:null,overflowX:null,overflowY:null,constructor:function(e){e=e||{},this.overflowX=e.overflowX||e.overflow||"auto",this.overflowY=e.overflowY||e.overflow||"auto"},render:function(){this.el=this.renderEl(),this.applyOverflow()},renderEl:function(){return this.scrollEl=e('<div class="fc-scroller"></div>')},clear:function(){this.setHeight("auto"),this.applyOverflow()},destroy:function(){this.el.remove()},applyOverflow:function(){this.scrollEl.css({"overflow-x":this.overflowX,"overflow-y":this.overflowY})},lockOverflow:function(e){var t=this.overflowX,n=this.overflowY;e=e||this.getScrollbarWidths(),"auto"===t&&(t=e.top||e.bottom||this.scrollEl[0].scrollWidth-1>this.scrollEl[0].clientWidth?"scroll":"hidden"),"auto"===n&&(n=e.left||e.right||this.scrollEl[0].scrollHeight-1>this.scrollEl[0].clientHeight?"scroll":"hidden"),this.scrollEl.css({"overflow-x":t,"overflow-y":n})},setHeight:function(e){this.scrollEl.height(e)},getScrollTop:function(){return this.scrollEl.scrollTop()},setScrollTop:function(e){this.scrollEl.scrollTop(e)},getClientWidth:function(){return this.scrollEl[0].clientWidth},getClientHeight:function(){return this.scrollEl[0].clientHeight},getScrollbarWidths:function(){return m(this.scrollEl)}});je.prototype.proxyCall=function(e){var t=Array.prototype.slice.call(arguments,1),n=[];return this.items.forEach(function(r){n.push(r[e].apply(r,t))}),n};var Dt=Ge.Calendar=Ce.extend(ht,{view:null,viewsByType:null,currentDate:null,loadingLevel:0,constructor:function(e,t){bt.needed(),this.el=e,this.viewsByType={},this.viewSpecCache={},this.initOptionsInternals(t),this.initMomentInternals(),this.initCurrentDate(),$e.call(this),this.initialize()},initialize:function(){},getCalendar:function(){return this},getView:function(){return this.view},publiclyTrigger:function(e,t){var n=Array.prototype.slice.call(arguments,2),r=this.opt(e);if(t=t||this.el[0],this.triggerWith(e,t,n),r)return r.apply(t,n)},instantiateView:function(e){var t=this.getViewSpec(e);return new t["class"](this,t)},isValidViewType:function(e){return Boolean(this.getViewSpec(e))},changeView:function(e,t){t&&(t.start&&t.end?this.recordOptionOverrides({visibleRange:t}):this.currentDate=this.moment(t).stripZone()),this.renderView(e)},zoomTo:function(e,t){var n;t=t||"day",n=this.getViewSpec(t)||this.getUnitViewSpec(t),this.currentDate=e.clone(),this.renderView(n?n.type:null)},initCurrentDate:function(){var e=this.opt("defaultDate");this.currentDate=null!=e?this.moment(e).stripZone():this.getNow()},prev:function(){var e=this.view.buildPrevDateProfile(this.currentDate);e.isValid&&(this.currentDate=e.date,this.renderView())},next:function(){var e=this.view.buildNextDateProfile(this.currentDate);e.isValid&&(this.currentDate=e.date,this.renderView())},prevYear:function(){this.currentDate.add(-1,"years"),this.renderView()},nextYear:function(){this.currentDate.add(1,"years"),this.renderView()},today:function(){this.currentDate=this.getNow(),this.renderView()},gotoDate:function(e){this.currentDate=this.moment(e).stripZone(),this.renderView()},incrementDate:function(e){this.currentDate.add(t.duration(e)),this.renderView()},getDate:function(){return this.applyTimezone(this.currentDate)},pushLoading:function(){this.loadingLevel++||this.publiclyTrigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.publiclyTrigger("loading",null,!1,this.view)},select:function(){this.view.select(this.buildSelectSpan.apply(this,arguments))},unselect:function(){this.view&&this.view.unselect()},buildSelectSpan:function(e,t){var n,r=this.moment(e).stripZone();return n=t?this.moment(t).stripZone():r.hasTime()?r.clone().add(this.defaultTimedEventDuration):r.clone().add(this.defaultAllDayEventDuration),{start:r,end:n}},parseRange:function(e){var t=null,n=null;return e.start&&(t=this.moment(e.start).stripZone()),e.end&&(n=this.moment(e.end).stripZone()),t||n?t&&n&&n.isBefore(t)?null:{start:t,end:n}:null},rerenderEvents:function(){this.elementVisible()&&this.reportEventChange()}});Dt.mixin({dirDefaults:null,localeDefaults:null,overrides:null,dynamicOverrides:null,optionsModel:null,initOptionsInternals:function(t){this.overrides=e.extend({},t),this.dynamicOverrides={},this.optionsModel=new ut,this.populateOptionsHash()},option:function(e,t){var n;if("string"==typeof e){if(t===undefined)return this.optionsModel.get(e);(n={})[e]=t,this.setOptions(n)}else"object"==typeof e&&this.setOptions(e)},opt:function(e){return this.optionsModel.get(e)},setOptions:function(e){var t,n=0;this.recordOptionOverrides(e);for(t in e)n++;if(1===n){if("height"===t||"contentHeight"===t||"aspectRatio"===t)return void this.updateSize(!0);if("defaultDate"===t)return;if("businessHours"===t)return void(this.view&&(this.view.unrenderBusinessHours(),this.view.renderBusinessHours()));if("timezone"===t)return this.rezoneArrayEventSources(),void this.refetchEvents()}this.renderHeader(),this.renderFooter(),this.viewsByType={},this.reinitView()},populateOptionsHash:function(){var e,t,r,i;e=ue(this.dynamicOverrides.locale,this.overrides.locale),(t=Nt[e])||(e=Dt.defaults.locale,t=Nt[e]||{}),r=ue(this.dynamicOverrides.isRTL,this.overrides.isRTL,t.isRTL,Dt.defaults.isRTL)?Dt.rtlDefaults:{},this.dirDefaults=r,this.localeDefaults=t,Ve(i=n([Dt.defaults,r,t,this.overrides,this.dynamicOverrides])),this.optionsModel.reset(i)},recordOptionOverrides:function(e){var t;for(t in e)this.dynamicOverrides[t]=e[t];this.viewSpecCache={},this.populateOptionsHash()}}),Dt.mixin({defaultAllDayEventDuration:null,defaultTimedEventDuration:null,localeData:null,initMomentInternals:function(){var e=this;this.defaultAllDayEventDuration=t.duration(this.opt("defaultAllDayEventDuration")),this.defaultTimedEventDuration=t.duration(this.opt("defaultTimedEventDuration")),this.optionsModel.watch("buildingMomentLocale",["?locale","?monthNames","?monthNamesShort","?dayNames","?dayNamesShort","?firstDay","?weekNumberCalculation"],function(t){var n,r=t.weekNumberCalculation,i=t.firstDay;"iso"===r&&(r="ISO");var o=ie(Ue(t.locale));t.monthNames&&(o._months=t.monthNames),t.monthNamesShort&&(o._monthsShort=t.monthNamesShort),t.dayNames&&(o._weekdays=t.dayNames),t.dayNamesShort&&(o._weekdaysShort=t.dayNamesShort),null==i&&"ISO"===r&&(i=1),null!=i&&((n=ie(o._week)).dow=i,o._week=n),"ISO"!==r&&"local"!==r&&"function"!=typeof r||(o._fullCalendar_weekCalc=r),e.localeData=o,e.currentDate&&e.localizeMoment(e.currentDate)})},moment:function(){var e;return"local"===this.opt("timezone")?(e=Ge.moment.apply(null,arguments)).hasTime()&&e.local():e="UTC"===this.opt("timezone")?Ge.moment.utc.apply(null,arguments):Ge.moment.parseZone.apply(null,arguments),this.localizeMoment(e),e},localizeMoment:function(e){e._locale=this.localeData},getIsAmbigTimezone:function(){return"local"!==this.opt("timezone")&&"UTC"!==this.opt("timezone")},applyTimezone:function(e){if(!e.hasTime())return e.clone();var t,n=this.moment(e.toArray()),r=e.time()-n.time();return r&&(t=n.clone().add(r),e.time()-t.time()==0&&(n=t)),n},getNow:function(){var e=this.opt("now");return"function"==typeof e&&(e=e()),this.moment(e).stripZone()},humanizeDuration:function(e){return e.locale(this.opt("locale")).humanize()},getEventEnd:function(e){return e.end?e.end.clone():this.getDefaultEventEnd(e.allDay,e.start)},getDefaultEventEnd:function(e,t){var n=t.clone();return e?n.stripTime().add(this.defaultAllDayEventDuration):n.add(this.defaultTimedEventDuration),this.getIsAmbigTimezone()&&n.stripZone(),n}}),Dt.mixin({viewSpecCache:null,getViewSpec:function(e){var t=this.viewSpecCache;return t[e]||(t[e]=this.buildViewSpec(e))},getUnitViewSpec:function(t){var n,r,i;if(-1!=e.inArray(t,Je))for(n=this.header.getViewsWithButtons(),e.each(Ge.views,function(e){n.push(e)}),r=0;r<n.length;r++)if((i=this.getViewSpec(n[r]))&&i.singleUnit==t)return i},buildViewSpec:function(e){for(var r,i,o,a,s,l=this.overrides.views||{},u=[],c=[],d=[],f=e;f;)r=Xe[f],i=l[f],f=null,"function"==typeof r&&(r={"class":r}),r&&(u.unshift(r),c.unshift(r.defaults||{}),o=o||r.duration,f=f||r.type),i&&(d.unshift(i),o=o||i.duration,f=f||i.type);return r=re(u),r.type=e,!!r["class"]&&((o=o||this.dynamicOverrides.duration||this.overrides.duration)&&(a=t.duration(o)).valueOf()&&(s=W(a,o),r.duration=a,r.durationUnit=s,1===a.as(s)&&(r.singleUnit=s,d.unshift(l[s]||{}))),r.defaults=n(c),r.overrides=n(d),this.buildViewSpecOptions(r),this.buildViewSpecButtonText(r,e),r)},buildViewSpecOptions:function(e){e.options=n([Dt.defaults,e.defaults,this.dirDefaults,this.localeDefaults,this.overrides,e.overrides,this.dynamicOverrides]),Ve(e.options)},buildViewSpecButtonText:function(e,t){function n(n){var r=n.buttonText||{};return r[t]||(e.buttonTextKey?r[e.buttonTextKey]:null)||(e.singleUnit?r[e.singleUnit]:null)}e.buttonTextOverride=n(this.dynamicOverrides)||n(this.overrides)||e.overrides.buttonText,e.buttonTextDefault=n(this.localeDefaults)||n(this.dirDefaults)||e.defaults.buttonText||n(Dt.defaults)||(e.duration?this.humanizeDuration(e.duration):null)||t}}),Dt.mixin({el:null,contentEl:null,suggestedViewHeight:null,windowResizeProxy:null,ignoreWindowResize:0,render:function(){this.contentEl?this.elementVisible()&&(this.calcSize(),this.renderView()):this.initialRender()},initialRender:function(){var t=this,n=this.el;n.addClass("fc"),n.on("click.fc","a[data-goto]",function(n){var r=e(this).data("goto"),i=t.moment(r.date),o=r.type,a=t.view.opt("navLink"+pe(o)+"Click");"function"==typeof a?a(i,n):("string"==typeof a&&(o=a),t.zoomTo(i,o))}),this.optionsModel.watch("applyingThemeClasses",["?theme"],function(e){n.toggleClass("ui-widget",e.theme),n.toggleClass("fc-unthemed",!e.theme)}),this.optionsModel.watch("applyingDirClasses",["?isRTL","?locale"],function(e){n.toggleClass("fc-ltr",!e.isRTL),n.toggleClass("fc-rtl",e.isRTL)}),this.contentEl=e("<div class='fc-view-container'/>").prependTo(n),this.initToolbars(),this.renderHeader(),this.renderFooter(),this.renderView(this.opt("defaultView")),this.opt("handleWindowResize")&&e(window).resize(this.windowResizeProxy=ye(this.windowResize.bind(this),this.opt("windowResizeDelay")))},destroy:function(){this.view&&this.view.removeElement(),this.toolbarsManager.proxyCall("removeElement"),this.contentEl.remove(),this.el.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),this.el.off(".fc"),this.windowResizeProxy&&(e(window).unbind("resize",this.windowResizeProxy),this.windowResizeProxy=null),bt.unneeded()},elementVisible:function(){return this.el.is(":visible")},renderView:function(t,n){this.ignoreWindowResize++;var r=this.view&&t&&this.view.type!==t;r&&(this.freezeContentHeight(),this.clearView()),!this.view&&t&&(this.view=this.viewsByType[t]||(this.viewsByType[t]=this.instantiateView(t)),this.view.setElement(e("<div class='fc-view fc-"+t+"-view' />").appendTo(this.contentEl)),this.toolbarsManager.proxyCall("activateButton",t)),this.view&&(n&&this.view.addForcedScroll(n),this.elementVisible()&&(this.currentDate=this.view.setDate(this.currentDate))),r&&this.thawContentHeight(),this.ignoreWindowResize--},clearView:function(){this.toolbarsManager.proxyCall("deactivateButton",this.view.type),this.view.removeElement(),this.view=null},reinitView:function(){this.ignoreWindowResize++,this.freezeContentHeight();var e=this.view.type,t=this.view.queryScroll();this.clearView(),this.calcSize(),this.renderView(e,t),this.thawContentHeight(),this.ignoreWindowResize--},getSuggestedViewHeight:function(){return null===this.suggestedViewHeight&&this.calcSize(),this.suggestedViewHeight},isHeightAuto:function(){return"auto"===this.opt("contentHeight")||"auto"===this.opt("height")},updateSize:function(e){if(this.elementVisible())return e&&this._calcSize(),this.ignoreWindowResize++,this.view.updateSize(!0),this.ignoreWindowResize--,!0},calcSize:function(){this.elementVisible()&&this._calcSize()},_calcSize:function(){var e=this.opt("contentHeight"),t=this.opt("height");this.suggestedViewHeight="number"==typeof e?e:"function"==typeof e?e():"number"==typeof t?t-this.queryToolbarsHeight():"function"==typeof t?t()-this.queryToolbarsHeight():"parent"===t?this.el.parent().height()-this.queryToolbarsHeight():Math.round(this.contentEl.width()/Math.max(this.opt("aspectRatio"),.5))},windowResize:function(e){!this.ignoreWindowResize&&e.target===window&&this.view.renderRange&&this.updateSize(!0)&&this.view.publiclyTrigger("windowResize",this.el[0])},freezeContentHeight:function(){this.contentEl.css({width:"100%",height:this.contentEl.height(),overflow:"hidden"})},thawContentHeight:function(){this.contentEl.css({width:"",height:"",overflow:""})}}),Dt.mixin({header:null,footer:null,toolbarsManager:null,initToolbars:function(){this.header=new qe(this,this.computeHeaderOptions()),this.footer=new qe(this,this.computeFooterOptions()),this.toolbarsManager=new je([this.header,this.footer])},computeHeaderOptions:function(){return{extraClasses:"fc-header-toolbar",layout:this.opt("header")}},computeFooterOptions:function(){return{extraClasses:"fc-footer-toolbar",layout:this.opt("footer")}},renderHeader:function(){var e=this.header;e.setToolbarOptions(this.computeHeaderOptions()),e.render(),e.el&&this.el.prepend(e.el)},renderFooter:function(){var e=this.footer;e.setToolbarOptions(this.computeFooterOptions()),e.render(),e.el&&this.el.append(e.el)},setToolbarsTitle:function(e){this.toolbarsManager.proxyCall("updateTitle",e)},updateToolbarButtons:function(){var e=this.getNow(),t=this.view,n=t.buildDateProfile(e),r=t.buildPrevDateProfile(this.currentDate),i=t.buildNextDateProfile(this.currentDate);this.toolbarsManager.proxyCall(n.isValid&&!G(e,t.currentRange)?"enableButton":"disableButton","today"),this.toolbarsManager.proxyCall(r.isValid?"enableButton":"disableButton","prev"),this.toolbarsManager.proxyCall(i.isValid?"enableButton":"disableButton","next")},queryToolbarsHeight:function(){return this.toolbarsManager.items.reduce(function(e,t){return e+(t.el?t.el.outerHeight(!0):0)},0)}}),Dt.defaults={titleRangeSeparator:" \u2013 ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",minTime:"00:00:00",maxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},allDayText:"all-day",theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3},Dt.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},Dt.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var Nt=Ge.locales={};Ge.datepickerLocale=function(t,n,r){var i=Nt[t]||(Nt[t]={});i.isRTL=r.isRTL,i.weekNumberTitle=r.weekHeader,e.each(_t,function(e,t){i[e]=t(r)}),e.datepicker&&(e.datepicker.regional[n]=e.datepicker.regional[t]=r,e.datepicker.regional.en=e.datepicker.regional[""],e.datepicker.setDefaults(r))},Ge.locale=function(t,r){var i,o;i=Nt[t]||(Nt[t]={}),r&&(i=Nt[t]=n([i,r])),o=Ue(t),e.each(Rt,function(e,t){null==i[e]&&(i[e]=t(o,i))}),Dt.defaults.locale=t};var _t={buttonText:function(e){return{prev:de(e.prevText),next:de(e.nextText),today:de(e.currentText)}},monthYearFormat:function(e){return e.showMonthAfterYear?"YYYY["+e.yearSuffix+"] MMMM":"MMMM YYYY["+e.yearSuffix+"]"}},Rt={dayOfMonthFormat:function(e,t){var n=e.longDateFormat("l");return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),t.isRTL?n+=" ddd":n="ddd "+n,n},mediumTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(e){return e.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(e){return e.longDateFormat("LT").replace(/\s*a$/i,"")}},At={smallDayDateFormat:function(e){return e.isRTL?"D dd":"dd D"},weekFormat:function(e){return e.isRTL?"w[ "+e.weekNumberTitle+"]":"["+e.weekNumberTitle+" ]w"},smallWeekFormat:function(e){return e.isRTL?"w["+e.weekNumberTitle+"]":"["+e.weekNumberTitle+"]w"}};Ge.locale("en",Dt.englishDefaults),Ge.sourceNormalizers=[],Ge.sourceFetchers=[];var Lt={dataType:"json",cache:!1},Mt=1;Dt.prototype.mutateSeg=function(e,t){return this.mutateEvent(e.event,t)},Dt.prototype.normalizeEvent=function(){},Dt.prototype.spanContainsSpan=function(e,t){var n=e.start.clone().stripZone(),r=this.getEventEnd(e).stripZone();return t.start>=n&&t.end<=r},Dt.prototype.getPeerEvents=function(e,t){var n,r,i=this.getEventCache(),o=[];for(n=0;n<i.length;n++)r=i[n],t&&t._id===r._id||o.push(r);return o},Dt.prototype.isEventSpanAllowed=function(e,t){var n=t.source||{},r=this.opt("eventAllow"),i=ue(t.constraint,n.constraint,this.opt("eventConstraint")),o=ue(t.overlap,n.overlap,this.opt("eventOverlap"));return this.isSpanAllowed(e,i,o,t)&&(!r||!1!==r(e,t))},Dt.prototype.isExternalSpanAllowed=function(t,n,r){var i,o;return r&&(i=e.extend({},r,n),o=this.expandEvent(this.buildEventFromInput(i))[0]),o?this.isEventSpanAllowed(t,o):this.isSelectionSpanAllowed(t)},Dt.prototype.isSelectionSpanAllowed=function(e){var t=this.opt("selectAllow");return this.isSpanAllowed(e,this.opt("selectConstraint"),this.opt("selectOverlap"))&&(!t||!1!==t(e))},Dt.prototype.isSpanAllowed=function(e,t,n,r){var i,o,a,s,l,u;if(null!=t&&(i=this.constraintToEvents(t))){for(o=!1,s=0;s<i.length;s++)if(this.spanContainsSpan(i[s],e)){o=!0;break}if(!o)return!1}for(a=this.getPeerEvents(e,r),s=0;s<a.length;s++)if(l=a[s],this.eventIntersectsRange(l,e)){if(!1===n)return!1;if("function"==typeof n&&!n(l,r))return!1;if(r){if(!1===(u=ue(l.overlap,(l.source||{}).overlap)))return!1;if("function"==typeof u&&!u(r,l))return!1}}return!0},Dt.prototype.constraintToEvents=function(e){return"businessHours"===e?this.getCurrentBusinessHourEvents():"object"==typeof e?null!=e.start?this.expandEvent(this.buildEventFromInput(e)):null:this.clientEvents(e)},Dt.prototype.eventIntersectsRange=function(e,t){var n=e.start.clone().stripZone(),r=this.getEventEnd(e).stripZone();return t.start<r&&t.end>n};var Ot={id:"_fcBusinessHours",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"};Dt.prototype.getCurrentBusinessHourEvents=function(e){return this.computeBusinessHourEvents(e,this.opt("businessHours"))},Dt.prototype.computeBusinessHourEvents=function(t,n){return!0===n?this.expandBusinessHourEvents(t,[{}]):e.isPlainObject(n)?this.expandBusinessHourEvents(t,[n]):e.isArray(n)?this.expandBusinessHourEvents(t,n,!0):[]},Dt.prototype.expandBusinessHourEvents=function(t,n,r){var i,o,a=this.getView(),s=[];for(i=0;i<n.length;i++)o=n[i],r&&!o.dow||(o=e.extend({},Ot,o),t&&(o.start=null,o.end=null),s.push.apply(s,this.expandEvent(this.buildEventFromInput(o),a.activeRange.start,a.activeRange.end)));return s};var Pt=Ge.BasicView=Tt.extend({scroller:null,dayGridClass:xt,dayGrid:null,dayNumbersVisible:!1,colWeekNumbersVisible:!1,cellWeekNumbersVisible:!1,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid(),this.scroller=new Et({overflowX:"hidden",overflowY:"auto"})},instantiateDayGrid:function(){return new(this.dayGridClass.extend(It))(this)},buildRenderRange:function(e,t){var n=Tt.prototype.buildRenderRange.apply(this,arguments);return/^(year|month)$/.test(t)&&(n.start.startOf("week"),n.end.weekday()&&n.end.add(1,"week").startOf("week")),this.trimHiddenDays(n)},renderDates:function(){this.dayGrid.breakOnWeeks=/year|month|week/.test(this.currentRangeUnit),this.dayGrid.setRange(this.renderRange),this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.opt("weekNumbers")&&(this.opt("weekNumbersWithinDays")?(this.cellWeekNumbersVisible=!0,this.colWeekNumbersVisible=!1):(this.cellWeekNumbersVisible=!1,this.colWeekNumbersVisible=!0)),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.cellWeekNumbersVisible||this.colWeekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var t=this.scroller.el.addClass("fc-day-grid-container"),n=e('<div class="fc-day-grid" />').appendTo(t);this.el.find(".fc-body > tr > td").append(t),this.dayGrid.setElement(n),this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml()),this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement(),this.scroller.destroy()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.dayGrid.unrenderBusinessHours()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"></td></tr></tbody></table>'},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var e=this.opt("eventLimit");return e&&"number"!=typeof e},updateWidth:function(){this.colWeekNumbersVisible&&(this.weekNumberWidth=u(this.el.find(".fc-week-number")))},setHeight:function(e,t){var n,o,a=this.opt("eventLimit");this.scroller.clear(),i(this.headRowEl),this.dayGrid.removeSegPopover(),a&&"number"==typeof a&&this.dayGrid.limitRows(a),n=this.computeScrollerHeight(e),this.setGridHeight(n,t),a&&"number"!=typeof a&&this.dayGrid.limitRows(a),t||(this.scroller.setHeight(n),((o=this.scroller.getScrollbarWidths()).left||o.right)&&(r(this.headRowEl,o),n=this.computeScrollerHeight(e),this.scroller.setHeight(n)),this.scroller.lockOverflow(o))},computeScrollerHeight:function(e){return e-c(this.el,this.scroller.el)},setGridHeight:function(e,t){t?l(this.dayGrid.rowEls):s(this.dayGrid.rowEls,e,!0)},computeInitialDateScroll:function(){return{top:0}},queryDateScroll:function(){return{top:this.scroller.getScrollTop()}},applyDateScroll:function(e){e.top!==undefined&&this.scroller.setScrollTop(e.top)},hitsNeeded:function(){this.dayGrid.hitsNeeded()},hitsNotNeeded:function(){this.dayGrid.hitsNotNeeded()},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(e,t){return this.dayGrid.queryHit(e,t)},getHitSpan:function(e){return this.dayGrid.getHitSpan(e)},getHitEl:function(e){return this.dayGrid.getHitEl(e)},renderEvents:function(e){this.dayGrid.renderEvents(e),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(e,t){return this.dayGrid.renderDrag(e,t)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(e){this.dayGrid.renderSelection(e)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),It={renderHeadIntroHtml:function(){var e=this.view;return e.colWeekNumbersVisible?'<th class="fc-week-number '+e.widgetHeaderClass+'" '+e.weekNumberStyleAttr()+"><span>"+ce(e.opt("weekNumberTitle"))+"</span></th>":""},renderNumberIntroHtml:function(e){var t=this.view,n=this.getCellDate(e,0);return t.colWeekNumbersVisible?'<td class="fc-week-number" '+t.weekNumberStyleAttr()+">"+t.buildGotoAnchorHtml({date:n,type:"week",forceOff:1===this.colCnt},n.format("w"))+"</td>":""},renderBgIntroHtml:function(){var e=this.view;return e.colWeekNumbersVisible?'<td class="fc-week-number '+e.widgetContentClass+'" '+e.weekNumberStyleAttr()+"></td>":""},renderIntroHtml:function(){var e=this.view;return e.colWeekNumbersVisible?'<td class="fc-week-number" '+e.weekNumberStyleAttr()+"></td>":""}},Ht=Ge.MonthView=Pt.extend({buildRenderRange:function(){var e,t=Pt.prototype.buildRenderRange.apply(this,arguments);return this.isFixedWeeks()&&(e=Math.ceil(t.end.diff(t.start,"weeks",!0)),t.end.add(6-e,"weeks")),t},setGridHeight:function(e,t){t&&(e*=this.rowCnt/6),s(this.dayGrid.rowEls,e,!t)},isFixedWeeks:function(){return this.opt("fixedWeekCount")}});Xe.basic={"class":Pt},Xe.basicDay={type:"basic",duration:{days:1}},Xe.basicWeek={type:"basic",duration:{weeks:1}},Xe.month={"class":Ht,duration:{months:1},defaults:{fixedWeekCount:!0}};var Bt=Ge.AgendaView=Tt.extend({scroller:null,timeGridClass:kt,timeGrid:null,dayGridClass:xt,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,usesMinMaxTime:!0,initialize:function(){this.timeGrid=this.instantiateTimeGrid(),this.opt("allDaySlot")&&(this.dayGrid=this.instantiateDayGrid()),this.scroller=new Et({overflowX:"hidden",overflowY:"auto"})},instantiateTimeGrid:function(){return new(this.timeGridClass.extend(Ft))(this)},instantiateDayGrid:function(){return new(this.dayGridClass.extend(Wt))(this)},renderDates:function(){this.timeGrid.setRange(this.renderRange),this.dayGrid&&this.dayGrid.setRange(this.renderRange),this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var t=this.scroller.el.addClass("fc-time-grid-container"),n=e('<div class="fc-time-grid" />').appendTo(t);this.el.find(".fc-body > tr > td").append(t),this.timeGrid.setElement(n),this.timeGrid.renderDates(),this.bottomRuleEl=e('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement()),this.scroller.destroy()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+"</td></tr></tbody></table>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours(),this.dayGrid&&this.dayGrid.unrenderBusinessHours()},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(e){this.timeGrid.renderNowIndicator(e)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(e){this.timeGrid.updateSize(e),Tt.prototype.updateSize.call(this,e)},updateWidth:function(){this.axisWidth=u(this.el.find(".fc-axis"))},setHeight:function(e,t){var n,o,a;this.bottomRuleEl.hide(),this.scroller.clear(),i(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),(n=this.opt("eventLimit"))&&"number"!=typeof n&&(n=zt),n&&this.dayGrid.limitRows(n)),t||(o=this.computeScrollerHeight(e),this.scroller.setHeight(o),((a=this.scroller.getScrollbarWidths()).left||a.right)&&(r(this.noScrollRowEls,a),o=this.computeScrollerHeight(e),this.scroller.setHeight(o)),this.scroller.lockOverflow(a),this.timeGrid.getTotalSlatHeight()<o&&this.bottomRuleEl.show())},computeScrollerHeight:function(e){return e-c(this.el,this.scroller.el)},computeInitialDateScroll:function(){var e=t.duration(this.opt("scrollTime")),n=this.timeGrid.computeTimeTop(e);return(n=Math.ceil(n))&&n++,{top:n}},queryDateScroll:function(){return{top:this.scroller.getScrollTop()}},applyDateScroll:function(e){e.top!==undefined&&this.scroller.setScrollTop(e.top)},hitsNeeded:function(){this.timeGrid.hitsNeeded(),this.dayGrid&&this.dayGrid.hitsNeeded()},hitsNotNeeded:function(){this.timeGrid.hitsNotNeeded(),this.dayGrid&&this.dayGrid.hitsNotNeeded()},prepareHits:function(){this.timeGrid.prepareHits(),this.dayGrid&&this.dayGrid.prepareHits()},releaseHits:function(){this.timeGrid.releaseHits(),this.dayGrid&&this.dayGrid.releaseHits()},queryHit:function(e,t){var n=this.timeGrid.queryHit(e,t);return!n&&this.dayGrid&&(n=this.dayGrid.queryHit(e,t)),n},getHitSpan:function(e){return e.component.getHitSpan(e)},getHitEl:function(e){return e.component.getHitEl(e)},renderEvents:function(e){var t,n=[],r=[];for(t=0;t<e.length;t++)e[t].allDay?n.push(e[t]):r.push(e[t]);this.timeGrid.renderEvents(r),this.dayGrid&&this.dayGrid.renderEvents(n),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(e,t){return e.start.hasTime()?this.timeGrid.renderDrag(e,t):this.dayGrid?this.dayGrid.renderDrag(e,t):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(e){e.start.hasTime()||e.end.hasTime()?this.timeGrid.renderSelection(e):this.dayGrid&&this.dayGrid.renderSelection(e)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),Ft={renderHeadIntroHtml:function(){var e,t=this.view;return t.opt("weekNumbers")?(e=this.start.format(t.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+t.widgetHeaderClass+'" '+t.axisStyleAttr()+">"+t.buildGotoAnchorHtml({date:this.start,type:"week",forceOff:this.colCnt>1},ce(e))+"</th>"):'<th class="fc-axis '+t.widgetHeaderClass+'" '+t.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var e=this.view;return'<td class="fc-axis '+e.widgetContentClass+'" '+e.axisStyleAttr()+"></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},Wt={renderBgIntroHtml:function(){var e=this.view;return'<td class="fc-axis '+e.widgetContentClass+'" '+e.axisStyleAttr()+"><span>"+e.getAllDayHtml()+"</span></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},zt=5,jt=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];Xe.agenda={"class":Bt,defaults:{allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0}},Xe.agendaDay={type:"agenda",duration:{days:1}},Xe.agendaWeek={type:"agenda",duration:{weeks:1}};var qt=Tt.extend({grid:null,scroller:null,initialize:function(){this.grid=new Vt(this),this.scroller=new Et({overflowX:"hidden",overflowY:"auto"})},renderSkeleton:function(){this.el.addClass("fc-list-view "+this.widgetContentClass),this.scroller.render(),this.scroller.el.appendTo(this.el),this.grid.setElement(this.scroller.scrollEl)},unrenderSkeleton:function(){this.scroller.destroy()},setHeight:function(e){this.scroller.setHeight(this.computeScrollerHeight(e))},computeScrollerHeight:function(e){return e-c(this.el,this.scroller.el)},renderDates:function(){this.grid.setRange(this.renderRange)},renderEvents:function(e){this.grid.renderEvents(e)},unrenderEvents:function(){this.grid.unrenderEvents()},isEventResizable:function(){return!1},isEventDraggable:function(){return!1}}),Vt=Ct.extend({segSelector:".fc-list-item",hasDayInteractions:!1,spanToSegs:function(e){for(var t,n=this.view,r=n.renderRange.start.clone().time(0),i=0,o=[];r<n.renderRange.end;)if((t=P(e,{start:r,end:r.clone().add(1,"day")}))&&(t.dayIndex=i,o.push(t)),r.add(1,"day"),i++,t&&!t.isEnd&&e.end.hasTime()&&e.end<r.clone().add(this.view.nextDayThreshold)){t.end=e.end.clone(),t.isEnd=!0;break}return o},computeEventTimeFormat:function(){return this.view.opt("mediumTimeFormat")},handleSegClick:function(t,n){var r;Ct.prototype.handleSegClick.apply(this,arguments),e(n.target).closest("a[href]").length||(r=t.event.url)&&!n.isDefaultPrevented()&&(window.location.href=r)},renderFgSegs:function(e){return(e=this.renderFgSegEls(e)).length?this.renderSegList(e):this.renderEmptyMessage(),e},renderEmptyMessage:function(){this.el.html('<div class="fc-list-empty-wrap2"><div class="fc-list-empty-wrap1"><div class="fc-list-empty">'+ce(this.view.opt("noEventsMessage"))+"</div></div></div>")},renderSegList:function(t){var n,r,i,o=this.groupSegsByDay(t),a=e('<table class="fc-list-table"><tbody/></table>'),s=a.find("tbody");for(n=0;n<o.length;n++)if(r=o[n])for(s.append(this.dayHeaderHtml(this.view.renderRange.start.clone().add(n,"days"))),this.sortEventSegs(r),i=0;i<r.length;i++)s.append(r[i].el);this.el.empty().append(a)},groupSegsByDay:function(e){var t,n,r=[];for(t=0;t<e.length;t++)(r[(n=e[t]).dayIndex]||(r[n.dayIndex]=[])).push(n);return r},dayHeaderHtml:function(e){var t=this.view,n=t.opt("listDayFormat"),r=t.opt("listDayAltFormat");return'<tr class="fc-list-heading" data-date="'+e.format("YYYY-MM-DD")+'"><td class="'+t.widgetHeaderClass+'" colspan="3">'+(n?t.buildGotoAnchorHtml(e,{"class":"fc-list-heading-main"},ce(e.format(n))):"")+(r?t.buildGotoAnchorHtml(e,{"class":"fc-list-heading-alt"},ce(e.format(r))):"")+"</td></tr>"},fgSegHtml:function(e){var t,n=this.view,r=["fc-list-item"].concat(this.getSegCustomClasses(e)),i=this.getSegBackgroundColor(e),o=e.event,a=o.url;return t=o.allDay?n.getAllDayHtml():n.isMultiDayEvent(o)?e.isStart||e.isEnd?ce(this.getEventTimeText(e)):n.getAllDayHtml():ce(this.getEventTimeText(o)),a&&r.push("fc-has-url"),'<tr class="'+r.join(" ")+'">'+(this.displayEventTime?'<td class="fc-list-item-time '+n.widgetContentClass+'">'+(t||"")+"</td>":"")+'<td class="fc-list-item-marker '+n.widgetContentClass+'"><span class="fc-event-dot"'+(i?' style="background-color:'+i+'"':"")+'></span></td><td class="fc-list-item-title '+n.widgetContentClass+'"><a'+(a?' href="'+ce(a)+'"':"")+">"+ce(e.event.title||"")+"</a></td></tr>"}});return Xe.list={"class":qt,buttonTextKey:"list",defaults:{buttonText:"list",listDayFormat:"LL",noEventsMessage:"No events to display"}},Xe.listDay={type:"list",duration:{days:1},defaults:{listDayFormat:"dddd"}},Xe.listWeek={type:"list",duration:{weeks:1},defaults:{listDayFormat:"dddd",listDayAltFormat:"LL"}},Xe.listMonth={type:"list",duration:{month:1},defaults:{listDayAltFormat:"dddd"}},Xe.listYear={type:"list",duration:{year:1},defaults:{listDayAltFormat:"dddd"}},Ge}),function(e){var t=0,n=function(){return(new Date).getTime()+t++},r=function(e){return"["+e+"]$1"},i=function(e){return"_"+e+"_$1"},o=function(t,n,r){return t?"function"==typeof t?(n&&console.warn("association-insertion-traversal is ignored, because association-insertion-node is given as a function."),t(r)):"string"==typeof t?n?r[n](t):"this"==t?r:e(t):void 0:r.parent()};e(document).on("click",".add_fields",function(t){t.preventDefault();var a=e(this),s=a.data("association"),l=a.data("associations"),u=a.data("association-insertion-template"),c=a.data("association-insertion-method")||a.data("association-insertion-position")||"before",d=a.data("association-insertion-node"),f=a.data("association-insertion-traversal"),h=parseInt(a.data("count"),10),p=new RegExp("\\[new_"+s+"\\](.*?\\s)","g"),m=new RegExp("_new_"+s+"_(\\w*)","g"),g=n(),v=u.replace(p,r(g)),y=[];for(v==u&&(p=new RegExp("\\[new_"+l+"\\](.*?\\s)","g"),m=new RegExp("_new_"+l+"_(\\w*)","g"),v=u.replace(p,r(g))),y=[v=v.replace(m,i(g))],h=isNaN(h)?1:Math.max(h,1),h-=1;h;)g=n(),v=(v=u.replace(p,r(g))).replace(m,i(g)),y.push(v),h-=1;var b=o(d,f,a);b&&0!=b.length||console.warn("Couldn't find the element to insert the template. Make sure your `data-association-insertion-*` on `link_to_add_association` is correct."),e.each(y,function(t,n){var r=e(n),i=jQuery.Event("cocoon:before-insert");if(b.trigger(i,[r]),!i.isDefaultPrevented()){b[c](r);b.trigger("cocoon:after-insert",[r])}})}),e(document).on("click",".remove_fields.dynamic, .remove_fields.existing",function(t){var n=e(this),r=n.data("wrapper-class")||"nested-fields",i=n.closest("."+r),o=i.parent();t.preventDefault();var a=jQuery.Event("cocoon:before-remove");if(o.trigger(a,[i]),!a.isDefaultPrevented()){var s=o.data("remove-timeout")||0;setTimeout(function(){n.hasClass("dynamic")?i.remove():(n.prev("input[type=hidden]").val("1"),i.hide()),o.trigger("cocoon:after-remove",[i])},s)}}),e(document).on("ready page:load turbolinks:load",function(){e(".remove_fields.existing.destroyed").each(function(){var t=e(this),n=t.data("wrapper-class")||"nested-fields";t.closest("."+n).hide()})})}(jQuery),$(document).on("turbolinks:load",function(){$(".alert").delay(5e3).slideUp(500,function(){$(".alert").alert("close")})}),function(e){"use strict";var t={init:function(n){return this.each(function(){this.self=e(this),t.destroy.call(this.self),this.opt=e.extend(!0,{},e.fn.raty.defaults,n,this.self.data()),t._adjustCallback.call(this),t._adjustNumber.call(this),t._adjustHints.call(this),this.opt.score=t._adjustedScore.call(this,this.opt.score),"img"!==this.opt.starType&&t._adjustStarType.call(this),t._adjustPath.call(this),t._createStars.call(this),this.opt.cancel&&t._createCancel.call(this),this.opt.precision&&t._adjustPrecision.call(this),t._createScore.call(this),t._apply.call(this,this.opt.score),t._setTitle.call(this,this.opt.score),t._target.call(this,this.opt.score),this.opt.readOnly?t._lock.call(this):(this.style.cursor="pointer",t._binds.call(this))})},_adjustCallback:function(){for(var e=["number","readOnly","score","scoreName","target","path"],t=0;t<e.length;t++)"function"==typeof this.opt[e[t]]&&(this.opt[e[t]]=this.opt[e[t]].call(this))},_adjustedScore:function(e){return e?t._between(e,0,this.opt.number):e},_adjustHints:function(){if(this.opt.hints||(this.opt.hints=[]),this.opt.halfShow||this.opt.half)for(var e=this.opt.precision?10:2,t=0;t<this.opt.number;t++){var n=this.opt.hints[t];"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),this.opt.hints[t]=[];for(var r=0;r<e;r++){var i=n[r],o=n[n.length-1];o===undefined&&(o=null),this.opt.hints[t][r]=i===undefined?o:i}}},_adjustNumber:function(){this.opt.number=t._between(this.opt.number,1,this.opt.numberMax)},_adjustPath:function(){this.opt.path=this.opt.path||"",this.opt.path&&"/"!==this.opt.path.charAt(this.opt.path.length-1)&&(this.opt.path+="/")},_adjustPrecision:function(){this.opt.half=!0},_adjustStarType:function(){var e=["cancelOff","cancelOn","starHalf","starOff","starOn"];this.opt.path="";for(var t=0;t<e.length;t++)this.opt[e[t]]=this.opt[e[t]].replace(".","-")},_apply:function(e){t._fill.call(this,e),e&&(e>0&&this.score.val(e),t._roundStars.call(this,e))},_between:function(e,t,n){return Math.min(Math.max(parseFloat(e),t),n)},_binds:function(){this.cancel&&(t._bindOverCancel.call(this),t._bindClickCancel.call(this),t._bindOutCancel.call(this)),t._bindOver.call(this),t._bindClick.call(this),t._bindOut.call(this)},_bindClick:function(){var n=this;n.stars.on("click.raty",function(r){var i=!0,o=n.opt.half||n.opt.precision?n.self.data("score"):this.alt||e(this).data("alt");n.opt.click&&(i=n.opt.click.call(n,+o,r)),(i||i===undefined)&&(n.opt.half&&!n.opt.precision&&(o=t._roundHalfScore.call(n,o)),t._apply.call(n,o))})},_bindClickCancel:function(){var e=this;e.cancel.on("click.raty",function(t){e.score.removeAttr("value"),e.opt.click&&e.opt.click.call(e,null,t)})},_bindOut:function(){var e=this;e.self.on("mouseleave.raty",function(n){var r=+e.score.val()||undefined;t._apply.call(e,r),t._target.call(e,r,n),t._resetTitle.call(e),e.opt.mouseout&&e.opt.mouseout.call(e,r,n)})},_bindOutCancel:function(){var e=this;e.cancel.on("mouseleave.raty",function(n){var r=e.opt.cancelOff;if("img"!==e.opt.starType&&(r=e.opt.cancelClass+" "+r),t._setIcon.call(e,this,r),e.opt.mouseout){var i=+e.score.val()||undefined;e.opt.mouseout.call(e,i,n)}})},_bindOver:function(){var e=this,n=e.opt.half?"mousemove.raty":"mouseover.raty";e.stars.on(n,function(n){var r=t._getScoreByPosition.call(e,n,this);t._fill.call(e,r),e.opt.half&&(t._roundStars.call(e,r,n),t._setTitle.call(e,r,n),e.self.data("score",r)),t._target.call(e,r,n),e.opt.mouseover&&e.opt.mouseover.call(e,r,n)})},_bindOverCancel:function(){var e=this;e.cancel.on("mouseover.raty",function(n){var r=e.opt.path+e.opt.starOff,i=e.opt.cancelOn;"img"===e.opt.starType?e.stars.attr("src",r):(i=e.opt.cancelClass+" "+i,e.stars.attr("class",r)),t._setIcon.call(e,this,i),t._target.call(e,null,n),e.opt.mouseover&&e.opt.mouseover.call(e,null)})},_buildScoreField:function(){return e("<input />",{name:this.opt.scoreName,type:"hidden"}).appendTo(this)},_createCancel:function(){var t=this.opt.path+this.opt.cancelOff,n=e("<"+this.opt.starType+" />",{title:this.opt.cancelHint,"class":this.opt.cancelClass});"img"===this.opt.starType?n.attr({src:t,alt:"x"}):n.attr("data-alt","x").addClass(t),"left"===this.opt.cancelPlace?this.self.prepend("&#160;").prepend(n):this.self.append("&#160;").append(n),this.cancel=n},_createScore:function(){var n=e(this.opt.targetScore);this.score=n.length?n:t._buildScoreField.call(this)},_createStars:function(){for(var n=1;n<=this.opt.number;n++){var r=t._nameForIndex.call(this,n),i={alt:n,src:this.opt.path+this.opt[r]};"img"!==this.opt.starType&&(i={"data-alt":n,"class":i.src}),i.title=t._getHint.call(this,n),e("<"+this.opt.starType+" />",i).appendTo(this),this.opt.space&&this.self.append(n<this.opt.number?"&#160;":"")}this.stars=this.self.children(this.opt.starType)},_error:function(t){e(this).text(t),e.error(t)},_fill:function(e){for(var n=0,r=1;r<=this.stars.length;r++){var i,o=this.stars[r-1],a=t._turnOn.call(this,r,e);if(this.opt.iconRange&&this.opt.iconRange.length>n){var s=this.opt.iconRange[n];i=t._getRangeIcon.call(this,s,a),r<=s.range&&t._setIcon.call(this,o,i),r===s.range&&n++}else i=this.opt[a?"starOn":"starOff"],t._setIcon.call(this,o,i)}},_getFirstDecimal:function(e){var t=e.toString().split(".")[1],n=0;return t&&(n=parseInt(t.charAt(0),10),"9999"===t.slice(1,5)&&n++),n},_getRangeIcon:function(e,t){return t?e.on||this.opt.starOn:e.off||this.opt.starOff},_getScoreByPosition:function(n,r){var i=parseInt(r.alt||r.getAttribute("data-alt"),10);if(this.opt.half){var o=t._getWidth.call(this);i=i-1+parseFloat((n.pageX-e(r).offset().left)/o)}return i},_getHint:function(e,n){if(0!==e&&!e)return this.opt.noRatedMsg;var r=t._getFirstDecimal.call(this,e),i=Math.ceil(e),o=this.opt.hints[(i||1)-1],a=o,s=!n||this.move;return this.opt.precision?(s&&(r=0===r?9:r-1),a=o[r]):(this.opt.halfShow||this.opt.half)&&(a=o[r=s&&0===r?1:r>5?1:0]),""===a?"":a||e},_getWidth:function(){var e=this.stars[0].width||parseFloat(this.stars.eq(0).css("font-size"));return e||t._error.call(this,"Could not get the icon width!"),e},_lock:function(){var e=t._getHint.call(this,this.score.val());this.style.cursor="",this.title=e,this.score.prop("readonly",!0),this.stars.prop("title",e),this.cancel&&this.cancel.hide(),this.self.data("readonly",!0)},_nameForIndex:function(e){return this.opt.score&&this.opt.score>=e?"starOn":"starOff"},_resetTitle:function(){for(var e=0;e<this.opt.number;e++)this.stars[e].title=t._getHint.call(this,e+1)},_roundHalfScore:function(e){var n=parseInt(e,10),r=t._getFirstDecimal.call(this,e);return 0!==r&&(r=r>5?1:.5),n+r},_roundStars:function(e,n){var r,i=(e%1).toFixed(2);if(n||this.move?r=i>.5?"starOn":"starHalf":i>this.opt.round.down&&(r="starOn",this.opt.halfShow&&i<this.opt.round.up?r="starHalf":i<this.opt.round.full&&(r="starOff")),r){var o=this.opt[r],a=this.stars[Math.ceil(e)-1];t._setIcon.call(this,a,o)}},_setIcon:function(e,t){e["img"===this.opt.starType?"src":"className"]=this.opt.path+t},_setTarget:function(e,t){t&&(t=this.opt.targetFormat.toString().replace("{score}",t)),e.is(":input")?e.val(t):e.html(t)},_setTitle:function(e,n){if(e){var r=parseInt(Math.ceil(e),10);this.stars[r-1].title=t._getHint.call(this,e,n)}},_target:function(n,r){if(this.opt.target){var i=e(this.opt.target);i.length||t._error.call(this,"Target selector invalid or missing!");var o=r&&"mouseover"===r.type;if(n===undefined)n=this.opt.targetText;else if(null===n)n=o?this.opt.cancelHint:this.opt.targetText;else{"hint"===this.opt.targetType?n=t._getHint.call(this,n,r):this.opt.precision&&(n=parseFloat(n).toFixed(1));var a=r&&"mousemove"===r.type;o||a||this.opt.targetKeep||(n=this.opt.targetText)}t._setTarget.call(this,i,n)}},_turnOn:function(e,t){return this.opt.single?e===t:e<=t},_unlock:function(){this.style.cursor="pointer",this.removeAttribute("title"),this.score.removeAttr("readonly"),this.self.data("readonly",!1);for(var e=0;e<this.opt.number;e++)this.stars[e].title=t._getHint.call(this,e+1);this.cancel&&this.cancel.css("display","")},cancel:function(n){return this.each(function(){var r=e(this);!0!==r.data("readonly")&&(t[n?"click":"score"].call(r,null),this.score.removeAttr("value"))})},click:function(n){return this.each(function(){!0!==e(this).data("readonly")&&(n=t._adjustedScore.call(this,n),t._apply.call(this,n),this.opt.click&&this.opt.click.call(this,n,e.Event("click")),t._target.call(this,n))})},destroy:function(){return this.each(function(){var t=e(this),n=t.data("raw");n?t.off(".raty").empty().css({cursor:n.style.cursor}).removeData("readonly"):t.data("raw",t.clone()[0])})},getScore:function(){var e,t=[];return this.each(function(){e=this.score.val(),t.push(e?+e:undefined)}),t.length>1?t:t[0]},move:function(n){return this.each(function(){var r=parseInt(n,10),i=t._getFirstDecimal.call(this,n);r>=this.opt.number&&(r=this.opt.number-1,i=10);var o=t._getWidth.call(this)/10,a=e(this.stars[r]),s=a.offset().left+o*i,l=e.Event("mousemove",{pageX:s});this.move=!0,a.trigger(l),this.move=!1})},readOnly:function(n){return this.each(function(){var r=e(this);r.data("readonly")!==n&&(n?(r.off(".raty").children(this.opt.starType).off(".raty"),t._lock.call(this)):(t._binds.call(this),t._unlock.call(this)),r.data("readonly",n))})},reload:function(){return t.set.call(this,{})},score:function(){var n=e(this);return arguments.length?t.setScore.apply(n,arguments):t.getScore.call(n)},set:function(t){return this.each(function(){e(this).raty(e.extend({},this.opt,t))})},setScore:function(n){return this.each(function(){!0!==e(this).data("readonly")&&(n=t._adjustedScore.call(this,n),t._apply.call(this,n),t._target.call(this,n))})}};e.fn.raty=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist!"):t.init.apply(this,arguments)},e.fn.raty.defaults={cancel:!1,cancelClass:"raty-cancel",cancelHint:"Cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:undefined,half:!1,halfShow:!0,hints:["bad","poor","regular","good","gorgeous"],iconRange:undefined,mouseout:undefined,mouseover:undefined,noRatedMsg:"Not rated yet!",number:5,numberMax:20,path:undefined,precision:!1,readOnly:!1,round:{down:.25,full:.6,up:.76},score:undefined,scoreName:"score",single:!1,space:!0,starHalf:"/star-half.png",starOff:"/assets/star-off-6aaeebdaab93d594c005d366ce0d94fba02e7a07fd03557dbee8482f04a91c22.png",starOn:"/assets/star-on-fd26bf0ea0990cfd808f7540f958eed324b86fc609bf56ec2b3a5612cdfde5f5.png",starType:"img",target:undefined,targetFormat:"{score}",targetKeep:!1,targetScore:undefined,targetText:"",targetType:"hint"}}(jQuery),function(){}.call(this),document.addEventListener("turbolinks:before-cache",function(){editor=null}),document.addEventListener("turbolinks:load",function(){editor=CodeMirror(document.getElementById("code"),{mode:"text/html",theme:"seti",tabSize:2,styleActiveLine:!0,lineNumbers:!0})}),function(){}.call(this),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?t(require("jquery")):(t(e.jquery),e.bootstrapSwitch={})}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(e){return e&&e.__esModule?e:{"default":e}}(e),r=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i=function(){function e(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n["default"]||window.jQuery||window.$,a=function(){function e(n){var r=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t(this,e),this.$element=o(n),this.options=o.extend({},o.fn.bootstrapSwitch.defaults,this._getElementOptions(),i),this.prevOptions={},this.$wrapper=o("<div>",{"class":function(){var e=[];return e.push(r.options.state?"on":"off"),r.options.size&&e.push(r.options.size),r.options.disabled&&e.push("disabled"),r.options.readonly&&e.push("readonly"),r.options.indeterminate&&e.push("indeterminate"),r.options.inverse&&e.push("inverse"),r.$element.attr("id")&&e.push("id-"+r.$element.attr("id")),e.map(r._getClass.bind(r)).concat([r.options.baseClass],r._getClasses(r.options.wrapperClass)).join(" ")}}),this.$container=o("<div>",{"class":this._getClass("container")}),this.$on=o("<span>",{html:this.options.onText,"class":this._getClass("handle-on")+" "+this._getClass(this.options.onColor)}),this.$off=o("<span>",{html:this.options.offText,"class":this._getClass("handle-off")+" "+this._getClass(this.options.offColor)}),this.$label=o("<span>",{html:this.options.labelText,"class":this._getClass("label")}),this.$element.on("init.bootstrapSwitch",this.options.onInit.bind(this,n)),this.$element.on("switchChange.bootstrapSwitch",function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];!1===r.options.onSwitchChange.apply(n,t)&&(r.$element.is(":radio")?o('[name="'+r.$element.attr("name")+'"]').trigger("previousState.bootstrapSwitch",!0):r.$element.trigger("previousState.bootstrapSwitch",!0))}),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off),this.options.indeterminate&&this.$element.prop("indeterminate",!0),this._init(),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler(),this._externalLabelHandler(),this.$element.trigger("init.bootstrapSwitch",this.options.state)}return i(e,[{key:"setPrevOptions",value:function(){this.prevOptions=r({},this.options)}},{key:"state",value:function(e,t){return void 0===e?this.options.state:this.options.disabled||this.options.readonly||this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")?this.$element:(this.$element.is(":radio")?o('[name="'+this.$element.attr("name")+'"]').trigger("setPreviousOptions.bootstrapSwitch"):this.$element.trigger("setPreviousOptions.bootstrapSwitch"),this.options.indeterminate&&this.indeterminate(!1),this.$element.prop("checked",!!e).trigger("change.bootstrapSwitch",t),this.$element)}},{key:"toggleState",value:function(e){return this.options.disabled||this.options.readonly?this.$element:this.options.indeterminate?(this.indeterminate(!1),this.state(!0)):this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",e)}},{key:"size",value:function(e){return void 0===e?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(this._getClass(this.options.size)),e&&this.$wrapper.addClass(this._getClass(e)),this._width(),this._containerPosition(),this.options.size=e,this.$element)}},{key:"animate",value:function(e){return void 0===e?this.options.animate:this.options.animate===!!e?this.$element:this.toggleAnimate()}},{key:"toggleAnimate",value:function(){return this.options.animate=!this.options.animate,this.$wrapper.toggleClass(this._getClass("animate")),this.$element}},{key:"disabled",value:function(e){return void 0===e?this.options.disabled:this.options.disabled===!!e?this.$element:this.toggleDisabled()}},{key:"toggleDisabled",value:function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(this._getClass("disabled")),this.$element}},{key:"readonly",value:function(e){return void 0===e?this.options.readonly:this.options.readonly===!!e?this.$element:this.toggleReadonly()}},{key:"toggleReadonly",value:function(){return this.options.readonly=!this.options.readonly,this.$element.prop("readonly",this.options.readonly),this.$wrapper.toggleClass(this._getClass("readonly")),this.$element}},{key:"indeterminate",value:function(e){return void 0===e?this.options.indeterminate:this.options.indeterminate===!!e?this.$element:this.toggleIndeterminate()}},{key:"toggleIndeterminate",value:function(){return this.options.indeterminate=!this.options.indeterminate,this.$element.prop("indeterminate",this.options.indeterminate),this.$wrapper.toggleClass(this._getClass("indeterminate")),this._containerPosition(),this.$element}},{key:"inverse",value:function(e){return void 0===e?this.options.inverse:this.options.inverse===!!e?this.$element:this.toggleInverse()}},{key:"toggleInverse",value:function(){this.$wrapper.toggleClass(this._getClass("inverse"));var e=this.$on.clone(!0),t=this.$off.clone(!0);return this.$on.replaceWith(t),this.$off.replaceWith(e),this.$on=t,this.$off=e,this.options.inverse=!this.options.inverse,this.$element}},{key:"onColor",value:function(e){return void 0===e?this.options.onColor:(this.options.onColor&&this.$on.removeClass(this._getClass(this.options.onColor)),this.$on.addClass(this._getClass(e)),this.options.onColor=e,this.$element)}},{key:"offColor",value:function(e){return void 0===e?this.options.offColor:(this.options.offColor&&this.$off.removeClass(this._getClass(this.options.offColor)),this.$off.addClass(this._getClass(e)),this.options.offColor=e,this.$element)}},{key:"onText",value:function(e){return void 0===e?this.options.onText:(this.$on.html(e),this._width(),this._containerPosition(),this.options.onText=e,this.$element)}},{key:"offText",value:function(e){return void 0===e?this.options.offText:(this.$off.html(e),this._width(),this._containerPosition(),this.options.offText=e,this.$element)}},{key:"labelText",value:function(e){return void 0===e?this.options.labelText:(this.$label.html(e),this._width(),this.options.labelText=e,this.$element)}},{key:"handleWidth",value:function(e){return void 0===e?this.options.handleWidth:(this.options.handleWidth=e,this._width(),this._containerPosition(),this.$element)}},{key:"labelWidth",value:function(e){return void 0===e?this.options.labelWidth:(this.options.labelWidth=e,this._width(),this._containerPosition(),this.$element)}},{key:"baseClass",value:function(){return this.options.baseClass}},{key:"wrapperClass",value:function(e){return void 0===e?this.options.wrapperClass:(e||(e=o.fn.bootstrapSwitch.defaults.wrapperClass),this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(e).join(" ")),this.options.wrapperClass=e,this.$element)}},{key:"radioAllOff",value:function(e){if(void 0===e)return this.options.radioAllOff;var t=!!e;return this.options.radioAllOff===t?this.$element:(this.options.radioAllOff=t,this.$element)}},{key:"onInit",value:function(e){return void 0===e?this.options.onInit:(e||(e=o.fn.bootstrapSwitch.defaults.onInit),this.options.onInit=e,this.$element)}},{key:"onSwitchChange",value:function(e){return void 0===e?this.options.onSwitchChange:(e||(e=o.fn.bootstrapSwitch.defaults.onSwitchChange),this.options.onSwitchChange=e,this.$element)}},{key:"destroy",value:function(){var e=this.$element.closest("form");return e.length&&e.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element}},{key:"_getElementOptions",value:function(){return{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")}}},{key:"_width",value:function(){var e=this,t=this.$on.add(this.$off).add(this.$label).css("width",""),n="auto"===this.options.handleWidth?Math.round(Math.max(this.$on.width(),this.$off.width())):this.options.handleWidth;return t.width(n),this.$label.width(function(t,r){return"auto"===e.options.labelWidth?r<n?n:r:e.options.labelWidth}),this._handleWidth=this.$on.outerWidth(),this._labelWidth=this.$label.outerWidth(),this.$container.width(2*this._handleWidth+this._labelWidth),this.$wrapper.width(this._handleWidth+this._labelWidth)}},{key:"_containerPosition",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.state;arguments[1];this.$container.css("margin-left",function(){var n=[0,"-"+e._handleWidth+"px"];return e.options.indeterminate?"-"+e._handleWidth/2+"px":t?e.options.inverse?n[1]:n[0]:e.options.inverse?n[0]:n[1]})}},{key:"_init",value:function(){var e=this,t=function(){e.setPrevOptions(),e._width(),e._containerPosition(),setTimeout(function(){if(e.options.animate)return e.$wrapper.addClass(e._getClass("animate"))},50)};if(this.$wrapper.is(":visible"))t();else var n=window.setInterval(function(){if(e.$wrapper.is(":visible"))return t(),window.clearInterval(n)},50)}},{key:"_elementHandlers",value:function(){var e=this;return this.$element.on({"setPreviousOptions.bootstrapSwitch":this.setPrevOptions.bind(this),"previousState.bootstrapSwitch":function(){e.options=e.prevOptions,e.options.indeterminate&&e.$wrapper.addClass(e._getClass("indeterminate")),e.$element.prop("checked",e.options.state).trigger("change.bootstrapSwitch",!0)},"change.bootstrapSwitch":function(t,n){t.preventDefault(),t.stopImmediatePropagation();var r=e.$element.is(":checked");e._containerPosition(r),r===e.options.state||(e.options.state=r,e.$wrapper.toggleClass(e._getClass("off")).toggleClass(e._getClass("on")),!n&&(e.$element.is(":radio")&&o('[name="'+e.$element.attr("name")+'"]').not(e.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),e.$element.trigger("switchChange.bootstrapSwitch",[r])))},"focus.bootstrapSwitch":function(t){t.preventDefault(),e.$wrapper.addClass(e._getClass("focused"))},"blur.bootstrapSwitch":function(t){t.preventDefault(),e.$wrapper.removeClass(e._getClass("focused"))},"keydown.bootstrapSwitch":function(t){!t.which||e.options.disabled||e.options.readonly||(37===t.which||39===t.which)&&(t.preventDefault(),t.stopImmediatePropagation(),e.state(39===t.which))}})}},{key:"_handleHandlers",value:function(){var e=this;return this.$on.on("click.bootstrapSwitch",function(t){return t.preventDefault(),t.stopPropagation(),e.state(!1),e.$element.trigger("focus.bootstrapSwitch")}),this.$off.on("click.bootstrapSwitch",function(t){return t.preventDefault(),t.stopPropagation(),e.state(!0),e.$element.trigger("focus.bootstrapSwitch")})}},{key:"_labelHandlers",value:function(){var e=this;this.$label.on({click:function(e){e.stopPropagation()},"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":function(t){e._dragStart||e.options.disabled||e.options.readonly||(t.preventDefault(),t.stopPropagation(),e._dragStart=(t.pageX||t.originalEvent.touches[0].pageX)-parseInt(e.$container.css("margin-left"),10),e.options.animate&&e.$wrapper.removeClass(e._getClass("animate")),e.$element.trigger("focus.bootstrapSwitch"))},"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(t){if(null!=e._dragStart){var n=(t.pageX||t.originalEvent.touches[0].pageX)-e._dragStart;t.preventDefault(),n<-e._handleWidth||0<n||(e._dragEnd=n,e.$container.css("margin-left",e._dragEnd+"px"))}},"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function(t){if(e._dragStart){if(t.preventDefault(),e.options.animate&&e.$wrapper.addClass(e._getClass("animate")),e._dragEnd){var n=e._dragEnd>-e._handleWidth/2;e._dragEnd=!1,e.state(e.options.inverse?!n:n)}else e.state(!e.options.state);e._dragStart=!1}},"mouseleave.bootstrapSwitch":function(){e.$label.trigger("mouseup.bootstrapSwitch")}})}},{key:"_externalLabelHandler",value:function(){var e=this,t=this.$element.closest("label");t.on("click",function(n){n.preventDefault(),n.stopImmediatePropagation(),n.target===t[0]&&e.toggleState()})}},{key:"_formHandler",value:function(){var e=this.$element.closest("form");e.data("bootstrap-switch")||e.on("reset.bootstrapSwitch",function(){window.setTimeout(function(){e.find("input").filter(function(){return o(this).data("bootstrap-switch")}).each(function(){return o(this).bootstrapSwitch("state",this.checked)})},1)}).data("bootstrap-switch",!0)}},{key:"_getClass",value:function(e){return this.options.baseClass+"-"+e}},{key:"_getClasses",value:function(e){return o.isArray(e)?e.map(this._getClass.bind(this)):[this._getClass(e)]}}]),e}();o.fn.bootstrapSwitch=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Array.prototype.reduce.call(this,function(t,r){var i=o(r),s=i.data("bootstrap-switch"),l=s||new a(r,e);return s||i.data("bootstrap-switch",l),"string"==typeof e?l[e].apply(l,n):t},this)},o.fn.bootstrapSwitch.Constructor=a,o.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}}),function(){var e=this;(function(){(function(){var e=[].slice;this.ActionCable={INTERNAL:{message_types:{welcome:"welcome",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},WebSocket:window.WebSocket,logger:window.console,createConsumer:function(e){var n;return null==e&&(e=null!=(n=this.getConfig("url"))?n:this.INTERNAL.default_mount_path),new t.Consumer(this.createWebSocketURL(e))},getConfig:function(e){var t;return null!=(t=document.head.querySelector("meta[name='action-cable-"+e+"']"))?t.getAttribute("content"):void 0},createWebSocketURL:function(e){var t;return e&&!/^wss?:/i.test(e)?(t=document.createElement("a"),t.href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href):e},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(){var t,n;if(t=1<=arguments.length?e.call(arguments,0):[],this.debugging)return t.push(Date.now()),(n=this.logger).log.apply(n,["[ActionCable]"].concat(e.call(t)))}}}).call(this)}).call(e);var t=e.ActionCable;(function(){(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.ConnectionMonitor=function(){function n(t){this.connection=t,this.visibilityDidChange=e(this.visibilityDidChange,this),this.reconnectAttempts=0}var r,i,o;return n.pollInterval={min:3,max:30},n.staleThreshold=6,n.prototype.start=function(){if(!this.isRunning())return this.startedAt=i(),delete this.stoppedAt,this.startPolling(),document.addEventListener("visibilitychange",this.visibilityDidChange),t.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")},n.prototype.stop=function(){if(this.isRunning())return this.stoppedAt=i(),this.stopPolling(),document.removeEventListener("visibilitychange",this.visibilityDidChange),t.log("ConnectionMonitor stopped")},n.prototype.isRunning=function(){return null!=this.startedAt&&null==this.stoppedAt},n.prototype.recordPing=function(){return this.pingedAt=i()},n.prototype.recordConnect=function(){return this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,t.log("ConnectionMonitor recorded connect")},n.prototype.recordDisconnect=function(){return this.disconnectedAt=i(),t.log("ConnectionMonitor recorded disconnect")},n.prototype.startPolling=function(){return this.stopPolling(),this.poll()},n.prototype.stopPolling=function(){return clearTimeout(this.pollTimeout)},n.prototype.poll=function(){return this.pollTimeout=setTimeout(function(e){return function(){return e.reconnectIfStale(),e.poll()}}(this),this.getPollInterval())},n.prototype.getPollInterval=function(){var e,t,n,i;return i=this.constructor.pollInterval,n=i.min,t=i.max,e=5*Math.log(this.reconnectAttempts+1),Math.round(1e3*r(e,n,t))},n.prototype.reconnectIfStale=function(){if(this.connectionIsStale())return t.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+o(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s"),this.reconnectAttempts++,this.disconnectedRecently()?t.log("ConnectionMonitor skipping reopening recent disconnect"):(t.log("ConnectionMonitor reopening"),this.connection.reopen())},n.prototype.connectionIsStale=function(){var e;return o(null!=(e=this.pingedAt)?e:this.startedAt)>this.constructor.staleThreshold},n.prototype.disconnectedRecently=function(){return this.disconnectedAt&&o(this.disconnectedAt)<this.constructor.staleThreshold},n.prototype.visibilityDidChange=function(){if("visible"===document.visibilityState)return setTimeout(function(e){return function(){if(e.connectionIsStale()||!e.connection.isOpen())return t.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState),e.connection.reopen()}}(this),200)},i=function(){return(new Date).getTime()},o=function(e){return(i()-e)/1e3},r=function(e,t,n){return Math.max(t,Math.min(n,e))},n}()}).call(this),function(){var e,n,r,i,o,a=[].slice,s=function(e,t){return function(){return e.apply(t,arguments)}},l=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};i=t.INTERNAL,n=i.message_types,r=i.protocols,o=2<=r.length?a.call(r,0,e=r.length-1):(e=0,[]),r[e++],t.Connection=function(){function e(e){this.consumer=e,this.open=s(this.open,this),this.subscriptions=this.consumer.subscriptions,this.monitor=new t.ConnectionMonitor(this),this.disconnected=!0}return e.reopenDelay=500,e.prototype.send=function(e){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(e)),!0)},e.prototype.open=function(){return this.isActive()?(t.log("Attempted to open WebSocket, but existing socket is "+this.getState()),!1):(t.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+r),null!=this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new t.WebSocket(this.consumer.url,r),this.installEventHandlers(),this.monitor.start(),!0)},e.prototype.close=function(e){var t;if((null!=e?e:{allowReconnect:!0}).allowReconnect||this.monitor.stop(),this.isActive())return null!=(t=this.webSocket)?t.close():void 0},e.prototype.reopen=function(){var e;if(t.log("Reopening WebSocket, current state is "+this.getState()),!this.isActive())return this.open();try{return this.close()}catch(n){return e=n,t.log("Failed to reopen WebSocket",e)}finally{t.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms"),setTimeout(this.open,this.constructor.reopenDelay)}},e.prototype.getProtocol=function(){var e;return null!=(e=this.webSocket)?e.protocol:void 0},e.prototype.isOpen=function(){return this.isState("open")},e.prototype.isActive=function(){return this.isState("open","connecting")},e.prototype.isProtocolSupported=function(){var e;return e=this.getProtocol(),l.call(o,e)>=0},e.prototype.isState=function(){var e,t;return t=1<=arguments.length?a.call(arguments,0):[],e=this.getState(),l.call(t,e)>=0},e.prototype.getState=function(){var e,t;for(t in WebSocket)if(WebSocket[t]===(null!=(e=this.webSocket)?e.readyState:void 0))return t.toLowerCase();return null},e.prototype.installEventHandlers=function(){var e,t;for(e in this.events)t=this.events[e].bind(this),this.webSocket["on"+e]=t},e.prototype.uninstallEventHandlers=function(){var e;for(e in this.events)this.webSocket["on"+e]=function(){}},e.prototype.events={message:function(e){var t,r,i;if(this.isProtocolSupported())switch(i=JSON.parse(e.data),t=i.identifier,r=i.message,i.type){case n.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case n.ping:return this.monitor.recordPing();case n.confirmation:return this.subscriptions.notify(t,"connected");case n.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",r)}},open:function(){if(t.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol"),this.disconnected=!1,!this.isProtocolSupported())return t.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close:function(){if(t.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function(){return t.log("WebSocket onerror event")}},e}()}.call(this),function(){var e=[].slice;t.Subscriptions=function(){function n(e){this.consumer=e,this.subscriptions=[]}return n.prototype.create=function(e,n){var r,i,o;return r=e,i="object"==typeof r?r:{channel:r},o=new t.Subscription(this.consumer,i,n),this.add(o)},n.prototype.add=function(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.sendCommand(e,"subscribe"),e},n.prototype.remove=function(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e},n.prototype.reject=function(e){var t,n,r,i,o;for(i=[],t=0,n=(r=this.findAll(e)).length;t<n;t++)o=r[t],this.forget(o),this.notify(o,"rejected"),i.push(o);return i},n.prototype.forget=function(e){var t;return this.subscriptions=function(){var n,r,i,o;for(o=[],n=0,r=(i=this.subscriptions).length;n<r;n++)(t=i[n])!==e&&o.push(t);return o}.call(this),e},n.prototype.findAll=function(e){var t,n,r,i,o;for(i=[],t=0,n=(r=this.subscriptions).length;t<n;t++)(o=r[t]).identifier===e&&i.push(o);return i},n.prototype.reload=function(){var e,t,n,r,i;for(r=[],e=0,t=(n=this.subscriptions).length;e<t;e++)i=n[e],r.push(this.sendCommand(i,"subscribe"));return r},n.prototype.notifyAll=function(){var t,n,r,i,o,a,s;for(n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],a=[],r=0,i=(o=this.subscriptions).length;r<i;r++)s=o[r],a.push(this.notify.apply(this,[s,n].concat(e.call(t))));return a},n.prototype.notify=function(){var t,n,r,i,o,a,s;for(a=arguments[0],n=arguments[1],t=3<=arguments.length?e.call(arguments,2):[],o=[],r=0,i=(s="string"==typeof a?this.findAll(a):[a]).length;r<i;r++)a=s[r],o.push("function"==typeof a[n]?a[n].apply(a,t):void 0);return o},n.prototype.sendCommand=function(e,t){var n;return n=e.identifier,this.consumer.send({command:t,identifier:n})},n}()}.call(this),function(){t.Subscription=function(){function e(e,n,r){this.consumer=e,null==n&&(n={}),this.identifier=JSON.stringify(n),t(this,r)}var t;return e.prototype.perform=function(e,t){return null==t&&(t={}),t.action=e,this.send(t)},e.prototype.send=function(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})},e.prototype.unsubscribe=function(){return this.consumer.subscriptions.remove(this)},t=function(e,t){var n,r;if(null!=t)for(n in t)r=t[n],e[n]=r;return e},e}()}.call(this),function(){t.Consumer=function(){function e(e){this.url=e,this.subscriptions=new t.Subscriptions(this),this.connection=new t.Connection(this)}return e.prototype.send=function(e){return this.connection.send(e)},e.prototype.connect=function(){return this.connection.open()},e.prototype.disconnect=function(){return this.connection.close({allowReconnect:!1})},e.prototype.ensureActiveConnection=function(){if(!this.connection.isActive())return this.connection.open()},e}()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd&&define(t)}.call(this),function(){this.App||(this.App={}),App.cable=ActionCable.createConsumer()}.call(this),App.notifications=App.cable.subscriptions.create("NotificationsChannel",{connected:function(){},disconnected:function(){},received:function(e){var t=$("#badge_count").html();$("#badge_count").html(parseInt(t)+1),$("#notifications").html(e.html),$(".notifications").html('<div class="alert alert-info alert-dismissible" role="alert"><button class="close" data-dismiss="alert"><span aria-hidden="true">\xd7</span><span class="sr-only">Close</span></button>'+e.html+"</div>")}}),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),document.addEventListener("turbolinks:before-cache",function(){$("#calendar").length>=1&&$("#calendar").fullCalendar("destroy")}),document.addEventListener("turbolinks:load",function(){if($("#calendar").length>0){var e=$("#calendar").data("cohort-id");$("#calendar").fullCalendar({editable:!0,events:"/cohorts/"+e+"/events/json",eventClick:function(t){$.ajax({url:"/cohorts/"+e+"/events/"+t.id+"/edit",type:"GET",dataType:"script"}).done(function(){console.log("OK!!")}).fail(function(){console.log("error")}).always(function(){console.log("complete")})},eventDrop:function(t){$.ajax({url:"/cohorts/"+e+"/events/"+t.id,type:"PATCH",dataType:"script",data:{event:{start:t.start.format()}}}).done(function(){console.log("success")}).fail(function(){console.log("error")}).always(function(){console.log("complete")})},dayClick:function(t){$.ajax({url:"/cohorts/"+e+"/events/new",type:"GET",dataType:"script",data:{event:{start:t.format(),end:t.format()}}}).done(function(){console.log("success")}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}})}}),function(){}.call(this),function(){}.call(this),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,i){return jQuery.easing[jQuery.easing.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return 0==t?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(1-Math.pow(2,-10*t/i))+n},easeInOutExpo:function(e,t,n,r,i){return 0==t?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(2-Math.pow(2,-10*--t))+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var o=1.70158,a=0,s=r;if(0==t)return n;if(1==(t/=i))return n+r;if(a||(a=.3*i),s<Math.abs(r)){s=r;o=a/4}else o=a/(2*Math.PI)*Math.asin(r/s);return-s*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a)+n},easeOutElastic:function(e,t,n,r,i){var o=1.70158,a=0,s=r;if(0==t)return n;if(1==(t/=i))return n+r;if(a||(a=.3*i),s<Math.abs(r)){s=r;o=a/4}else o=a/(2*Math.PI)*Math.asin(r/s);return s*Math.pow(2,-10*t)*Math.sin((t*i-o)*(2*Math.PI)/a)+r+n},easeInOutElastic:function(e,t,n,r,i){var o=1.70158,a=0,s=r;if(0==t)return n;if(2==(t/=i/2))return n+r;if(a||(a=i*(.3*1.5)),s<Math.abs(r)){s=r;o=a/4}else o=a/(2*Math.PI)*Math.asin(r/s);return t<1?s*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a)*-.5+n:s*Math.pow(2,-10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a)*.5+r+n},easeInBack:function(e,t,n,r,i,o){return o==undefined&&(o=1.70158),r*(t/=i)*t*((o+1)*t-o)+n},easeOutBack:function(e,t,n,r,i,o){return o==undefined&&(o=1.70158),r*((t=t/i-1)*t*((o+1)*t+o)+1)+n},easeInOutBack:function(e,t,n,r,i,o){return o==undefined&&(o=1.70158),(t/=i/2)<1?r/2*(t*t*((1+(o*=1.525))*t-o))+n:r/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+n},easeInBounce:function(e,t,n,r,i){return r-jQuery.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*(7.5625*t*t)+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,i){return t<i/2?.5*jQuery.easing.easeInBounce(e,2*t,0,r,i)+n:.5*jQuery.easing.easeOutBounce(e,2*t-i,0,r,i)+.5*r+n}}),function(){}.call(this),$(document).on("ready page:load page:update",function(){setTimeout(function(){$(".alert").fadeOut(function(){$(this).remove()})},3e3)}),function(){}.call(this),function(){}.call(this),function(){}.call(this),$(document).ready(function(){$("#quiz_cohort").on("change",function(){var e;e=this.value.toString(),$.getScript("/cohorts/"+e+"/sections")})}),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this);